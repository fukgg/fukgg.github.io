!function(t) {
    function e(i) {
        if (n[i])
            return n[i].exports;
        var r = n[i] = {
            i: i,
            l: !1,
            exports: {}
        };
        return t[i].call(r.exports, r, r.exports, e),
        r.l = !0,
        r.exports
    }
    var n = {};
    e.m = t,
    e.c = n,
    e.d = function(t, n, i) {
        e.o(t, n) || Object.defineProperty(t, n, {
            configurable: !1,
            enumerable: !0,
            get: i
        })
    }
    ,
    e.n = function(t) {
        var n = t && t.__esModule ? function() {
            return t.default
        }
        : function() {
            return t
        }
        ;
        return e.d(n, "a", n),
        n
    }
    ,
    e.o = function(t, e) {
        return Object.prototype.hasOwnProperty.call(t, e)
    }
    ,
    e.p = "",
    e(e.s = 223)
}([function(t, e) {
    t.exports = $
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(14)
      , r = function() {
        function t(t, e, n, i, r, o) {
            void 0 === t && (t = 1),
            void 0 === e && (e = 0),
            void 0 === n && (n = 0),
            void 0 === i && (i = 1),
            void 0 === r && (r = 0),
            void 0 === o && (o = 0),
            this.a = t,
            this.b = e,
            this.c = n,
            this.d = i,
            this.tx = r,
            this.ty = o,
            this.u = 0,
            this.v = 0,
            this.w = 1
        }
        return Object.defineProperty(t.prototype, "forSvg", {
            get: function() {
                return "matrix(" + this.a + ", " + this.b + ", " + this.c + ", " + this.d + ", " + this.tx + ", " + this.ty + ")"
            },
            enumerable: !0,
            configurable: !0
        }),
        t.prototype.identity = function() {
            this.a = 1,
            this.b = 0,
            this.c = 0,
            this.d = 1,
            this.tx = 0,
            this.ty = 0,
            this.u = 0,
            this.v = 0,
            this.w = 1
        }
        ,
        t.prototype.concat = function(t) {
            var e = this.a * t.a
              , n = 0
              , i = 0
              , r = this.d * t.d
              , o = this.tx * t.a + t.tx
              , s = this.ty * t.d + t.ty;
            0 === this.b && 0 === this.c && 0 === t.b && 0 === t.c || (e += this.b * t.c,
            r += this.c * t.b,
            n += this.a * t.b + this.b * t.d,
            i += this.c * t.a + this.d * t.c,
            o += this.ty * t.c,
            s += this.tx * t.b),
            this.a = e,
            this.b = n,
            this.c = i,
            this.d = r,
            this.tx = o,
            this.ty = s
        }
        ,
        t.prototype.scale = function(e, n) {
            this.concat(new t(e,0,0,n,0,0))
        }
        ,
        t.prototype.translate = function(e, n) {
            this.concat(new t(1,0,0,1,e,n))
        }
        ,
        t.prototype.rotate = function(t) {
            var e = Math.cos(t)
              , n = Math.sin(t)
              , i = this.a;
            this.a = e * this.a - n * this.b,
            this.b = n * i + e * this.b,
            i = this.c,
            this.c = e * this.c - n * this.d,
            this.d = n * i + e * this.d,
            i = this.tx,
            this.tx = e * this.tx - n * this.ty,
            this.ty = n * i + e * this.ty
        }
        ,
        t.prototype.skew = function(e, n) {
            this.concat(new t(1,Math.tan(n),Math.tan(e),1,0,0))
        }
        ,
        t.prototype.clone = function() {
            return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)
        }
        ,
        t.prototype.setToContext2d = function(t) {
            t.setTransform(this.a, this.b, this.c, this.d, this.tx, this.ty)
        }
        ,
        t.prototype.transformPoint = function(t) {
            var e = this.a * t.x + this.c * t.y + this.tx
              , n = this.b * t.x + this.d * t.y + this.ty;
            return new i.Point(e,n)
        }
        ,
        t.prototype.deltaTransformPoint = function(t) {
            var e = this.transformPoint(t);
            return new i.Point(e.x - t.x,e.y - t.y)
        }
        ,
        t.prototype.equals = function(t) {
            return this.a === t.a && this.b === t.b && this.c === t.c && this.d === t.d && this.tx === t.tx && this.ty === t.ty
        }
        ,
        t.prototype.copyFrom = function(t) {
            this.a = t.a,
            this.b = t.b,
            this.c = t.c,
            this.d = t.d,
            this.tx = t.tx,
            this.ty = t.ty
        }
        ,
        t.prototype.getRotationX = function() {
            return Math.atan2(this.b, this.a)
        }
        ,
        t.prototype.getRotationY = function() {
            return Math.atan2(this.c, this.d)
        }
        ,
        t.prototype.containsPoint = function(e, n, i, r) {
            var o = t.temp;
            o.copyFrom(this),
            o.invert();
            var s = o.tx + o.a * e + o.c * n
              , a = o.ty + o.d * n + o.b * e;
            return s >= 0 && s <= i && a >= 0 && a <= r
        }
        ,
        t.prototype.invert = function() {
            if (0 === this.b && 0 === this.c && 0 !== this.a && 0 !== this.d)
                this.a = 1 / this.a,
                this.d = 1 / this.d,
                this.b = 0,
                this.c = 0,
                this.tx = -this.a * this.tx,
                this.ty = -this.d * this.ty;
            else {
                var t = this.a * this.d - this.b * this.c;
                if (0 === t)
                    return void this.identity();
                t = 1 / t;
                var e = this.a;
                this.a = this.d * t,
                this.b = -this.b * t,
                this.c = -this.c * t,
                this.d = e * t,
                e = this.ty,
                this.ty = -(this.b * this.tx + this.d * this.ty),
                this.tx = -(this.a * this.tx + this.c * e)
            }
        }
        ,
        t.resetContext2d = function(e) {
            var n = t.temp;
            n.identity(),
            n.setToContext2d(e)
        }
        ,
        t.prototype.toStringCSS = function() {
            return "matrix(" + this.a + ", " + this.b + ", " + this.c + ", " + this.d + ", " + this.tx + ", " + this.ty + ")"
        }
        ,
        t.prototype.fromStringCSS = function(t) {
            t = t.replace("matrix(", "").replace(")", "");
            var e = t.split(",");
            this.a = parseFloat(e[0]),
            this.b = parseFloat(e[1]),
            this.c = parseFloat(e[2]),
            this.d = parseFloat(e[3]),
            this.tx = parseFloat(e[4]),
            this.ty = parseFloat(e[5])
        }
        ,
        t.prototype.serialize = function() {
            return t.round(this),
            t.temp.identity(),
            this.equals(t.temp) ? "d" : this.a + " " + this.b + " " + this.c + " " + this.d + " " + this.tx + " " + this.ty
        }
        ,
        t.deserialize = function(e) {
            var n = new t;
            if ("d" === e)
                return n;
            var i = e.split(" ");
            return n.a = parseFloat(i[0]),
            n.b = parseFloat(i[1]),
            n.c = parseFloat(i[2]),
            n.d = parseFloat(i[3]),
            n.tx = parseFloat(i[4]),
            n.ty = parseFloat(i[5]),
            n
        }
        ,
        t.prototype.subtract = function(t) {
            var e = t.clone();
            return e.invert(),
            e.concat(this),
            e
        }
        ,
        t.round = function(t) {
            t.a = parseFloat(t.a.toFixed(3)),
            t.b = parseFloat(t.b.toFixed(3)),
            t.c = parseFloat(t.c.toFixed(3)),
            t.d = parseFloat(t.d.toFixed(3)),
            t.tx = parseFloat(t.tx.toFixed(3)),
            t.ty = parseFloat(t.ty.toFixed(3))
        }
        ,
        t.temp = new t,
        t
    }();
    e.Matrix = r
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = n(48)
          , r = n(5)
          , o = n(6)
          , s = function() {
            function e(t, e) {
                void 0 === t && (t = null),
                void 0 === e && (e = null),
                this.categories = null,
                this.colors = null,
                this.isActive = !0,
                this.options = 0,
                this.version = 2,
                this.map = null,
                this.id = t,
                this.title = e
            }
            return Object.defineProperty(e, "SERVICE_URL", {
                get: function() {
                    return r.Site.MAIN_URL + "/v3/js/color-range/"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "BRAND_COLOR", {
                get: function() {
                    return 0
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "TEXTURE_COLOR", {
                get: function() {
                    return 1
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "TEXTURE_LOGO_COLOR", {
                get: function() {
                    return 2
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "BG_WHITE", {
                get: function() {
                    return 1
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "BG_A", {
                get: function() {
                    return 2
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "BG_B", {
                get: function() {
                    return 3
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "BG_C", {
                get: function() {
                    return 4
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "BG_BLACK", {
                get: function() {
                    return 5
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "BG_GRAY", {
                get: function() {
                    return 6
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "BG_TRANSPARENT", {
                get: function() {
                    return 7
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "EL_LOGO1", {
                get: function() {
                    return 1
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "EL_LOGO2", {
                get: function() {
                    return 2
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "EL_HEADER", {
                get: function() {
                    return 3
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "EL_TEXT", {
                get: function() {
                    return 4
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "EL_DESIGN1", {
                get: function() {
                    return 5
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "EL_DESIGN2", {
                get: function() {
                    return 6
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "EL_LOGO_DB", {
                get: function() {
                    return 7
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "INDEX_LOGO1", {
                get: function() {
                    return 0
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "INDEX_LOGO2", {
                get: function() {
                    return 1
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "INDEX_DESIGN1", {
                get: function() {
                    return 2
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "INDEX_DESIGN2", {
                get: function() {
                    return 3
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "INDEX_HEADER", {
                get: function() {
                    return 4
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "INDEX_TEXT", {
                get: function() {
                    return 5
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "INDEX_BG", {
                get: function() {
                    return 6
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "INDEX_WHITE", {
                get: function() {
                    return 7
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "INDEX_BLACK", {
                get: function() {
                    return 8
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "INDEX_GREY", {
                get: function() {
                    return 9
                },
                enumerable: !0,
                configurable: !0
            }),
            e.createBlank = function() {
                var t = new e;
                return t.title = "",
                t.colors = [16777215, 16777215, 16777215, 16777215, 16777215, 16777215, 16777215, 16777215, 0, 15987699],
                t.categories = [],
                t.map = {},
                t.map[e.BG_WHITE] = [null, null, null, null, null, null],
                t.map[e.BG_A] = [null, null, null, null, null, null],
                t.map[e.BG_B] = [null, null, null, null, null, null],
                t.map[e.BG_C] = [null, null, null, null, null, null],
                t.map[e.BG_BLACK] = [null, null, null, null, null, null],
                t.map[e.BG_GRAY] = [null, null, null, null, null, null],
                t
            }
            ,
            Object.defineProperty(e, "colorRanges", {
                get: function() {
                    return null == e._colorRanges ? null : e._colorRanges.active
                },
                enumerable: !0,
                configurable: !0
            }),
            e.fromId = function(t) {
                for (var n = 0, i = e.colorRanges; n < i.length; n++) {
                    var r = i[n];
                    if (r.id == t)
                        return r
                }
                return null
            }
            ,
            Object.defineProperty(e.prototype, "categoriesData", {
                get: function() {
                    return null === this.categories ? "" : this.categories.join(";")
                },
                set: function(t) {
                    for (var e = t.split(";"), n = [], i = 0; i < e.length; i++)
                        "" != e[i] && n.push(parseInt(e[i]));
                    this.categories = n
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "colorsData", {
                get: function() {
                    for (var t = "", e = 0; e < this.colors.length; e++)
                        t += this.colors[e].toString(16) + ";";
                    return t
                },
                set: function(t) {
                    for (var n = t.split(";"), i = [], r = 0; r < n.length; r++)
                        "" != n[r] && i.push(parseInt("0x" + n[r]));
                    void 0 === i[e.INDEX_WHITE] && (i[e.INDEX_WHITE] = 16777215),
                    void 0 === i[e.INDEX_BLACK] && (i[e.INDEX_BLACK] = 0),
                    void 0 === i[e.INDEX_GREY] && (i[e.INDEX_GREY] = 15987699),
                    this.colors = i
                },
                enumerable: !0,
                configurable: !0
            }),
            e.init = function() {
                if (null === e.colorRanges) {
                    for (var t = getColorRanges(), n = t, i = {
                        active: [],
                        notActive: [],
                        all: []
                    }, r = null, o = 0; o < n.length; o++)
                        null != (r = e.parseColorRange(n[o])) && (r.isActive ? i.active.push(r) : i.notActive.push(r),
                        i.all.push(r));
                    i.all.length > 0 && (e._colorRanges = i)
                }
            }
            ,
            e.parseColorRange = function(t) {
                if (null === t)
                    return null;
                var n = new e(t.id,t.title);
                return n.colorsData = t.colorsData,
                n.categoriesData = t.categoriesData,
                n.isActive = Boolean(t.isActive),
                n.options = t.options,
                n.map = t.map,
                n
            }
            ,
            e.getColorRange = function(t) {
                return null === t || 0 == t.length ? e.getRandom() : t[Math.round(Math.random() * (t.length - 1))]
            }
            ,
            e.getRandom = function(t, n) {
                if (void 0 === t && (t = null),
                void 0 === n && (n = !0),
                null == e._colorRanges)
                    return null;
                null == t && (t = n ? e._colorRanges.active : e._colorRanges.notActive);
                var i;
                do {
                    i = t[Math.round(Math.random() * (t.length - 1))]
                } while (i.id === this.previousId);return e.previousId = i.id,
                i
            }
            ,
            e.prototype.getBgColor = function(t) {
                t === e.BG_TRANSPARENT && (t = e.BG_WHITE);
                var n = this.colors[this.map[t][0]];
                return void 0 !== n ? e.toColorString(n) : null
            }
            ,
            e.prototype.getColor = function(t, n) {
                if (n == e.EL_LOGO_DB)
                    return null;
                t === e.BG_TRANSPARENT && (t = e.BG_WHITE);
                var i = this.colors[this.map[t][n]];
                return void 0 !== i ? e.toColorString(i) : null
            }
            ,
            e.prototype.getColorByIndex = function(t) {
                return e.toColorString(this.colors[t])
            }
            ,
            e.prototype.serialize = function() {
                for (var t = [], n = 0, i = this.colors; n < i.length; n++) {
                    var r = i[n];
                    t.push(e.toColorString(r).toLowerCase())
                }
                var o = JSON.stringify(this.map);
                o = o.replace("{", "").replace("}", "").replace(/"/g, "");
                var s = {
                    id: this.id,
                    title: this.title,
                    colors: t.join(";"),
                    categories: this.categories.join(";"),
                    options: this.options,
                    version: this.version,
                    map: o
                };
                return JSON.stringify(s)
            }
            ,
            e.prototype.save = function(n, i) {
                void 0 === n && (n = null),
                void 0 === i && (i = null);
                var r = this.serialize()
                  , o = this;
                t.ajax({
                    type: "POST",
                    url: e.SERVICE_URL,
                    dataType: "json",
                    data: r,
                    success: function(t) {
                        t.success ? (o.id = t.id,
                        n && n()) : i(t.message)
                    }
                })
            }
            ,
            e.prototype.update = function(n) {
                void 0 === n && (n = null);
                var i = this.serialize();
                t.ajax({
                    type: "PUT",
                    url: e.SERVICE_URL + (this.id + "/"),
                    dataType: "json",
                    data: i,
                    success: function(t) {
                        n && n(t)
                    }
                })
            }
            ,
            e.toColorString = function(t) {
                var e = "000000" + t.toString(16).toUpperCase();
                return e.substr(e.length - 6)
            }
            ,
            e.prototype.getFill = function(t, e) {
                if (void 0 === t && (t = null),
                void 0 === e && (e = null),
                null == t && null == e)
                    return null;
                if (null != e)
                    switch (typeof e) {
                    case "string":
                        return new o.Fill(e);
                    case "number":
                        var n = this.getColor(t, e);
                        return null === n ? null : new o.Fill(n)
                    }
                else if (null != t)
                    switch (typeof t) {
                    case "string":
                        return new o.Fill(t);
                    case "number":
                        return new o.Fill(this.getBgColor(t))
                    }
                return null
            }
            ,
            e.getColorKey = function(t, n) {
                var i = "";
                return n == e.BG_TRANSPARENT ? i = "bg_alpha" : n == e.BG_WHITE ? i = "bg_white" : n == e.BG_B ? i = "bg_b" : n == e.BG_BLACK && (i = "bg_black"),
                "000000" == t && (i += "_000000"),
                i
            }
            ,
            e.blendColorsAlpha = function(t, e, n) {
                void 0 === n && (n = 1);
                var r = i.Color.parseHexStr(t)
                  , o = i.Color.parseHexStr(e)
                  , s = r.r * (1 - n) + o.r * n
                  , a = r.g * (1 - n) + o.g * n
                  , l = r.b * (1 - n) + o.b * n;
                return i.Color.rgb2Hex({
                    r: Math.round(s),
                    g: Math.round(a),
                    b: Math.round(l)
                })
            }
            ,
            e.luminance = function(t, e, n) {
                var i = [t, e, n].map(function(t) {
                    return t /= 255,
                    t <= .03928 ? t / 12.92 : Math.pow((t + .055) / 1.055, 2.4)
                });
                return .2126 * i[0] + .7152 * i[1] + .0722 * i[2]
            }
            ,
            e.contrast = function(t, n) {
                var r = i.Color.parseHexStr(t)
                  , o = i.Color.parseHexStr(n)
                  , s = (e.luminance(o.r, o.g, o.b) + .05) / (e.luminance(r.r, r.g, r.b) + .05);
                return s < 1 && (s = 1 / s),
                s
            }
            ,
            e.NO_OPTIONS = 0,
            e.LIGHT = 1,
            e._colorRanges = null,
            e
        }();
        e.ColorRange = s
    }
    ).call(e, n(0))
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = n(2)
          , r = n(5)
          , o = n(7)
          , s = n(45)
          , a = n(77)
          , l = n(79)
          , c = n(56)
          , h = n(14)
          , u = n(8)
          , d = n(1)
          , p = n(23)
          , f = n(46)
          , g = function() {
            function e() {
                this._source = null,
                this.id = 0,
                this.maker = null,
                this.primaryId = null,
                this.makerType = null,
                this.makerSlogans = null,
                this.text = "",
                this.status = e.STATUS_DEFAULT,
                this.items = [],
                this.deletedItems = null,
                this.activityTypeId = 0,
                this.number = null,
                this._colorRange = null,
                this._minAllowedItems = null,
                this._groupedItemsByType = null
            }
            return Object.defineProperty(e, "SERVICE_URL", {
                get: function() {
                    return r.Site.MAIN_URL + "/v3/js/logo/"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "BRANDS_URL", {
                get: function() {
                    return r.Site.MAIN_URL + "/v3/brands/"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "CREATE_URL", {
                get: function() {
                    return r.Site.MAIN_URL + "/logo/"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "EDIT_URL", {
                get: function() {
                    return r.Site.MAIN_URL + "/v3/logo/edit/{id}/"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "BRAND_LOGOS_URL", {
                get: function() {
                    return r.Site.MAIN_URL + "/v3/brands/{id}/logos/"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "LOGO_TEXT_SIZE", {
                get: function() {
                    return 24
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "LOGO_SUGGESTION_WIDTH", {
                get: function() {
                    return 172
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "LOGO_SUGGESTION_HEIGHT", {
                get: function() {
                    return 143
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "VERTICAL", {
                get: function() {
                    return 1
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "HORIZONTAL", {
                get: function() {
                    return 2
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "TEXT", {
                get: function() {
                    return 3
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "ICON", {
                get: function() {
                    return 4
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "START_INDEX", {
                get: function() {
                    return 10
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "I_0", {
                get: function() {
                    return 10
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "I_1", {
                get: function() {
                    return 11
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "I_2", {
                get: function() {
                    return 12
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "I_3", {
                get: function() {
                    return 13
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "I_4", {
                get: function() {
                    return 14
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "I_5", {
                get: function() {
                    return 15
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "I_6", {
                get: function() {
                    return 16
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "STATUS_DEFAULT", {
                get: function() {
                    return 0
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "STATUS_XS", {
                get: function() {
                    return 1
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "STATUS_S", {
                get: function() {
                    return 2
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "STATUS_M", {
                get: function() {
                    return 3
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "STATUS_L", {
                get: function() {
                    return 4
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "STATUS_FAVORITE", {
                get: function() {
                    return 5
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "IMAGE_FORMAT_PNG", {
                get: function() {
                    return "png"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "IMAGE_FORMAT_JPG", {
                get: function() {
                    return "jpeg"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "IMAGE_FORMAT_PDF", {
                get: function() {
                    return "pdf"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "IMAGE_FORMAT_SVG", {
                get: function() {
                    return "svg"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "FREE_LOGO_WIDTH", {
                get: function() {
                    return 275
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "FREE_LOGO_HEIGHT", {
                get: function() {
                    return 91
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "colorRange", {
                get: function() {
                    return this._colorRange
                },
                set: function(t) {
                    this._colorRange = t
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "textItems", {
                get: function() {
                    for (var t = [], e = 0, n = this.items; e < n.length; e++) {
                        var i = n[e];
                        i.isText && t.push(i)
                    }
                    return t
                },
                enumerable: !0,
                configurable: !0
            }),
            e.fetch = function(n, i) {
                void 0 === i && (i = null),
                t.ajax({
                    type: "GET",
                    url: e.SERVICE_URL + n.toString() + "/",
                    dataType: "json",
                    success: function(t) {
                        var n = e.deserialize(t);
                        i && i(n)
                    }
                })
            }
            ,
            e.prototype.getPrimaryId = function() {
                return null === this.primaryId ? this.id : this.primaryId
            }
            ,
            e.prototype.serialize = function(t) {
                void 0 === t && (t = !1);
                for (var e = {
                    id: this.id,
                    primaryId: this.getPrimaryId(),
                    makerId: this.makerId,
                    status: this.status,
                    text: this.text,
                    colorRange: this.colorRange,
                    activityTypeId: 0 === this.activityTypeId ? null : this.activityTypeId,
                    items: []
                }, n = 0, i = this.items; n < i.length; n++) {
                    var r = i[n];
                    if (!t || r.hasChanges()) {
                        var o = r.serialize();
                        e.items.push(o)
                    }
                }
                return null !== this.deletedItems && (e.deletedItems = this.deletedItems),
                JSON.stringify(e)
            }
            ,
            e.deserialize = function(t) {
                var n = new e;
                t = JSON.parse(t),
                n.id = Number(t.id),
                n.makerId = Number(t.makerId),
                n.primaryId = t.primaryId,
                n.status = Number(t.status),
                n.colorRange = i.ColorRange.fromId(t.cr),
                n.makerType = Number(t.mt),
                n.makerSlogans = Number(t.ms),
                n.maker = p.LogoMap.deserialize(t.maker),
                n.activityTypeId = null === t.activityTypeId ? 0 : Number(t.activityTypeId),
                n.number = t.number,
                n.text = t.text;
                for (var r = t.i, h = 0, u = r; h < u.length; h++) {
                    var d = u[h]
                      , g = null;
                    switch (d.t) {
                    case o.LogoItem.SVG_ICON:
                        g = s.SvgIcon.deserialize(d);
                        break;
                    case o.LogoItem.TEXT_ICON:
                        g = l.TextIcon.deserialize(d);
                        break;
                    case o.LogoItem.BASE_TEXT:
                    case o.LogoItem.LOGO_NAME:
                    case o.LogoItem.TAGLINE:
                    case o.LogoItem.MONOGRAM:
                    case o.LogoItem.CUSTOM_TEXT:
                        g = f.BaseText.deserialize(d);
                        break;
                    case o.LogoItem.RICH_TEXT:
                        g = a.RichText.deserialize(d);
                        break;
                    case o.LogoItem.LINE:
                        g = c.Line.deserialize(d)
                    }
                    g && n.items.push(g)
                }
                return n._source = n.clone_without_items(),
                n
            }
            ,
            e.prototype.center = function(t, n, i) {
                void 0 === t && (t = 10),
                void 0 === n && (n = e.LOGO_SUGGESTION_WIDTH),
                void 0 === i && (i = e.LOGO_SUGGESTION_HEIGHT);
                for (var r = this.getCenteringMatrix(t, n, i), o = 0, s = this.items; o < s.length; o++) {
                    var a = s[o];
                    a.isText && "" === a.text || a.maths.matrix.concat(r)
                }
            }
            ,
            e.prototype.getCenteringMatrix = function(t, n, i) {
                void 0 === t && (t = 10),
                void 0 === n && (n = e.LOGO_SUGGESTION_WIDTH),
                void 0 === i && (i = e.LOGO_SUGGESTION_HEIGHT);
                for (var r = [], o = 0, s = this.items; o < s.length; o++) {
                    var a = s[o];
                    if (!a.isText || "" !== a.text) {
                        r.push(a.maths.matrix.transformPoint(a.bounds.topLeft)),
                        r.push(a.maths.matrix.transformPoint(a.bounds.bottomRight));
                        var l = new h.Point(a.bounds.bottomRight.x,a.bounds.bottomRight.y - a.bounds.height)
                          , c = new h.Point(a.bounds.topLeft.x,a.bounds.topLeft.y + a.bounds.height);
                        r.push(a.maths.matrix.transformPoint(l)),
                        r.push(a.maths.matrix.transformPoint(c))
                    }
                }
                for (var p = Number.POSITIVE_INFINITY, f = Number.POSITIVE_INFINITY, g = Number.NEGATIVE_INFINITY, m = Number.NEGATIVE_INFINITY, _ = 0, v = r; _ < v.length; _++) {
                    var y = v[_];
                    p = Math.min(p, y.x),
                    f = Math.min(f, y.y),
                    g = Math.max(g, y.x),
                    m = Math.max(m, y.y)
                }
                var b = new u.Rectangle(p,f,g - p,m - f)
                  , w = b.width * i / b.height;
                w > n && (w = n,
                b.height,
                b.width);
                var x = w / b.width
                  , C = new d.Matrix;
                C.scale(x, x);
                var T = -b.x * x
                  , k = -b.y * x;
                return T += (n - b.width * x) / 2,
                k += (i - b.height * x) / 2,
                C.translate(T, k),
                x = (i - 2 * t) / i,
                C.scale(x, x),
                C.translate(n / i * t, t),
                C
            }
            ,
            e.prototype.save = function(n) {
                void 0 === n && (n = null);
                var i = this.serialize()
                  , r = this;
                t.ajax({
                    type: "POST",
                    url: e.SERVICE_URL,
                    dataType: "json",
                    data: i,
                    success: function(t) {
                        r.id = t.id,
                        n && n(t)
                    }
                })
            }
            ,
            e.prototype.update = function(n) {
                void 0 === n && (n = null);
                var i = this.serialize();
                t.ajax({
                    type: "PUT",
                    url: e.SERVICE_URL + (this.id + "/"),
                    dataType: "json",
                    data: i,
                    success: function(t) {
                        n && n(t)
                    }
                })
            }
            ,
            e.prototype.delete = function(n) {
                void 0 === n && (n = null);
                var i = JSON.stringify({
                    id: this.id
                })
                  , r = this;
                t.ajax({
                    type: "DELETE",
                    url: e.SERVICE_URL + (this.id + "/"),
                    dataType: "json",
                    data: i,
                    success: function() {
                        r.id = 0,
                        n && n()
                    }
                })
            }
            ,
            e.prototype.usedFonts = function() {
                for (var t = [], e = 0, n = this.textItems; e < n.length; e++) {
                    var i = n[e];
                    -1 == t.indexOf(i.font.id) && t.push(i.font.id)
                }
                return t
            }
            ,
            e.prototype.toggleFavorite = function(t) {
                void 0 === t && (t = null),
                this.status == e.STATUS_FAVORITE ? (this.status = e.STATUS_DEFAULT,
                this.delete(function() {
                    t && t(this)
                })) : (this.status = e.STATUS_FAVORITE,
                this.save(function() {
                    t && t(this)
                }))
            }
            ,
            e.bulkPartialUpdate = function(n, i) {
                void 0 === i && (i = null);
                var r = JSON.stringify(n);
                t.ajax({
                    type: "PATCH",
                    url: e.SERVICE_URL,
                    dataType: "json",
                    data: r,
                    success: function(t) {
                        i && i(t.status, t.isTemp)
                    }
                })
            }
            ,
            e.prototype.clone = function() {
                for (var t = this.clone_without_items(), e = 0, n = this.items; e < n.length; e++) {
                    var i = n[e];
                    t.items.push(i.clone())
                }
                return t
            }
            ,
            e.prototype.clone_without_items = function() {
                var t = new e;
                return t.id = this.id,
                t.text = this.text,
                t.status = this.status,
                t.makerId = this.makerId,
                t.colorRange = this.colorRange ? this.colorRange : null,
                t.items = [],
                t.activityTypeId = this.activityTypeId,
                t.makerType = this.makerType,
                t.makerSlogans = this.makerSlogans,
                t.primaryId = this.primaryId,
                t.maker = this.maker,
                t
            }
            ,
            e.prototype.getItem = function(t) {
                for (var e = 0, n = this.items; e < n.length; e++) {
                    var i = n[e];
                    if (i.uid === t)
                        return i
                }
                return null
            }
            ,
            e.prototype.replaceItem = function(t) {
                for (var e = 0; e < this.items.length; e++)
                    this.items[e].uid === t.uid && (this.items[e] = t)
            }
            ,
            e.prototype.isValid = function() {
                var t = !0;
                return 0 === this.items.length ? t = !1 : 1 === this.items.length && this.items[0].isText && 0 === this.items[0].text.length && (t = !1),
                t
            }
            ,
            Object.defineProperty(e.prototype, "icon", {
                get: function() {
                    if (null === this.maker.itype)
                        return null;
                    for (var t = 0, e = this.items; t < e.length; t++) {
                        var n = e[t];
                        if (n.type === o.LogoItem.SVG_ICON)
                            return n
                    }
                    return null
                },
                enumerable: !0,
                configurable: !0
            }),
            e.prototype.hasChanges = function() {
                for (var t = !1, e = 0, n = this.items; e < n.length; e++) {
                    if (n[e].hasChanges()) {
                        t = !0;
                        break
                    }
                }
                return t || null !== this.deletedItems || this.text !== this._source.text || this.status !== this._source.status || this.makerId !== this._source.makerId || this.colorRange.id !== this._source.colorRange.id || this.activityTypeId !== this._source.activityTypeId || this.maker !== this._source.maker
            }
            ,
            e.prototype.addItem = function(t) {
                return this.items.push(t),
                this.groupItemsByType(),
                t
            }
            ,
            e.prototype.deleteItem = function(t) {
                for (var e = null, n = 0; n < this.items.length; n++) {
                    if (this.items[n].uid === t) {
                        e = this.items.splice(n, 1)[0],
                        e.id > 0 && (null === this.deletedItems && (this.deletedItems = []),
                        this.deletedItems.push(e.id)),
                        this.groupItemsByType();
                        break
                    }
                }
                return e
            }
            ,
            Object.defineProperty(e.prototype, "minAllowedItems", {
                get: function() {
                    if (null !== this._minAllowedItems)
                        return this._minAllowedItems;
                    this._minAllowedItems = {};
                    var t;
                    if (null !== this.maker)
                        for (var e = 0, n = this.maker; e < n.length; e++) {
                            var i = n[e];
                            t = i.logoItemType,
                            this._minAllowedItems.hasOwnProperty(t) ? this._minAllowedItems[t] += 1 : this._minAllowedItems[t] = 1
                        }
                    return this._minAllowedItems
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "groupedItemsByType", {
                get: function() {
                    return null !== this._groupedItemsByType ? this._groupedItemsByType : (this.groupItemsByType(),
                    this._groupedItemsByType)
                },
                enumerable: !0,
                configurable: !0
            }),
            e.prototype.groupItemsByType = function() {
                this._groupedItemsByType = {};
                for (var t = 0, e = this.items; t < e.length; t++) {
                    var n = e[t];
                    this._groupedItemsByType.hasOwnProperty(n.type) ? this._groupedItemsByType[n.type].push(n) : this._groupedItemsByType[n.type] = [n]
                }
            }
            ,
            e.prototype.canDeleteItem = function(t) {
                return !this.minAllowedItems.hasOwnProperty(t.type) || this.minAllowedItems.hasOwnProperty(t.type) && this.groupedItemsByType.hasOwnProperty(t.type) && this.groupedItemsByType[t.type].length > this.minAllowedItems[t.type]
            }
            ,
            e.prototype.debug = function() {
                for (var t = "Maker id: " + this.makerId + "\nFamily id: " + this.maker.familyId + "\nFamily name: " + this.maker.familyName + "\n\n", e = 0, n = this.items; e < n.length; e++) {
                    t += n[e].debug() + "\n"
                }
                return t
            }
            ,
            e
        }();
        e.Logo = g
    }
    ).call(e, n(0))
}
, function(t, e, n) {
    (function(e, i) {
        /*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.2+97478eb6
 */
        !function(e, n) {
            t.exports = n()
        }(0, function() {
            "use strict";
            function t(t) {
                var e = typeof t;
                return null !== t && ("object" === e || "function" === e)
            }
            function r(t) {
                return "function" == typeof t
            }
            function o(t) {
                V = t
            }
            function s(t) {
                G = t
            }
            function a() {
                return void 0 !== $ ? function() {
                    $(c)
                }
                : l()
            }
            function l() {
                var t = setTimeout;
                return function() {
                    return t(c, 1)
                }
            }
            function c() {
                for (var t = 0; t < z; t += 2) {
                    (0,
                    Y[t])(Y[t + 1]),
                    Y[t] = void 0,
                    Y[t + 1] = void 0
                }
                z = 0
            }
            function h(t, e) {
                var n = this
                  , i = new this.constructor(d);
                void 0 === i[J] && j(i);
                var r = n._state;
                if (r) {
                    var o = arguments[r - 1];
                    G(function() {
                        return E(r, i, o, n._result)
                    })
                } else
                    T(n, i, t, e);
                return i
            }
            function u(t) {
                var e = this;
                if (t && "object" == typeof t && t.constructor === e)
                    return t;
                var n = new e(d);
                return b(n, t),
                n
            }
            function d() {}
            function p() {
                return new TypeError("You cannot resolve a promise with itself")
            }
            function f() {
                return new TypeError("A promises callback cannot return that same promise.")
            }
            function g(t) {
                try {
                    return t.then
                } catch (t) {
                    return nt.error = t,
                    nt
                }
            }
            function m(t, e, n, i) {
                try {
                    t.call(e, n, i)
                } catch (t) {
                    return t
                }
            }
            function _(t, e, n) {
                G(function(t) {
                    var i = !1
                      , r = m(n, e, function(n) {
                        i || (i = !0,
                        e !== n ? b(t, n) : x(t, n))
                    }, function(e) {
                        i || (i = !0,
                        C(t, e))
                    }, "Settle: " + (t._label || " unknown promise"));
                    !i && r && (i = !0,
                    C(t, r))
                }, t)
            }
            function v(t, e) {
                e._state === tt ? x(t, e._result) : e._state === et ? C(t, e._result) : T(e, void 0, function(e) {
                    return b(t, e)
                }, function(e) {
                    return C(t, e)
                })
            }
            function y(t, e, n) {
                e.constructor === t.constructor && n === h && e.constructor.resolve === u ? v(t, e) : n === nt ? (C(t, nt.error),
                nt.error = null) : void 0 === n ? x(t, e) : r(n) ? _(t, e, n) : x(t, e)
            }
            function b(e, n) {
                e === n ? C(e, p()) : t(n) ? y(e, n, g(n)) : x(e, n)
            }
            function w(t) {
                t._onerror && t._onerror(t._result),
                k(t)
            }
            function x(t, e) {
                t._state === Q && (t._result = e,
                t._state = tt,
                0 !== t._subscribers.length && G(k, t))
            }
            function C(t, e) {
                t._state === Q && (t._state = et,
                t._result = e,
                G(w, t))
            }
            function T(t, e, n, i) {
                var r = t._subscribers
                  , o = r.length;
                t._onerror = null,
                r[o] = e,
                r[o + tt] = n,
                r[o + et] = i,
                0 === o && t._state && G(k, t)
            }
            function k(t) {
                var e = t._subscribers
                  , n = t._state;
                if (0 !== e.length) {
                    for (var i = void 0, r = void 0, o = t._result, s = 0; s < e.length; s += 3)
                        i = e[s],
                        r = e[s + n],
                        i ? E(n, i, r, o) : r(o);
                    t._subscribers.length = 0
                }
            }
            function I() {
                this.error = null
            }
            function L(t, e) {
                try {
                    return t(e)
                } catch (t) {
                    return it.error = t,
                    it
                }
            }
            function E(t, e, n, i) {
                var o = r(n)
                  , s = void 0
                  , a = void 0
                  , l = void 0
                  , c = void 0;
                if (o) {
                    if (s = L(n, i),
                    s === it ? (c = !0,
                    a = s.error,
                    s.error = null) : l = !0,
                    e === s)
                        return void C(e, f())
                } else
                    s = i,
                    l = !0;
                e._state !== Q || (o && l ? b(e, s) : c ? C(e, a) : t === tt ? x(e, s) : t === et && C(e, s))
            }
            function P(t, e) {
                try {
                    e(function(e) {
                        b(t, e)
                    }, function(e) {
                        C(t, e)
                    })
                } catch (e) {
                    C(t, e)
                }
            }
            function S() {
                return rt++
            }
            function j(t) {
                t[J] = rt++,
                t._state = void 0,
                t._result = void 0,
                t._subscribers = []
            }
            function O() {
                return new Error("Array Methods must be provided an Array")
            }
            function O() {
                return new Error("Array Methods must be provided an Array")
            }
            function A(t) {
                return new ot(this,t).promise
            }
            function R(t) {
                var e = this;
                return new e(F(t) ? function(n, i) {
                    for (var r = t.length, o = 0; o < r; o++)
                        e.resolve(t[o]).then(n, i)
                }
                : function(t, e) {
                    return e(new TypeError("You must pass an array to race."))
                }
                )
            }
            function B(t) {
                var e = this
                  , n = new e(d);
                return C(n, t),
                n
            }
            function M() {
                throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")
            }
            function D() {
                throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")
            }
            function N() {
                var t = void 0;
                if (void 0 !== i)
                    t = i;
                else if ("undefined" != typeof self)
                    t = self;
                else
                    try {
                        t = Function("return this")()
                    } catch (t) {
                        throw new Error("polyfill failed because global object is unavailable in this environment")
                    }
                var e = t.Promise;
                if (e) {
                    var n = null;
                    try {
                        n = Object.prototype.toString.call(e.resolve())
                    } catch (t) {}
                    if ("[object Promise]" === n && !e.cast)
                        return
                }
                t.Promise = st
            }
            var H = void 0;
            H = Array.isArray ? Array.isArray : function(t) {
                return "[object Array]" === Object.prototype.toString.call(t)
            }
            ;
            var F = H
              , z = 0
              , $ = void 0
              , V = void 0
              , G = function(t, e) {
                Y[z] = t,
                Y[z + 1] = e,
                2 === (z += 2) && (V ? V(c) : Z())
            }
              , U = "undefined" != typeof window ? window : void 0
              , W = U || {}
              , q = W.MutationObserver || W.WebKitMutationObserver
              , K = "undefined" == typeof self && void 0 !== e && "[object process]" === {}.toString.call(e)
              , X = "undefined" != typeof Uint8ClampedArray && "undefined" != typeof importScripts && "undefined" != typeof MessageChannel
              , Y = new Array(1e3)
              , Z = void 0;
            Z = K ? function() {
                return function() {
                    return e.nextTick(c)
                }
            }() : q ? function() {
                var t = 0
                  , e = new q(c)
                  , n = document.createTextNode("");
                return e.observe(n, {
                    characterData: !0
                }),
                function() {
                    n.data = t = ++t % 2
                }
            }() : X ? function() {
                var t = new MessageChannel;
                return t.port1.onmessage = c,
                function() {
                    return t.port2.postMessage(0)
                }
            }() : void 0 === U ? function() {
                try {
                    var t = n(61);
                    return $ = t.runOnLoop || t.runOnContext,
                    a()
                } catch (t) {
                    return l()
                }
            }() : l();
            var J = Math.random().toString(36).substring(16)
              , Q = void 0
              , tt = 1
              , et = 2
              , nt = new I
              , it = new I
              , rt = 0
              , ot = function() {
                function t(t, e) {
                    this._instanceConstructor = t,
                    this.promise = new t(d),
                    this.promise[J] || j(this.promise),
                    F(e) ? (this.length = e.length,
                    this._remaining = e.length,
                    this._result = new Array(this.length),
                    0 === this.length ? x(this.promise, this._result) : (this.length = this.length || 0,
                    this._enumerate(e),
                    0 === this._remaining && x(this.promise, this._result))) : C(this.promise, O())
                }
                return t.prototype._enumerate = function(t) {
                    for (var e = 0; this._state === Q && e < t.length; e++)
                        this._eachEntry(t[e], e)
                }
                ,
                t.prototype._eachEntry = function(t, e) {
                    var n = this._instanceConstructor
                      , i = n.resolve;
                    if (i === u) {
                        var r = g(t);
                        if (r === h && t._state !== Q)
                            this._settledAt(t._state, e, t._result);
                        else if ("function" != typeof r)
                            this._remaining--,
                            this._result[e] = t;
                        else if (n === st) {
                            var o = new n(d);
                            y(o, t, r),
                            this._willSettleAt(o, e)
                        } else
                            this._willSettleAt(new n(function(e) {
                                return e(t)
                            }
                            ), e)
                    } else
                        this._willSettleAt(i(t), e)
                }
                ,
                t.prototype._settledAt = function(t, e, n) {
                    var i = this.promise;
                    i._state === Q && (this._remaining--,
                    t === et ? C(i, n) : this._result[e] = n),
                    0 === this._remaining && x(i, this._result)
                }
                ,
                t.prototype._willSettleAt = function(t, e) {
                    var n = this;
                    T(t, void 0, function(t) {
                        return n._settledAt(tt, e, t)
                    }, function(t) {
                        return n._settledAt(et, e, t)
                    })
                }
                ,
                t
            }()
              , st = function() {
                function t(e) {
                    this[J] = S(),
                    this._result = this._state = void 0,
                    this._subscribers = [],
                    d !== e && ("function" != typeof e && M(),
                    this instanceof t ? P(this, e) : D())
                }
                return t.prototype.catch = function(t) {
                    return this.then(null, t)
                }
                ,
                t.prototype.finally = function(t) {
                    var e = this
                      , n = e.constructor;
                    return e.then(function(e) {
                        return n.resolve(t()).then(function() {
                            return e
                        })
                    }, function(e) {
                        return n.resolve(t()).then(function() {
                            throw e
                        })
                    })
                }
                ,
                t
            }();
            return st.prototype.then = h,
            st.all = A,
            st.race = R,
            st.resolve = u,
            st.reject = B,
            st._setScheduler = o,
            st._setAsap = s,
            st._asap = G,
            st.polyfill = N,
            st.Promise = st,
            st
        })
    }
    ).call(e, n(52), n(36))
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = function() {
        function t() {}
        return Object.defineProperty(t, "MAIN_URL", {
            get: function() {
                return ""
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "SIGN_UP_URL", {
            get: function() {
                return t.MAIN_URL + "/v3/signup/"
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "STATIC_ROOT_URL", {
            get: function() {
                return null === t.extStaticUrls && "function" == typeof getExternalStaticUrls && (t.extStaticUrls = getExternalStaticUrls()),
                t.extStaticUrls && t.extStaticUrls.length > 0 ? t.extStaticUrls[Math.round(Math.random() * (t.extStaticUrls.length - 1))] : ""
            },
            enumerable: !0,
            configurable: !0
        }),
        t.extStaticUrls = null,
        t
    }();
    e.Site = i
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(11)
      , o = function() {
        function t(e) {
            this.color = null,
            this.type = t.BASE_FILL,
            this.color = e
        }
        return Object.defineProperty(t, "BASE_FILL", {
            get: function() {
                return 1
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "OVERRIDE_FILL", {
            get: function() {
                return 2
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "hex", {
            get: function() {
                return "#" + this.color
            },
            enumerable: !0,
            configurable: !0
        }),
        t.prototype.toContext2d = function(t, e) {
            void 0 === e && (e = null),
            t.fillStyle = this.hex
        }
        ,
        t.prototype.toSvg = function(t, e) {
            if ("style" !== t.tagName) {
                var n = "" != t.getAttribute("stroke") && null != t.getAttribute("stroke")
                  , i = "" != t.getAttribute("fill") && null != t.getAttribute("fill");
                n && i ? (t.setAttribute("fill", "none"),
                t.setAttribute("stroke", this.hex)) : (n || i) && n && !i ? t.setAttribute("stroke", this.hex) : t.setAttribute("fill", this.hex)
            }
        }
        ,
        t.prototype.serialize = function() {
            return this.color
        }
        ,
        t.serialize = function(t) {
            return null === t ? null : t.serialize()
        }
        ,
        t.deserialize = function(e) {
            return null === e ? null : e.indexOf(";") > -1 ? s.deserialize(e) : new t(e)
        }
        ,
        t.prototype.clone = function() {
            return t.deserialize(this.serialize())
        }
        ,
        t.prototype.equals = function(t) {
            return null !== t && (this.type == t.type && this.color == t.color)
        }
        ,
        t
    }();
    e.Fill = o;
    var s = function(t) {
        function e(n) {
            var i = t.call(this, n) || this;
            return i.type = o.OVERRIDE_FILL,
            i.colors = r.times(e.EDITABLE_COMBINATIONS_COUNT, r.constant(null)),
            i
        }
        return i(e, t),
        e.prototype.serialize = function() {
            return this.colors.join(";")
        }
        ,
        e.deserialize = function(t) {
            for (var n = new e("000000"), i = [], r = t.split(";"), o = 0, s = r; o < s.length; o++) {
                var a = s[o]
                  , l = Number(a);
                "" == a ? i.push(null) : isNaN(l) ? i.push(a) : i.push(l)
            }
            return n.colors = i,
            n
        }
        ,
        e.prototype.equals = function(t) {
            return null !== t && !(this.type != t.type || this.color != t.color || !this.colors || !t.colors || this.colors.length != t.colors.length || this.colors[0] != t.colors[0] || this.colors[1] != t.colors[1] || this.colors[2] != t.colors[2] || this.colors[3] != t.colors[3] || this.colors[4] != t.colors[4] || this.colors[5] != t.colors[5])
        }
        ,
        e.EDITABLE_COMBINATIONS_COUNT = 5,
        e
    }(o);
    e.OverrideFill = s
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(6)
      , r = n(49)
      , o = function() {
        function t() {
            this._source = null,
            this.id = null,
            this._bounds = null,
            this._maths = null,
            this.type = null,
            this.group = null,
            this.fill = null,
            this._uid = ++t._uid
        }
        return Object.defineProperty(t, "UNKNOWN", {
            get: function() {
                return 0
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "SVG_ICON", {
            get: function() {
                return 1
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "TEXT_ICON", {
            get: function() {
                return 2
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "BASE_TEXT", {
            get: function() {
                return 3
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "RICH_TEXT", {
            get: function() {
                return 4
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "LINE", {
            get: function() {
                return 5
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "RECT", {
            get: function() {
                return 6
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "LOGO_NAME", {
            get: function() {
                return 7
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "TAGLINE", {
            get: function() {
                return 8
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "MONOGRAM", {
            get: function() {
                return 9
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "CUSTOM_TEXT", {
            get: function() {
                return 10
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "blendManager", {
            get: function() {
                return t.blendManager
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "bounds", {
            get: function() {
                return this._bounds
            },
            set: function(t) {
                t != this._bounds && (this._bounds = t)
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "maths", {
            get: function() {
                return this._maths
            },
            set: function(t) {
                this._maths = t
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "uid", {
            get: function() {
                return this._uid
            },
            set: function(t) {
                this._uid = t
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "isText", {
            get: function() {
                return !1
            },
            enumerable: !0,
            configurable: !0
        }),
        t.prototype.serialize = function() {
            var t = {
                id: this.id,
                type: this.type,
                group: this.group,
                fill: i.Fill.serialize(this.fill),
                maths: this.maths.serialize(),
                blendMode: this.blendMode
            };
            return JSON.stringify(t)
        }
        ,
        t.deserialize = function(t) {
            return null
        }
        ,
        t.prototype.clone = function() {
            return null
        }
        ,
        t.prototype.hasChanges = function() {
            return null === this.id || null === this._source || this.type !== this._source.type || this.group !== this._source.group || !this.maths.equals(this._source.maths) || !(null === this.fill && null === this._source.fill || null !== this.fill && this.fill.equals(this._source.fill)) || !this.bounds.equals(this._source.bounds) || this.blendMode !== this._source.blendMode
        }
        ,
        t.prototype.debug = function() {
            return "Group: " + this.group + "\nMaths: " + this.maths.serialize() + "\nBlend mode: " + this.blendMode
        }
        ,
        t._uid = 0,
        t.blendManager = new r.BlendManager,
        t
    }();
    e.LogoItem = o
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(14)
      , r = function() {
        function t(t, e, n, i) {
            void 0 === t && (t = 0),
            void 0 === e && (e = 0),
            void 0 === n && (n = 0),
            void 0 === i && (i = 0),
            this.x = t,
            this.y = e,
            this.width = n,
            this.height = i
        }
        return Object.defineProperty(t.prototype, "left", {
            get: function() {
                return this.x
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "top", {
            get: function() {
                return this.y
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "right", {
            get: function() {
                return this.x + this.width
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "bottom", {
            get: function() {
                return this.y + this.height
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "topLeft", {
            get: function() {
                return new i.Point(this.x,this.y)
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "bottomRight", {
            get: function() {
                return new i.Point(this.right,this.bottom)
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "size", {
            get: function() {
                return new i.Point(this.width,this.height)
            },
            enumerable: !0,
            configurable: !0
        }),
        t.prototype.intersects = function(t) {
            return !(t.left > this.right || t.right < this.left || t.top > this.bottom || t.bottom < this.top)
        }
        ,
        t.prototype.clone = function() {
            return new t(this.x,this.y,this.width,this.height)
        }
        ,
        t.prototype.serialize = function() {
            return this.x + " " + this.y + " " + this.width + " " + this.height
        }
        ,
        t.deserialize = function(e) {
            var n = e.split(" ");
            return new t(parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3]))
        }
        ,
        t.prototype.equals = function(t) {
            return this.x === t.x && this.y === t.y && this.width === t.width && this.height === t.height
        }
        ,
        t
    }();
    e.Rectangle = r
}
, function(t, e, n) {
    "use strict";
    var i = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Int32Array;
    e.assign = function(t) {
        for (var e = Array.prototype.slice.call(arguments, 1); e.length; ) {
            var n = e.shift();
            if (n) {
                if ("object" != typeof n)
                    throw new TypeError(n + "must be non-object");
                for (var i in n)
                    n.hasOwnProperty(i) && (t[i] = n[i])
            }
        }
        return t
    }
    ,
    e.shrinkBuf = function(t, e) {
        return t.length === e ? t : t.subarray ? t.subarray(0, e) : (t.length = e,
        t)
    }
    ;
    var r = {
        arraySet: function(t, e, n, i, r) {
            if (e.subarray && t.subarray)
                return void t.set(e.subarray(n, n + i), r);
            for (var o = 0; o < i; o++)
                t[r + o] = e[n + o]
        },
        flattenChunks: function(t) {
            var e, n, i, r, o, s;
            for (i = 0,
            e = 0,
            n = t.length; e < n; e++)
                i += t[e].length;
            for (s = new Uint8Array(i),
            r = 0,
            e = 0,
            n = t.length; e < n; e++)
                o = t[e],
                s.set(o, r),
                r += o.length;
            return s
        }
    }
      , o = {
        arraySet: function(t, e, n, i, r) {
            for (var o = 0; o < i; o++)
                t[r + o] = e[n + o]
        },
        flattenChunks: function(t) {
            return [].concat.apply([], t)
        }
    };
    e.setTyped = function(t) {
        t ? (e.Buf8 = Uint8Array,
        e.Buf16 = Uint16Array,
        e.Buf32 = Int32Array,
        e.assign(e, r)) : (e.Buf8 = Array,
        e.Buf16 = Array,
        e.Buf32 = Array,
        e.assign(e, o))
    }
    ,
    e.setTyped(i)
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = function() {
        function t() {
            this._uid = ++t._uid
        }
        return Object.defineProperty(t, "LOGO", {
            get: function() {
                return 1
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "SVG", {
            get: function() {
                return 2
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "TEXT", {
            get: function() {
                return 3
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "bounds", {
            get: function() {
                return this._bounds
            },
            set: function(t) {
                t != this._bounds && (this._bounds = t)
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "maths", {
            get: function() {
                return this._maths
            },
            set: function(t) {
                this._maths = t
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "content", {
            get: function() {
                return this._content
            },
            set: function(t) {
                this._content = t
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "uid", {
            get: function() {
                return this._uid
            },
            set: function(t) {
                this._uid = t
            },
            enumerable: !0,
            configurable: !0
        }),
        t.deserialize = function(t) {
            return null
        }
        ,
        t.prototype.serialize = function() {
            return {
                type: this.type,
                maths: this.maths.serialize(),
                content: this.content,
                fill: this.fill.serialize(),
                group: this.group,
                target: this.target
            }
        }
        ,
        t.prototype.clone = function() {
            return null
        }
        ,
        t._uid = 0,
        t
    }();
    e.BPItem = i
}
, function(t, e, n) {
    var i, r;
    (function() {
        function n(t) {
            function e(e, n, i, r, o, s) {
                for (; o >= 0 && o < s; o += t) {
                    var a = r ? r[o] : o;
                    i = n(i, e[a], a, e)
                }
                return i
            }
            return function(n, i, r, o) {
                i = C(i, o, 4);
                var s = !S(n) && x.keys(n)
                  , a = (s || n).length
                  , l = t > 0 ? 0 : a - 1;
                return arguments.length < 3 && (r = n[s ? s[l] : l],
                l += t),
                e(n, i, r, s, l, a)
            }
        }
        function o(t) {
            return function(e, n, i) {
                n = T(n, i);
                for (var r = P(e), o = t > 0 ? 0 : r - 1; o >= 0 && o < r; o += t)
                    if (n(e[o], o, e))
                        return o;
                return -1
            }
        }
        function s(t, e, n) {
            return function(i, r, o) {
                var s = 0
                  , a = P(i);
                if ("number" == typeof o)
                    t > 0 ? s = o >= 0 ? o : Math.max(o + a, s) : a = o >= 0 ? Math.min(o + 1, a) : o + a + 1;
                else if (n && o && a)
                    return o = n(i, r),
                    i[o] === r ? o : -1;
                if (r !== r)
                    return o = e(f.call(i, s, a), x.isNaN),
                    o >= 0 ? o + s : -1;
                for (o = t > 0 ? s : a - 1; o >= 0 && o < a; o += t)
                    if (i[o] === r)
                        return o;
                return -1
            }
        }
        function a(t, e) {
            var n = B.length
              , i = t.constructor
              , r = x.isFunction(i) && i.prototype || u
              , o = "constructor";
            for (x.has(t, o) && !x.contains(e, o) && e.push(o); n--; )
                (o = B[n])in t && t[o] !== r[o] && !x.contains(e, o) && e.push(o)
        }
        var l = this
          , c = l._
          , h = Array.prototype
          , u = Object.prototype
          , d = Function.prototype
          , p = h.push
          , f = h.slice
          , g = u.toString
          , m = u.hasOwnProperty
          , _ = Array.isArray
          , v = Object.keys
          , y = d.bind
          , b = Object.create
          , w = function() {}
          , x = function(t) {
            return t instanceof x ? t : this instanceof x ? void (this._wrapped = t) : new x(t)
        };
        void 0 !== t && t.exports && (e = t.exports = x),
        e._ = x,
        x.VERSION = "1.8.3";
        var C = function(t, e, n) {
            if (void 0 === e)
                return t;
            switch (null == n ? 3 : n) {
            case 1:
                return function(n) {
                    return t.call(e, n)
                }
                ;
            case 2:
                return function(n, i) {
                    return t.call(e, n, i)
                }
                ;
            case 3:
                return function(n, i, r) {
                    return t.call(e, n, i, r)
                }
                ;
            case 4:
                return function(n, i, r, o) {
                    return t.call(e, n, i, r, o)
                }
            }
            return function() {
                return t.apply(e, arguments)
            }
        }
          , T = function(t, e, n) {
            return null == t ? x.identity : x.isFunction(t) ? C(t, e, n) : x.isObject(t) ? x.matcher(t) : x.property(t)
        };
        x.iteratee = function(t, e) {
            return T(t, e, 1 / 0)
        }
        ;
        var k = function(t, e) {
            return function(n) {
                var i = arguments.length;
                if (i < 2 || null == n)
                    return n;
                for (var r = 1; r < i; r++)
                    for (var o = arguments[r], s = t(o), a = s.length, l = 0; l < a; l++) {
                        var c = s[l];
                        e && void 0 !== n[c] || (n[c] = o[c])
                    }
                return n
            }
        }
          , I = function(t) {
            if (!x.isObject(t))
                return {};
            if (b)
                return b(t);
            w.prototype = t;
            var e = new w;
            return w.prototype = null,
            e
        }
          , L = function(t) {
            return function(e) {
                return null == e ? void 0 : e[t]
            }
        }
          , E = Math.pow(2, 53) - 1
          , P = L("length")
          , S = function(t) {
            var e = P(t);
            return "number" == typeof e && e >= 0 && e <= E
        };
        x.each = x.forEach = function(t, e, n) {
            e = C(e, n);
            var i, r;
            if (S(t))
                for (i = 0,
                r = t.length; i < r; i++)
                    e(t[i], i, t);
            else {
                var o = x.keys(t);
                for (i = 0,
                r = o.length; i < r; i++)
                    e(t[o[i]], o[i], t)
            }
            return t
        }
        ,
        x.map = x.collect = function(t, e, n) {
            e = T(e, n);
            for (var i = !S(t) && x.keys(t), r = (i || t).length, o = Array(r), s = 0; s < r; s++) {
                var a = i ? i[s] : s;
                o[s] = e(t[a], a, t)
            }
            return o
        }
        ,
        x.reduce = x.foldl = x.inject = n(1),
        x.reduceRight = x.foldr = n(-1),
        x.find = x.detect = function(t, e, n) {
            var i;
            if (void 0 !== (i = S(t) ? x.findIndex(t, e, n) : x.findKey(t, e, n)) && -1 !== i)
                return t[i]
        }
        ,
        x.filter = x.select = function(t, e, n) {
            var i = [];
            return e = T(e, n),
            x.each(t, function(t, n, r) {
                e(t, n, r) && i.push(t)
            }),
            i
        }
        ,
        x.reject = function(t, e, n) {
            return x.filter(t, x.negate(T(e)), n)
        }
        ,
        x.every = x.all = function(t, e, n) {
            e = T(e, n);
            for (var i = !S(t) && x.keys(t), r = (i || t).length, o = 0; o < r; o++) {
                var s = i ? i[o] : o;
                if (!e(t[s], s, t))
                    return !1
            }
            return !0
        }
        ,
        x.some = x.any = function(t, e, n) {
            e = T(e, n);
            for (var i = !S(t) && x.keys(t), r = (i || t).length, o = 0; o < r; o++) {
                var s = i ? i[o] : o;
                if (e(t[s], s, t))
                    return !0
            }
            return !1
        }
        ,
        x.contains = x.includes = x.include = function(t, e, n, i) {
            return S(t) || (t = x.values(t)),
            ("number" != typeof n || i) && (n = 0),
            x.indexOf(t, e, n) >= 0
        }
        ,
        x.invoke = function(t, e) {
            var n = f.call(arguments, 2)
              , i = x.isFunction(e);
            return x.map(t, function(t) {
                var r = i ? e : t[e];
                return null == r ? r : r.apply(t, n)
            })
        }
        ,
        x.pluck = function(t, e) {
            return x.map(t, x.property(e))
        }
        ,
        x.where = function(t, e) {
            return x.filter(t, x.matcher(e))
        }
        ,
        x.findWhere = function(t, e) {
            return x.find(t, x.matcher(e))
        }
        ,
        x.max = function(t, e, n) {
            var i, r, o = -1 / 0, s = -1 / 0;
            if (null == e && null != t) {
                t = S(t) ? t : x.values(t);
                for (var a = 0, l = t.length; a < l; a++)
                    (i = t[a]) > o && (o = i)
            } else
                e = T(e, n),
                x.each(t, function(t, n, i) {
                    ((r = e(t, n, i)) > s || r === -1 / 0 && o === -1 / 0) && (o = t,
                    s = r)
                });
            return o
        }
        ,
        x.min = function(t, e, n) {
            var i, r, o = 1 / 0, s = 1 / 0;
            if (null == e && null != t) {
                t = S(t) ? t : x.values(t);
                for (var a = 0, l = t.length; a < l; a++)
                    (i = t[a]) < o && (o = i)
            } else
                e = T(e, n),
                x.each(t, function(t, n, i) {
                    ((r = e(t, n, i)) < s || r === 1 / 0 && o === 1 / 0) && (o = t,
                    s = r)
                });
            return o
        }
        ,
        x.shuffle = function(t) {
            for (var e, n = S(t) ? t : x.values(t), i = n.length, r = Array(i), o = 0; o < i; o++)
                e = x.random(0, o),
                e !== o && (r[o] = r[e]),
                r[e] = n[o];
            return r
        }
        ,
        x.sample = function(t, e, n) {
            return null == e || n ? (S(t) || (t = x.values(t)),
            t[x.random(t.length - 1)]) : x.shuffle(t).slice(0, Math.max(0, e))
        }
        ,
        x.sortBy = function(t, e, n) {
            return e = T(e, n),
            x.pluck(x.map(t, function(t, n, i) {
                return {
                    value: t,
                    index: n,
                    criteria: e(t, n, i)
                }
            }).sort(function(t, e) {
                var n = t.criteria
                  , i = e.criteria;
                if (n !== i) {
                    if (n > i || void 0 === n)
                        return 1;
                    if (n < i || void 0 === i)
                        return -1
                }
                return t.index - e.index
            }), "value")
        }
        ;
        var j = function(t) {
            return function(e, n, i) {
                var r = {};
                return n = T(n, i),
                x.each(e, function(i, o) {
                    var s = n(i, o, e);
                    t(r, i, s)
                }),
                r
            }
        };
        x.groupBy = j(function(t, e, n) {
            x.has(t, n) ? t[n].push(e) : t[n] = [e]
        }),
        x.indexBy = j(function(t, e, n) {
            t[n] = e
        }),
        x.countBy = j(function(t, e, n) {
            x.has(t, n) ? t[n]++ : t[n] = 1
        }),
        x.toArray = function(t) {
            return t ? x.isArray(t) ? f.call(t) : S(t) ? x.map(t, x.identity) : x.values(t) : []
        }
        ,
        x.size = function(t) {
            return null == t ? 0 : S(t) ? t.length : x.keys(t).length
        }
        ,
        x.partition = function(t, e, n) {
            e = T(e, n);
            var i = []
              , r = [];
            return x.each(t, function(t, n, o) {
                (e(t, n, o) ? i : r).push(t)
            }),
            [i, r]
        }
        ,
        x.first = x.head = x.take = function(t, e, n) {
            if (null != t)
                return null == e || n ? t[0] : x.initial(t, t.length - e)
        }
        ,
        x.initial = function(t, e, n) {
            return f.call(t, 0, Math.max(0, t.length - (null == e || n ? 1 : e)))
        }
        ,
        x.last = function(t, e, n) {
            if (null != t)
                return null == e || n ? t[t.length - 1] : x.rest(t, Math.max(0, t.length - e))
        }
        ,
        x.rest = x.tail = x.drop = function(t, e, n) {
            return f.call(t, null == e || n ? 1 : e)
        }
        ,
        x.compact = function(t) {
            return x.filter(t, x.identity)
        }
        ;
        var O = function(t, e, n, i) {
            for (var r = [], o = 0, s = i || 0, a = P(t); s < a; s++) {
                var l = t[s];
                if (S(l) && (x.isArray(l) || x.isArguments(l))) {
                    e || (l = O(l, e, n));
                    var c = 0
                      , h = l.length;
                    for (r.length += h; c < h; )
                        r[o++] = l[c++]
                } else
                    n || (r[o++] = l)
            }
            return r
        };
        x.flatten = function(t, e) {
            return O(t, e, !1)
        }
        ,
        x.without = function(t) {
            return x.difference(t, f.call(arguments, 1))
        }
        ,
        x.uniq = x.unique = function(t, e, n, i) {
            x.isBoolean(e) || (i = n,
            n = e,
            e = !1),
            null != n && (n = T(n, i));
            for (var r = [], o = [], s = 0, a = P(t); s < a; s++) {
                var l = t[s]
                  , c = n ? n(l, s, t) : l;
                e ? (s && o === c || r.push(l),
                o = c) : n ? x.contains(o, c) || (o.push(c),
                r.push(l)) : x.contains(r, l) || r.push(l)
            }
            return r
        }
        ,
        x.union = function() {
            return x.uniq(O(arguments, !0, !0))
        }
        ,
        x.intersection = function(t) {
            for (var e = [], n = arguments.length, i = 0, r = P(t); i < r; i++) {
                var o = t[i];
                if (!x.contains(e, o)) {
                    for (var s = 1; s < n && x.contains(arguments[s], o); s++)
                        ;
                    s === n && e.push(o)
                }
            }
            return e
        }
        ,
        x.difference = function(t) {
            var e = O(arguments, !0, !0, 1);
            return x.filter(t, function(t) {
                return !x.contains(e, t)
            })
        }
        ,
        x.zip = function() {
            return x.unzip(arguments)
        }
        ,
        x.unzip = function(t) {
            for (var e = t && x.max(t, P).length || 0, n = Array(e), i = 0; i < e; i++)
                n[i] = x.pluck(t, i);
            return n
        }
        ,
        x.object = function(t, e) {
            for (var n = {}, i = 0, r = P(t); i < r; i++)
                e ? n[t[i]] = e[i] : n[t[i][0]] = t[i][1];
            return n
        }
        ,
        x.findIndex = o(1),
        x.findLastIndex = o(-1),
        x.sortedIndex = function(t, e, n, i) {
            n = T(n, i, 1);
            for (var r = n(e), o = 0, s = P(t); o < s; ) {
                var a = Math.floor((o + s) / 2);
                n(t[a]) < r ? o = a + 1 : s = a
            }
            return o
        }
        ,
        x.indexOf = s(1, x.findIndex, x.sortedIndex),
        x.lastIndexOf = s(-1, x.findLastIndex),
        x.range = function(t, e, n) {
            null == e && (e = t || 0,
            t = 0),
            n = n || 1;
            for (var i = Math.max(Math.ceil((e - t) / n), 0), r = Array(i), o = 0; o < i; o++,
            t += n)
                r[o] = t;
            return r
        }
        ;
        var A = function(t, e, n, i, r) {
            if (!(i instanceof e))
                return t.apply(n, r);
            var o = I(t.prototype)
              , s = t.apply(o, r);
            return x.isObject(s) ? s : o
        };
        x.bind = function(t, e) {
            if (y && t.bind === y)
                return y.apply(t, f.call(arguments, 1));
            if (!x.isFunction(t))
                throw new TypeError("Bind must be called on a function");
            var n = f.call(arguments, 2)
              , i = function() {
                return A(t, i, e, this, n.concat(f.call(arguments)))
            };
            return i
        }
        ,
        x.partial = function(t) {
            var e = f.call(arguments, 1)
              , n = function() {
                for (var i = 0, r = e.length, o = Array(r), s = 0; s < r; s++)
                    o[s] = e[s] === x ? arguments[i++] : e[s];
                for (; i < arguments.length; )
                    o.push(arguments[i++]);
                return A(t, n, this, this, o)
            };
            return n
        }
        ,
        x.bindAll = function(t) {
            var e, n, i = arguments.length;
            if (i <= 1)
                throw new Error("bindAll must be passed function names");
            for (e = 1; e < i; e++)
                n = arguments[e],
                t[n] = x.bind(t[n], t);
            return t
        }
        ,
        x.memoize = function(t, e) {
            var n = function(i) {
                var r = n.cache
                  , o = "" + (e ? e.apply(this, arguments) : i);
                return x.has(r, o) || (r[o] = t.apply(this, arguments)),
                r[o]
            };
            return n.cache = {},
            n
        }
        ,
        x.delay = function(t, e) {
            var n = f.call(arguments, 2);
            return setTimeout(function() {
                return t.apply(null, n)
            }, e)
        }
        ,
        x.defer = x.partial(x.delay, x, 1),
        x.throttle = function(t, e, n) {
            var i, r, o, s = null, a = 0;
            n || (n = {});
            var l = function() {
                a = !1 === n.leading ? 0 : x.now(),
                s = null,
                o = t.apply(i, r),
                s || (i = r = null)
            };
            return function() {
                var c = x.now();
                a || !1 !== n.leading || (a = c);
                var h = e - (c - a);
                return i = this,
                r = arguments,
                h <= 0 || h > e ? (s && (clearTimeout(s),
                s = null),
                a = c,
                o = t.apply(i, r),
                s || (i = r = null)) : s || !1 === n.trailing || (s = setTimeout(l, h)),
                o
            }
        }
        ,
        x.debounce = function(t, e, n) {
            var i, r, o, s, a, l = function() {
                var c = x.now() - s;
                c < e && c >= 0 ? i = setTimeout(l, e - c) : (i = null,
                n || (a = t.apply(o, r),
                i || (o = r = null)))
            };
            return function() {
                o = this,
                r = arguments,
                s = x.now();
                var c = n && !i;
                return i || (i = setTimeout(l, e)),
                c && (a = t.apply(o, r),
                o = r = null),
                a
            }
        }
        ,
        x.wrap = function(t, e) {
            return x.partial(e, t)
        }
        ,
        x.negate = function(t) {
            return function() {
                return !t.apply(this, arguments)
            }
        }
        ,
        x.compose = function() {
            var t = arguments
              , e = t.length - 1;
            return function() {
                for (var n = e, i = t[e].apply(this, arguments); n--; )
                    i = t[n].call(this, i);
                return i
            }
        }
        ,
        x.after = function(t, e) {
            return function() {
                if (--t < 1)
                    return e.apply(this, arguments)
            }
        }
        ,
        x.before = function(t, e) {
            var n;
            return function() {
                return --t > 0 && (n = e.apply(this, arguments)),
                t <= 1 && (e = null),
                n
            }
        }
        ,
        x.once = x.partial(x.before, 2);
        var R = !{
            toString: null
        }.propertyIsEnumerable("toString")
          , B = ["valueOf", "isPrototypeOf", "toString", "propertyIsEnumerable", "hasOwnProperty", "toLocaleString"];
        x.keys = function(t) {
            if (!x.isObject(t))
                return [];
            if (v)
                return v(t);
            var e = [];
            for (var n in t)
                x.has(t, n) && e.push(n);
            return R && a(t, e),
            e
        }
        ,
        x.allKeys = function(t) {
            if (!x.isObject(t))
                return [];
            var e = [];
            for (var n in t)
                e.push(n);
            return R && a(t, e),
            e
        }
        ,
        x.values = function(t) {
            for (var e = x.keys(t), n = e.length, i = Array(n), r = 0; r < n; r++)
                i[r] = t[e[r]];
            return i
        }
        ,
        x.mapObject = function(t, e, n) {
            e = T(e, n);
            for (var i, r = x.keys(t), o = r.length, s = {}, a = 0; a < o; a++)
                i = r[a],
                s[i] = e(t[i], i, t);
            return s
        }
        ,
        x.pairs = function(t) {
            for (var e = x.keys(t), n = e.length, i = Array(n), r = 0; r < n; r++)
                i[r] = [e[r], t[e[r]]];
            return i
        }
        ,
        x.invert = function(t) {
            for (var e = {}, n = x.keys(t), i = 0, r = n.length; i < r; i++)
                e[t[n[i]]] = n[i];
            return e
        }
        ,
        x.functions = x.methods = function(t) {
            var e = [];
            for (var n in t)
                x.isFunction(t[n]) && e.push(n);
            return e.sort()
        }
        ,
        x.extend = k(x.allKeys),
        x.extendOwn = x.assign = k(x.keys),
        x.findKey = function(t, e, n) {
            e = T(e, n);
            for (var i, r = x.keys(t), o = 0, s = r.length; o < s; o++)
                if (i = r[o],
                e(t[i], i, t))
                    return i
        }
        ,
        x.pick = function(t, e, n) {
            var i, r, o = {}, s = t;
            if (null == s)
                return o;
            x.isFunction(e) ? (r = x.allKeys(s),
            i = C(e, n)) : (r = O(arguments, !1, !1, 1),
            i = function(t, e, n) {
                return e in n
            }
            ,
            s = Object(s));
            for (var a = 0, l = r.length; a < l; a++) {
                var c = r[a]
                  , h = s[c];
                i(h, c, s) && (o[c] = h)
            }
            return o
        }
        ,
        x.omit = function(t, e, n) {
            if (x.isFunction(e))
                e = x.negate(e);
            else {
                var i = x.map(O(arguments, !1, !1, 1), String);
                e = function(t, e) {
                    return !x.contains(i, e)
                }
            }
            return x.pick(t, e, n)
        }
        ,
        x.defaults = k(x.allKeys, !0),
        x.create = function(t, e) {
            var n = I(t);
            return e && x.extendOwn(n, e),
            n
        }
        ,
        x.clone = function(t) {
            return x.isObject(t) ? x.isArray(t) ? t.slice() : x.extend({}, t) : t
        }
        ,
        x.tap = function(t, e) {
            return e(t),
            t
        }
        ,
        x.isMatch = function(t, e) {
            var n = x.keys(e)
              , i = n.length;
            if (null == t)
                return !i;
            for (var r = Object(t), o = 0; o < i; o++) {
                var s = n[o];
                if (e[s] !== r[s] || !(s in r))
                    return !1
            }
            return !0
        }
        ;
        var M = function(t, e, n, i) {
            if (t === e)
                return 0 !== t || 1 / t == 1 / e;
            if (null == t || null == e)
                return t === e;
            t instanceof x && (t = t._wrapped),
            e instanceof x && (e = e._wrapped);
            var r = g.call(t);
            if (r !== g.call(e))
                return !1;
            switch (r) {
            case "[object RegExp]":
            case "[object String]":
                return "" + t == "" + e;
            case "[object Number]":
                return +t != +t ? +e != +e : 0 == +t ? 1 / +t == 1 / e : +t == +e;
            case "[object Date]":
            case "[object Boolean]":
                return +t == +e
            }
            var o = "[object Array]" === r;
            if (!o) {
                if ("object" != typeof t || "object" != typeof e)
                    return !1;
                var s = t.constructor
                  , a = e.constructor;
                if (s !== a && !(x.isFunction(s) && s instanceof s && x.isFunction(a) && a instanceof a) && "constructor"in t && "constructor"in e)
                    return !1
            }
            n = n || [],
            i = i || [];
            for (var l = n.length; l--; )
                if (n[l] === t)
                    return i[l] === e;
            if (n.push(t),
            i.push(e),
            o) {
                if ((l = t.length) !== e.length)
                    return !1;
                for (; l--; )
                    if (!M(t[l], e[l], n, i))
                        return !1
            } else {
                var c, h = x.keys(t);
                if (l = h.length,
                x.keys(e).length !== l)
                    return !1;
                for (; l--; )
                    if (c = h[l],
                    !x.has(e, c) || !M(t[c], e[c], n, i))
                        return !1
            }
            return n.pop(),
            i.pop(),
            !0
        };
        x.isEqual = function(t, e) {
            return M(t, e)
        }
        ,
        x.isEmpty = function(t) {
            return null == t || (S(t) && (x.isArray(t) || x.isString(t) || x.isArguments(t)) ? 0 === t.length : 0 === x.keys(t).length)
        }
        ,
        x.isElement = function(t) {
            return !(!t || 1 !== t.nodeType)
        }
        ,
        x.isArray = _ || function(t) {
            return "[object Array]" === g.call(t)
        }
        ,
        x.isObject = function(t) {
            var e = typeof t;
            return "function" === e || "object" === e && !!t
        }
        ,
        x.each(["Arguments", "Function", "String", "Number", "Date", "RegExp", "Error"], function(t) {
            x["is" + t] = function(e) {
                return g.call(e) === "[object " + t + "]"
            }
        }),
        x.isArguments(arguments) || (x.isArguments = function(t) {
            return x.has(t, "callee")
        }
        ),
        "function" != typeof /./ && "object" != typeof Int8Array && (x.isFunction = function(t) {
            return "function" == typeof t || !1
        }
        ),
        x.isFinite = function(t) {
            return isFinite(t) && !isNaN(parseFloat(t))
        }
        ,
        x.isNaN = function(t) {
            return x.isNumber(t) && t !== +t
        }
        ,
        x.isBoolean = function(t) {
            return !0 === t || !1 === t || "[object Boolean]" === g.call(t)
        }
        ,
        x.isNull = function(t) {
            return null === t
        }
        ,
        x.isUndefined = function(t) {
            return void 0 === t
        }
        ,
        x.has = function(t, e) {
            return null != t && m.call(t, e)
        }
        ,
        x.noConflict = function() {
            return l._ = c,
            this
        }
        ,
        x.identity = function(t) {
            return t
        }
        ,
        x.constant = function(t) {
            return function() {
                return t
            }
        }
        ,
        x.noop = function() {}
        ,
        x.property = L,
        x.propertyOf = function(t) {
            return null == t ? function() {}
            : function(e) {
                return t[e]
            }
        }
        ,
        x.matcher = x.matches = function(t) {
            return t = x.extendOwn({}, t),
            function(e) {
                return x.isMatch(e, t)
            }
        }
        ,
        x.times = function(t, e, n) {
            var i = Array(Math.max(0, t));
            e = C(e, n, 1);
            for (var r = 0; r < t; r++)
                i[r] = e(r);
            return i
        }
        ,
        x.random = function(t, e) {
            return null == e && (e = t,
            t = 0),
            t + Math.floor(Math.random() * (e - t + 1))
        }
        ,
        x.now = Date.now || function() {
            return (new Date).getTime()
        }
        ;
        var D = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#x27;",
            "`": "&#x60;"
        }
          , N = x.invert(D)
          , H = function(t) {
            var e = function(e) {
                return t[e]
            }
              , n = "(?:" + x.keys(t).join("|") + ")"
              , i = RegExp(n)
              , r = RegExp(n, "g");
            return function(t) {
                return t = null == t ? "" : "" + t,
                i.test(t) ? t.replace(r, e) : t
            }
        };
        x.escape = H(D),
        x.unescape = H(N),
        x.result = function(t, e, n) {
            var i = null == t ? void 0 : t[e];
            return void 0 === i && (i = n),
            x.isFunction(i) ? i.call(t) : i
        }
        ;
        var F = 0;
        x.uniqueId = function(t) {
            var e = ++F + "";
            return t ? t + e : e
        }
        ,
        x.templateSettings = {
            evaluate: /<%([\s\S]+?)%>/g,
            interpolate: /<%=([\s\S]+?)%>/g,
            escape: /<%-([\s\S]+?)%>/g
        };
        var z = /(.)^/
          , $ = {
            "'": "'",
            "\\": "\\",
            "\r": "r",
            "\n": "n",
            "\u2028": "u2028",
            "\u2029": "u2029"
        }
          , V = /\\|'|\r|\n|\u2028|\u2029/g
          , G = function(t) {
            return "\\" + $[t]
        };
        x.template = function(t, e, n) {
            !e && n && (e = n),
            e = x.defaults({}, e, x.templateSettings);
            var i = RegExp([(e.escape || z).source, (e.interpolate || z).source, (e.evaluate || z).source].join("|") + "|$", "g")
              , r = 0
              , o = "__p+='";
            t.replace(i, function(e, n, i, s, a) {
                return o += t.slice(r, a).replace(V, G),
                r = a + e.length,
                n ? o += "'+\n((__t=(" + n + "))==null?'':_.escape(__t))+\n'" : i ? o += "'+\n((__t=(" + i + "))==null?'':__t)+\n'" : s && (o += "';\n" + s + "\n__p+='"),
                e
            }),
            o += "';\n",
            e.variable || (o = "with(obj||{}){\n" + o + "}\n"),
            o = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + o + "return __p;\n";
            try {
                var s = new Function(e.variable || "obj","_",o)
            } catch (t) {
                throw t.source = o,
                t
            }
            var a = function(t) {
                return s.call(this, t, x)
            };
            return a.source = "function(" + (e.variable || "obj") + "){\n" + o + "}",
            a
        }
        ,
        x.chain = function(t) {
            var e = x(t);
            return e._chain = !0,
            e
        }
        ;
        var U = function(t, e) {
            return t._chain ? x(e).chain() : e
        };
        x.mixin = function(t) {
            x.each(x.functions(t), function(e) {
                var n = x[e] = t[e];
                x.prototype[e] = function() {
                    var t = [this._wrapped];
                    return p.apply(t, arguments),
                    U(this, n.apply(x, t))
                }
            })
        }
        ,
        x.mixin(x),
        x.each(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function(t) {
            var e = h[t];
            x.prototype[t] = function() {
                var n = this._wrapped;
                return e.apply(n, arguments),
                "shift" !== t && "splice" !== t || 0 !== n.length || delete n[0],
                U(this, n)
            }
        }),
        x.each(["concat", "join", "slice"], function(t) {
            var e = h[t];
            x.prototype[t] = function() {
                return U(this, e.apply(this._wrapped, arguments))
            }
        }),
        x.prototype.value = function() {
            return this._wrapped
        }
        ,
        x.prototype.valueOf = x.prototype.toJSON = x.prototype.value,
        x.prototype.toString = function() {
            return "" + this._wrapped
        }
        ,
        i = [],
        void 0 !== (r = function() {
            return x
        }
        .apply(e, i)) && (t.exports = r)
    }
    ).call(this)
}
, function(t, e, n) {
    "use strict";
    (function(t, i) {
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var r = n(11)
          , o = n(31)
          , s = n(3)
          , a = n(5)
          , l = function() {
            function e(t) {
                this.id = null,
                this.fontFamily = null,
                this.xHeight = null,
                this.capHeight = null,
                this.em = null,
                this.scripts = null,
                this.png = null,
                this.kerningPairs = null,
                this.glyphWidthData = null,
                this.id = t.id,
                this.fontFamily = t.fontName,
                this.xHeight = t.xHeight,
                this.capHeight = t.capHeight,
                this.em = t.em,
                this.scripts = t.scripts,
                this.png = t.png
            }
            return Object.defineProperty(e, "SERVICE_URL", {
                get: function() {
                    return a.Site.MAIN_URL + "/v3/js/font/"
                },
                enumerable: !0,
                configurable: !0
            }),
            e.prototype.xHeightPx = function(t) {
                return void 0 === t && (t = s.Logo.LOGO_TEXT_SIZE),
                this.fUnitsToPx(this.xHeight, t)
            }
            ,
            e.prototype.capHeightPx = function(t) {
                return void 0 === t && (t = s.Logo.LOGO_TEXT_SIZE),
                this.fUnitsToPx(this.capHeight, t)
            }
            ,
            e.prototype.kerning = function(t, e) {
                var n = t.charCodeAt(0) + ";" + e.charCodeAt(0)
                  , i = 0;
                return this.kerningPairs.hasOwnProperty(n) && (i = this.kerningPairs[n]),
                i
            }
            ,
            e.prototype.glyphWidth = function(t) {
                var e = this.glyphWidthData[t.charCodeAt(0)];
                return void 0 === e && (e = null),
                e
            }
            ,
            e.prototype.fUnitsToPx = function(t, e) {
                return void 0 === e && (e = s.Logo.LOGO_TEXT_SIZE),
                e * (t / this.em)
            }
            ,
            e.init = function() {
                e.fonts = [],
                e.usedFontsIds = [];
                for (var n = 0, i = getFonts(); n < i.length; n++) {
                    var r = i[n];
                    e.fonts.push(new e(r))
                }
                null == e.helperContainer && (e.helperContainer = document.createElement("div"),
                e.helperContainer.setAttribute("class", "canvas-hidden"),
                t(".logaster3").append(e.helperContainer))
            }
            ,
            e.fromName = function(t) {
                for (var n = 0, i = e.fonts; n < i.length; n++) {
                    var r = i[n];
                    if (r.fontFamily == t)
                        return r
                }
                return null
            }
            ,
            e.fromId = function(t) {
                for (var n = 0, i = e.fonts; n < i.length; n++) {
                    var r = i[n];
                    if (r.id == t)
                        return r
                }
                return null
            }
            ,
            e.fromIds = function(t) {
                for (var n = [], i = 0, r = e.fonts; i < r.length; i++) {
                    var o = r[i];
                    -1 != t.indexOf(o.id) && n.push(o)
                }
                return n
            }
            ,
            e.match = function(t, n) {
                for (var i = !1, r = "", s = 0, a = n.texts; s < a.length; s++) {
                    r += a[s]
                }
                for (var l = 0, c = n.abbrs; l < c.length; l++) {
                    r += c[l]
                }
                for (var h = o.LanguageScript.determineScripts(r), u = 0, d = t; u < d.length; u++) {
                    var p = d[u]
                      , f = e.fromName(p.fontFamily);
                    if (!(i = o.LanguageScript.doesHaveScripts(f.scripts, h)))
                        return !1
                }
                return i
            }
            ,
            e.isLoaded = function(t) {
                return 0 === r.difference(t, e.usedFontsIds).length
            }
            ,
            e.load = function(n) {
                var o = r.uniq(r.difference(n, e.usedFontsIds));
                return 0 === o.length ? new i(function(t, e) {
                    t()
                }
                ) : new i(function(n, i) {
                    t.ajax({
                        type: "GET",
                        cache: !0,
                        url: e.SERVICE_URL,
                        dataType: "json",
                        data: {
                            fi: o.join(",")
                        },
                        success: function(t) {
                            n(t)
                        }
                    })
                }
                ).then(function(n) {
                    var r = [];
                    for (var o in n.json)
                        n.json.hasOwnProperty(o) && r.push(Number(o));
                    e.usedFontsIds = e.usedFontsIds.concat(r);
                    for (var s = e.fromIds(r), a = 0, l = s; a < l.length; a++) {
                        var c = l[a];
                        t(e.helperContainer).append("<span style=\"font-family: '" + c.fontFamily + "';\">&nbsp;</span>"),
                        c.kerningPairs = n.json[c.id].k,
                        c.glyphWidthData = n.json[c.id].w
                    }
                    for (var h = [], u = 0, d = n.urls; u < d.length; u++) {
                        var p = d[u];
                        h.push(new i(function(e, n) {
                            t.ajax({
                                type: "GET",
                                cache: !0,
                                crossDomain: !0,
                                url: p,
                                dataType: "html",
                                success: function(n) {
                                    for (var i = 0, r = t.parseHTML(n); i < r.length; i++) {
                                        var o = r[i];
                                        document.head.appendChild(o)
                                    }
                                    e()
                                }
                            })
                        }
                        ))
                    }
                    return i.all(h)
                }).then(function() {
                    return new i(function(t, e) {
                        setTimeout(t, 200)
                    }
                    )
                })
            }
            ,
            e.fonts = null,
            e.usedFontsIds = null,
            e.helperContainer = null,
            e
        }();
        e.Font = l
    }
    ).call(e, n(0), n(4))
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(1)
      , r = function() {
        function t() {
            this.matrix = new i.Matrix
        }
        return t.prototype.serialize = function() {
            return this.matrix.serialize()
        }
        ,
        t.deserialize = function(e) {
            var n = new t;
            return n.matrix = i.Matrix.deserialize(e),
            n
        }
        ,
        t.prototype.clone = function() {
            return t.deserialize(this.serialize())
        }
        ,
        t.prototype.equals = function(t) {
            return this.matrix.equals(t.matrix)
        }
        ,
        t
    }();
    e.Maths = r
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = function() {
        function t(t, e) {
            void 0 === t && (t = 0),
            void 0 === e && (e = 0),
            this.x = t,
            this.y = e
        }
        return Object.defineProperty(t.prototype, "left", {
            get: function() {
                return this.x
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "top", {
            get: function() {
                return this.y
            },
            enumerable: !0,
            configurable: !0
        }),
        t.prototype.equals = function(t) {
            return this.x === t.x && this.y === t.y
        }
        ,
        t
    }();
    e.Point = i
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(22)
      , r = n(1)
      , o = n(14)
      , s = function() {
        function t(t, e) {
            this._item = null,
            this.context2d = null,
            this.zoom = 1,
            this.transformable = null,
            this.offsetMatrix = null,
            this._item = t,
            this.context2d = e
        }
        return Object.defineProperty(t.prototype, "item", {
            get: function() {
                return this._item
            },
            enumerable: !0,
            configurable: !0
        }),
        t.prototype.draw = function(t) {
            void 0 === t && (t = null)
        }
        ,
        t.prototype.getFill = function(t) {
            return void 0 === t && (t = null),
            null === t ? this.item.fill : t.getFill(this.item.fill)
        }
        ,
        t.prototype.resetTransformable = function() {
            this.transformable = null
        }
        ,
        t.prototype.initializeTransformable = function() {
            this.transformable = new i.Transformable(this._item.bounds.width,this._item.bounds.height,this.getMatrixForTransformable(),this)
        }
        ,
        t.prototype.getMatrixForTransformable = function() {
            var t = new r.Matrix;
            return t.translate(this._item.bounds.x, this._item.bounds.y),
            t.concat(this._item.maths.matrix),
            t.scale(this.zoom, this.zoom),
            null !== this.offsetMatrix && t.concat(this.offsetMatrix),
            t
        }
        ,
        t.prototype.drawBorder = function() {
            var t = this.transformable.matrix.transformPoint(new o.Point(0,0))
              , e = this.transformable.matrix.transformPoint(new o.Point(this.transformable.width,0))
              , n = this.transformable.matrix.transformPoint(new o.Point(this.transformable.width,this.transformable.height))
              , i = this.transformable.matrix.transformPoint(new o.Point(0,this.transformable.height));
            this.context2d.save(),
            this.context2d.strokeStyle = "#9c9c9c",
            this.context2d.lineWidth = 1,
            this.context2d.beginPath(),
            this.context2d.moveTo(t.x, t.y),
            this.context2d.lineTo(e.x, e.y),
            this.context2d.lineTo(n.x, n.y),
            this.context2d.lineTo(i.x, i.y),
            this.context2d.lineTo(t.x, t.y),
            this.context2d.stroke(),
            this.context2d.restore()
        }
        ,
        t.prototype.getMatrixFromTransformable = function() {
            var t = this.transformable.matrix.clone()
              , e = new r.Matrix;
            return null !== this.offsetMatrix && (e.concat(this.offsetMatrix),
            e.invert(),
            t.concat(e)),
            e.identity(),
            e.scale(this.zoom, this.zoom),
            e.invert(),
            t.concat(e),
            e.identity(),
            e.translate(this._item.bounds.x, this._item.bounds.y),
            e.invert(),
            e.concat(t),
            e
        }
        ,
        t.prototype.getMatrixForContext2d = function() {
            return null !== this.transformable ? this.getMatrixFromTransformable() : this._item.maths.matrix.clone()
        }
        ,
        t
    }();
    e.LogoItemView = s
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = n(10)
          , r = n(84)
          , o = n(2)
          , s = function() {
            function e() {
                this.items = []
            }
            return Object.defineProperty(e, "TEXT_SIZE", {
                get: function() {
                    return 24
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "BRAND_PRODUCT_URL", {
                get: function() {
                    return ""
                },
                enumerable: !0,
                configurable: !0
            }),
            e.prototype.getSizeTypeMap = function() {
                return null
            }
            ,
            Object.defineProperty(e.prototype, "templates", {
                get: function() {
                    return null
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "widthMm", {
                get: function() {
                    return this.getSizeTypeMap()[this.sizeType].width
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "heightMm", {
                get: function() {
                    return this.getSizeTypeMap()[this.sizeType].height
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "isTemplate", {
                get: function() {
                    return null === this.template
                },
                enumerable: !0,
                configurable: !0
            }),
            e.prototype.getLogoItem = function(t) {
                for (var e = null, n = 0, r = this.items; n < r.length; n++) {
                    var o = r[n];
                    if (o.type === i.BPItem.LOGO && o.group == t) {
                        e = o;
                        break
                    }
                }
                return e
            }
            ,
            e.prototype.getItem = function(t) {
                for (var e = null, n = 0, i = this.items; n < i.length; n++) {
                    var e = i[n];
                    if (e.type === t) {
                        e = e;
                        break
                    }
                }
                return e
            }
            ,
            e.prototype.clone = function() {
                return null
            }
            ,
            e.prototype.isValid = function() {
                var t = !0;
                return 0 === this.items.length ? t = !1 : 1 === this.items.length && this.items[0].type === i.BPItem.TEXT && 0 === this.items[0].content.length && (t = !1),
                t
            }
            ,
            e.prototype.getItemByTarget = function(t) {
                var e = null;
                if (null === t)
                    return e;
                for (var n = 0, i = this.items; n < i.length; n++) {
                    var r = i[n];
                    if (r.target === t) {
                        e = r;
                        break
                    }
                }
                return e
            }
            ,
            e.getTemplateById = function(t, e) {
                for (var n = null, i = 0, r = e; i < r.length; i++) {
                    var o = r[i];
                    if (o.id === t) {
                        n = o;
                        break
                    }
                }
                return n
            }
            ,
            e.prototype.usedFonts = function() {
                for (var t = [], e = 0, n = this.items; e < n.length; e++) {
                    var r = n[e];
                    switch (r.type) {
                    case i.BPItem.TEXT:
                        -1 === t.indexOf(r.font.id) && t.push(r.font.id);
                        break;
                    case i.BPItem.LOGO:
                        if (!this.isTemplate)
                            for (var o = 0, s = r.logo.usedFonts(); o < s.length; o++) {
                                var a = s[o];
                                -1 === t.indexOf(a) && t.push(a)
                            }
                    }
                }
                return t
            }
            ,
            e.prototype.update = function() {}
            ,
            e.prototype.save = function() {}
            ,
            e.create = function(t, e, n) {
                void 0 === n && (n = null);
                var o = e.clone()
                  , s = r.BrandProductBuilder.getInstance();
                o.id = null,
                o.template = null !== e.template ? e.template : e,
                o.sizeType = e.sizeType,
                o.brandId = t.id,
                o.brand = t;
                for (var a = 0, l = o.items; a < l.length; a++) {
                    var c = l[a];
                    switch (c.type) {
                    case i.BPItem.TEXT:
                        s.buildTextItem(t, c, n);
                        break;
                    case i.BPItem.LOGO:
                        s.buildLogoItem(t, c, n);
                        break;
                    case i.BPItem.SVG:
                        s.buildSvgItem(t, c, n)
                    }
                }
                return o
            }
            ,
            e.createBrandProducts = function(n, i, r, o) {
                return void 0 === o && (o = null),
                r(i, o).then(function(i) {
                    for (var r = [], o = 0, s = i; o < s.length; o++) {
                        var a = s[o];
                        r.push(e.create(n, a))
                    }
                    return new t(function(t, e) {
                        t(r)
                    }
                    )
                })
            }
            ,
            e.prototype.getProductBG = function() {
                return o.ColorRange.BG_WHITE
            }
            ,
            e
        }();
        e.BrandProduct = s
    }
    ).call(e, n(4))
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = function() {
        function t() {}
        return t.transform = function(e, n) {
            var i;
            switch (n) {
            case t.UPPERCASE:
                i = e.toUpperCase();
                break;
            case t.LOWERCASE:
                i = e.toLowerCase();
                break;
            case t.CAPITALIZE:
                i = e.charAt(0).toUpperCase() + e.substr(1).toLowerCase();
                break;
            default:
                i = e
            }
            return i
        }
        ,
        t.detectTransform = function(e) {
            for (var n = t.NONE, i = !1, r = !1, o = !1, s = 0; s < e.length; s++) {
                var a = e[s];
                a === a.toUpperCase() ? 0 === s ? o = !0 : r = !0 : i = !0
            }
            return o && !r ? n = t.CAPITALIZE : o && !i ? n = t.UPPERCASE : !i || o || r || (n = t.LOWERCASE),
            n
        }
        ,
        t.NONE = "",
        t.LOWERCASE = "L",
        t.UPPERCASE = "U",
        t.CAPITALIZE = "C",
        t
    }();
    e.TextTransform = i
}
, function(t, e, n) {
    "use strict";
    (function(t, i) {
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var r = n(1)
          , o = function() {
            function e(t, e, n) {
                void 0 === n && (n = null),
                this.layers = null,
                this.height = 0,
                this.layers = e,
                this.height = t,
                this.canvasRef = n
            }
            return e.prototype.draw = function(n, i, r, o) {
                var s = this;
                if (void 0 === r && (r = e.identityMatrix),
                void 0 === o && (o = null),
                -1 !== e.loadedShowcases.indexOf(this)) {
                    for (var a = [], l = 0, c = this.layers; l < c.length; l++) {
                        var h = c[l];
                        a.push(h.loadDynamic(n))
                    }
                    return t.all(a).then(function() {
                        return s.drawLayers(n, i, r, s.height, o)
                    }).then(function() {
                        return s.disableAnimatedPreloader(i)
                    })
                }
                for (var u = [], d = 0, p = this.layers; d < p.length; d++) {
                    var h = p[d];
                    u.push(h.load()),
                    u.push(h.loadDynamic(n))
                }
                var f = r.clone()
                  , g = this;
                return t.all(u).then(function() {
                    g.drawLayers(n, i, f, g.height, o),
                    e.loadedShowcases.push(g)
                }).then(function() {
                    return s.disableAnimatedPreloader(i)
                })
            }
            ,
            e.prototype.drawLayers = function(t, e, n, r, o) {
                var s, a = e, l = null, c = null;
                if (null == this.canvasRef) {
                    s = i(a.canvas),
                    this.disableContextMenu(s),
                    c = s.data("lid"),
                    l = c || null;
                    for (var h = 0, u = this.layers; h < u.length; h++) {
                        var d = u[h];
                        d.draw(t, a, n, r, l, o)
                    }
                } else {
                    var p = i("canvas[data-scref='" + this.canvasRef + "']");
                    this.disableContextMenu(p);
                    for (var f = 0; f < p.length; f++) {
                        a = p[f].getContext("2d"),
                        s = i(p[f]),
                        0 == r && a.clearRect(0, 0, a.canvas.width, a.canvas.height);
                        var g = !1
                          , m = s.data("bg")
                          , _ = s.data("el");
                        m && _ && (g = !0),
                        c = s.data("lid"),
                        null !== c && void 0 !== c && (l = c);
                        for (var v = 0, y = this.layers; v < y.length; v++) {
                            var d = y[v];
                            g && d.update(m, _),
                            d.draw(t, a, n, r, l, o)
                        }
                    }
                }
            }
            ,
            e.prototype.update = function(t, e) {
                for (var n = 0, i = this.layers; n < i.length; n++) {
                    i[n].update(t, e)
                }
            }
            ,
            e.prototype.reset = function() {
                for (var t = 0, e = this.layers; t < e.length; t++) {
                    e[t].reset()
                }
            }
            ,
            e.prototype.disableContextMenu = function(t) {}
            ,
            e.prototype.disableAnimatedPreloader = function(t) {
                var e = i(null != this.canvasRef ? "canvas[data-scref='" + this.canvasRef + "']" : t.canvas);
                e.removeClass("animated-preloader"),
                e.siblings(".animated-preloader-src").remove()
            }
            ,
            e.identityMatrix = new r.Matrix,
            e.loadedShowcases = [],
            e
        }();
        e.LogoShowcase = o
    }
    ).call(e, n(4), n(0))
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        var i = this && this.__extends || function() {
            var t = Object.setPrototypeOf || {
                __proto__: []
            }instanceof Array && function(t, e) {
                t.__proto__ = e
            }
            || function(t, e) {
                for (var n in e)
                    e.hasOwnProperty(n) && (t[n] = e[n])
            }
            ;
            return function(e, n) {
                function i() {
                    this.constructor = e
                }
                t(e, n),
                e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                new i)
            }
        }();
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var r = n(25)
          , o = function(e) {
            function n(t) {
                var n = e.call(this) || this;
                return n.type = r.LayerType.Logo,
                n.items = t,
                n
            }
            return i(n, e),
            n.prototype.loadDynamic = function(e) {
                for (var n = [], i = 0, r = this.items; i < r.length; i++) {
                    var o = r[i];
                    n.push(o.loadDynamic(e))
                }
                return t.all(n)
            }
            ,
            n.prototype.draw = function(t, e, n, i, r) {
                for (var o = 0, s = this.items; o < s.length; o++) {
                    s[o].draw(t, e, n, r)
                }
            }
            ,
            n
        }(r.Layer);
        e.LogoLayer = o
    }
    ).call(e, n(4))
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        var i = this && this.__extends || function() {
            var t = Object.setPrototypeOf || {
                __proto__: []
            }instanceof Array && function(t, e) {
                t.__proto__ = e
            }
            || function(t, e) {
                for (var n in e)
                    e.hasOwnProperty(n) && (t[n] = e[n])
            }
            ;
            return function(e, n) {
                function i() {
                    this.constructor = e
                }
                t(e, n),
                e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                new i)
            }
        }();
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var r = n(25)
          , o = n(2)
          , s = n(54)
          , a = function(e) {
            function n(t, n, i, r, o) {
                void 0 === n && (n = null),
                void 0 === i && (i = null),
                void 0 === r && (r = "multiply"),
                void 0 === o && (o = null);
                var s = e.call(this) || this;
                return s.image = null,
                s.imageUrl = null == t ? null : s.getFullUrl(t),
                s.bgColor = n,
                s.elColor = i,
                s.blendMode = r,
                s.pattern = o,
                s
            }
            return i(n, e),
            n.prototype.load = function() {
                if (null != this.imageUrl) {
                    var e = this;
                    return new t(function(t, n) {
                        e.image = new Image,
                        e.image.crossOrigin = "anonymous",
                        e.image.src = e.imageUrl,
                        e.image.onload = function() {
                            t()
                        }
                        ,
                        e.image.onerror = function() {
                            n()
                        }
                    }
                    )
                }
            }
            ,
            n.prototype.getFill = function(t) {
                return this.bgColor === o.ColorRange.BG_TRANSPARENT && null === this.imageUrl ? null : t.colorRange.getFill(this.bgColor, this.elColor)
            }
            ,
            n.prototype.draw = function(t, e, n, i, r) {
                var o = this.getFill(t);
                if (e.save(),
                null !== n && n.setToContext2d(e),
                null != o) {
                    var a = s.Context2DManager.getCanvas();
                    a.width = e.canvas.width,
                    a.height = 0 == i ? e.canvas.height : i;
                    var l = a.getContext("2d");
                    if (l.save(),
                    o.toContext2d(l),
                    l.fillRect(0, 0, e.canvas.width, 0 == i ? e.canvas.height : i),
                    null == this.imageUrl)
                        return e.drawImage(l.canvas, 0, 0),
                        void e.restore();
                    if (l.globalCompositeOperation = this.blendMode,
                    null != this.pattern) {
                        var c = l.createPattern(this.image, this.pattern);
                        l.fillStyle = c,
                        l.fillRect(0, 0, l.canvas.width, l.canvas.height)
                    } else
                        l.drawImage(this.image, 0, 0),
                        l.globalCompositeOperation = "destination-in",
                        l.drawImage(this.image, 0, 0);
                    l.restore(),
                    e.drawImage(l.canvas, 0, 0)
                } else
                    null !== this.image && e.drawImage(this.image, 0, 0);
                e.restore()
            }
            ,
            n
        }(r.Layer);
        e.ImageLayer = a
    }
    ).call(e, n(4))
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = n(1)
          , r = n(6)
          , o = n(50)
          , s = n(2)
          , a = n(5)
          , l = n(3)
          , c = n(28)
          , h = n(54)
          , u = function() {
            function e(t, e, n, i, r, o, a) {
                void 0 === r && (r = null),
                void 0 === o && (o = !1),
                void 0 === a && (a = s.ColorRange.EL_LOGO1),
                this.wmImage = null,
                this.wmLogoOpacity = .8,
                this.matrix = null,
                this.wmMatrix = null,
                this.view = null,
                this.tempContext2d = null,
                this.type = t,
                this.withSlogan = o,
                this.width = e,
                this.height = n,
                this.matrixSrc = i,
                this.colorCombination = c.ColorCombination.getCombination(null, r, a),
                this.srcColorCombination = this.colorCombination
            }
            return e.prototype.loadDynamic = function(n) {
                var i = n.getLogo(this.type, this.withSlogan);
                if (i.status !== l.Logo.STATUS_S || i.status !== l.Logo.STATUS_L) {
                    var r = this
                      , o = this.getWatermarkUrl(n);
                    if (!(null !== this.wmImage && this.wmImage.width > 0 && this.wmImage.height > 0 && -1 !== this.wmImage.src.indexOf(o))) {
                        this.wmMatrix = null;
                        return void 0 !== e.wmImagesPromises[o] ? e.wmImagesPromises[o] : new t(function(t, e) {
                            r.wmImage = new Image,
                            r.wmImage.crossOrigin = "anonymous",
                            r.wmImage.src = r.getWatermarkUrl(n),
                            r.wmImage.onload = function() {
                                t()
                            }
                            ,
                            r.wmImage.onerror = function() {
                                e()
                            }
                        }
                        )
                    }
                }
            }
            ,
            e.prototype.draw = function(t, e, n, i) {
                this.initCachedProps(t, n),
                this.view.logo = t.getLogo(this.type, this.withSlogan, i),
                this.colorCombination.colorRange = this.view.logo.colorRange,
                this.view.draw(this.colorCombination),
                e.save();
                var r = h.Context2DManager.getCanvas();
                r.width = e.canvas.width,
                r.height = e.canvas.height,
                this.tempContext2d = r.getContext("2d"),
                this.drawWatermarkBg(t, i, e),
                this.clearContext2d(this.tempContext2d),
                this.tempContext2d.save(),
                this.matrix.setToContext2d(this.tempContext2d),
                this.tempContext2d.drawImage(this.view.context2d.canvas, 0, 0),
                this.tempContext2d.restore(),
                this.drawWatermarkLogo(t, i),
                e.drawImage(this.tempContext2d.canvas, 0, 0)
            }
            ,
            e.prototype.drawWatermarkBg = function(t, n, r) {
                if (this.needWatermark(t, n)) {
                    if (null === this.wmMatrix) {
                        var o = (this.wmImage.width - this.width) / 2
                          , s = (this.wmImage.height - this.height) / 2;
                        this.wmMatrix = new i.Matrix,
                        this.wmMatrix.translate(-o, -s),
                        this.wmMatrix.concat(this.matrix)
                    }
                    this.clearContext2d(this.tempContext2d);
                    var a = this.colorCombination.getFill(null);
                    null === a && (a = e.wmDefaultFill),
                    this.tempContext2d.save(),
                    a.toContext2d(this.tempContext2d),
                    this.tempContext2d.fillRect(0, 0, this.tempContext2d.canvas.width, this.tempContext2d.canvas.height),
                    this.wmMatrix.setToContext2d(this.tempContext2d),
                    this.tempContext2d.globalCompositeOperation = "destination-in",
                    this.tempContext2d.drawImage(this.wmImage, 0, 0),
                    this.tempContext2d.restore(),
                    r.save(),
                    r.globalAlpha = this.getBgWmOpacity(t),
                    r.drawImage(this.tempContext2d.canvas, 0, 0),
                    r.restore()
                }
            }
            ,
            e.prototype.drawWatermarkLogo = function(t, e) {
                this.needWatermark(t, e) && (this.tempContext2d.save(),
                this.tempContext2d.globalCompositeOperation = "destination-out",
                this.tempContext2d.globalAlpha = this.wmLogoOpacity,
                this.wmMatrix.setToContext2d(this.tempContext2d),
                this.tempContext2d.drawImage(this.wmImage, 0, 0),
                this.tempContext2d.restore())
            }
            ,
            e.prototype.initCachedProps = function(t, e) {
                if (null === this.matrix && (this.matrix = i.Matrix.deserialize(this.matrixSrc),
                null !== e && this.matrix.concat(e)),
                null === this.view) {
                    var n = document.createElement("canvas");
                    n.width = this.width,
                    n.height = this.height,
                    this.view = new o.LogoView(n.getContext("2d")),
                    this.view.width = this.width,
                    this.view.height = this.height,
                    this.view.padding = 0
                }
            }
            ,
            e.prototype.getWatermarkUrl = function(t) {
                var e, n = this.type;
                return this.type >= l.Logo.START_INDEX && (n = t.getLogo(this.type).makerType),
                this.width <= 155 ? e = n === l.Logo.HORIZONTAL || n === l.Logo.TEXT ? "watermarks/small_horizontal.png" : "watermarks/small_square.png" : this.width > 150 && this.width <= 340 ? e = n === l.Logo.HORIZONTAL || n === l.Logo.TEXT ? "watermarks/medium_horizontal.png" : "watermarks/medium_square.png" : this.width > 340 && this.width <= 410 ? e = "watermarks/large_horizontal.png" : this.width > 410 && (e = "watermarks/extra_large_horizontal.png"),
                this.getFullUrl(e)
            }
            ,
            e.prototype.needWatermark = function(t, e) {
                void 0 === e && (e = null);
                var n = t.getLogo(this.type, this.withSlogan, e);
                return false;
            }
            ,
            e.prototype.getFullUrl = function(t) {
                return a.Site.STATIC_ROOT_URL + "/static/v3/showcase/" + t
            }
            ,
            e.prototype.clearContext2d = function(t) {
                i.Matrix.resetContext2d(t),
                t.clearRect(0, 0, t.canvas.width, t.canvas.height)
            }
            ,
            e.prototype.getBgWmOpacity = function(t) {
                var n = this.view.logo.colorRange.getFill(this.colorCombination.bgColor)
                  , i = this.view.logo.colorRange.getFill(this.colorCombination.bgColor, this.colorCombination.elColor);
                null === i && (i = e.wmDefaultFill);
                var r = n.hex
                  , o = i.hex
                  , a = r + ";" + o;
                if (void 0 !== e.wmAlphaCache[a])
                    return e.wmAlphaCache[a];
                for (var l = .05, c = l; c <= .5; c += .03) {
                    var h = s.ColorRange.blendColorsAlpha(r, o, c)
                      , u = s.ColorRange.contrast(r, h);
                    if (l = c,
                    u >= 1.1)
                        break
                }
                return e.wmAlphaCache[a] = l,
                l
            }
            ,
            e.wmImagesPromises = {},
            e.wmDefaultFill = new r.Fill("000000"),
            e.wmAlphaCache = {},
            e
        }();
        e.LogoLayerItem = u
    }
    ).call(e, n(4))
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(1)
      , r = function() {
        function t(t, e, n, r) {
            void 0 === t && (t = 0),
            void 0 === e && (e = 0),
            void 0 === n && (n = new i.Matrix),
            this.changed = null,
            this.width = t,
            this.height = e,
            this.matrix = n,
            this.owner = r
        }
        return t
    }();
    e.Transformable = r
}
, function(module, exports, __webpack_require__) {
    "use strict";
    function icon(t, e, n, i, r, o) {
        return void 0 === n && (n = Align.Bottom),
        void 0 === i && (i = null),
        void 0 === r && (r = IconShape.Any),
        void 0 === o && (o = LineWidth.Any),
        new IconMapItem(t,e,n,i,r,o)
    }
    function text(t, e, n, i, r, o, s, a, l) {
        return void 0 === i && (i = 0),
        void 0 === r && (r = 0),
        void 0 === o && (o = 0),
        void 0 === s && (s = TextTransform_1.TextTransform.NONE),
        void 0 === a && (a = Align.Bottom),
        void 0 === l && (l = null),
        new TextMapItem(t,e,n,i,r,o,s,a,l)
    }
    function abbr(t, e, n, i, r, o, s, a) {
        return void 0 === i && (i = 0),
        void 0 === r && (r = TextTransform_1.TextTransform.NONE),
        void 0 === o && (o = Align.Bottom),
        void 0 === s && (s = 0),
        void 0 === a && (a = null),
        new AbbrMapItem(t,e,n,i,r,o,s,a)
    }
    function line(t, e, n, i, r, o) {
        return void 0 === e && (e = 0),
        void 0 === n && (n = 0),
        void 0 === i && (i = 0),
        void 0 === r && (r = 0),
        void 0 === o && (o = null),
        new LineMapItem(t,e,n,i,r,o)
    }
    function translate(t, e) {
        return new TranslateMapItem(t,e)
    }
    function slogan(t, e, n, i, r, o, s, a, l) {
        return void 0 === i && (i = 0),
        void 0 === r && (r = 0),
        void 0 === o && (o = 0),
        void 0 === s && (s = TextTransform_1.TextTransform.NONE),
        void 0 === a && (a = Align.Bottom),
        void 0 === l && (l = null),
        new SloganMapItem(t,e,n,i,r,o,s,a,l)
    }
    var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(exports, "__esModule", {
        value: !0
    });
    var TextTransform_1 = __webpack_require__(17), LogoItem_1 = __webpack_require__(7), Align;
    !function(t) {
        t.Top = "T",
        t.Bottom = "B",
        t.Left = "L",
        t.Right = "R"
    }(Align = exports.Align || (exports.Align = {}));
    var LogoMakerType;
    !function(t) {
        t[t.Vertical = 1] = "Vertical",
        t[t.Horizontal = 2] = "Horizontal",
        t[t.Text = 3] = "Text",
        t[t.Icon = 4] = "Icon"
    }(LogoMakerType = exports.LogoMakerType || (exports.LogoMakerType = {}));
    var IconShape;
    !function(t) {
        t.Any = "A",
        t.Horizontal = "H",
        t.Vertical = "V",
        t.Square = "S"
    }(IconShape = exports.IconShape || (exports.IconShape = {}));
    var LineWidth;
    !function(t) {
        t.Any = "A",
        t.Light = "L",
        t.Medium = "M",
        t.Bold = "B",
        t.Filled = "F"
    }(LineWidth = exports.LineWidth || (exports.LineWidth = {}));
    var LogoMap = function(_super) {
        function LogoMap(t) {
            var e = _super.call(this) || this;
            e.id = null,
            e.parentId = null,
            e.familyId = null,
            e.familyName = null,
            e.texts = null,
            e.slogans = null,
            e.abbrs = null,
            e.mapTextsCount = 0,
            e.mapAbbrsCount = 0,
            e.type = null,
            e.icon = null,
            e.itype = null,
            e.makeLogoArgs = null,
            e.mapSlogans = [];
            for (var n = 0, i = t; n < i.length; n++) {
                var r = i[n];
                r.type === MapItem.ABBR ? e.mapAbbrsCount++ : r.type === MapItem.TEXT ? e.mapTextsCount++ : r.type === MapItem.SLOGAN && e.mapSlogans.push(r),
                e.push(r)
            }
            return e
        }
        return __extends(LogoMap, _super),
        LogoMap.deserialize = function(source) {
            var logoMap = new LogoMap(eval("[" + source.r + "]"));
            return logoMap.id = source.mi,
            logoMap.parentId = source.pmi,
            logoMap.type = source.t,
            logoMap.familyId = source.fi,
            logoMap.familyName = source.fn,
            logoMap.itype = source.it,
            logoMap
        }
        ,
        LogoMap
    }(Array);
    exports.LogoMap = LogoMap;
    var MapItem = function() {
        function t() {
            this.type = 0,
            this.prevItem = null,
            this.nextItem = null,
            this.blendModeRule = null
        }
        return Object.defineProperty(t, "ICON", {
            get: function() {
                return 1
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "TEXT", {
            get: function() {
                return 2
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "LINE", {
            get: function() {
                return 3
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "TRANSLATE", {
            get: function() {
                return 4
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "ABBR", {
            get: function() {
                return 5
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t, "SLOGAN", {
            get: function() {
                return 6
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "logoItemType", {
            get: function() {
                var e = LogoItem_1.LogoItem.UNKNOWN;
                switch (this.type) {
                case t.TEXT:
                    e = LogoItem_1.LogoItem.LOGO_NAME;
                    break;
                case t.SLOGAN:
                    e = LogoItem_1.LogoItem.TAGLINE;
                    break;
                case t.ABBR:
                    e = LogoItem_1.LogoItem.MONOGRAM
                }
                return e
            },
            enumerable: !0,
            configurable: !0
        }),
        t
    }();
    exports.MapItem = MapItem;
    var IconMapItem = function(t) {
        function e(e, n, i, r, o, s) {
            void 0 === e && (e = 0),
            void 0 === n && (n = 0),
            void 0 === i && (i = Align.Bottom),
            void 0 === r && (r = null),
            void 0 === o && (o = IconShape.Any),
            void 0 === s && (s = LineWidth.Any);
            var a = t.call(this) || this;
            return a.iconShape = IconShape.Any,
            a.lineWidth = LineWidth.Any,
            a.type = MapItem.ICON,
            a.width = e,
            a.height = n,
            a.align = i,
            a.blendModeRule = r,
            a
        }
        return __extends(e, t),
        e
    }(MapItem);
    exports.IconMapItem = IconMapItem;
    var TextMapItem = function(t) {
        function e(e, n, i, r, o, s, a, l, c) {
            void 0 === e && (e = 0),
            void 0 === n && (n = 0),
            void 0 === i && (i = ""),
            void 0 === r && (r = 0),
            void 0 === o && (o = 0),
            void 0 === s && (s = 0),
            void 0 === a && (a = TextTransform_1.TextTransform.NONE),
            void 0 === l && (l = Align.Bottom),
            void 0 === c && (c = null);
            var h = t.call(this) || this;
            return h.type = MapItem.TEXT,
            h.width = e,
            h.height = n,
            h.minChars = r,
            h.maxChars = o,
            h.fontFamily = i,
            h.kerning = s,
            h.transform = a,
            h.align = l,
            h.blendModeRule = c,
            h
        }
        return __extends(e, t),
        e
    }(MapItem);
    exports.TextMapItem = TextMapItem;
    var SloganMapItem = function(t) {
        function e() {
            var e = null !== t && t.apply(this, arguments) || this;
            return e.type = MapItem.SLOGAN,
            e
        }
        return __extends(e, t),
        e
    }(TextMapItem);
    exports.SloganMapItem = SloganMapItem;
    var AbbrMapItem = function(t) {
        function e(e, n, i, r, o, s, a, l) {
            void 0 === e && (e = 0),
            void 0 === n && (n = 0),
            void 0 === i && (i = ""),
            void 0 === r && (r = 0),
            void 0 === o && (o = TextTransform_1.TextTransform.NONE),
            void 0 === s && (s = Align.Bottom),
            void 0 === a && (a = 0),
            void 0 === l && (l = null);
            var c = t.call(this) || this;
            return c.type = MapItem.ABBR,
            c.width = e,
            c.height = n,
            c.fontFamily = i,
            c.kerning = r,
            c.transform = o,
            c.align = s,
            c.length = a,
            c.blendModeRule = l,
            c
        }
        return __extends(e, t),
        e
    }(MapItem);
    exports.AbbrMapItem = AbbrMapItem;
    var LineMapItem = function(_super) {
        function LineMapItem(t, e, n, i, r, o) {
            void 0 === t && (t = 0),
            void 0 === e && (e = 0),
            void 0 === n && (n = 0),
            void 0 === i && (i = 0),
            void 0 === r && (r = 0),
            void 0 === o && (o = null);
            var s = _super.call(this) || this;
            return s.positionMatrix = null,
            s.type = MapItem.LINE,
            s.lineWidth = t,
            s.p1x = e,
            s.p1y = n,
            s.p2x = i,
            s.p2y = r,
            s.blendModeRule = o,
            s
        }
        return __extends(LineMapItem, _super),
        LineMapItem.prototype.calculate = function(attrName, mw, mh, iw, ih) {
            return "number" == typeof this[attrName] ? this[attrName] : "string" == typeof this[attrName] ? eval(this[attrName]) : void 0
        }
        ,
        LineMapItem
    }(MapItem);
    exports.LineMapItem = LineMapItem;
    var TranslateMapItem = function(t) {
        function e(e, n) {
            void 0 === e && (e = 0),
            void 0 === n && (n = 0);
            var i = t.call(this) || this;
            return i.type = MapItem.TRANSLATE,
            i.x = e,
            i.y = n,
            i
        }
        return __extends(e, t),
        e
    }(MapItem);
    exports.TranslateMapItem = TranslateMapItem,
    exports.icon = icon,
    exports.text = text,
    exports.abbr = abbr,
    exports.line = line,
    exports.translate = translate,
    exports.slogan = slogan
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = n(1)
          , r = function() {
            function e() {
                this._showcases = null,
                this._textMap = null
            }
            return Object.defineProperty(e.prototype, "showcases", {
                get: function() {
                    return null !== this._showcases ? this._showcases : (this._showcases = this.getShowcases(),
                    this._showcases)
                },
                enumerable: !0,
                configurable: !0
            }),
            e.prototype.getShowcases = function() {
                return null
            }
            ,
            e.prototype.textMap = function(t) {
                return null
            }
            ,
            e.prototype.draw = function(e, n) {
                for (var r = new i.Matrix, o = [], s = 0, a = this.showcases; s < a.length; s++) {
                    var l = a[s];
                    o.push(l.draw(e, n, r, this.textMap(e))),
                    r.translate(0, l.height)
                }
                return t.all(o)
            }
            ,
            e.prototype.update = function(t, e) {
                for (var n = 0, i = this.showcases; n < i.length; n++) {
                    i[n].update(t, e)
                }
            }
            ,
            e.prototype.reset = function() {
                for (var t = 0, e = this.showcases; t < e.length; t++) {
                    e[t].reset()
                }
            }
            ,
            e
        }();
        e.Presentation = r
    }
    ).call(e, n(4))
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i, r = n(5), o = n(1);
    !function(t) {
        t[t.Any = 0] = "Any",
        t[t.Logo = 1] = "Logo",
        t[t.BusinessCard = 2] = "BusinessCard",
        t[t.SocialProduct = 3] = "SocialProduct"
    }(i = e.LayerType || (e.LayerType = {}));
    var s = function() {
        function t() {
            this.type = i.Any,
            this.width = 0,
            this.height = 0
        }
        return t.prototype.getFullUrl = function(t) {
            return r.Site.STATIC_ROOT_URL + "/static/v3/showcase/" + t
        }
        ,
        t.prototype.load = function() {}
        ,
        t.prototype.loadDynamic = function(t) {}
        ,
        t.prototype.draw = function(t, e, n, i, r, o) {}
        ,
        t.prototype.update = function(t, e) {}
        ,
        t.prototype.reset = function() {}
        ,
        t.prototype.clearContext2d = function(t) {
            o.Matrix.resetContext2d(t),
            t.clearRect(0, 0, t.canvas.width, t.canvas.height)
        }
        ,
        t
    }();
    e.Layer = s
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(28)
      , r = function() {
        function t(t, e) {
            void 0 === e && (e = null),
            this._colorCombination = i.ColorCombination.getCombination(null, t, e)
        }
        return t.prototype.serialize = function() {
            return "string" == typeof this._colorCombination.elColor ? this._colorCombination.elColor : null === this._colorCombination.elColor ? this._colorCombination.bgColor.toString() : this._colorCombination.bgColor + ";" + this._colorCombination.elColor
        }
        ,
        t.deserialize = function(e) {
            var n, i = "0123456789abcdefABCDEF", r = !1, o = e;
            if (6 == o.length) {
                r = !0;
                for (var s = 0, a = o; s < a.length; s++) {
                    var l = a[s];
                    if (i.indexOf(l) < 0) {
                        r = !1;
                        break
                    }
                }
            }
            if (3 === o.length && -1 === o.indexOf(";")) {
                r = !0;
                for (var c = 0, h = o; c < h.length; c++) {
                    var l = h[c];
                    if (i.indexOf(l) < 0) {
                        r = !1;
                        break
                    }
                }
                o = o[0] + o[0] + o[1] + o[1] + o[2] + o[2]
            }
            if (r)
                n = new t(null,o);
            else {
                var u = o.split(";");
                n = 1 === u.length ? new t(parseInt(o)) : new t(parseInt(u[0]),parseInt(u[1]))
            }
            return n
        }
        ,
        t.prototype.clone = function() {
            return t.deserialize(this.serialize())
        }
        ,
        t.prototype.getColorCombination = function(t) {
            return this._colorCombination.colorRange = t,
            this._colorCombination
        }
        ,
        t.prototype.setColor = function(t, e) {
            this._colorCombination = i.ColorCombination.getCombination(t, null, e)
        }
        ,
        t
    }();
    e.BPItemFill = r
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(13)
      , o = n(1)
      , s = function(t) {
        function e() {
            var e = null !== t && t.apply(this, arguments) || this;
            return e.kerning = 0,
            e
        }
        return i(e, t),
        e.prototype.serialize = function() {
            var t = this.matrix.serialize();
            return 0 !== this.kerning && (t += ";" + this.kerning),
            t
        }
        ,
        e.deserialize = function(t) {
            var n = new e
              , i = t.split(";");
            return n.matrix = o.Matrix.deserialize(i[0]),
            void 0 !== i[1] && (n.kerning = Number(i[1])),
            n
        }
        ,
        e.prototype.clone = function() {
            return e.deserialize(this.serialize())
        }
        ,
        e.prototype.equals = function(e) {
            return t.prototype.equals.call(this, e) && this.kerning === e.kerning
        }
        ,
        e
    }(r.Maths);
    e.TextMaths = s
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(2)
      , r = n(6)
      , o = function() {
        function t(e, n, i) {
            void 0 === n && (n = null),
            this.index = t.CUSTOM_INDEX,
            this.colorRange = null,
            this.index = e,
            this.elColor = i,
            this.bgColor = n
        }
        return t.getCombination = function(e, n, i) {
            void 0 === n && (n = null);
            for (var r, o = 0, s = t.editable; o < s.length; o++)
                if (r = s[o],
                r.bgColor === n && r.elColor === i)
                    return r.colorRange = e,
                    r;
            for (var a = 0, l = t.custom; a < l.length; a++)
                if (r = l[a],
                r.bgColor === n && r.elColor === i)
                    return r.colorRange = e,
                    r;
            return r = new t(-1,n,i),
            r.colorRange = e,
            t.custom.push(r),
            r
        }
        ,
        t.getByIndex = function(e, n) {
            for (var i = null, r = 0, o = t.editable; r < o.length; r++) {
                var s = o[r];
                if (s.index == e) {
                    i = s,
                    i.colorRange = n;
                    break
                }
            }
            return i
        }
        ,
        t.prototype.getFill = function(e) {
            var n = this.elColor === i.ColorRange.EL_LOGO_DB ? i.ColorRange.EL_LOGO1 : this.elColor
              , o = this.colorRange.getFill(this.bgColor, n);
            if (null === e)
                return o;
            if (e.type === r.Fill.BASE_FILL)
                return this.elColor !== i.ColorRange.EL_LOGO1 || this.bgColor !== i.ColorRange.BG_WHITE && this.bgColor !== i.ColorRange.BG_TRANSPARENT ? o : e;
            if (e.type === r.Fill.OVERRIDE_FILL) {
                if (this.index === t.CUSTOM_INDEX)
                    return o;
                var s = e.colors[this.index];
                return null === s ? o : "string" == typeof s ? new r.Fill(s) : new r.Fill(this.colorRange.getColorByIndex(s))
            }
        }
        ,
        t.CUSTOM_INDEX = -1,
        t.editable = [new t(0,i.ColorRange.BG_WHITE,i.ColorRange.EL_LOGO1), new t(1,i.ColorRange.BG_B,i.ColorRange.EL_LOGO1), new t(2,i.ColorRange.BG_WHITE,"000000"), new t(3,i.ColorRange.BG_BLACK,i.ColorRange.EL_LOGO1), new t(4,i.ColorRange.BG_TRANSPARENT,i.ColorRange.EL_LOGO1)],
        t.custom = [],
        t
    }();
    e.ColorCombination = o
}
, function(t, e, n) {
    "use strict";
    t.exports = {
        2: "need dictionary",
        1: "stream end",
        0: "",
        "-1": "file error",
        "-2": "stream error",
        "-3": "data error",
        "-4": "insufficient memory",
        "-5": "buffer error",
        "-6": "incompatible version"
    }
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(0)
      , r = n(59)
      , o = function() {
        function t() {}
        return t.changeEmblemAppearance = function(e, n) {
            if (null == e || "" == e || !n)
                return e;
            for (var r = i.parseXML(e), o = null, s = null, a = !1, l = 0; l < r.childNodes.length; l++) {
                var c = r.childNodes[l];
                if (c.nodeType == document.ELEMENT_NODE && "svg" == c.nodeName.toLowerCase()) {
                    var h;
                    o = c;
                    for (var u = 0; u < c.childNodes.length; u++)
                        if (h = c.childNodes[u],
                        h.nodeType == document.ELEMENT_NODE && "defs" == h.nodeName.toLowerCase()) {
                            s = h,
                            a = !0;
                            break
                        }
                    null === s && (s = document.createElementNS("http://www.w3.org/2000/svg", "defs"));
                    for (var d = 0; d < c.childNodes.length; d++)
                        h = c.childNodes[d],
                        h.nodeType == document.ELEMENT_NODE && "g" == h.nodeName.toLowerCase() && t.changeComponentAppearance(s, h, n)
                }
            }
            return o && (0 == s.childNodes.length && a ? s.remove() : s.childNodes.length > 0 && !a && o.insertBefore(s, o.firstChild)),
            (new XMLSerializer).serializeToString(r)
        }
        ,
        t.changeComponentAppearance = function(e, n, i) {
            if (null != n)
                for (var r = 0; r < n.childNodes.length; r++) {
                    var o = n.childNodes[r];
                    o.nodeType == document.ELEMENT_NODE && ("g" == o.nodeName.toLowerCase() && t.changeComponentAppearance(e, o, i),
                    o.getAttribute("id") && "svg" != o.nodeName.toLowerCase() && i.toSvg(o, e))
                }
        }
        ,
        t.createGradientXml = function(t, e) {
            var n = null;
            if (null == e)
                return n;
            n = e instanceof r.LinearGradientFill ? document.createElementNS("http://www.w3.org/2000/svg", "linearGradient") : document.createElementNS("http://www.w3.org/2000/svg", "radialGradient"),
            n.setAttribute("id", t),
            n.setAttribute("gradientUnits", "objectBoundingBox"),
            n.setAttribute("gradientTransform", "rotate(" + e.angle + ")");
            for (var i = 0; i < e.entries.length; i++) {
                var o = e.entries[i]
                  , s = document.createElementNS("http://www.w3.org/2000/svg", "stop");
                s.setAttribute("offset", o.ratio.toString()),
                s.setAttribute("stop-color", "#" + o.color),
                n.appendChild(s)
            }
            return n
        }
        ,
        t
    }();
    e.BaseSvgExporter = o
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(11)
      , r = function() {
        function t() {}
        return t.doesHaveScripts = function(t, e) {
            for (var n = !1, i = 0; i < e.length; i++) {
                n = !1;
                for (var r = e[i], o = 0; o < t.length; o++) {
                    if (r == t[o]) {
                        n = !0;
                        break
                    }
                }
                if (!n)
                    return !1
            }
            return 0 != e.length
        }
        ,
        t.doesHaveIdeogramScripts = function(e) {
            for (var n = [t.HIRAGANA, t.KATAKANA, t.KANJI, t.CJK_SYMB_PUNCT], i = 0; i < n.length; i++)
                for (var r = n[i], o = 0; o < e.length; o++) {
                    var s = e[o];
                    if (r == s)
                        return !0
                }
            return !1
        }
        ,
        t.determineScripts = function(e) {
            var n = {}
              , i = e.replace("", "").replace("", "").replace("", "").replace("", "").replace("", "");
            "" == i && (i = " ");
            for (var r = 0; r < i.length; r++) {
                var o = i.charCodeAt(r);
                o >= 0 && o <= 127 ? n[t.C0_CONTROLS] = !0 : o >= 128 && o <= 255 ? n[t.C1_CONTROLS] = !0 : o >= 256 && o <= 383 ? n[t.LATIN_EXTENDED_A] = !0 : o >= 1040 && o <= 1103 ? n[t.CYRILLIC_RUSSIAN_ALPHABET] = !0 : o >= 1024 && o <= 1039 || o >= 1104 && o <= 1119 ? n[t.CYRILLIC_EXTENTIONS_12] = !0 : o >= 1162 && o <= 1273 ? n[t.CYRILLIC_EXTENDED] = !0 : o >= 12352 && o <= 12447 ? n[t.HIRAGANA] = !0 : o >= 12448 && o <= 12543 ? n[t.KATAKANA] = !0 : o >= 19968 && o <= 40895 ? n[t.KANJI] = !0 : o >= 12288 && o <= 12351 ? n[t.CJK_SYMB_PUNCT] = !0 : n[t.UNICODE] = !0
            }
            var s = [];
            for (var a in n)
                n[a] && s.push(parseInt(a));
            return s
        }
        ,
        t.getLanguageScripts = function(e) {
            switch (e.toLowerCase()) {
            case "zh":
                return [t.C0_CONTROLS, t.HIRAGANA, t.KATAKANA, t.KANJI, t.CJK_SYMB_PUNCT];
            case "es":
                return [t.C0_CONTROLS, t.C1_CONTROLS];
            case "en":
            case "hi":
            case "ar":
                return [t.C0_CONTROLS];
            case "pt":
                return [t.C0_CONTROLS, t.C1_CONTROLS, t.LATIN_EXTENDED_A];
            case "bn":
                return [t.C0_CONTROLS];
            case "ru":
                return [t.C0_CONTROLS, t.CYRILLIC_RUSSIAN_ALPHABET];
            case "ja":
                return [t.C0_CONTROLS, t.HIRAGANA, t.KATAKANA, t.KANJI, t.CJK_SYMB_PUNCT];
            case "pa":
            case "de":
            case "jv":
            case "ms":
            case "te":
            case "vi":
            case "ko":
            case "fr":
            case "mr":
            case "ta":
            case "ur":
            case "fa":
            case "tr":
            case "it":
            case "th":
            case "gu":
            case "pl":
            case "ps":
            case "kn":
            case "ml":
            case "su":
            case "ha":
            case "or":
            case "my":
                return [t.C0_CONTROLS];
            case "uk":
                return [t.C0_CONTROLS, t.CYRILLIC_RUSSIAN_ALPHABET, t.CYRILLIC_EXTENTIONS_12];
            case "tl":
            case "yo":
            case "bh":
            case "uz":
            case "sd":
            case "am":
            case "ff":
            case "ro":
            case "om":
            case "ig":
            case "az":
            case "nl":
            case "ku":
            case "sh":
            case "mg":
            case "ne":
            case "si":
            case "za":
            case "km":
            case "as":
            case "so":
            case "hu":
            case "el":
            case "ny":
            case "ak":
            case "kk":
            case "zu":
            case "cs":
            case "rw":
            case "ht":
            case "qu":
            case "rn":
            case "sv":
            case "sn":
            case "ug":
            case "xh":
            case "be":
                return [t.C0_CONTROLS]
            }
            return [t.C0_CONTROLS]
        }
        ,
        t.getLanguagesByScripts = function(e) {
            var n = [];
            return e.indexOf(t.C0_CONTROLS) > -1 && n.push("en"),
            (e.indexOf(t.CYRILLIC_RUSSIAN_ALPHABET) > -1 || e.indexOf(t.CYRILLIC_EXTENDED) > -1 || e.indexOf(t.CYRILLIC_EXTENTIONS_12) > -1) && n.push("ru"),
            e.indexOf(t.C1_CONTROLS) > -1 && (n.push("pt"),
            n.push("es"),
            n.push("de"),
            n.push("fr")),
            e.indexOf(t.LATIN_EXTENDED_A) > -1 && (n.push("pt"),
            n.push("es"),
            n.push("tr")),
            (e.indexOf(t.HIRAGANA) > -1 || e.indexOf(t.KANJI) > -1 || e.indexOf(t.CJK_SYMB_PUNCT) > -1) && (n.push("ja"),
            n.push("zh")),
            i.uniq(n)
        }
        ,
        t.UNICODE = 0,
        t.C0_CONTROLS = 1,
        t.C1_CONTROLS = 2,
        t.LATIN_EXTENDED_A = 3,
        t.CYRILLIC_RUSSIAN_ALPHABET = 10,
        t.CYRILLIC_EXTENTIONS_12 = 11,
        t.CYRILLIC_EXTENDED = 12,
        t.HIRAGANA = 20,
        t.KATAKANA = 21,
        t.KANJI = 22,
        t.CJK_SYMB_PUNCT = 23,
        t
    }();
    e.LanguageScript = r
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(10)
      , o = n(27)
      , s = n(12)
      , a = n(33)
      , l = n(17)
      , c = n(16)
      , h = n(26)
      , u = function(t) {
        function e() {
            var n = t.call(this) || this;
            return n.transform = l.TextTransform.NONE,
            n.textAlign = e.TEXT_ALIGN_LEFT,
            n.fontWeight = e.FONT_WEIGHT_NORMAL,
            n.fontStyle = e.FONT_STYLE_REGULAR,
            n.textDecoration = e.TEXT_DECORATION_NONE,
            n.type = r.BPItem.TEXT,
            n
        }
        return i(e, t),
        Object.defineProperty(e, "TEXT_ALIGN_LEFT", {
            get: function() {
                return 0
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e, "TEXT_ALIGN_CENTER", {
            get: function() {
                return 1
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e, "TEXT_ALIGN_RIGHT", {
            get: function() {
                return 2
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e, "TEXT_ALIGN_START", {
            get: function() {
                return 3
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e, "TEXT_ALIGN_JUSTIFY", {
            get: function() {
                return 4
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e, "TEXT_ALIGN_END", {
            get: function() {
                return 5
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e, "FONT_WEIGHT_NORMAL", {
            get: function() {
                return 0
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e, "FONT_WEIGHT_BOLD", {
            get: function() {
                return 1
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e, "FONT_STYLE_REGULAR", {
            get: function() {
                return 0
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e, "FONT_STYLE_BOLD", {
            get: function() {
                return 1
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e, "FONT_STYLE_BOLD_ITALIC", {
            get: function() {
                return 2
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e, "FONT_STYLE_ITALIC", {
            get: function() {
                return 3
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e, "TEXT_DECORATION_NONE", {
            get: function() {
                return 0
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e, "TEXT_DECORATION_UNDERLINE", {
            get: function() {
                return 1
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e, "TEXT_SIZE", {
            get: function() {
                return 24
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e.prototype, "maths", {
            get: function() {
                return this._maths
            },
            set: function(t) {
                this._maths = t
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e.prototype, "bounds", {
            get: function() {
                return null == this._bounds && (this._bounds = a.TextBoundsManager.getBounds(this.content, c.BrandProduct.TEXT_SIZE, this.font.fontFamily, this.maths.kerning)),
                this._bounds
            },
            set: function(t) {
                t != this._bounds && (this._bounds = t)
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e.prototype, "content", {
            get: function() {
                return this._content
            },
            set: function(t) {
                this._content !== t && (this._bounds = null,
                this._content = t)
            },
            enumerable: !0,
            configurable: !0
        }),
        e.deserialize = function(t) {
            var n = new e;
            return n.group = t.group,
            n.maths = o.TextMaths.deserialize(t.maths),
            n.font = s.Font.fromId(t.font),
            n.fill = h.BPItemFill.deserialize(t.fill),
            n.target = t.target,
            n.content = t.content,
            n.transform = l.TextTransform.detectTransform(t.content),
            n
        }
        ,
        e.prototype.serialize = function() {
            var e = t.prototype.serialize.call(this);
            return e.fontId = this.font.id,
            e
        }
        ,
        e.prototype.clone = function() {
            var t = new e;
            return t.uid = this.uid,
            t.group = this.group,
            t.maths = this.maths.clone(),
            t.font = this.font,
            t.fill = this.fill.clone(),
            t.target = this.target,
            t.content = this.content,
            t.transform = this.transform,
            t.product = this.product,
            t
        }
        ,
        e
    }(r.BPItem);
    e.BPTextItem = u
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(8)
      , r = n(12)
      , o = n(1)
      , s = function() {
        function t() {}
        return t.getBounds = function(e, n, r, o) {
            void 0 === o && (o = 0);
            var s = e + " " + n + " " + r + " " + o
              , a = null;
            return t.cache[s]instanceof i.Rectangle ? a = t.cache[s] : (a = t.getTextBounds(e, n, r, o),
            t.cache[s] = a),
            a
        }
        ,
        t.getCanvas = function() {
            if (null == t.calcCanvas) {
                var e = document.createElement("canvas");
                e.width = 5e3,
                e.height = 3e3,
                t.calcCanvas = e
            }
            return t.calcCanvas
        }
        ,
        t.getTextBounds = function(e, n, s, a, l) {
            void 0 === l && (l = 1.2);
            var c = t.getCanvas().getContext("2d")
              , h = 7 * n
              , u = 7 * n;
            c.setTransform(1, 0, 0, 1, 0, 0),
            c.globalAlpha = 1,
            c.fillStyle = "#ffffff",
            c.font = 7 * n + "px '" + s + "'";
            var d = 0
              , p = 0
              , f = new o.Matrix
              , g = e.split("\n")
              , m = Math.round(7 * n * l);
            o.Matrix.resetContext2d(c),
            c.clearRect(0, 0, c.canvas.width, c.canvas.height);
            for (var _ = 0; _ < g.length; _++) {
                var v = g[_];
                if (_ > 0 && (f.translate(0, m),
                f.setToContext2d(c),
                p += m),
                0 === a) {
                    var y = c.measureText(v);
                    d = Math.max(d, Math.round(y.width) + 40 + 2 * h),
                    p += Math.round(7 * n * 1.4) + 2 * u,
                    c.fillText(v, h, u)
                } else {
                    for (var b = r.Font.fromName(s), w = v.split(""), x = 0, C = 0, T = 0, k = w; T < k.length; T++) {
                        var I = k[T]
                          , L = b.glyphWidth(I);
                        null !== L && (C += L)
                    }
                    d = Math.max(d, Math.round(b.fUnitsToPx(C + a * (w.length - 1) * 1.1, 7 * n) + 2 * h)),
                    p += Math.round(7 * n * 1.4) + 2 * u,
                    c.clearRect(0, 0, d, p);
                    for (var _ = 0; _ < w.length; _++) {
                        var I = w[_]
                          , E = b.glyphWidth(I);
                        if (_ > 0) {
                            var P = w[_ - 1];
                            x += b.kerning(P, I),
                            x += a
                        }
                        c.fillText(I, h + b.fUnitsToPx(x, 7 * n), u),
                        x += E
                    }
                }
            }
            for (var S = d, j = p, O = 0, A = 0, R = 0, B = 0, M = c.getImageData(0, 0, d, p), _ = 0; _ < M.data.length; _ += 4) {
                var D = (M.data[_],
                M.data[_ + 1],
                M.data[_ + 2],
                M.data[_ + 3]);
                R = _ / 4 % d,
                B = _ / 4 / d,
                0 != D && (S = Math.min(S, R),
                j = Math.min(j, B),
                O = Math.max(O, R),
                A = Math.max(A, B))
            }
            return d = O - S,
            p = A - j,
            S -= h,
            j -= u,
            S /= 7,
            j /= 7,
            d /= 7,
            p /= 7,
            new i.Rectangle(S,j,d,p)
        }
        ,
        t.getBoundsFromList = function(t) {
            for (var e = t[0].width, n = t[0].height, r = 0, o = 0, s = 0, a = t; s < a.length; s++) {
                var l = a[s];
                e = Math.min(e, l.x),
                n = Math.min(n, l.y),
                r = Math.max(r, l.right),
                o = Math.max(o, l.bottom)
            }
            return new i.Rectangle(e,n,r - e,o - n)
        }
        ,
        t.cache = {},
        t.calcCanvas = null,
        t
    }();
    e.TextBoundsManager = s
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(10)
      , o = n(3)
      , s = n(8)
      , a = n(13)
      , l = n(26)
      , c = function(t) {
        function e() {
            var n = t.call(this) || this;
            return n.logoType = null,
            n.withSlogan = null,
            n.type = e.LOGO,
            n
        }
        return i(e, t),
        e.deserialize = function(t) {
            var n = new e;
            n.group = t.group,
            n.maths = a.Maths.deserialize(t.maths),
            n.fill = l.BPItemFill.deserialize(t.fill),
            n.target = t.target,
            null !== t.logo && (n.logo = o.Logo.deserialize(t.logo));
            var i = t.content.split(";");
            return n.bounds = s.Rectangle.deserialize(i[0]),
            n.logoType = parseInt(i[1]),
            n.withSlogan = Boolean(parseInt(i[2])),
            n
        }
        ,
        e.prototype.serialize = function() {
            var e = t.prototype.serialize.call(this);
            return e.logoId = this.logo.id,
            e.content = this.bounds.serialize() + ";" + this.logoType + ";" + Number(this.withSlogan),
            e
        }
        ,
        e.prototype.clone = function() {
            var t = new e;
            return t.uid = this.uid,
            t.group = this.group,
            t.maths = this.maths.clone(),
            t.fill = this.fill.clone(),
            t.target = this.target,
            t.logo = this.logo,
            t.bounds = this.bounds.clone(),
            t.product = this.product,
            t.logoType = this.logoType,
            t.withSlogan = this.withSlogan,
            t
        }
        ,
        e
    }(r.BPItem);
    e.BPLogoItem = c
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = function() {
        function t() {}
        return t.start = function() {
            0 === t.requests && t.appElement.addClass("locked"),
            t.requests++
        }
        ,
        t.stop = function() {
            0 !== t.requests && 0 === --t.requests && t.appElement.removeClass("locked")
        }
        ,
        t.isLocked = function() {
            return t.requests > 0
        }
        ,
        t.requests = 0,
        t.appElement = null,
        t
    }();
    e.WaitLocker = i
}
, function(t, e) {
    var n;
    n = function() {
        return this
    }();
    try {
        n = n || Function("return this")() || (0,
        eval)("this")
    } catch (t) {
        "object" == typeof window && (n = window)
    }
    t.exports = n
}
, function(t, e, n) {
    "use strict";
    var i = n(9).assign
      , r = n(68)
      , o = n(71)
      , s = n(42)
      , a = {};
    i(a, r, o, s),
    t.exports = a
}
, function(t, e, n) {
    "use strict";
    function i(t, e, n, i) {
        for (var r = 65535 & t | 0, o = t >>> 16 & 65535 | 0, s = 0; 0 !== n; ) {
            s = n > 2e3 ? 2e3 : n,
            n -= s;
            do {
                r = r + e[i++] | 0,
                o = o + r | 0
            } while (--s);r %= 65521,
            o %= 65521
        }
        return r | o << 16 | 0
    }
    t.exports = i
}
, function(t, e, n) {
    "use strict";
    function i(t, e, n, i) {
        var o = r
          , s = i + n;
        t ^= -1;
        for (var a = i; a < s; a++)
            t = t >>> 8 ^ o[255 & (t ^ e[a])];
        return -1 ^ t
    }
    var r = function() {
        for (var t, e = [], n = 0; n < 256; n++) {
            t = n;
            for (var i = 0; i < 8; i++)
                t = 1 & t ? 3988292384 ^ t >>> 1 : t >>> 1;
            e[n] = t
        }
        return e
    }();
    t.exports = i
}
, function(t, e, n) {
    "use strict";
    function i(t, e) {
        if (e < 65537 && (t.subarray && s || !t.subarray && o))
            return String.fromCharCode.apply(null, r.shrinkBuf(t, e));
        for (var n = "", i = 0; i < e; i++)
            n += String.fromCharCode(t[i]);
        return n
    }
    var r = n(9)
      , o = !0
      , s = !0;
    try {
        String.fromCharCode.apply(null, [0])
    } catch (t) {
        o = !1
    }
    try {
        String.fromCharCode.apply(null, new Uint8Array(1))
    } catch (t) {
        s = !1
    }
    for (var a = new r.Buf8(256), l = 0; l < 256; l++)
        a[l] = l >= 252 ? 6 : l >= 248 ? 5 : l >= 240 ? 4 : l >= 224 ? 3 : l >= 192 ? 2 : 1;
    a[254] = a[254] = 1,
    e.string2buf = function(t) {
        var e, n, i, o, s, a = t.length, l = 0;
        for (o = 0; o < a; o++)
            n = t.charCodeAt(o),
            55296 == (64512 & n) && o + 1 < a && 56320 == (64512 & (i = t.charCodeAt(o + 1))) && (n = 65536 + (n - 55296 << 10) + (i - 56320),
            o++),
            l += n < 128 ? 1 : n < 2048 ? 2 : n < 65536 ? 3 : 4;
        for (e = new r.Buf8(l),
        s = 0,
        o = 0; s < l; o++)
            n = t.charCodeAt(o),
            55296 == (64512 & n) && o + 1 < a && 56320 == (64512 & (i = t.charCodeAt(o + 1))) && (n = 65536 + (n - 55296 << 10) + (i - 56320),
            o++),
            n < 128 ? e[s++] = n : n < 2048 ? (e[s++] = 192 | n >>> 6,
            e[s++] = 128 | 63 & n) : n < 65536 ? (e[s++] = 224 | n >>> 12,
            e[s++] = 128 | n >>> 6 & 63,
            e[s++] = 128 | 63 & n) : (e[s++] = 240 | n >>> 18,
            e[s++] = 128 | n >>> 12 & 63,
            e[s++] = 128 | n >>> 6 & 63,
            e[s++] = 128 | 63 & n);
        return e
    }
    ,
    e.buf2binstring = function(t) {
        return i(t, t.length)
    }
    ,
    e.binstring2buf = function(t) {
        for (var e = new r.Buf8(t.length), n = 0, i = e.length; n < i; n++)
            e[n] = t.charCodeAt(n);
        return e
    }
    ,
    e.buf2string = function(t, e) {
        var n, r, o, s, l = e || t.length, c = new Array(2 * l);
        for (r = 0,
        n = 0; n < l; )
            if ((o = t[n++]) < 128)
                c[r++] = o;
            else if ((s = a[o]) > 4)
                c[r++] = 65533,
                n += s - 1;
            else {
                for (o &= 2 === s ? 31 : 3 === s ? 15 : 7; s > 1 && n < l; )
                    o = o << 6 | 63 & t[n++],
                    s--;
                s > 1 ? c[r++] = 65533 : o < 65536 ? c[r++] = o : (o -= 65536,
                c[r++] = 55296 | o >> 10 & 1023,
                c[r++] = 56320 | 1023 & o)
            }
        return i(c, r)
    }
    ,
    e.utf8border = function(t, e) {
        var n;
        for (e = e || t.length,
        e > t.length && (e = t.length),
        n = e - 1; n >= 0 && 128 == (192 & t[n]); )
            n--;
        return n < 0 ? e : 0 === n ? e : n + a[t[n]] > e ? n : e
    }
}
, function(t, e, n) {
    "use strict";
    function i() {
        this.input = null,
        this.next_in = 0,
        this.avail_in = 0,
        this.total_in = 0,
        this.output = null,
        this.next_out = 0,
        this.avail_out = 0,
        this.total_out = 0,
        this.msg = "",
        this.state = null,
        this.data_type = 2,
        this.adler = 0
    }
    t.exports = i
}
, function(t, e, n) {
    "use strict";
    t.exports = {
        Z_NO_FLUSH: 0,
        Z_PARTIAL_FLUSH: 1,
        Z_SYNC_FLUSH: 2,
        Z_FULL_FLUSH: 3,
        Z_FINISH: 4,
        Z_BLOCK: 5,
        Z_TREES: 6,
        Z_OK: 0,
        Z_STREAM_END: 1,
        Z_NEED_DICT: 2,
        Z_ERRNO: -1,
        Z_STREAM_ERROR: -2,
        Z_DATA_ERROR: -3,
        Z_BUF_ERROR: -5,
        Z_NO_COMPRESSION: 0,
        Z_BEST_SPEED: 1,
        Z_BEST_COMPRESSION: 9,
        Z_DEFAULT_COMPRESSION: -1,
        Z_FILTERED: 1,
        Z_HUFFMAN_ONLY: 2,
        Z_RLE: 3,
        Z_FIXED: 4,
        Z_DEFAULT_STRATEGY: 0,
        Z_BINARY: 0,
        Z_TEXT: 1,
        Z_UNKNOWN: 2,
        Z_DEFLATED: 8
    }
}
, function(t, e, n) {
    "use strict";
    (function(t, i) {
        var r = this && this.__extends || function() {
            var t = Object.setPrototypeOf || {
                __proto__: []
            }instanceof Array && function(t, e) {
                t.__proto__ = e
            }
            || function(t, e) {
                for (var n in e)
                    e.hasOwnProperty(n) && (t[n] = e[n])
            }
            ;
            return function(e, n) {
                function i() {
                    this.constructor = e
                }
                t(e, n),
                e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                new i)
            }
        }();
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var o = n(16)
          , s = n(10)
          , a = n(44)
          , l = n(32)
          , c = n(34)
          , h = n(5)
          , u = function(e) {
            function n() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.hasMirrorSides = !1,
                t._itemsFront = [],
                t._itemsBack = [],
                t
            }
            return r(n, e),
            Object.defineProperty(n, "BRAND_PRODUCT_URL", {
                get: function() {
                    return h.Site.MAIN_URL + "/v3/brands/{id}/bizcards/"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(n, "SERVICE_URL", {
                get: function() {
                    return h.Site.MAIN_URL + "/v3/js/brand/{brandId}/business-card/"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(n, "TEMPLATE_SERVICE_URL", {
                get: function() {
                    return h.Site.MAIN_URL + "/v3/js/business-card-template/"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(n, "ADD_TEMPLATE_URL", {
                get: function() {
                    return h.Site.MAIN_URL + "/v3/js/add-business-card-template/"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(n.prototype, "templates", {
                get: function() {
                    return n.templates
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(n, "baseSize", {
                get: function() {
                    return n.SIZE_TYPE_MAP[1]
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(n, "base300dpiSize", {
                get: function() {
                    return {
                        width: Math.round(300 * n.baseSize.width / 25.4),
                        height: Math.round(300 * n.baseSize.height / 25.4)
                    }
                },
                enumerable: !0,
                configurable: !0
            }),
            n.prototype.getItemsBySide = function(t) {
                return t == n.FRONT_SIDE ? this.itemsFront : t == n.BACK_SIDE ? this.itemsBack : void 0
            }
            ,
            Object.defineProperty(n.prototype, "itemsFront", {
                get: function() {
                    if (0 === this._itemsFront.length)
                        for (var t = 0, e = this.items; t < e.length; t++) {
                            var i = e[t];
                            i.group == n.FRONT_SIDE && this._itemsFront.push(i)
                        }
                    return this._itemsFront
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(n.prototype, "itemsBack", {
                get: function() {
                    if (0 === this._itemsBack.length)
                        for (var t = 0, e = this.items; t < e.length; t++) {
                            var i = e[t];
                            i.group == n.BACK_SIDE && this._itemsBack.push(i)
                        }
                    return this._itemsBack
                },
                enumerable: !0,
                configurable: !0
            }),
            n.prototype.getSizeTypeMap = function() {
                return n.SIZE_TYPE_MAP
            }
            ,
            n.prototype.serialize = function() {
                for (var t = {
                    id: this.id,
                    brandId: this.brandId,
                    templateId: null !== this.template ? this.template.id : null,
                    text: this.text,
                    sizeType: this.sizeType,
                    items: []
                }, e = 0, n = this.items; e < n.length; e++) {
                    var i = n[e]
                      , r = i.serialize();
                    t.items.push(r)
                }
                return JSON.stringify(t)
            }
            ,
            n.prototype.save = function() {
                var e = this;
                return new t(function(t, r) {
                    i.ajax({
                        type: "POST",
                        url: n.SERVICE_URL.replace("{brandId}", "" + e.brandId),
                        dataType: "json",
                        data: e.serialize(),
                        success: function(n) {
                            e.id = n.id,
                            t(e)
                        }
                    })
                }
                )
            }
            ,
            n.prototype.saveTemplate = function() {
                if (!this.isTemplate)
                    return new t(function(t, e) {
                        e(this)
                    }
                    );
                var e = this;
                return new t(function(t, r) {
                    i.ajax({
                        type: "POST",
                        url: n.ADD_TEMPLATE_URL,
                        dataType: "json",
                        data: e.serialize(),
                        success: function(n) {
                            e.id = n.id,
                            t(e)
                        }
                    })
                }
                )
            }
            ,
            n.prototype.update = function() {
                var e = this;
                return new t(function(t, r) {
                    i.ajax({
                        type: "PUT",
                        url: n.SERVICE_URL.replace("{brandId}", "" + e.brandId) + (e.id + "/"),
                        dataType: "json",
                        data: e.serialize(),
                        success: function(n) {
                            e.id = n.id,
                            t(e)
                        }
                    })
                }
                )
            }
            ,
            n.deserialize = function(t, e) {
                if (void 0 === e && (e = null),
                null === t)
                    return null;
                var i;
                if (0 == t.items.length && null !== t.template) {
                    var r = n.deserialize(t.template);
                    i = n.create(e, r)
                } else
                    i = new n;
                i.id = t.id,
                i.brandId = t.brandId,
                i.brand = e,
                i.template = this.deserialize(t.template),
                i.text = t.text,
                i.number = t.number,
                i.sizeType = t.sizeType;
                for (var o = 0, h = t.items; o < h.length; o++) {
                    var u = h[o]
                      , d = null;
                    switch (u.type) {
                    case s.BPItem.SVG:
                        d = a.BPSvgItem.deserialize(u);
                        break;
                    case s.BPItem.TEXT:
                        d = l.BPTextItem.deserialize(u);
                        break;
                    case s.BPItem.LOGO:
                        d = c.BPLogoItem.deserialize(u)
                    }
                    d.product = i,
                    i.items.push(d)
                }
                return i
            }
            ,
            n.prototype.clone = function() {
                var t = new n;
                t.id = this.id,
                t.brandId = this.brandId,
                t.brand = this.brand,
                t.template = this.template,
                t.text = this.text,
                t.number = this.number,
                t.sizeType = this.sizeType;
                for (var e = 0, i = this.items; e < i.length; e++) {
                    var r = i[e]
                      , o = r.clone();
                    o.product = t,
                    t.items.push(o)
                }
                return t
            }
            ,
            n.loadTemplates = function(e, r) {
                void 0 === r && (r = null);
                for (var o = [], s = 0, a = n.templates; s < a.length; s++) {
                    var l = a[s];
                    o.push(l.id)
                }
                var c = {
                    lti: o,
                    neededCount: e
                };
                return new t(function(t, e) {
                    i.ajax({
                        type: "GET",
                        url: n.TEMPLATE_SERVICE_URL,
                        dataType: "json",
                        data: c,
                        success: function(e) {
                            for (var i = [], r = 0, o = e; r < o.length; r++) {
                                var s = o[r]
                                  , a = n.deserialize(s);
                                i.push(a),
                                n.templates.push(a)
                            }
                            t(i)
                        }
                    })
                }
                )
            }
            ,
            n.FRONT_SIDE = 1,
            n.BACK_SIDE = 2,
            n.templates = [],
            n.SIZE_TYPE_MAP = {
                1: {
                    width: 90,
                    height: 50
                }
            },
            n
        }(o.BrandProduct);
        e.BusinessCard = u
    }
    ).call(e, n(4), n(0))
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(37)
      , o = n(10)
      , s = n(13)
      , a = n(8)
      , l = n(26)
      , c = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e.id = null,
            e.svg = null,
            e.type = o.BPItem.SVG,
            e
        }
        return i(e, t),
        e.prototype.setSvgContentString = function(t) {
            for (var e = window.atob(t), n = e.split(""), i = 0; i < n.length; i++)
                n[i] = n[i].charCodeAt(0);
            this.svg = r.inflate(n, {
                to: "string"
            })
        }
        ,
        e.deserialize = function(t) {
            var n = new e;
            n.group = t.group,
            n.maths = s.Maths.deserialize(t.maths),
            n.fill = l.BPItemFill.deserialize(t.fill),
            n.target = t.target,
            n.bounds = a.Rectangle.deserialize(t.content);
            var i = t.svg;
            n.id = i.i,
            n.setSvgContentString(i.s);
            var r = i.b.split(";");
            return n.svgBounds = new a.Rectangle(parseFloat(r[0]),parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3])),
            n
        }
        ,
        e.prototype.serialize = function() {
            var e = t.prototype.serialize.call(this);
            return e.content = this.bounds.serialize(),
            e.svgId = this.id,
            e
        }
        ,
        e.prototype.clone = function() {
            var t = new e;
            return t.group = this.group,
            t.maths = this.maths.clone(),
            t.fill = this.fill.clone(),
            t.target = this.target,
            t.content = this.content,
            t.id = this.id,
            t.svg = this.svg,
            t.svgBounds = this.svgBounds.clone(),
            t.bounds = this.bounds.clone(),
            t.product = this.product,
            t
        }
        ,
        e.BP_ICON_ITYPE = 100001,
        e
    }(o.BPItem);
    e.BPSvgItem = c
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(37)
      , o = n(7)
      , s = n(8)
      , a = n(13)
      , l = n(6)
      , c = n(76)
      , h = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e.id = null,
            e.iconId = null,
            e.svg = null,
            e.nounEmblem = !1,
            e.text = "",
            e.type = o.LogoItem.SVG_ICON,
            e
        }
        return i(e, t),
        e.prototype.setSvgContentString = function(t) {
            for (var e = window.atob(t), n = e.split(""), i = 0; i < n.length; i++)
                n[i] = n[i].charCodeAt(0);
            this.svg = r.inflate(n, {
                to: "string"
            })
        }
        ,
        e.prototype.serialize = function() {
            var t = {
                id: this.id,
                type: this.type,
                group: this.group,
                fill: l.Fill.serialize(this.fill),
                maths: this.maths.serialize(),
                emblemId: this.nounEmblem ? e.NOUN_EMBLEM_ID : this.iconId,
                blendMode: this.blendMode,
                text: this.nounEmblem ? this.iconId : null
            };
            return JSON.stringify(t)
        }
        ,
        e.deserialize = function(t) {
            if (null === t)
                return null;
            var n = new e;
            n.id = t.i,
            n.group = t.g;
            var i = t.e;
            if (n.iconId = i.i,
            n.setSvgContentString(i.s),
            n.nounEmblem = i.ne,
            i.ne)
                n.bounds = c.SvgBoundsManager.getBounds(n.svg, n.iconId);
            else {
                var r = i.b.split(";");
                n.bounds = new s.Rectangle(parseFloat(r[0]),parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3]))
            }
            return t.bm && (n.blendMode = t.bm),
            t.f && (n.fill = l.Fill.deserialize(t.f)),
            t.m && (n.maths = a.Maths.deserialize(t.m)),
            n._source = n.clone(),
            n
        }
        ,
        e.prototype.clone = function() {
            var t = new e;
            return t.id = this.id,
            t.uid = this.uid,
            t.group = this.group,
            t.bounds = this._bounds ? this._bounds.clone() : null,
            t.maths = this.maths ? this.maths.clone() : null,
            t.fill = this.fill ? this.fill.clone() : null,
            t.iconId = this.iconId,
            t.svg = this.svg,
            t.blendMode = this.blendMode,
            t.nounEmblem = this.nounEmblem,
            t
        }
        ,
        e.prototype.hasChanges = function() {
            return t.prototype.hasChanges.call(this) || this.iconId !== this._source.iconId
        }
        ,
        e.prototype.debug = function() {
            var e = t.prototype.debug.call(this);
            return "Type: Icon\nid: " + this.id + "\nnounEmblem: " + this.nounEmblem + "\n" + e + "\n"
        }
        ,
        e.DYNAMIC_ICON_ITYPE = 1e5,
        e.NOUN_EMBLEM_ID = 600297,
        e
    }(o.LogoItem);
    e.SvgIcon = h
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(7)
      , o = n(12)
      , s = n(33)
      , a = n(3)
      , l = n(6)
      , c = n(27)
      , h = n(17)
      , u = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e._text = "",
            e._font = null,
            e.transform = h.TextTransform.NONE,
            e.type = r.LogoItem.BASE_TEXT,
            e
        }
        return i(e, t),
        Object.defineProperty(e.prototype, "text", {
            get: function() {
                return this._text
            },
            set: function(t) {
                this._text !== t && (this._bounds = null,
                this._text = t)
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e.prototype, "maths", {
            get: function() {
                return this._maths
            },
            set: function(t) {
                this._maths = t
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e.prototype, "bounds", {
            get: function() {
                return null == this._bounds && (this._bounds = s.TextBoundsManager.getBounds(this.text, a.Logo.LOGO_TEXT_SIZE, this.font.fontFamily, this.maths.kerning)),
                this._bounds
            },
            set: function(t) {
                t != this._bounds && (this._bounds = t)
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e.prototype, "font", {
            get: function() {
                return this._font
            },
            set: function(t) {
                this._font !== t && (this._bounds = null,
                this._font = t)
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e.prototype, "isText", {
            get: function() {
                return !0
            },
            enumerable: !0,
            configurable: !0
        }),
        e.prototype.serialize = function() {
            var t = {
                id: this.id,
                type: this.type,
                group: this.group,
                fontId: this.font.id,
                maths: this.maths.serialize(),
                text: this.text,
                fill: l.Fill.serialize(this.fill),
                blendMode: this.blendMode
            };
            return JSON.stringify(t)
        }
        ,
        e.deserialize = function(t) {
            var n = e.initText(t.t);
            return n.id = t.i,
            n.group = t.g,
            n.text = t.tt,
            n.maths = c.TextMaths.deserialize(t.m),
            n.font = o.Font.fromId(t.ft),
            n.fill = l.Fill.deserialize(t.f),
            n.transform = h.TextTransform.detectTransform(n.text),
            n.blendMode = t.bm,
            n._source = n.clone(),
            n
        }
        ,
        e.prototype.clone = function() {
            var t = e.initText(this.type);
            return t.id = this.id,
            t.uid = this.uid,
            t.group = this.group,
            t.bounds = this._bounds ? this._bounds.clone() : null,
            t.maths = this.maths ? this.maths.clone() : null,
            t.fill = this.fill ? this.fill.clone() : null,
            t.text = this.text,
            t.transform = this.transform,
            t.font = this.font ? this.font : null,
            t.blendMode = this.blendMode,
            t
        }
        ,
        e.initText = function(t) {
            var n = null;
            switch (t) {
            case r.LogoItem.LOGO_NAME:
                n = new d;
                break;
            case r.LogoItem.TAGLINE:
                n = new p;
                break;
            case r.LogoItem.MONOGRAM:
                n = new f;
                break;
            case r.LogoItem.CUSTOM_TEXT:
                n = new g;
                break;
            case r.LogoItem.BASE_TEXT:
                n = new e
            }
            return n
        }
        ,
        e.prototype.hasChanges = function() {
            return t.prototype.hasChanges.call(this) || this._text !== this._source.text || this._font.id !== this._source.font.id
        }
        ,
        e.prototype.debug = function() {
            var e, n = t.prototype.debug.call(this);
            switch (this.type) {
            case r.LogoItem.LOGO_NAME:
                e = "Logo Name";
                break;
            case r.LogoItem.TAGLINE:
                e = "Tagline";
                break;
            case r.LogoItem.MONOGRAM:
                e = "Monogram";
                break;
            case r.LogoItem.CUSTOM_TEXT:
                e = "Custom text"
            }
            return "Type: " + e + "\nFontId: " + this.font.id + "\nFontName: " + this.font.fontFamily + "\n" + n + "\n"
        }
        ,
        e
    }(r.LogoItem);
    e.BaseText = u;
    var d = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e.type = r.LogoItem.LOGO_NAME,
            e
        }
        return i(e, t),
        e
    }(u);
    e.LogoName = d;
    var p = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e.type = r.LogoItem.TAGLINE,
            e
        }
        return i(e, t),
        e
    }(u);
    e.Tagline = p;
    var f = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e.type = r.LogoItem.MONOGRAM,
            e
        }
        return i(e, t),
        e
    }(u);
    e.Monogram = f;
    var g = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e.type = r.LogoItem.CUSTOM_TEXT,
            e
        }
        return i(e, t),
        e
    }(u);
    e.CustomText = g
}
, function(t, e, n) {
    "use strict";
    (function(t, i) {
        var r = this && this.__extends || function() {
            var t = Object.setPrototypeOf || {
                __proto__: []
            }instanceof Array && function(t, e) {
                t.__proto__ = e
            }
            || function(t, e) {
                for (var n in e)
                    e.hasOwnProperty(n) && (t[n] = e[n])
            }
            ;
            return function(e, n) {
                function i() {
                    this.constructor = e
                }
                t(e, n),
                e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                new i)
            }
        }();
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var o, s = n(16), a = n(10), l = n(44), c = n(32), h = n(34), u = n(5), d = n(2);
        !function(t) {
            t[t.FacebookCoverPhoto = 1] = "FacebookCoverPhoto",
            t[t.FacebookProfileImage = 2] = "FacebookProfileImage",
            t[t.YoutubeProfile = 3] = "YoutubeProfile",
            t[t.YoutubeCoverMobile = 4] = "YoutubeCoverMobile",
            t[t.YoutubeCoverDesktop = 5] = "YoutubeCoverDesktop",
            t[t.YoutubeCoverTv = 6] = "YoutubeCoverTv",
            t[t.InstagramProfile = 7] = "InstagramProfile",
            t[t.InstagramPhotoThumbnail = 8] = "InstagramPhotoThumbnail",
            t[t.InstagramPhoto = 9] = "InstagramPhoto",
            t[t.InstagramPhotoLandscape = 10] = "InstagramPhotoLandscape",
            t[t.InstagramPhotoPortrait = 11] = "InstagramPhotoPortrait",
            t[t.TwitterHeader = 12] = "TwitterHeader",
            t[t.TwitterProfile = 13] = "TwitterProfile",
            t[t.TwitterInStream = 14] = "TwitterInStream",
            t[t.VkArticle = 15] = "VkArticle",
            t[t.VkProfile = 16] = "VkProfile",
            t[t.VkProfileBg = 17] = "VkProfileBg",
            t[t.LinkedinBgImage = 18] = "LinkedinBgImage",
            t[t.LinkedinStandardLogo = 19] = "LinkedinStandardLogo",
            t[t.LinkedinBusinessBanner = 20] = "LinkedinBusinessBanner",
            t[t.LinkedinSquareLogo = 21] = "LinkedinSquareLogo"
        }(o = e.SocialProductType || (e.SocialProductType = {}));
        var p = function(e) {
            function n() {
                return null !== e && e.apply(this, arguments) || this
            }
            return r(n, e),
            Object.defineProperty(n, "BRAND_PRODUCT_URL", {
                get: function() {
                    return u.Site.MAIN_URL + "/v3/brands/{id}/socials/"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(n, "SERVICE_URL", {
                get: function() {
                    return u.Site.MAIN_URL + "/v3/js/brand/{brandId}/social-product/"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(n, "TEMPLATE_SERVICE_URL", {
                get: function() {
                    return u.Site.MAIN_URL + "/v3/js/social-product-template/"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(n, "ADD_TEMPLATE_URL", {
                get: function() {
                    return u.Site.MAIN_URL + "/v3/js/add-social-product-template/"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(n.prototype, "templates", {
                get: function() {
                    return n.templates
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(n, "SIZE_TYPE_MAP", {
                get: function() {
                    if (null === n._sizes) {
                        var t = {};
                        t[o.FacebookCoverPhoto] = {
                            width: 820,
                            height: 310
                        },
                        t[o.FacebookProfileImage] = {
                            width: 180,
                            height: 180
                        },
                        t[o.YoutubeProfile] = {
                            width: 800,
                            height: 800
                        },
                        t[o.YoutubeCoverMobile] = {
                            width: 1546,
                            height: 423
                        },
                        t[o.YoutubeCoverDesktop] = {
                            width: 2560,
                            height: 423
                        },
                        t[o.YoutubeCoverTv] = {
                            width: 2560,
                            height: 1440
                        },
                        t[o.InstagramProfile] = {
                            width: 110,
                            height: 110
                        },
                        t[o.InstagramPhotoThumbnail] = {
                            width: 161,
                            height: 161
                        },
                        t[o.InstagramPhoto] = {
                            width: 1080,
                            height: 1080
                        },
                        t[o.InstagramPhotoLandscape] = {
                            width: 1080,
                            height: 566
                        },
                        t[o.InstagramPhotoPortrait] = {
                            width: 1080,
                            height: 1350
                        },
                        t[o.TwitterHeader] = {
                            width: 1500,
                            height: 500
                        },
                        t[o.TwitterProfile] = {
                            width: 400,
                            height: 400
                        },
                        t[o.TwitterInStream] = {
                            width: 440,
                            height: 220
                        },
                        t[o.VkArticle] = {
                            width: 700,
                            height: 450
                        },
                        t[o.VkProfile] = {
                            width: 200,
                            height: 500
                        },
                        t[o.VkProfileBg] = {
                            width: 1590,
                            height: 400
                        },
                        t[o.LinkedinBgImage] = {
                            width: 1536,
                            height: 768
                        },
                        t[o.LinkedinStandardLogo] = {
                            width: 400,
                            height: 400
                        },
                        t[o.LinkedinBusinessBanner] = {
                            width: 646,
                            height: 220
                        },
                        t[o.LinkedinSquareLogo] = {
                            width: 60,
                            height: 60
                        },
                        n._sizes = t
                    }
                    return n._sizes
                },
                enumerable: !0,
                configurable: !0
            }),
            n.prototype.getSizeTypeMap = function() {
                return n.SIZE_TYPE_MAP
            }
            ,
            n.prototype.serialize = function() {
                for (var t = {
                    id: this.id,
                    brandId: this.brandId,
                    templateId: null !== this.template ? this.template.id : null,
                    text: this.text,
                    sizeType: this.sizeType,
                    items: []
                }, e = 0, n = this.items; e < n.length; e++) {
                    var i = n[e]
                      , r = i.serialize();
                    t.items.push(r)
                }
                return JSON.stringify(t)
            }
            ,
            n.prototype.save = function() {
                var e = this;
                return new t(function(t, r) {
                    i.ajax({
                        type: "POST",
                        url: n.SERVICE_URL.replace("{brandId}", "" + e.brandId),
                        dataType: "json",
                        data: e.serialize(),
                        success: function(n) {
                            e.id = n.id,
                            t(e)
                        }
                    })
                }
                )
            }
            ,
            n.prototype.saveTemplate = function() {
                if (!this.isTemplate)
                    return new t(function(t, e) {
                        e(this)
                    }
                    );
                var e = this;
                return new t(function(t, r) {
                    i.ajax({
                        type: "POST",
                        url: n.ADD_TEMPLATE_URL,
                        dataType: "json",
                        data: e.serialize(),
                        success: function(n) {
                            e.id = n.id,
                            t(e)
                        }
                    })
                }
                )
            }
            ,
            n.prototype.update = function() {
                var e = this;
                return new t(function(t, r) {
                    i.ajax({
                        type: "PUT",
                        url: n.SERVICE_URL.replace("{brandId}", "" + e.brandId) + (e.id + "/"),
                        dataType: "json",
                        data: e.serialize(),
                        success: function(n) {
                            e.id = n.id,
                            t(e)
                        }
                    })
                }
                )
            }
            ,
            n.deserialize = function(t, e) {
                if (void 0 === e && (e = null),
                null === t)
                    return null;
                var i = new n;
                i.brandId = null !== e ? e.id : t.brandId,
                i.id = t.id,
                i.template = this.deserialize(t.template),
                i.brand = e,
                i.text = t.text,
                i.number = t.number,
                i.sizeType = t.sizeType;
                for (var r = 0, o = t.items; r < o.length; r++) {
                    var s = o[r]
                      , u = null;
                    switch (s.type) {
                    case a.BPItem.SVG:
                        u = l.BPSvgItem.deserialize(s);
                        break;
                    case a.BPItem.TEXT:
                        u = c.BPTextItem.deserialize(s);
                        break;
                    case a.BPItem.LOGO:
                        if (u = h.BPLogoItem.deserialize(s),
                        null !== e) {
                            var d = u;
                            d.logo = e.getLogo(d.logoType, d.withSlogan),
                            u = d
                        }
                    }
                    u.product = i,
                    i.items.push(u)
                }
                return i
            }
            ,
            n.prototype.clone = function() {
                var t = new n;
                t.id = this.id,
                t.brandId = this.brandId,
                t.brand = this.brand,
                t.template = this.template,
                t.text = this.text,
                t.number = this.number,
                t.sizeType = this.sizeType;
                for (var e = 0, i = this.items; e < i.length; e++) {
                    var r = i[e]
                      , o = r.clone();
                    o.product = t,
                    t.items.push(o)
                }
                return t
            }
            ,
            n.getTemplateById = function(t) {
                for (var e = null, i = 0, r = n.templates; i < r.length; i++) {
                    var o = r[i];
                    if (o.id === t) {
                        e = o;
                        break
                    }
                }
                return e
            }
            ,
            n.loadTemplates = function(e, r) {
                void 0 === r && (r = null);
                for (var o = [], s = 0, a = n.templates; s < a.length; s++) {
                    var l = a[s];
                    o.push(l.id)
                }
                var c = {
                    lti: o,
                    neededCount: e,
                    neededSize: r
                };
                return new t(function(t, e) {
                    i.ajax({
                        type: "GET",
                        url: n.TEMPLATE_SERVICE_URL,
                        dataType: "json",
                        data: c,
                        success: function(e) {
                            for (var i = [], r = 0, o = e; r < o.length; r++) {
                                var s = o[r]
                                  , a = n.deserialize(s);
                                i.push(a),
                                n.templates.push(a)
                            }
                            t(i)
                        }
                    })
                }
                )
            }
            ,
            n.prototype.getProductBG = function() {
                var t = null !== this.template ? this.template.number : this.number
                  , e = d.ColorRange.BG_B;
                switch (t) {
                case 1:
                    e = d.ColorRange.BG_B;
                    break;
                case 2:
                    e = d.ColorRange.BG_C;
                    break;
                case 3:
                    e = d.ColorRange.BG_BLACK
                }
                return e
            }
            ,
            n.templates = [],
            n._sizes = null,
            n
        }(s.BrandProduct);
        e.SocialProduct = p
    }
    ).call(e, n(4), n(0))
}
, function(t, e, n) {
    /*!
 * iro.js v3.4.0
 * 2016-2018 James Daniel
 * Released under the MIT license
 * github.com/jaames/iro.js
 */
    !function(e, n) {
        t.exports = n()
    }(0, function() {
        return function(t) {
            function e(i) {
                if (n[i])
                    return n[i].exports;
                var r = n[i] = {
                    i: i,
                    l: !1,
                    exports: {}
                };
                return t[i].call(r.exports, r, r.exports, e),
                r.l = !0,
                r.exports
            }
            var n = {};
            return e.m = t,
            e.c = n,
            e.i = function(t) {
                return t
            }
            ,
            e.d = function(t, n, i) {
                e.o(t, n) || Object.defineProperty(t, n, {
                    configurable: !1,
                    enumerable: !0,
                    get: i
                })
            }
            ,
            e.n = function(t) {
                var n = t && t.__esModule ? function() {
                    return t.default
                }
                : function() {
                    return t
                }
                ;
                return e.d(n, "a", n),
                n
            }
            ,
            e.o = function(t, e) {
                return Object.prototype.hasOwnProperty.call(t, e)
            }
            ,
            e.p = "",
            e(e.s = 4)
        }([function(t, e, n) {
            "use strict";
            function i(t) {
                var e, n, i, r, o, s, a, l, c = t.h / 360, h = t.s / 100, u = t.v / 100;
                switch (r = x(6 * c),
                o = 6 * c - r,
                s = u * (1 - h),
                a = u * (1 - o * h),
                l = u * (1 - (1 - o) * h),
                r % 6) {
                case 0:
                    e = u,
                    n = l,
                    i = s;
                    break;
                case 1:
                    e = a,
                    n = u,
                    i = s;
                    break;
                case 2:
                    e = s,
                    n = u,
                    i = l;
                    break;
                case 3:
                    e = s,
                    n = a,
                    i = u;
                    break;
                case 4:
                    e = l,
                    n = s,
                    i = u;
                    break;
                case 5:
                    e = u,
                    n = s,
                    i = a
                }
                return {
                    r: w(255 * e),
                    g: w(255 * n),
                    b: w(255 * i)
                }
            }
            function r(t) {
                var e, n = t.r / 255, i = t.g / 255, r = t.b / 255, o = Math.max(n, i, r), s = Math.min(n, i, r), a = o - s;
                switch (o) {
                case s:
                    e = 0;
                    break;
                case n:
                    e = (i - r) / a + (i < r ? 6 : 0);
                    break;
                case i:
                    e = (r - n) / a + 2;
                    break;
                case r:
                    e = (n - i) / a + 4
                }
                return e /= 6,
                {
                    h: w(360 * e),
                    s: w(0 == o ? 0 : a / o * 100),
                    v: w(100 * o)
                }
            }
            function o(t) {
                var e = t.s / 100
                  , n = t.v / 100
                  , i = .5 * n * (2 - e);
                return e = n * e / (1 - Math.abs(2 * i - 1)),
                {
                    h: t.h,
                    s: w(100 * e) || 0,
                    l: w(100 * i)
                }
            }
            function s(t) {
                var e = t.s / 100
                  , n = t.l / 100;
                return n *= 2,
                e *= n <= 1 ? n : 2 - n,
                {
                    h: t.h,
                    s: w(2 * e / (n + e) * 100),
                    v: w((n + e) / 2 * 100)
                }
            }
            function a(t) {
                return "rgb" + (t.a ? "a" : "") + "(" + t.r + ", " + t.g + ", " + t.b + (t.a ? ", " + t.a : "") + ")"
            }
            function l(t) {
                return "hsl" + (t.a ? "a" : "") + "(" + t.h + ", " + t.s + "%, " + t.l + "%" + (t.a ? ", " + t.a : "") + ")"
            }
            function c(t) {
                var e = t.r
                  , n = t.g
                  , i = t.b
                  , r = e % 17 == 0 && n % 17 == 0 && i % 17 == 0
                  , o = r ? 17 : 1
                  , s = r ? 4 : 8
                  , a = r ? 4 : 7
                  , l = e / o << 2 * s | n / o << s | i / o
                  , c = l.toString(16);
                return "#" + new Array(a - c.length).join("0") + c
            }
            function h(t, e) {
                var n = t.match(/(\S+)\((\d+)(%?)(?:\D+?)(\d+)(%?)(?:\D+?)(\d+)(%?)(?:\D+?)?([0-9\.]+?)?\)/i)
                  , i = parseInt(n[2])
                  , r = parseInt(n[4])
                  , o = parseInt(n[6]);
                return [n[1], "%" == n[3] ? i / 100 * e[0] : i, "%" == n[5] ? r / 100 * e[1] : r, "%" == n[7] ? o / 100 * e[2] : o, parseFloat(n[8]) || void 0]
            }
            function u(t) {
                var e = h(t, [255, 255, 255]);
                return {
                    r: e[1],
                    g: e[2],
                    b: e[3]
                }
            }
            function d(t) {
                var e = h(t, [360, 100, 100]);
                return {
                    h: e[2],
                    s: e[3],
                    l: e[4]
                }
            }
            function p(t) {
                t = t.replace("#", "");
                var e = parseInt("0x" + t)
                  , n = 3 == t.length
                  , i = n ? 15 : 255
                  , r = n ? 4 : 8
                  , o = n ? 17 : 1;
                return {
                    r: (e >> 2 * r & i) * o,
                    g: (e >> r & i) * o,
                    b: (e & i) * o
                }
            }
            function f(t) {
                return t instanceof C ? t : new C(t)
            }
            function g(t, e, n) {
                return t <= e ? e : t >= n ? n : t
            }
            function m(t, e) {
                var n = {};
                for (var i in t)
                    n[i] = e[i] != t[i];
                return n
            }
            function _(t, e, n) {
                var i = f(t).rgb
                  , r = f(e).rgb;
                return n = g(n / 100 || .5, 0, 1),
                new C({
                    r: x(i.r + (r.r - i.r) * n),
                    g: x(i.g + (r.g - i.g) * n),
                    b: x(i.b + (r.b - i.b) * n)
                })
            }
            function v(t, e) {
                var n = f(t)
                  , i = n.hsv;
                return i.v = g(i.v + e, 0, 100),
                n.hsv = i,
                n
            }
            function y(t, e) {
                var n = f(t)
                  , i = n.hsv;
                return i.v = g(i.v - e, 0, 100),
                n.hsv = i,
                n
            }
            var b = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                return typeof t
            }
            : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
            }
              , w = Math.round
              , x = Math.floor
              , C = function(t) {
                this._onChange = !1,
                this._value = {
                    h: void 0,
                    s: void 0,
                    v: void 0
                },
                t && this.set(t)
            };
            C.mix = _,
            C.lighten = v,
            C.darken = y,
            C.hsv2Rgb = i,
            C.rgb2Hsv = r,
            C.hsv2Hsl = o,
            C.hsl2Hsv = s,
            C.hsl2Str = l,
            C.rgb2Str = a,
            C.rgb2Hex = c,
            C.parseHexStr = p,
            C.parseHslStr = d,
            C.parseRgbStr = u,
            C.prototype = {
                constructor: C,
                set: function(t) {
                    "object" == (void 0 === t ? "undefined" : b(t)) ? t instanceof C ? this.hsv = C.hsv : "r"in t ? this.rgb = t : "v"in t ? this.hsv = t : "l"in t && (this.hsl = t) : "string" == typeof t && (/^rgb/.test(t) ? this.rgbString = t : /^hsl/.test(t) ? this.hslString = t : /^#[0-9A-Fa-f]/.test(t) && (this.hexString = t))
                },
                setChannel: function(t, e, n) {
                    var i = this[t];
                    i[e] = n,
                    this[t] = i
                },
                clone: function() {
                    return new C(this)
                },
                compare: function(t, e) {
                    return e = e || "hsv",
                    m(this[e], f(t)[e])
                },
                mix: function(t, e) {
                    this.hsv = _(this, t, e).hsv
                },
                lighten: function(t) {
                    v(this, t)
                },
                darken: function(t) {
                    y(this, t)
                }
            },
            Object.defineProperties(C.prototype, {
                hsv: {
                    get: function() {
                        var t = this._value;
                        return {
                            h: t.h,
                            s: t.s,
                            v: t.v
                        }
                    },
                    set: function(t) {
                        if (this._onChange) {
                            var e = this._value;
                            for (var n in e)
                                t.hasOwnProperty(n) || (t[n] = e[n]);
                            var i = m(e, t);
                            this._value = t,
                            (i.h || i.s || i.v) && this._onChange(this, i)
                        } else
                            this._value = t
                    }
                },
                rgb: {
                    get: function() {
                        return i(this._value)
                    },
                    set: function(t) {
                        this.hsv = r(t)
                    }
                },
                hsl: {
                    get: function() {
                        return o(this._value)
                    },
                    set: function(t) {
                        this.hsv = s(t)
                    }
                },
                rgbString: {
                    get: function() {
                        return a(this.rgb)
                    },
                    set: function(t) {
                        this.rgb = u(t)
                    }
                },
                hexString: {
                    get: function() {
                        return c(this.rgb)
                    },
                    set: function(t) {
                        this.rgb = p(t)
                    }
                },
                hslString: {
                    get: function() {
                        return l(this.hsl)
                    },
                    set: function(t) {
                        this.hsl = C.parseHslStr(t)
                    }
                }
            }),
            t.exports = C
        }
        , function(t, e, n) {
            "use strict";
            var i = function() {
                var t = document.createElement("style");
                document.head.appendChild(t),
                t.appendChild(document.createTextNode("")),
                this.style = t;
                var e = t.sheet;
                this.sheet = e,
                this.rules = e.rules || e.cssRules,
                this.map = {}
            };
            i.prototype = {
                constructor: i,
                setRule: function(t, e, n) {
                    var i = this.sheet
                      , r = i.rules || i.cssRules
                      , o = this.map;
                    if (e = e.replace(/([A-Z])/g, function(t) {
                        return "-" + t.toLowerCase()
                    }),
                    o.hasOwnProperty(t))
                        o[t].setProperty(e, n);
                    else {
                        var s = r.length
                          , a = e + ": " + n;
                        try {
                            i.insertRule(t + " {" + a + ";}", s)
                        } catch (e) {
                            i.addRule(t, a, s)
                        } finally {
                            r = i.rules || i.cssRules,
                            o[t] = r[s].style
                        }
                    }
                }
            },
            Object.defineProperties(i.prototype, {
                enabled: {
                    get: function() {
                        return !this.sheet.disabled
                    },
                    set: function(t) {
                        this.sheet.disabled = !t
                    }
                },
                cssText: {
                    get: function() {
                        var t = this.map
                          , e = [];
                        for (var n in t)
                            e.push(n.replace(/,\W/g, ",\n") + " {\n\t" + t[n].cssText.replace(/;\W/g, ";\n\t") + "\n}");
                        return e.join("\n")
                    }
                },
                css: {
                    get: function() {
                        var t = this.map
                          , e = {};
                        for (var n in t) {
                            var i = t[n];
                            e[n] = {};
                            for (var r = 0; r < i.length; r++) {
                                var o = i[r];
                                e[n][o] = i.getPropertyValue(o)
                            }
                        }
                        return e
                    }
                }
            }),
            t.exports = i
        }
        , function(t, e, n) {
            "use strict";
            var i = function(t, e) {
                var n = t.g({
                    class: "iro__marker"
                });
                n.circle(0, 0, e.r, {
                    class: "iro__marker__outer",
                    fill: "none",
                    strokeWidth: 5,
                    stroke: "#000"
                }),
                n.circle(0, 0, e.r, {
                    class: "iro__marker__inner",
                    fill: "none",
                    strokeWidth: 2,
                    stroke: "#fff"
                }),
                this.g = n
            };
            i.prototype = {
                constructor: i,
                move: function(t, e) {
                    this.g.setTransform("translate", [t, e])
                }
            },
            t.exports = i
        }
        , function(t, e, n) {
            "use strict";
            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            function r(t, e, n) {
                for (var i = 0; i < e.length; i++)
                    t.addEventListener(e[i], n)
            }
            function o(t, e, n) {
                for (var i = 0; i < e.length; i++)
                    t.removeEventListener(e[i], n)
            }
            function s(t) {
                document.readyState == v ? t() : r(document, [_], function e(n) {
                    document.readyState == v && (t(),
                    o(document, [_], e))
                })
            }
            var a = n(7)
              , l = i(a)
              , c = n(5)
              , h = i(c)
              , u = n(6)
              , d = i(u)
              , p = n(0)
              , f = i(p)
              , g = n(1)
              , m = i(g)
              , _ = "readystatechange"
              , v = "complete"
              , y = function(t, e) {
                var n = this;
                e = e || {},
                this._events = {},
                this._mouseTarget = !1,
                this._colorChangeActive = !1,
                this.css = e.css || e.styles || void 0,
                s(function() {
                    n._mount(t, e)
                })
            };
            y.prototype = {
                constructor: y,
                _mount: function(t, e) {
                    var n = this;
                    t = "string" == typeof t ? document.querySelector(t) : t;
                    var i = e.width || parseInt(t.width) || 320
                      , o = e.height || parseInt(t.height) || 320
                      , s = e.padding + 2 || 6
                      , a = e.borderWidth || 0
                      , c = e.markerRadius || 8
                      , u = e.sliderMargin || 24
                      , p = e.sliderHeight || 2 * c + 2 * s + 2 * a
                      , g = Math.min(o - p - u, i)
                      , _ = g / 2 - a
                      , v = (i - g) / 2
                      , y = {
                        r: c
                    }
                      , b = {
                        w: a,
                        color: e.borderColor || "#fff"
                    };
                    this.el = t,
                    this.svg = new d.default(t,i,o,e.display),
                    this.ui = [new l.default(this.svg,{
                        cX: v + g / 2,
                        cY: g / 2,
                        r: _,
                        rMax: _ - (c + s),
                        marker: y,
                        border: b,
                        lightness: void 0 == e.wheelLightness || e.wheelLightness,
                        anticlockwise: e.anticlockwise
                    }), new h.default(this.svg,{
                        sliderType: "v",
                        x: v + a,
                        y: g + u,
                        w: g - 2 * a,
                        h: p - 2 * a,
                        r: p / 2 - a,
                        marker: y,
                        border: b
                    })],
                    this.stylesheet = new m.default,
                    this.color = new f.default,
                    this.color._onChange = this._update.bind(this),
                    this.color.set(e.color || e.defaultValue || "#fff"),
                    this.on("history:stateChange", function(t) {
                        n.svg.updateUrls(t)
                    }),
                    r(this.svg.el, ["mousedown", "touchstart"], this),
                    this.emit("mount", this)
                },
                _update: function(t, e) {
                    for (var n = t.rgbString, i = this.css, r = 0; r < this.ui.length; r++)
                        this.ui[r].update(t, e);
                    for (var o in i) {
                        var s = i[o];
                        for (var a in s)
                            this.stylesheet.setRule(o, a, n)
                    }
                    this._colorChangeActive || (this._colorChangeActive = !0,
                    this.emit("color:change", t, e),
                    this._colorChangeActive = !1)
                },
                on: function(t, e) {
                    var n = this._events;
                    (n[t] || (n[t] = [])).push(e)
                },
                off: function(t, e) {
                    var n = this._events[t];
                    n && n.splice(n.indexOf(e), 1)
                },
                emit: function(t) {
                    for (var e = this._events, n = (e[t] || []).concat(e["*"] || []), i = arguments.length, r = Array(i > 1 ? i - 1 : 0), o = 1; o < i; o++)
                        r[o - 1] = arguments[o];
                    for (var s = 0; s < n.length; s++)
                        n[s].apply(null, r)
                },
                handleEvent: function(t) {
                    var e = t.touches ? t.changedTouches[0] : t
                      , n = this.svg.el.getBoundingClientRect()
                      , i = e.clientX - n.left
                      , s = e.clientY - n.top;
                    switch (t.type) {
                    case "mousedown":
                    case "touchstart":
                        for (var a = 0; a < this.ui.length; a++) {
                            var l = this.ui[a];
                            l.checkHit(i, s) && (this._mouseTarget = l,
                            r(document, ["mousemove", "touchmove", "mouseup", "touchend"], this),
                            this.emit("input:start", this.color),
                            this.color.hsv = this._mouseTarget.input(i, s))
                        }
                        break;
                    case "mousemove":
                    case "touchmove":
                        this.color.hsv = this._mouseTarget.input(i, s);
                        break;
                    case "mouseup":
                    case "touchend":
                        this._mouseTarget = !1,
                        this.emit("input:end", this.color),
                        o(document, ["mousemove", "touchmove", "mouseup", "touchend"], this)
                    }
                    this._mouseTarget && t.preventDefault()
                }
            },
            t.exports = y
        }
        , function(t, e, n) {
            "use strict";
            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var r = n(3)
              , o = i(r)
              , s = n(0)
              , a = i(s)
              , l = n(1)
              , c = i(l);
            t.exports = {
                Color: a.default,
                ColorPicker: o.default,
                Stylesheet: c.default,
                version: "3.4.0"
            }
        }
        , function(t, e, n) {
            "use strict";
            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            var r = n(2)
              , o = i(r)
              , s = n(0)
              , a = i(s)
              , l = function(t, e) {
                var n = e.r
                  , i = e.w
                  , r = e.h
                  , s = e.x
                  , a = e.y
                  , l = e.border.w;
                e.range = {
                    min: s + n,
                    max: s + i - n,
                    w: i - 2 * n
                },
                e.sliderType = e.sliderType || "v",
                this.type = "slider",
                this._opts = e;
                var c = n + l / 2
                  , h = t.g({
                    class: "iro__slider"
                })
                  , u = h.insert("rect", {
                    class: "iro__slider__value",
                    rx: c,
                    ry: c,
                    x: s - l / 2,
                    y: a - l / 2,
                    width: i + l,
                    height: r + l,
                    strokeWidth: l,
                    stroke: e.border.color
                });
                u.setGradient("fill", t.gradient("linear", {
                    0: {
                        color: "#000"
                    },
                    100: {
                        color: "#fff"
                    }
                })),
                this._gradient = u.gradient,
                this.marker = new o.default(h,e.marker)
            };
            l.prototype = {
                constructor: l,
                update: function(t, e) {
                    var n = this._opts
                      , i = n.range
                      , r = t.hsv
                      , o = a.default.hsv2Hsl({
                        h: r.h,
                        s: r.s,
                        v: 100
                    });
                    if ("v" == n.sliderType && ((e.h || e.s) && this._gradient.stops[1].setAttrs({
                        stopColor: "hsl(" + o.h + "," + o.s + "%," + o.l + "%)"
                    }),
                    e.v)) {
                        var s = r.v / 100;
                        this.marker.move(i.min + s * i.w, n.y + n.h / 2)
                    }
                },
                input: function(t, e) {
                    var n = this._opts
                      , i = n.range
                      , r = Math.max(Math.min(t, i.max), i.min) - i.min;
                    return {
                        v: Math.round(100 / i.w * r)
                    }
                },
                checkHit: function(t, e) {
                    var n = this._opts;
                    return t > n.x && t < n.x + n.w && e > n.y && e < n.y + n.h
                }
            },
            t.exports = l
        }
        , function(t, e, n) {
            "use strict";
            var i = 0
              , r = {
                class: "class",
                stroke: "stroke",
                strokeWidth: "stroke-width",
                fill: "fill",
                opacity: "opacity",
                offset: "offset",
                stopColor: "stop-color",
                stopOpacity: "stop-opacity"
            }
              , o = {
                translate: "setTranslate",
                scale: "setScale",
                rotate: "setRotate"
            }
              , s = window.navigator.userAgent.toLowerCase()
              , a = /msie|trident|edge/.test(s)
              , l = /^((?!chrome|android).)*safari/i.test(s)
              , c = function(t, e, n, i) {
                var r = document.createElementNS("http://www.w3.org/2000/svg", n);
                this.el = r,
                this.setAttrs(i),
                (e.el || e).appendChild(r),
                this._root = t,
                this._svgTransforms = {},
                this._transformList = !!r.transform && r.transform.baseVal
            };
            c.prototype = {
                constructor: c,
                insert: function(t, e) {
                    return new c(this._root,this,t,e)
                },
                g: function(t) {
                    return this.insert("g", t)
                },
                arc: function(t, e, n, i, r, o) {
                    var s = r - i <= 180 ? 0 : 1;
                    i *= Math.PI / 180,
                    r *= Math.PI / 180;
                    var a = t + n * Math.cos(r)
                      , l = e + n * Math.sin(r)
                      , c = t + n * Math.cos(i)
                      , h = e + n * Math.sin(i);
                    return o = o || {},
                    o.d = ["M", a, l, "A", n, n, 0, s, 0, c, h].join(" "),
                    this.insert("path", o)
                },
                circle: function(t, e, n, i) {
                    return i = i || {},
                    i.cx = t,
                    i.cy = e,
                    i.r = n,
                    this.insert("circle", i)
                },
                setTransform: function(t, e) {
                    if (a)
                        this.setAttrs({
                            transform: t + "(" + e.join(", ") + ")"
                        });
                    else {
                        var n, i, r = this._svgTransforms;
                        r[t] ? n = r[t] : (n = this._root.el.createSVGTransform(),
                        r[t] = n,
                        this._transformList.appendItem(n)),
                        i = t in o ? o[t] : t,
                        n[i].apply(n, e)
                    }
                },
                setAttrs: function(t) {
                    for (var e in t) {
                        var n = e in r ? r[e] : e;
                        this.el.setAttribute(n, t[e])
                    }
                },
                setGradient: function(t, e) {
                    var n = {};
                    n[t] = e.getUrl(),
                    e._refs[t] = this,
                    this.gradient = e,
                    this.setAttrs(n)
                }
            };
            var h = function(t, e, n) {
                var r = []
                  , o = t._defs.insert(e + "Gradient", {
                    id: "iroGradient" + i++
                });
                for (var s in n) {
                    var a = n[s];
                    r.push(o.insert("stop", {
                        offset: s + "%",
                        stopColor: a.color,
                        stopOpacity: void 0 === a.opacity ? 1 : a.opacity
                    }))
                }
                this.el = o.el,
                this.stops = r,
                this._refs = {}
            };
            h.prototype.getUrl = function(t) {
                return "url(" + (l ? t || window.location.href : "") + "#" + this.el.id + ")"
            }
            ;
            var u = function(t, e, n, i) {
                c.call(this, this, t, "svg", {
                    width: e,
                    height: n,
                    style: "display:" + (i || "block")
                }),
                this._defs = this.insert("defs"),
                this._gradients = []
            };
            u.prototype = Object.create(c.prototype),
            u.prototype.constructor = u,
            u.prototype.gradient = function(t, e) {
                var n = new h(this,t,e);
                return this._gradients.push(n),
                n
            }
            ,
            u.prototype.updateUrls = function(t) {
                if (l)
                    for (var e = this._gradients, n = 0; n < e.length; n++)
                        for (var i in e[n]._refs) {
                            var r = {};
                            r[i] = e[n].getUrl(t),
                            e[n]._refs[i].setAttrs(r)
                        }
            }
            ,
            t.exports = u
        }
        , function(t, e, n) {
            "use strict";
            var i = n(2)
              , r = function(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }(i)
              , o = Math.PI
              , s = Math.sqrt
              , a = Math.abs
              , l = Math.round
              , c = function(t, e) {
                this._opts = e,
                this.type = "wheel";
                var n = e.cY
                  , i = e.cX
                  , o = e.r
                  , s = e.border
                  , a = t.g({
                    class: "iro__wheel"
                });
                a.circle(i, n, o + s.w / 2, {
                    class: "iro__wheel__border",
                    fill: "#fff",
                    stroke: s.color,
                    strokeWidth: s.w
                });
                for (var l = a.g({
                    class: "iro__wheel__hue",
                    strokeWidth: o,
                    fill: "none"
                }), c = 0; c < 360; c++)
                    l.arc(i, n, o / 2, c, c + 1.5, {
                        stroke: "hsl(" + (e.anticlockwise ? 360 - c : c) + ",100%,50%)"
                    });
                a.circle(i, n, o, {
                    class: "iro__wheel__saturation"
                }).setGradient("fill", t.gradient("radial", {
                    0: {
                        color: "#fff"
                    },
                    100: {
                        color: "#fff",
                        opacity: 0
                    }
                })),
                this._lightness = a.circle(i, n, o, {
                    class: "iro__wheel__lightness",
                    opacity: 0
                }),
                this.marker = new r.default(a,e.marker)
            };
            c.prototype = {
                constructor: c,
                update: function(t, e) {
                    var n = this._opts
                      , i = t.hsv;
                    if (e.v && n.lightness && this._lightness.setAttrs({
                        opacity: (1 - i.v / 100).toFixed(2)
                    }),
                    e.h || e.s) {
                        var r = (n.anticlockwise ? 360 - i.h : i.h) * (o / 180)
                          , s = i.s / 100 * n.rMax;
                        this.marker.move(n.cX + s * Math.cos(r), n.cY + s * Math.sin(r))
                    }
                },
                input: function(t, e) {
                    var n = this._opts
                      , i = n.rMax
                      , r = n.cX - t
                      , a = n.cY - e
                      , c = Math.atan2(a, r)
                      , h = l(c * (180 / o)) + 180
                      , u = Math.min(s(r * r + a * a), i);
                    return h = n.anticlockwise ? 360 - h : h,
                    {
                        h: h,
                        s: l(100 / i * u)
                    }
                },
                checkHit: function(t, e) {
                    var n = this._opts
                      , i = a(t - n.cX)
                      , r = a(e - n.cY);
                    return s(i * i + r * r) < n.r
                }
            },
            t.exports = c
        }
        ])
    })
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = function() {
        function t() {
            this.map = [[null, t.DEFAULT, "source-over"], ["i-mask", t.INVERTED_MASK, "destination-out"]]
        }
        return t.prototype.toModel = function(e) {
            if (null === e)
                return null;
            for (var n = null, i = 0, r = this.map; i < r.length; i++) {
                var o = r[i];
                if (o[t.MAP_RULE] === e) {
                    n = o[t.MAP_MODEL];
                    break
                }
            }
            return n
        }
        ,
        t.prototype.toContext2d = function(e, n) {
            var i;
            if (e === t.DEFAULT)
                i = "source-over";
            else
                for (var r = 0, o = this.map; r < o.length; r++) {
                    var s = o[r];
                    if (s[t.MAP_MODEL] === e) {
                        i = s[t.MAP_CANVAS];
                        break
                    }
                }
            n.globalCompositeOperation = i
        }
        ,
        t.DEFAULT = null,
        t.INVERTED_MASK = 1,
        t.MAP_RULE = 0,
        t.MAP_MODEL = 1,
        t.MAP_CANVAS = 2,
        t
    }();
    e.BlendManager = i
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(3)
      , r = n(1)
      , o = n(53)
      , s = n(80)
      , a = n(81)
      , l = n(7)
      , c = n(82)
      , h = n(83)
      , u = n(8)
      , d = function() {
        function t(t) {
            this._logo = null,
            this.context2d = null,
            this.items = [],
            this.zoom = 1,
            this.watermark = null,
            this.debugMode = !1,
            this.padding = 10,
            this.traceRect = new u.Rectangle(0,0,i.Logo.LOGO_SUGGESTION_WIDTH,i.Logo.LOGO_SUGGESTION_HEIGHT),
            this.offsetMatrix = null,
            t.canvas.oncontextmenu = function() {
                return !1
            }
            ,
            this.context2d = t
        }
        return Object.defineProperty(t.prototype, "width", {
            get: function() {
                return this.traceRect.width
            },
            set: function(t) {
                this.traceRect.width = t
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "height", {
            get: function() {
                return this.traceRect.height
            },
            set: function(t) {
                this.traceRect.height = t
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "logo", {
            get: function() {
                return this._logo
            },
            set: function(t) {
                this._logo = t
            },
            enumerable: !0,
            configurable: !0
        }),
        t.prototype.draw = function(e) {
            void 0 === e && (e = null),
            this.clear(),
            this.items.length = 0;
            var n = new r.Matrix;
            this.traceRect.width != i.Logo.LOGO_SUGGESTION_WIDTH && this.traceRect.height != i.Logo.LOGO_SUGGESTION_HEIGHT && (n = this._logo.getCenteringMatrix(this.padding, this.traceRect.width, this.traceRect.height),
            this.zoom = 1),
            n.translate(this.traceRect.x, this.traceRect.y),
            null !== this.offsetMatrix && n.concat(this.offsetMatrix);
            for (var o = 0, s = this._logo.items; o < s.length; o++) {
                var a = s[o];
                if (!a.isText || "" !== a.text) {
                    var l = t.createItemView(a, this.context2d);
                    l.zoom = this.zoom,
                    null === l.offsetMatrix && null !== n ? l.offsetMatrix = n : null !== l.offsetMatrix && null !== n && l.offsetMatrix.concat(n),
                    this.items.push(l),
                    l.draw(e)
                }
            }
            null !== this.watermark && this.drawWatermark(),
            this.debugMode && this.drawOutline()
        }
        ,
        t.prototype.drawWatermark = function() {
            this.context2d.drawImage(this.watermark, 0, 0)
        }
        ,
        t.prototype.drawOutline = function() {
            this.context2d.save(),
            null !== this.offsetMatrix && this.offsetMatrix.setToContext2d(this.context2d),
            this.context2d.lineWidth = 2,
            this.context2d.strokeRect(this.traceRect.x, this.traceRect.y, this.traceRect.width * this.zoom, this.traceRect.height * this.zoom),
            this.context2d.restore()
        }
        ,
        t.prototype.clear = function() {
            r.Matrix.resetContext2d(this.context2d),
            this.context2d.clearRect(0, 0, this.context2d.canvas.width, this.context2d.canvas.height)
        }
        ,
        t.createItemView = function(t, e) {
            var n = null;
            switch (t.type) {
            case l.LogoItem.SVG_ICON:
                n = new o.SvgIconView(t,e);
                break;
            case l.LogoItem.TEXT_ICON:
                n = new c.TextIconView(t,e);
                break;
            case l.LogoItem.BASE_TEXT:
            case l.LogoItem.LOGO_NAME:
            case l.LogoItem.TAGLINE:
            case l.LogoItem.MONOGRAM:
            case l.LogoItem.CUSTOM_TEXT:
                n = new s.TextView(t,e);
                break;
            case l.LogoItem.RICH_TEXT:
                n = new a.RichTextView(t,e);
                break;
            case l.LogoItem.LINE:
                n = new h.LineView(t,e)
            }
            return n
        }
        ,
        t
    }();
    e.LogoView = d
}
, function(t, e, n) {
    (function(r, o) {
        var s, a, l;
        !function(i, r) {
            "use strict";
            a = [n(62), n(63)],
            s = r,
            void 0 !== (l = "function" == typeof s ? s.apply(e, a) : s) && (t.exports = l),
            i.canvg = r(i.RGBColor, i.stackBlur)
        }("undefined" != typeof window ? window : this, function(t, e) {
            function n(t) {
                var e = [0, 0, 0]
                  , n = function(n, i) {
                    var r = t.match(n);
                    null != r && (e[i] += r.length,
                    t = t.replace(n, " "))
                };
                return t = t.replace(/:not\(([^\)]*)\)/g, "     $1 "),
                t = t.replace(/{[\s\S]*/gm, " "),
                n(c, 1),
                n(h, 0),
                n(u, 1),
                n(d, 2),
                n(p, 1),
                n(f, 1),
                t = t.replace(/[\*\s\+>~]/g, " "),
                t = t.replace(/[#\.]/g, " "),
                n(g, 2),
                e.join("")
            }
            function s(r) {
                var o = {
                    opts: r
                };
                o.FRAMERATE = 30,
                o.MAX_VIRTUAL_PIXELS = 3e4,
                o.log = function(t) {}
                ,
                1 == o.opts.log && "undefined" != typeof console && (o.log = function(t) {
                    console.log(t)
                }
                ),
                o.init = function(t) {
                    var e = 0;
                    o.UniqueId = function() {
                        return "canvg" + ++e
                    }
                    ,
                    o.Definitions = {},
                    o.Styles = {},
                    o.StylesSpecificity = {},
                    o.Animations = [],
                    o.Images = [],
                    o.ctx = t,
                    o.ViewPort = new function() {
                        this.viewPorts = [],
                        this.Clear = function() {
                            this.viewPorts = []
                        }
                        ,
                        this.SetCurrent = function(t, e) {
                            this.viewPorts.push({
                                width: t,
                                height: e
                            })
                        }
                        ,
                        this.RemoveCurrent = function() {
                            this.viewPorts.pop()
                        }
                        ,
                        this.Current = function() {
                            return this.viewPorts[this.viewPorts.length - 1]
                        }
                        ,
                        this.width = function() {
                            return this.Current().width
                        }
                        ,
                        this.height = function() {
                            return this.Current().height
                        }
                        ,
                        this.ComputeSize = function(t) {
                            return null != t && "number" == typeof t ? t : "x" == t ? this.width() : "y" == t ? this.height() : Math.sqrt(Math.pow(this.width(), 2) + Math.pow(this.height(), 2)) / Math.sqrt(2)
                        }
                    }
                }
                ,
                o.init(),
                o.ImagesLoaded = function() {
                    for (var t = 0; t < o.Images.length; t++)
                        if (!o.Images[t].loaded)
                            return !1;
                    return !0
                }
                ,
                o.trim = function(t) {
                    return t.replace(/^\s+|\s+$/g, "")
                }
                ,
                o.compressSpaces = function(t) {
                    return t.replace(/[\s\r\t\n]+/gm, " ")
                }
                ,
                o.ajax = function(t) {
                    var e;
                    return e = window.XMLHttpRequest ? new XMLHttpRequest : new ActiveXObject("Microsoft.XMLHTTP"),
                    e ? (e.open("GET", t, !1),
                    e.send(null),
                    e.responseText) : null
                }
                ,
                o.parseXml = function(t) {
                    if ("undefined" != typeof Windows && void 0 !== Windows.Data && void 0 !== Windows.Data.Xml) {
                        var e = new Windows.Data.Xml.Dom.XmlDocument
                          , n = new Windows.Data.Xml.Dom.XmlLoadSettings;
                        return n.prohibitDtd = !1,
                        e.loadXml(t, n),
                        e
                    }
                    if (!window.DOMParser) {
                        t = t.replace(/<!DOCTYPE svg[^>]*>/, "");
                        var e = new ActiveXObject("Microsoft.XMLDOM");
                        return e.async = "false",
                        e.loadXML(t),
                        e
                    }
                    try {
                        var i = new DOMParser;
                        return i.parseFromString(t, "image/svg+xml")
                    } catch (e) {
                        return i = new DOMParser,
                        i.parseFromString(t, "text/xml")
                    }
                }
                ,
                o.Property = function(t, e) {
                    this.name = t,
                    this.value = e
                }
                ,
                o.Property.prototype.getValue = function() {
                    return this.value
                }
                ,
                o.Property.prototype.hasValue = function() {
                    return null != this.value && "" !== this.value
                }
                ,
                o.Property.prototype.numValue = function() {
                    if (!this.hasValue())
                        return 0;
                    var t = parseFloat(this.value);
                    return (this.value + "").match(/%$/) && (t /= 100),
                    t
                }
                ,
                o.Property.prototype.valueOrDefault = function(t) {
                    return this.hasValue() ? this.value : t
                }
                ,
                o.Property.prototype.numValueOrDefault = function(t) {
                    return this.hasValue() ? this.numValue() : t
                }
                ,
                o.Property.prototype.addOpacity = function(e) {
                    var n = this.value;
                    if (null != e.value && "" != e.value && "string" == typeof this.value) {
                        var i = new t(this.value);
                        i.ok && (n = "rgba(" + i.r + ", " + i.g + ", " + i.b + ", " + e.numValue() + ")")
                    }
                    return new o.Property(this.name,n)
                }
                ,
                o.Property.prototype.getDefinition = function() {
                    var t = this.value.match(/#([^\)'"]+)/);
                    return t && (t = t[1]),
                    t || (t = this.value),
                    o.Definitions[t]
                }
                ,
                o.Property.prototype.isUrlDefinition = function() {
                    return 0 == this.value.indexOf("url(")
                }
                ,
                o.Property.prototype.getFillStyleDefinition = function(t, e) {
                    var n = this.getDefinition();
                    if (null != n && n.createGradient)
                        return n.createGradient(o.ctx, t, e);
                    if (null != n && n.createPattern) {
                        if (n.getHrefAttribute().hasValue()) {
                            var i = n.attribute("patternTransform");
                            n = n.getHrefAttribute().getDefinition(),
                            i.hasValue() && (n.attribute("patternTransform", !0).value = i.value)
                        }
                        return n.createPattern(o.ctx, t)
                    }
                    return null
                }
                ,
                o.Property.prototype.getDPI = function(t) {
                    return 96
                }
                ,
                o.Property.prototype.getEM = function(t) {
                    var e = 12
                      , n = new o.Property("fontSize",o.Font.Parse(o.ctx.font).fontSize);
                    return n.hasValue() && (e = n.toPixels(t)),
                    e
                }
                ,
                o.Property.prototype.getUnits = function() {
                    return (this.value + "").replace(/[0-9\.\-]/g, "")
                }
                ,
                o.Property.prototype.toPixels = function(t, e) {
                    if (!this.hasValue())
                        return 0;
                    var n = this.value + "";
                    if (n.match(/em$/))
                        return this.numValue() * this.getEM(t);
                    if (n.match(/ex$/))
                        return this.numValue() * this.getEM(t) / 2;
                    if (n.match(/px$/))
                        return this.numValue();
                    if (n.match(/pt$/))
                        return this.numValue() * this.getDPI(t) * (1 / 72);
                    if (n.match(/pc$/))
                        return 15 * this.numValue();
                    if (n.match(/cm$/))
                        return this.numValue() * this.getDPI(t) / 2.54;
                    if (n.match(/mm$/))
                        return this.numValue() * this.getDPI(t) / 25.4;
                    if (n.match(/in$/))
                        return this.numValue() * this.getDPI(t);
                    if (n.match(/%$/))
                        return this.numValue() * o.ViewPort.ComputeSize(t);
                    var i = this.numValue();
                    return e && i < 1 ? i * o.ViewPort.ComputeSize(t) : i
                }
                ,
                o.Property.prototype.toMilliseconds = function() {
                    if (!this.hasValue())
                        return 0;
                    var t = this.value + "";
                    return t.match(/s$/) ? 1e3 * this.numValue() : (t.match(/ms$/),
                    this.numValue())
                }
                ,
                o.Property.prototype.toRadians = function() {
                    if (!this.hasValue())
                        return 0;
                    var t = this.value + "";
                    return t.match(/deg$/) ? this.numValue() * (Math.PI / 180) : t.match(/grad$/) ? this.numValue() * (Math.PI / 200) : t.match(/rad$/) ? this.numValue() : this.numValue() * (Math.PI / 180)
                }
                ;
                var s = {
                    baseline: "alphabetic",
                    "before-edge": "top",
                    "text-before-edge": "top",
                    middle: "middle",
                    central: "middle",
                    "after-edge": "bottom",
                    "text-after-edge": "bottom",
                    ideographic: "ideographic",
                    alphabetic: "alphabetic",
                    hanging: "hanging",
                    mathematical: "alphabetic"
                };
                return o.Property.prototype.toTextBaseline = function() {
                    return this.hasValue() ? s[this.value] : null
                }
                ,
                o.Font = new function() {
                    this.Styles = "normal|italic|oblique|inherit",
                    this.Variants = "normal|small-caps|inherit",
                    this.Weights = "normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",
                    this.CreateFont = function(t, e, n, i, r, s) {
                        var a = null != s ? this.Parse(s) : this.CreateFont("", "", "", "", "", o.ctx.font);
                        return {
                            fontFamily: r || a.fontFamily,
                            fontSize: i || a.fontSize,
                            fontStyle: t || a.fontStyle,
                            fontWeight: n || a.fontWeight,
                            fontVariant: e || a.fontVariant,
                            toString: function() {
                                return [this.fontStyle, this.fontVariant, this.fontWeight, this.fontSize, this.fontFamily].join(" ")
                            }
                        }
                    }
                    ;
                    var t = this;
                    this.Parse = function(e) {
                        for (var n = {}, i = o.trim(o.compressSpaces(e || "")).split(" "), r = {
                            fontSize: !1,
                            fontStyle: !1,
                            fontWeight: !1,
                            fontVariant: !1
                        }, s = "", a = 0; a < i.length; a++)
                            r.fontStyle || -1 == t.Styles.indexOf(i[a]) ? r.fontVariant || -1 == t.Variants.indexOf(i[a]) ? r.fontWeight || -1 == t.Weights.indexOf(i[a]) ? r.fontSize ? "inherit" != i[a] && (s += i[a]) : ("inherit" != i[a] && (n.fontSize = i[a].split("/")[0]),
                            r.fontStyle = r.fontVariant = r.fontWeight = r.fontSize = !0) : ("inherit" != i[a] && (n.fontWeight = i[a]),
                            r.fontStyle = r.fontVariant = r.fontWeight = !0) : ("inherit" != i[a] && (n.fontVariant = i[a]),
                            r.fontStyle = r.fontVariant = !0) : ("inherit" != i[a] && (n.fontStyle = i[a]),
                            r.fontStyle = !0);
                        return "" != s && (n.fontFamily = s),
                        n
                    }
                }
                ,
                o.ToNumberArray = function(t) {
                    for (var e = o.trim(o.compressSpaces((t || "").replace(/,/g, " "))).split(" "), n = 0; n < e.length; n++)
                        e[n] = parseFloat(e[n]);
                    return e
                }
                ,
                o.Point = function(t, e) {
                    this.x = t,
                    this.y = e
                }
                ,
                o.Point.prototype.angleTo = function(t) {
                    return Math.atan2(t.y - this.y, t.x - this.x)
                }
                ,
                o.Point.prototype.applyTransform = function(t) {
                    var e = this.x * t[0] + this.y * t[2] + t[4]
                      , n = this.x * t[1] + this.y * t[3] + t[5];
                    this.x = e,
                    this.y = n
                }
                ,
                o.CreatePoint = function(t) {
                    var e = o.ToNumberArray(t);
                    return new o.Point(e[0],e[1])
                }
                ,
                o.CreatePath = function(t) {
                    for (var e = o.ToNumberArray(t), n = [], i = 0; i < e.length; i += 2)
                        n.push(new o.Point(e[i],e[i + 1]));
                    return n
                }
                ,
                o.BoundingBox = function(t, e, n, r) {
                    this.x1 = Number.NaN,
                    this.y1 = Number.NaN,
                    this.x2 = Number.NaN,
                    this.y2 = Number.NaN,
                    this.x = function() {
                        return this.x1
                    }
                    ,
                    this.y = function() {
                        return this.y1
                    }
                    ,
                    this.width = function() {
                        return this.x2 - this.x1
                    }
                    ,
                    this.height = function() {
                        return this.y2 - this.y1
                    }
                    ,
                    this.addPoint = function(t, e) {
                        null != t && ((isNaN(this.x1) || isNaN(this.x2)) && (this.x1 = t,
                        this.x2 = t),
                        t < this.x1 && (this.x1 = t),
                        t > this.x2 && (this.x2 = t)),
                        null != e && ((isNaN(this.y1) || isNaN(this.y2)) && (this.y1 = e,
                        this.y2 = e),
                        e < this.y1 && (this.y1 = e),
                        e > this.y2 && (this.y2 = e))
                    }
                    ,
                    this.addX = function(t) {
                        this.addPoint(t, null)
                    }
                    ,
                    this.addY = function(t) {
                        this.addPoint(null, t)
                    }
                    ,
                    this.addBoundingBox = function(t) {
                        this.addPoint(t.x1, t.y1),
                        this.addPoint(t.x2, t.y2)
                    }
                    ,
                    this.addQuadraticCurve = function(t, e, n, i, r, o) {
                        var s = t + 2 / 3 * (n - t)
                          , a = e + 2 / 3 * (i - e)
                          , l = s + 1 / 3 * (r - t)
                          , c = a + 1 / 3 * (o - e);
                        this.addBezierCurve(t, e, s, l, a, c, r, o)
                    }
                    ,
                    this.addBezierCurve = function(t, e, n, r, o, s, a, l) {
                        var c = [t, e]
                          , h = [n, r]
                          , u = [o, s]
                          , d = [a, l];
                        for (this.addPoint(c[0], c[1]),
                        this.addPoint(d[0], d[1]),
                        i = 0; i <= 1; i++) {
                            var p = function(t) {
                                return Math.pow(1 - t, 3) * c[i] + 3 * Math.pow(1 - t, 2) * t * h[i] + 3 * (1 - t) * Math.pow(t, 2) * u[i] + Math.pow(t, 3) * d[i]
                            }
                              , f = 6 * c[i] - 12 * h[i] + 6 * u[i]
                              , g = -3 * c[i] + 9 * h[i] - 9 * u[i] + 3 * d[i]
                              , m = 3 * h[i] - 3 * c[i];
                            if (0 != g) {
                                var _ = Math.pow(f, 2) - 4 * m * g;
                                if (!(_ < 0)) {
                                    var v = (-f + Math.sqrt(_)) / (2 * g);
                                    0 < v && v < 1 && (0 == i && this.addX(p(v)),
                                    1 == i && this.addY(p(v)));
                                    var y = (-f - Math.sqrt(_)) / (2 * g);
                                    0 < y && y < 1 && (0 == i && this.addX(p(y)),
                                    1 == i && this.addY(p(y)))
                                }
                            } else {
                                if (0 == f)
                                    continue;
                                var b = -m / f;
                                0 < b && b < 1 && (0 == i && this.addX(p(b)),
                                1 == i && this.addY(p(b)))
                            }
                        }
                    }
                    ,
                    this.isPointInBox = function(t, e) {
                        return this.x1 <= t && t <= this.x2 && this.y1 <= e && e <= this.y2
                    }
                    ,
                    this.addPoint(t, e),
                    this.addPoint(n, r)
                }
                ,
                o.Transform = function(t) {
                    var e = this;
                    this.Type = {},
                    this.Type.translate = function(t) {
                        this.p = o.CreatePoint(t),
                        this.apply = function(t) {
                            t.translate(this.p.x || 0, this.p.y || 0)
                        }
                        ,
                        this.unapply = function(t) {
                            t.translate(-1 * this.p.x || 0, -1 * this.p.y || 0)
                        }
                        ,
                        this.applyToPoint = function(t) {
                            t.applyTransform([1, 0, 0, 1, this.p.x || 0, this.p.y || 0])
                        }
                    }
                    ,
                    this.Type.rotate = function(t) {
                        var e = o.ToNumberArray(t);
                        this.angle = new o.Property("angle",e[0]),
                        this.cx = e[1] || 0,
                        this.cy = e[2] || 0,
                        this.apply = function(t) {
                            t.translate(this.cx, this.cy),
                            t.rotate(this.angle.toRadians()),
                            t.translate(-this.cx, -this.cy)
                        }
                        ,
                        this.unapply = function(t) {
                            t.translate(this.cx, this.cy),
                            t.rotate(-1 * this.angle.toRadians()),
                            t.translate(-this.cx, -this.cy)
                        }
                        ,
                        this.applyToPoint = function(t) {
                            var e = this.angle.toRadians();
                            t.applyTransform([1, 0, 0, 1, this.p.x || 0, this.p.y || 0]),
                            t.applyTransform([Math.cos(e), Math.sin(e), -Math.sin(e), Math.cos(e), 0, 0]),
                            t.applyTransform([1, 0, 0, 1, -this.p.x || 0, -this.p.y || 0])
                        }
                    }
                    ,
                    this.Type.scale = function(t) {
                        this.p = o.CreatePoint(t),
                        this.apply = function(t) {
                            t.scale(this.p.x || 1, this.p.y || this.p.x || 1)
                        }
                        ,
                        this.unapply = function(t) {
                            t.scale(1 / this.p.x || 1, 1 / this.p.y || this.p.x || 1)
                        }
                        ,
                        this.applyToPoint = function(t) {
                            t.applyTransform([this.p.x || 0, 0, 0, this.p.y || 0, 0, 0])
                        }
                    }
                    ,
                    this.Type.matrix = function(t) {
                        this.m = o.ToNumberArray(t),
                        this.apply = function(t) {
                            t.transform(this.m[0], this.m[1], this.m[2], this.m[3], this.m[4], this.m[5])
                        }
                        ,
                        this.unapply = function(t) {
                            var e = this.m[0]
                              , n = this.m[2]
                              , i = this.m[4]
                              , r = this.m[1]
                              , o = this.m[3]
                              , s = this.m[5]
                              , a = 1 / (e * (1 * o - 0 * s) - n * (1 * r - 0 * s) + i * (0 * r - 0 * o));
                            t.transform(a * (1 * o - 0 * s), a * (0 * s - 1 * r), a * (0 * i - 1 * n), a * (1 * e - 0 * i), a * (n * s - i * o), a * (i * r - e * s))
                        }
                        ,
                        this.applyToPoint = function(t) {
                            t.applyTransform(this.m)
                        }
                    }
                    ,
                    this.Type.SkewBase = function(t) {
                        this.base = e.Type.matrix,
                        this.base(t),
                        this.angle = new o.Property("angle",t)
                    }
                    ,
                    this.Type.SkewBase.prototype = new this.Type.matrix,
                    this.Type.skewX = function(t) {
                        this.base = e.Type.SkewBase,
                        this.base(t),
                        this.m = [1, 0, Math.tan(this.angle.toRadians()), 1, 0, 0]
                    }
                    ,
                    this.Type.skewX.prototype = new this.Type.SkewBase,
                    this.Type.skewY = function(t) {
                        this.base = e.Type.SkewBase,
                        this.base(t),
                        this.m = [1, Math.tan(this.angle.toRadians()), 0, 1, 0, 0]
                    }
                    ,
                    this.Type.skewY.prototype = new this.Type.SkewBase,
                    this.transforms = [],
                    this.apply = function(t) {
                        for (var e = 0; e < this.transforms.length; e++)
                            this.transforms[e].apply(t)
                    }
                    ,
                    this.unapply = function(t) {
                        for (var e = this.transforms.length - 1; e >= 0; e--)
                            this.transforms[e].unapply(t)
                    }
                    ,
                    this.applyToPoint = function(t) {
                        for (var e = 0; e < this.transforms.length; e++)
                            this.transforms[e].applyToPoint(t)
                    }
                    ;
                    for (var n = o.trim(o.compressSpaces(t)).replace(/\)([a-zA-Z])/g, ") $1").replace(/\)(\s?,\s?)/g, ") ").split(/\s(?=[a-z])/), i = 0; i < n.length; i++) {
                        var r = o.trim(n[i].split("(")[0])
                          , s = n[i].split("(")[1].replace(")", "")
                          , a = this.Type[r];
                        if (void 0 !== a) {
                            var l = new a(s);
                            l.type = r,
                            this.transforms.push(l)
                        }
                    }
                }
                ,
                o.AspectRatio = function(t, e, n, i, r, s, a, l, c, h) {
                    e = o.compressSpaces(e),
                    e = e.replace(/^defer\s/, "");
                    var u = e.split(" ")[0] || "xMidYMid"
                      , d = e.split(" ")[1] || "meet"
                      , p = n / i
                      , f = r / s
                      , g = Math.min(p, f)
                      , m = Math.max(p, f);
                    "meet" == d && (i *= g,
                    s *= g),
                    "slice" == d && (i *= m,
                    s *= m),
                    c = new o.Property("refX",c),
                    h = new o.Property("refY",h),
                    c.hasValue() && h.hasValue() ? t.translate(-g * c.toPixels("x"), -g * h.toPixels("y")) : (u.match(/^xMid/) && ("meet" == d && g == f || "slice" == d && m == f) && t.translate(n / 2 - i / 2, 0),
                    u.match(/YMid$/) && ("meet" == d && g == p || "slice" == d && m == p) && t.translate(0, r / 2 - s / 2),
                    u.match(/^xMax/) && ("meet" == d && g == f || "slice" == d && m == f) && t.translate(n - i, 0),
                    u.match(/YMax$/) && ("meet" == d && g == p || "slice" == d && m == p) && t.translate(0, r - s)),
                    "none" == u ? t.scale(p, f) : "meet" == d ? t.scale(g, g) : "slice" == d && t.scale(m, m),
                    t.translate(null == a ? 0 : -a, null == l ? 0 : -l)
                }
                ,
                o.Element = {},
                o.EmptyProperty = new o.Property("EMPTY",""),
                o.Element.ElementBase = function(t) {
                    this.attributes = {},
                    this.styles = {},
                    this.stylesSpecificity = {},
                    this.children = [],
                    this.attribute = function(t, e) {
                        var n = this.attributes[t];
                        return null != n ? n : (1 == e && (n = new o.Property(t,""),
                        this.attributes[t] = n),
                        n || o.EmptyProperty)
                    }
                    ,
                    this.getHrefAttribute = function() {
                        for (var t in this.attributes)
                            if ("href" == t || t.match(/:href$/))
                                return this.attributes[t];
                        return o.EmptyProperty
                    }
                    ,
                    this.style = function(t, e, n) {
                        var i = this.styles[t];
                        if (null != i)
                            return i;
                        var r = this.attribute(t);
                        if (null != r && r.hasValue())
                            return this.styles[t] = r,
                            r;
                        if (1 != n) {
                            var s = this.parent;
                            if (null != s) {
                                var a = s.style(t);
                                if (null != a && a.hasValue())
                                    return a
                            }
                        }
                        return 1 == e && (i = new o.Property(t,""),
                        this.styles[t] = i),
                        i || o.EmptyProperty
                    }
                    ,
                    this.render = function(t) {
                        if ("none" != this.style("display").value && "hidden" != this.style("visibility").value) {
                            if (t.save(),
                            this.style("mask").hasValue()) {
                                var e = this.style("mask").getDefinition();
                                null != e && e.apply(t, this)
                            } else if (this.style("filter").hasValue()) {
                                var n = this.style("filter").getDefinition();
                                null != n && n.apply(t, this)
                            } else
                                this.setContext(t),
                                this.renderChildren(t),
                                this.clearContext(t);
                            t.restore()
                        }
                    }
                    ,
                    this.setContext = function(t) {}
                    ,
                    this.clearContext = function(t) {}
                    ,
                    this.renderChildren = function(t) {
                        for (var e = 0; e < this.children.length; e++)
                            this.children[e].render(t)
                    }
                    ,
                    this.addChild = function(t, e) {
                        var n = t;
                        e && (n = o.CreateElement(t)),
                        n.parent = this,
                        "title" != n.type && this.children.push(n)
                    }
                    ,
                    this.addStylesFromStyleDefinition = function() {
                        for (var e in o.Styles)
                            if ("@" != e[0] && a(t, e)) {
                                var n = o.Styles[e]
                                  , i = o.StylesSpecificity[e];
                                if (null != n)
                                    for (var r in n) {
                                        var s = this.stylesSpecificity[r];
                                        void 0 === s && (s = "000"),
                                        i > s && (this.styles[r] = n[r],
                                        this.stylesSpecificity[r] = i)
                                    }
                            }
                    }
                    ;
                    var e = new RegExp("^[A-Z-]+$");
                    if (null != t && 1 == t.nodeType) {
                        for (var n = 0; n < t.attributes.length; n++) {
                            var i = t.attributes[n]
                              , r = function(t) {
                                return e.test(t) ? t.toLowerCase() : t
                            }(i.nodeName);
                            this.attributes[r] = new o.Property(r,i.value)
                        }
                        if (this.addStylesFromStyleDefinition(),
                        this.attribute("style").hasValue())
                            for (var s = this.attribute("style").value.split(";"), n = 0; n < s.length; n++)
                                if ("" != o.trim(s[n])) {
                                    var l = s[n].split(":")
                                      , c = o.trim(l[0])
                                      , h = o.trim(l[1]);
                                    this.styles[c] = new o.Property(c,h)
                                }
                        this.attribute("id").hasValue() && null == o.Definitions[this.attribute("id").value] && (o.Definitions[this.attribute("id").value] = this);
                        for (var n = 0; n < t.childNodes.length; n++) {
                            var u = t.childNodes[n];
                            if (1 == u.nodeType && this.addChild(u, !0),
                            this.captureTextNodes && (3 == u.nodeType || 4 == u.nodeType)) {
                                var d = u.value || u.text || u.textContent || "";
                                "" != o.compressSpaces(d) && this.addChild(new o.Element.tspan(u), !1)
                            }
                        }
                    }
                }
                ,
                o.Element.RenderedElementBase = function(t) {
                    this.base = o.Element.ElementBase,
                    this.base(t),
                    this.setContext = function(t) {
                        if (this.style("fill").isUrlDefinition()) {
                            var e = this.style("fill").getFillStyleDefinition(this, this.style("fill-opacity"));
                            null != e && (t.fillStyle = e)
                        } else if (this.style("fill").hasValue()) {
                            var n = this.style("fill");
                            "currentColor" == n.value && (n.value = this.style("color").value),
                            "inherit" != n.value && (t.fillStyle = "none" == n.value ? "rgba(0,0,0,0)" : n.value)
                        }
                        if (this.style("fill-opacity").hasValue()) {
                            var n = new o.Property("fill",t.fillStyle);
                            n = n.addOpacity(this.style("fill-opacity")),
                            t.fillStyle = n.value
                        }
                        if (this.style("stroke").isUrlDefinition()) {
                            var e = this.style("stroke").getFillStyleDefinition(this, this.style("stroke-opacity"));
                            null != e && (t.strokeStyle = e)
                        } else if (this.style("stroke").hasValue()) {
                            var i = this.style("stroke");
                            "currentColor" == i.value && (i.value = this.style("color").value),
                            "inherit" != i.value && (t.strokeStyle = "none" == i.value ? "rgba(0,0,0,0)" : i.value)
                        }
                        if (this.style("stroke-opacity").hasValue()) {
                            var i = new o.Property("stroke",t.strokeStyle);
                            i = i.addOpacity(this.style("stroke-opacity")),
                            t.strokeStyle = i.value
                        }
                        if (this.style("stroke-width").hasValue()) {
                            var r = this.style("stroke-width").toPixels();
                            t.lineWidth = 0 == r ? .001 : r
                        }
                        if (this.style("stroke-linecap").hasValue() && (t.lineCap = this.style("stroke-linecap").value),
                        this.style("stroke-linejoin").hasValue() && (t.lineJoin = this.style("stroke-linejoin").value),
                        this.style("stroke-miterlimit").hasValue() && (t.miterLimit = this.style("stroke-miterlimit").value),
                        this.style("stroke-dasharray").hasValue() && "none" != this.style("stroke-dasharray").value) {
                            var s = o.ToNumberArray(this.style("stroke-dasharray").value);
                            void 0 !== t.setLineDash ? t.setLineDash(s) : void 0 !== t.webkitLineDash ? t.webkitLineDash = s : void 0 === t.mozDash || 1 == s.length && 0 == s[0] || (t.mozDash = s);
                            var a = this.style("stroke-dashoffset").numValueOrDefault(1);
                            void 0 !== t.lineDashOffset ? t.lineDashOffset = a : void 0 !== t.webkitLineDashOffset ? t.webkitLineDashOffset = a : void 0 !== t.mozDashOffset && (t.mozDashOffset = a)
                        }
                        if (void 0 !== t.font && (t.font = o.Font.CreateFont(this.style("font-style").value, this.style("font-variant").value, this.style("font-weight").value, this.style("font-size").hasValue() ? this.style("font-size").toPixels() + "px" : "", this.style("font-family").value).toString()),
                        this.style("transform", !1, !0).hasValue()) {
                            new o.Transform(this.style("transform", !1, !0).value).apply(t)
                        }
                        if (this.style("clip-path", !1, !0).hasValue()) {
                            var l = this.style("clip-path", !1, !0).getDefinition();
                            null != l && l.apply(t)
                        }
                        this.style("opacity").hasValue() && (t.globalAlpha = this.style("opacity").numValue())
                    }
                }
                ,
                o.Element.RenderedElementBase.prototype = new o.Element.ElementBase,
                o.Element.PathElementBase = function(t) {
                    this.base = o.Element.RenderedElementBase,
                    this.base(t),
                    this.path = function(t) {
                        return null != t && t.beginPath(),
                        new o.BoundingBox
                    }
                    ,
                    this.renderChildren = function(t) {
                        this.path(t),
                        o.Mouse.checkPath(this, t),
                        "" != t.fillStyle && ("inherit" != this.style("fill-rule").valueOrDefault("inherit") ? t.fill(this.style("fill-rule").value) : t.fill()),
                        "" != t.strokeStyle && t.stroke();
                        var e = this.getMarkers();
                        if (null != e) {
                            if (this.style("marker-start").isUrlDefinition()) {
                                var n = this.style("marker-start").getDefinition();
                                n.render(t, e[0][0], e[0][1])
                            }
                            if (this.style("marker-mid").isUrlDefinition())
                                for (var n = this.style("marker-mid").getDefinition(), i = 1; i < e.length - 1; i++)
                                    n.render(t, e[i][0], e[i][1]);
                            if (this.style("marker-end").isUrlDefinition()) {
                                var n = this.style("marker-end").getDefinition();
                                n.render(t, e[e.length - 1][0], e[e.length - 1][1])
                            }
                        }
                    }
                    ,
                    this.getBoundingBox = function() {
                        return this.path()
                    }
                    ,
                    this.getMarkers = function() {
                        return null
                    }
                }
                ,
                o.Element.PathElementBase.prototype = new o.Element.RenderedElementBase,
                o.Element.svg = function(t) {
                    this.base = o.Element.RenderedElementBase,
                    this.base(t),
                    this.baseClearContext = this.clearContext,
                    this.clearContext = function(t) {
                        this.baseClearContext(t),
                        o.ViewPort.RemoveCurrent()
                    }
                    ,
                    this.baseSetContext = this.setContext,
                    this.setContext = function(t) {
                        t.strokeStyle = "rgba(0,0,0,0)",
                        t.lineCap = "butt",
                        t.lineJoin = "miter",
                        t.miterLimit = 4,
                        void 0 !== t.font && void 0 !== window.getComputedStyle && (t.font = window.getComputedStyle(t.canvas).getPropertyValue("font")),
                        this.baseSetContext(t),
                        this.attribute("x").hasValue() || (this.attribute("x", !0).value = 0),
                        this.attribute("y").hasValue() || (this.attribute("y", !0).value = 0),
                        t.translate(this.attribute("x").toPixels("x"), this.attribute("y").toPixels("y"));
                        var e = o.ViewPort.width()
                          , n = o.ViewPort.height();
                        if (this.attribute("width").hasValue() || (this.attribute("width", !0).value = "100%"),
                        this.attribute("height").hasValue() || (this.attribute("height", !0).value = "100%"),
                        void 0 === this.root) {
                            e = this.attribute("width").toPixels("x"),
                            n = this.attribute("height").toPixels("y");
                            var i = 0
                              , r = 0;
                            this.attribute("refX").hasValue() && this.attribute("refY").hasValue() && (i = -this.attribute("refX").toPixels("x"),
                            r = -this.attribute("refY").toPixels("y")),
                            "visible" != this.attribute("overflow").valueOrDefault("hidden") && (t.beginPath(),
                            t.moveTo(i, r),
                            t.lineTo(e, r),
                            t.lineTo(e, n),
                            t.lineTo(i, n),
                            t.closePath(),
                            t.clip())
                        }
                        if (o.ViewPort.SetCurrent(e, n),
                        this.attribute("viewBox").hasValue()) {
                            var s = o.ToNumberArray(this.attribute("viewBox").value)
                              , a = s[0]
                              , l = s[1];
                            e = s[2],
                            n = s[3],
                            o.AspectRatio(t, this.attribute("preserveAspectRatio").value, o.ViewPort.width(), e, o.ViewPort.height(), n, a, l, this.attribute("refX").value, this.attribute("refY").value),
                            o.ViewPort.RemoveCurrent(),
                            o.ViewPort.SetCurrent(s[2], s[3])
                        }
                    }
                }
                ,
                o.Element.svg.prototype = new o.Element.RenderedElementBase,
                o.Element.rect = function(t) {
                    this.base = o.Element.PathElementBase,
                    this.base(t),
                    this.path = function(t) {
                        var e = this.attribute("x").toPixels("x")
                          , n = this.attribute("y").toPixels("y")
                          , i = this.attribute("width").toPixels("x")
                          , r = this.attribute("height").toPixels("y")
                          , s = this.attribute("rx").toPixels("x")
                          , a = this.attribute("ry").toPixels("y");
                        return this.attribute("rx").hasValue() && !this.attribute("ry").hasValue() && (a = s),
                        this.attribute("ry").hasValue() && !this.attribute("rx").hasValue() && (s = a),
                        s = Math.min(s, i / 2),
                        a = Math.min(a, r / 2),
                        null != t && (t.beginPath(),
                        t.moveTo(e + s, n),
                        t.lineTo(e + i - s, n),
                        t.quadraticCurveTo(e + i, n, e + i, n + a),
                        t.lineTo(e + i, n + r - a),
                        t.quadraticCurveTo(e + i, n + r, e + i - s, n + r),
                        t.lineTo(e + s, n + r),
                        t.quadraticCurveTo(e, n + r, e, n + r - a),
                        t.lineTo(e, n + a),
                        t.quadraticCurveTo(e, n, e + s, n),
                        t.closePath()),
                        new o.BoundingBox(e,n,e + i,n + r)
                    }
                }
                ,
                o.Element.rect.prototype = new o.Element.PathElementBase,
                o.Element.circle = function(t) {
                    this.base = o.Element.PathElementBase,
                    this.base(t),
                    this.path = function(t) {
                        var e = this.attribute("cx").toPixels("x")
                          , n = this.attribute("cy").toPixels("y")
                          , i = this.attribute("r").toPixels();
                        return null != t && (t.beginPath(),
                        t.arc(e, n, i, 0, 2 * Math.PI, !0),
                        t.closePath()),
                        new o.BoundingBox(e - i,n - i,e + i,n + i)
                    }
                }
                ,
                o.Element.circle.prototype = new o.Element.PathElementBase,
                o.Element.ellipse = function(t) {
                    this.base = o.Element.PathElementBase,
                    this.base(t),
                    this.path = function(t) {
                        var e = (Math.sqrt(2) - 1) / 3 * 4
                          , n = this.attribute("rx").toPixels("x")
                          , i = this.attribute("ry").toPixels("y")
                          , r = this.attribute("cx").toPixels("x")
                          , s = this.attribute("cy").toPixels("y");
                        return null != t && (t.beginPath(),
                        t.moveTo(r, s - i),
                        t.bezierCurveTo(r + e * n, s - i, r + n, s - e * i, r + n, s),
                        t.bezierCurveTo(r + n, s + e * i, r + e * n, s + i, r, s + i),
                        t.bezierCurveTo(r - e * n, s + i, r - n, s + e * i, r - n, s),
                        t.bezierCurveTo(r - n, s - e * i, r - e * n, s - i, r, s - i),
                        t.closePath()),
                        new o.BoundingBox(r - n,s - i,r + n,s + i)
                    }
                }
                ,
                o.Element.ellipse.prototype = new o.Element.PathElementBase,
                o.Element.line = function(t) {
                    this.base = o.Element.PathElementBase,
                    this.base(t),
                    this.getPoints = function() {
                        return [new o.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")), new o.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]
                    }
                    ,
                    this.path = function(t) {
                        var e = this.getPoints();
                        return null != t && (t.beginPath(),
                        t.moveTo(e[0].x, e[0].y),
                        t.lineTo(e[1].x, e[1].y)),
                        new o.BoundingBox(e[0].x,e[0].y,e[1].x,e[1].y)
                    }
                    ,
                    this.getMarkers = function() {
                        var t = this.getPoints()
                          , e = t[0].angleTo(t[1]);
                        return [[t[0], e], [t[1], e]]
                    }
                }
                ,
                o.Element.line.prototype = new o.Element.PathElementBase,
                o.Element.polyline = function(t) {
                    this.base = o.Element.PathElementBase,
                    this.base(t),
                    this.points = o.CreatePath(this.attribute("points").value),
                    this.path = function(t) {
                        var e = new o.BoundingBox(this.points[0].x,this.points[0].y);
                        null != t && (t.beginPath(),
                        t.moveTo(this.points[0].x, this.points[0].y));
                        for (var n = 1; n < this.points.length; n++)
                            e.addPoint(this.points[n].x, this.points[n].y),
                            null != t && t.lineTo(this.points[n].x, this.points[n].y);
                        return e
                    }
                    ,
                    this.getMarkers = function() {
                        for (var t = [], e = 0; e < this.points.length - 1; e++)
                            t.push([this.points[e], this.points[e].angleTo(this.points[e + 1])]);
                        return t.length > 0 && t.push([this.points[this.points.length - 1], t[t.length - 1][1]]),
                        t
                    }
                }
                ,
                o.Element.polyline.prototype = new o.Element.PathElementBase,
                o.Element.polygon = function(t) {
                    this.base = o.Element.polyline,
                    this.base(t),
                    this.basePath = this.path,
                    this.path = function(t) {
                        var e = this.basePath(t);
                        return null != t && (t.lineTo(this.points[0].x, this.points[0].y),
                        t.closePath()),
                        e
                    }
                }
                ,
                o.Element.polygon.prototype = new o.Element.polyline,
                o.Element.path = function(t) {
                    this.base = o.Element.PathElementBase,
                    this.base(t);
                    var e = this.attribute("d").value;
                    e = e.replace(/,/gm, " ");
                    for (var n = 0; n < 2; n++)
                        e = e.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm, "$1 $2");
                    e = e.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm, "$1 $2"),
                    e = e.replace(/([0-9])([+\-])/gm, "$1 $2");
                    for (var n = 0; n < 2; n++)
                        e = e.replace(/(\.[0-9]*)(\.)/gm, "$1 $2");
                    e = e.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm, "$1 $3 $4 "),
                    e = o.compressSpaces(e),
                    e = o.trim(e),
                    this.PathParser = new function(t) {
                        this.tokens = t.split(" "),
                        this.reset = function() {
                            this.i = -1,
                            this.command = "",
                            this.previousCommand = "",
                            this.start = new o.Point(0,0),
                            this.control = new o.Point(0,0),
                            this.current = new o.Point(0,0),
                            this.points = [],
                            this.angles = []
                        }
                        ,
                        this.isEnd = function() {
                            return this.i >= this.tokens.length - 1
                        }
                        ,
                        this.isCommandOrEnd = function() {
                            return !!this.isEnd() || null != this.tokens[this.i + 1].match(/^[A-Za-z]$/)
                        }
                        ,
                        this.isRelativeCommand = function() {
                            switch (this.command) {
                            case "m":
                            case "l":
                            case "h":
                            case "v":
                            case "c":
                            case "s":
                            case "q":
                            case "t":
                            case "a":
                            case "z":
                                return !0
                            }
                            return !1
                        }
                        ,
                        this.getToken = function() {
                            return this.i++,
                            this.tokens[this.i]
                        }
                        ,
                        this.getScalar = function() {
                            return parseFloat(this.getToken())
                        }
                        ,
                        this.nextCommand = function() {
                            this.previousCommand = this.command,
                            this.command = this.getToken()
                        }
                        ,
                        this.getPoint = function() {
                            var t = new o.Point(this.getScalar(),this.getScalar());
                            return this.makeAbsolute(t)
                        }
                        ,
                        this.getAsControlPoint = function() {
                            var t = this.getPoint();
                            return this.control = t,
                            t
                        }
                        ,
                        this.getAsCurrentPoint = function() {
                            var t = this.getPoint();
                            return this.current = t,
                            t
                        }
                        ,
                        this.getReflectedControlPoint = function() {
                            return "c" != this.previousCommand.toLowerCase() && "s" != this.previousCommand.toLowerCase() && "q" != this.previousCommand.toLowerCase() && "t" != this.previousCommand.toLowerCase() ? this.current : new o.Point(2 * this.current.x - this.control.x,2 * this.current.y - this.control.y)
                        }
                        ,
                        this.makeAbsolute = function(t) {
                            return this.isRelativeCommand() && (t.x += this.current.x,
                            t.y += this.current.y),
                            t
                        }
                        ,
                        this.addMarker = function(t, e, n) {
                            null != n && this.angles.length > 0 && null == this.angles[this.angles.length - 1] && (this.angles[this.angles.length - 1] = this.points[this.points.length - 1].angleTo(n)),
                            this.addMarkerAngle(t, null == e ? null : e.angleTo(t))
                        }
                        ,
                        this.addMarkerAngle = function(t, e) {
                            this.points.push(t),
                            this.angles.push(e)
                        }
                        ,
                        this.getMarkerPoints = function() {
                            return this.points
                        }
                        ,
                        this.getMarkerAngles = function() {
                            for (var t = 0; t < this.angles.length; t++)
                                if (null == this.angles[t])
                                    for (var e = t + 1; e < this.angles.length; e++)
                                        if (null != this.angles[e]) {
                                            this.angles[t] = this.angles[e];
                                            break
                                        }
                            return this.angles
                        }
                    }
                    (e),
                    this.path = function(t) {
                        var e = this.PathParser;
                        e.reset();
                        var n = new o.BoundingBox;
                        for (null != t && t.beginPath(); !e.isEnd(); )
                            switch (e.nextCommand(),
                            e.command) {
                            case "M":
                            case "m":
                                var i = e.getAsCurrentPoint();
                                for (e.addMarker(i),
                                n.addPoint(i.x, i.y),
                                null != t && t.moveTo(i.x, i.y),
                                e.start = e.current; !e.isCommandOrEnd(); ) {
                                    var i = e.getAsCurrentPoint();
                                    e.addMarker(i, e.start),
                                    n.addPoint(i.x, i.y),
                                    null != t && t.lineTo(i.x, i.y)
                                }
                                break;
                            case "L":
                            case "l":
                                for (; !e.isCommandOrEnd(); ) {
                                    var r = e.current
                                      , i = e.getAsCurrentPoint();
                                    e.addMarker(i, r),
                                    n.addPoint(i.x, i.y),
                                    null != t && t.lineTo(i.x, i.y)
                                }
                                break;
                            case "H":
                            case "h":
                                for (; !e.isCommandOrEnd(); ) {
                                    var s = new o.Point((e.isRelativeCommand() ? e.current.x : 0) + e.getScalar(),e.current.y);
                                    e.addMarker(s, e.current),
                                    e.current = s,
                                    n.addPoint(e.current.x, e.current.y),
                                    null != t && t.lineTo(e.current.x, e.current.y)
                                }
                                break;
                            case "V":
                            case "v":
                                for (; !e.isCommandOrEnd(); ) {
                                    var s = new o.Point(e.current.x,(e.isRelativeCommand() ? e.current.y : 0) + e.getScalar());
                                    e.addMarker(s, e.current),
                                    e.current = s,
                                    n.addPoint(e.current.x, e.current.y),
                                    null != t && t.lineTo(e.current.x, e.current.y)
                                }
                                break;
                            case "C":
                            case "c":
                                for (; !e.isCommandOrEnd(); ) {
                                    var a = e.current
                                      , l = e.getPoint()
                                      , c = e.getAsControlPoint()
                                      , h = e.getAsCurrentPoint();
                                    e.addMarker(h, c, l),
                                    n.addBezierCurve(a.x, a.y, l.x, l.y, c.x, c.y, h.x, h.y),
                                    null != t && t.bezierCurveTo(l.x, l.y, c.x, c.y, h.x, h.y)
                                }
                                break;
                            case "S":
                            case "s":
                                for (; !e.isCommandOrEnd(); ) {
                                    var a = e.current
                                      , l = e.getReflectedControlPoint()
                                      , c = e.getAsControlPoint()
                                      , h = e.getAsCurrentPoint();
                                    e.addMarker(h, c, l),
                                    n.addBezierCurve(a.x, a.y, l.x, l.y, c.x, c.y, h.x, h.y),
                                    null != t && t.bezierCurveTo(l.x, l.y, c.x, c.y, h.x, h.y)
                                }
                                break;
                            case "Q":
                            case "q":
                                for (; !e.isCommandOrEnd(); ) {
                                    var a = e.current
                                      , c = e.getAsControlPoint()
                                      , h = e.getAsCurrentPoint();
                                    e.addMarker(h, c, c),
                                    n.addQuadraticCurve(a.x, a.y, c.x, c.y, h.x, h.y),
                                    null != t && t.quadraticCurveTo(c.x, c.y, h.x, h.y)
                                }
                                break;
                            case "T":
                            case "t":
                                for (; !e.isCommandOrEnd(); ) {
                                    var a = e.current
                                      , c = e.getReflectedControlPoint();
                                    e.control = c;
                                    var h = e.getAsCurrentPoint();
                                    e.addMarker(h, c, c),
                                    n.addQuadraticCurve(a.x, a.y, c.x, c.y, h.x, h.y),
                                    null != t && t.quadraticCurveTo(c.x, c.y, h.x, h.y)
                                }
                                break;
                            case "A":
                            case "a":
                                for (; !e.isCommandOrEnd(); ) {
                                    var a = e.current
                                      , u = e.getScalar()
                                      , d = e.getScalar()
                                      , p = e.getScalar() * (Math.PI / 180)
                                      , f = e.getScalar()
                                      , g = e.getScalar()
                                      , h = e.getAsCurrentPoint()
                                      , m = new o.Point(Math.cos(p) * (a.x - h.x) / 2 + Math.sin(p) * (a.y - h.y) / 2,-Math.sin(p) * (a.x - h.x) / 2 + Math.cos(p) * (a.y - h.y) / 2)
                                      , _ = Math.pow(m.x, 2) / Math.pow(u, 2) + Math.pow(m.y, 2) / Math.pow(d, 2);
                                    _ > 1 && (u *= Math.sqrt(_),
                                    d *= Math.sqrt(_));
                                    var v = (f == g ? -1 : 1) * Math.sqrt((Math.pow(u, 2) * Math.pow(d, 2) - Math.pow(u, 2) * Math.pow(m.y, 2) - Math.pow(d, 2) * Math.pow(m.x, 2)) / (Math.pow(u, 2) * Math.pow(m.y, 2) + Math.pow(d, 2) * Math.pow(m.x, 2)));
                                    isNaN(v) && (v = 0);
                                    var y = new o.Point(v * u * m.y / d,v * -d * m.x / u)
                                      , b = new o.Point((a.x + h.x) / 2 + Math.cos(p) * y.x - Math.sin(p) * y.y,(a.y + h.y) / 2 + Math.sin(p) * y.x + Math.cos(p) * y.y)
                                      , w = function(t) {
                                        return Math.sqrt(Math.pow(t[0], 2) + Math.pow(t[1], 2))
                                    }
                                      , x = function(t, e) {
                                        return (t[0] * e[0] + t[1] * e[1]) / (w(t) * w(e))
                                    }
                                      , C = function(t, e) {
                                        return (t[0] * e[1] < t[1] * e[0] ? -1 : 1) * Math.acos(x(t, e))
                                    }
                                      , T = C([1, 0], [(m.x - y.x) / u, (m.y - y.y) / d])
                                      , k = [(m.x - y.x) / u, (m.y - y.y) / d]
                                      , I = [(-m.x - y.x) / u, (-m.y - y.y) / d]
                                      , L = C(k, I);
                                    x(k, I) <= -1 && (L = Math.PI),
                                    x(k, I) >= 1 && (L = 0);
                                    var E = 1 - g ? 1 : -1
                                      , P = T + E * (L / 2)
                                      , S = new o.Point(b.x + u * Math.cos(P),b.y + d * Math.sin(P));
                                    if (e.addMarkerAngle(S, P - E * Math.PI / 2),
                                    e.addMarkerAngle(h, P - E * Math.PI),
                                    n.addPoint(h.x, h.y),
                                    null != t) {
                                        var x = u > d ? u : d
                                          , j = u > d ? 1 : u / d
                                          , O = u > d ? d / u : 1;
                                        t.translate(b.x, b.y),
                                        t.rotate(p),
                                        t.scale(j, O),
                                        t.arc(0, 0, x, T, T + L, 1 - g),
                                        t.scale(1 / j, 1 / O),
                                        t.rotate(-p),
                                        t.translate(-b.x, -b.y)
                                    }
                                }
                                break;
                            case "Z":
                            case "z":
                                null != t && t.closePath(),
                                e.current = e.start
                            }
                        return n
                    }
                    ,
                    this.getMarkers = function() {
                        for (var t = this.PathParser.getMarkerPoints(), e = this.PathParser.getMarkerAngles(), n = [], i = 0; i < t.length; i++)
                            n.push([t[i], e[i]]);
                        return n
                    }
                }
                ,
                o.Element.path.prototype = new o.Element.PathElementBase,
                o.Element.pattern = function(t) {
                    this.base = o.Element.ElementBase,
                    this.base(t),
                    this.createPattern = function(t, e) {
                        var n = this.attribute("width").toPixels("x", !0)
                          , i = this.attribute("height").toPixels("y", !0)
                          , r = new o.Element.svg;
                        r.attributes.viewBox = new o.Property("viewBox",this.attribute("viewBox").value),
                        r.attributes.width = new o.Property("width",n + "px"),
                        r.attributes.height = new o.Property("height",i + "px"),
                        r.attributes.transform = new o.Property("transform",this.attribute("patternTransform").value),
                        r.children = this.children;
                        var s = document.createElement("canvas");
                        s.width = n,
                        s.height = i;
                        var a = s.getContext("2d");
                        this.attribute("x").hasValue() && this.attribute("y").hasValue() && a.translate(this.attribute("x").toPixels("x", !0), this.attribute("y").toPixels("y", !0));
                        for (var l = -1; l <= 1; l++)
                            for (var c = -1; c <= 1; c++)
                                a.save(),
                                r.attributes.x = new o.Property("x",l * s.width),
                                r.attributes.y = new o.Property("y",c * s.height),
                                r.render(a),
                                a.restore();
                        return t.createPattern(s, "repeat")
                    }
                }
                ,
                o.Element.pattern.prototype = new o.Element.ElementBase,
                o.Element.marker = function(t) {
                    this.base = o.Element.ElementBase,
                    this.base(t),
                    this.baseRender = this.render,
                    this.render = function(t, e, n) {
                        t.translate(e.x, e.y),
                        "auto" == this.attribute("orient").valueOrDefault("auto") && t.rotate(n),
                        "strokeWidth" == this.attribute("markerUnits").valueOrDefault("strokeWidth") && t.scale(t.lineWidth, t.lineWidth),
                        t.save();
                        var i = new o.Element.svg;
                        i.attributes.viewBox = new o.Property("viewBox",this.attribute("viewBox").value),
                        i.attributes.refX = new o.Property("refX",this.attribute("refX").value),
                        i.attributes.refY = new o.Property("refY",this.attribute("refY").value),
                        i.attributes.width = new o.Property("width",this.attribute("markerWidth").value),
                        i.attributes.height = new o.Property("height",this.attribute("markerHeight").value),
                        i.attributes.fill = new o.Property("fill",this.attribute("fill").valueOrDefault("black")),
                        i.attributes.stroke = new o.Property("stroke",this.attribute("stroke").valueOrDefault("none")),
                        i.children = this.children,
                        i.render(t),
                        t.restore(),
                        "strokeWidth" == this.attribute("markerUnits").valueOrDefault("strokeWidth") && t.scale(1 / t.lineWidth, 1 / t.lineWidth),
                        "auto" == this.attribute("orient").valueOrDefault("auto") && t.rotate(-n),
                        t.translate(-e.x, -e.y)
                    }
                }
                ,
                o.Element.marker.prototype = new o.Element.ElementBase,
                o.Element.defs = function(t) {
                    this.base = o.Element.ElementBase,
                    this.base(t),
                    this.render = function(t) {}
                }
                ,
                o.Element.defs.prototype = new o.Element.ElementBase,
                o.Element.GradientBase = function(t) {
                    this.base = o.Element.ElementBase,
                    this.base(t),
                    this.stops = [];
                    for (var e = 0; e < this.children.length; e++) {
                        var n = this.children[e];
                        "stop" == n.type && this.stops.push(n)
                    }
                    this.getGradient = function() {}
                    ,
                    this.gradientUnits = function() {
                        return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")
                    }
                    ,
                    this.attributesToInherit = ["gradientUnits"],
                    this.inheritStopContainer = function(t) {
                        for (var e = 0; e < this.attributesToInherit.length; e++) {
                            var n = this.attributesToInherit[e];
                            !this.attribute(n).hasValue() && t.attribute(n).hasValue() && (this.attribute(n, !0).value = t.attribute(n).value)
                        }
                    }
                    ,
                    this.createGradient = function(t, e, n) {
                        var i = this;
                        this.getHrefAttribute().hasValue() && (i = this.getHrefAttribute().getDefinition(),
                        this.inheritStopContainer(i));
                        var r = function(t) {
                            if (n.hasValue()) {
                                return new o.Property("color",t).addOpacity(n).value
                            }
                            return t
                        }
                          , s = this.getGradient(t, e);
                        if (null == s)
                            return r(i.stops[i.stops.length - 1].color);
                        for (var a = 0; a < i.stops.length; a++)
                            s.addColorStop(i.stops[a].offset, r(i.stops[a].color));
                        if (this.attribute("gradientTransform").hasValue()) {
                            var l = o.ViewPort.viewPorts[0]
                              , c = new o.Element.rect;
                            c.attributes.x = new o.Property("x",-o.MAX_VIRTUAL_PIXELS / 3),
                            c.attributes.y = new o.Property("y",-o.MAX_VIRTUAL_PIXELS / 3),
                            c.attributes.width = new o.Property("width",o.MAX_VIRTUAL_PIXELS),
                            c.attributes.height = new o.Property("height",o.MAX_VIRTUAL_PIXELS);
                            var h = new o.Element.g;
                            h.attributes.transform = new o.Property("transform",this.attribute("gradientTransform").value),
                            h.children = [c];
                            var u = new o.Element.svg;
                            u.attributes.x = new o.Property("x",0),
                            u.attributes.y = new o.Property("y",0),
                            u.attributes.width = new o.Property("width",l.width),
                            u.attributes.height = new o.Property("height",l.height),
                            u.children = [h];
                            var d = document.createElement("canvas");
                            d.width = l.width,
                            d.height = l.height;
                            var p = d.getContext("2d");
                            return p.fillStyle = s,
                            u.render(p),
                            p.createPattern(d, "no-repeat")
                        }
                        return s
                    }
                }
                ,
                o.Element.GradientBase.prototype = new o.Element.ElementBase,
                o.Element.linearGradient = function(t) {
                    this.base = o.Element.GradientBase,
                    this.base(t),
                    this.attributesToInherit.push("x1"),
                    this.attributesToInherit.push("y1"),
                    this.attributesToInherit.push("x2"),
                    this.attributesToInherit.push("y2"),
                    this.getGradient = function(t, e) {
                        var n = "objectBoundingBox" == this.gradientUnits() ? e.getBoundingBox() : null;
                        this.attribute("x1").hasValue() || this.attribute("y1").hasValue() || this.attribute("x2").hasValue() || this.attribute("y2").hasValue() || (this.attribute("x1", !0).value = 0,
                        this.attribute("y1", !0).value = 0,
                        this.attribute("x2", !0).value = 1,
                        this.attribute("y2", !0).value = 0);
                        var i = "objectBoundingBox" == this.gradientUnits() ? n.x() + n.width() * this.attribute("x1").numValue() : this.attribute("x1").toPixels("x")
                          , r = "objectBoundingBox" == this.gradientUnits() ? n.y() + n.height() * this.attribute("y1").numValue() : this.attribute("y1").toPixels("y")
                          , o = "objectBoundingBox" == this.gradientUnits() ? n.x() + n.width() * this.attribute("x2").numValue() : this.attribute("x2").toPixels("x")
                          , s = "objectBoundingBox" == this.gradientUnits() ? n.y() + n.height() * this.attribute("y2").numValue() : this.attribute("y2").toPixels("y");
                        return i == o && r == s ? null : t.createLinearGradient(i, r, o, s)
                    }
                }
                ,
                o.Element.linearGradient.prototype = new o.Element.GradientBase,
                o.Element.radialGradient = function(t) {
                    this.base = o.Element.GradientBase,
                    this.base(t),
                    this.attributesToInherit.push("cx"),
                    this.attributesToInherit.push("cy"),
                    this.attributesToInherit.push("r"),
                    this.attributesToInherit.push("fx"),
                    this.attributesToInherit.push("fy"),
                    this.getGradient = function(t, e) {
                        var n = e.getBoundingBox();
                        this.attribute("cx").hasValue() || (this.attribute("cx", !0).value = "50%"),
                        this.attribute("cy").hasValue() || (this.attribute("cy", !0).value = "50%"),
                        this.attribute("r").hasValue() || (this.attribute("r", !0).value = "50%");
                        var i = "objectBoundingBox" == this.gradientUnits() ? n.x() + n.width() * this.attribute("cx").numValue() : this.attribute("cx").toPixels("x")
                          , r = "objectBoundingBox" == this.gradientUnits() ? n.y() + n.height() * this.attribute("cy").numValue() : this.attribute("cy").toPixels("y")
                          , o = i
                          , s = r;
                        this.attribute("fx").hasValue() && (o = "objectBoundingBox" == this.gradientUnits() ? n.x() + n.width() * this.attribute("fx").numValue() : this.attribute("fx").toPixels("x")),
                        this.attribute("fy").hasValue() && (s = "objectBoundingBox" == this.gradientUnits() ? n.y() + n.height() * this.attribute("fy").numValue() : this.attribute("fy").toPixels("y"));
                        var a = "objectBoundingBox" == this.gradientUnits() ? (n.width() + n.height()) / 2 * this.attribute("r").numValue() : this.attribute("r").toPixels();
                        return t.createRadialGradient(o, s, 0, i, r, a)
                    }
                }
                ,
                o.Element.radialGradient.prototype = new o.Element.GradientBase,
                o.Element.stop = function(t) {
                    this.base = o.Element.ElementBase,
                    this.base(t),
                    this.offset = this.attribute("offset").numValue(),
                    this.offset < 0 && (this.offset = 0),
                    this.offset > 1 && (this.offset = 1);
                    var e = this.style("stop-color", !0);
                    "" === e.value && (e.value = "#000"),
                    this.style("stop-opacity").hasValue() && (e = e.addOpacity(this.style("stop-opacity"))),
                    this.color = e.value
                }
                ,
                o.Element.stop.prototype = new o.Element.ElementBase,
                o.Element.AnimateBase = function(t) {
                    this.base = o.Element.ElementBase,
                    this.base(t),
                    o.Animations.push(this),
                    this.duration = 0,
                    this.begin = this.attribute("begin").toMilliseconds(),
                    this.maxDuration = this.begin + this.attribute("dur").toMilliseconds(),
                    this.getProperty = function() {
                        var t = this.attribute("attributeType").value
                          , e = this.attribute("attributeName").value;
                        return "CSS" == t ? this.parent.style(e, !0) : this.parent.attribute(e, !0)
                    }
                    ,
                    this.initialValue = null,
                    this.initialUnits = "",
                    this.removed = !1,
                    this.calcValue = function() {
                        return ""
                    }
                    ,
                    this.update = function(t) {
                        if (null == this.initialValue && (this.initialValue = this.getProperty().value,
                        this.initialUnits = this.getProperty().getUnits()),
                        this.duration > this.maxDuration) {
                            if ("indefinite" == this.attribute("repeatCount").value || "indefinite" == this.attribute("repeatDur").value)
                                this.duration = 0;
                            else if ("freeze" != this.attribute("fill").valueOrDefault("remove") || this.frozen) {
                                if ("remove" == this.attribute("fill").valueOrDefault("remove") && !this.removed)
                                    return this.removed = !0,
                                    this.getProperty().value = this.parent.animationFrozen ? this.parent.animationFrozenValue : this.initialValue,
                                    !0
                            } else
                                this.frozen = !0,
                                this.parent.animationFrozen = !0,
                                this.parent.animationFrozenValue = this.getProperty().value;
                            return !1
                        }
                        this.duration = this.duration + t;
                        var e = !1;
                        if (this.begin < this.duration) {
                            var n = this.calcValue();
                            if (this.attribute("type").hasValue()) {
                                n = this.attribute("type").value + "(" + n + ")"
                            }
                            this.getProperty().value = n,
                            e = !0
                        }
                        return e
                    }
                    ,
                    this.from = this.attribute("from"),
                    this.to = this.attribute("to"),
                    this.values = this.attribute("values"),
                    this.values.hasValue() && (this.values.value = this.values.value.split(";")),
                    this.progress = function() {
                        var t = {
                            progress: (this.duration - this.begin) / (this.maxDuration - this.begin)
                        };
                        if (this.values.hasValue()) {
                            var e = t.progress * (this.values.value.length - 1)
                              , n = Math.floor(e)
                              , i = Math.ceil(e);
                            t.from = new o.Property("from",parseFloat(this.values.value[n])),
                            t.to = new o.Property("to",parseFloat(this.values.value[i])),
                            t.progress = (e - n) / (i - n)
                        } else
                            t.from = this.from,
                            t.to = this.to;
                        return t
                    }
                }
                ,
                o.Element.AnimateBase.prototype = new o.Element.ElementBase,
                o.Element.animate = function(t) {
                    this.base = o.Element.AnimateBase,
                    this.base(t),
                    this.calcValue = function() {
                        var t = this.progress();
                        return t.from.numValue() + (t.to.numValue() - t.from.numValue()) * t.progress + this.initialUnits
                    }
                }
                ,
                o.Element.animate.prototype = new o.Element.AnimateBase,
                o.Element.animateColor = function(e) {
                    this.base = o.Element.AnimateBase,
                    this.base(e),
                    this.calcValue = function() {
                        var e = this.progress()
                          , n = new t(e.from.value)
                          , i = new t(e.to.value);
                        if (n.ok && i.ok) {
                            var r = n.r + (i.r - n.r) * e.progress
                              , o = n.g + (i.g - n.g) * e.progress
                              , s = n.b + (i.b - n.b) * e.progress;
                            return "rgb(" + parseInt(r, 10) + "," + parseInt(o, 10) + "," + parseInt(s, 10) + ")"
                        }
                        return this.attribute("from").value
                    }
                }
                ,
                o.Element.animateColor.prototype = new o.Element.AnimateBase,
                o.Element.animateTransform = function(t) {
                    this.base = o.Element.AnimateBase,
                    this.base(t),
                    this.calcValue = function() {
                        for (var t = this.progress(), e = o.ToNumberArray(t.from.value), n = o.ToNumberArray(t.to.value), i = "", r = 0; r < e.length; r++)
                            i += e[r] + (n[r] - e[r]) * t.progress + " ";
                        return i
                    }
                }
                ,
                o.Element.animateTransform.prototype = new o.Element.animate,
                o.Element.font = function(t) {
                    this.base = o.Element.ElementBase,
                    this.base(t),
                    this.horizAdvX = this.attribute("horiz-adv-x").numValue(),
                    this.isRTL = !1,
                    this.isArabic = !1,
                    this.fontFace = null,
                    this.missingGlyph = null,
                    this.glyphs = [];
                    for (var e = 0; e < this.children.length; e++) {
                        var n = this.children[e];
                        "font-face" == n.type ? (this.fontFace = n,
                        n.style("font-family").hasValue() && (o.Definitions[n.style("font-family").value] = this)) : "missing-glyph" == n.type ? this.missingGlyph = n : "glyph" == n.type && ("" != n.arabicForm ? (this.isRTL = !0,
                        this.isArabic = !0,
                        void 0 === this.glyphs[n.unicode] && (this.glyphs[n.unicode] = []),
                        this.glyphs[n.unicode][n.arabicForm] = n) : this.glyphs[n.unicode] = n)
                    }
                }
                ,
                o.Element.font.prototype = new o.Element.ElementBase,
                o.Element.fontface = function(t) {
                    this.base = o.Element.ElementBase,
                    this.base(t),
                    this.ascent = this.attribute("ascent").value,
                    this.descent = this.attribute("descent").value,
                    this.unitsPerEm = this.attribute("units-per-em").numValue()
                }
                ,
                o.Element.fontface.prototype = new o.Element.ElementBase,
                o.Element.missingglyph = function(t) {
                    this.base = o.Element.path,
                    this.base(t),
                    this.horizAdvX = 0
                }
                ,
                o.Element.missingglyph.prototype = new o.Element.path,
                o.Element.glyph = function(t) {
                    this.base = o.Element.path,
                    this.base(t),
                    this.horizAdvX = this.attribute("horiz-adv-x").numValue(),
                    this.unicode = this.attribute("unicode").value,
                    this.arabicForm = this.attribute("arabic-form").value
                }
                ,
                o.Element.glyph.prototype = new o.Element.path,
                o.Element.text = function(t) {
                    this.captureTextNodes = !0,
                    this.base = o.Element.RenderedElementBase,
                    this.base(t),
                    this.baseSetContext = this.setContext,
                    this.setContext = function(t) {
                        this.baseSetContext(t);
                        var e = this.style("dominant-baseline").toTextBaseline();
                        null == e && (e = this.style("alignment-baseline").toTextBaseline()),
                        null != e && (t.textBaseline = e)
                    }
                    ,
                    this.getBoundingBox = function() {
                        var t = this.attribute("x").toPixels("x")
                          , e = this.attribute("y").toPixels("y")
                          , n = this.parent.style("font-size").numValueOrDefault(o.Font.Parse(o.ctx.font).fontSize);
                        return new o.BoundingBox(t,e - n,t + Math.floor(2 * n / 3) * this.children[0].getText().length,e)
                    }
                    ,
                    this.renderChildren = function(t) {
                        this.x = this.attribute("x").toPixels("x"),
                        this.y = this.attribute("y").toPixels("y"),
                        this.attribute("dx").hasValue() && (this.x += this.attribute("dx").toPixels("x")),
                        this.attribute("dy").hasValue() && (this.y += this.attribute("dy").toPixels("y")),
                        this.x += this.getAnchorDelta(t, this, 0);
                        for (var e = 0; e < this.children.length; e++)
                            this.renderChild(t, this, this, e)
                    }
                    ,
                    this.getAnchorDelta = function(t, e, n) {
                        var i = this.style("text-anchor").valueOrDefault("start");
                        if ("start" != i) {
                            for (var r = 0, o = n; o < e.children.length; o++) {
                                var s = e.children[o];
                                if (o > n && s.attribute("x").hasValue())
                                    break;
                                r += s.measureTextRecursive(t)
                            }
                            return -1 * ("end" == i ? r : r / 2)
                        }
                        return 0
                    }
                    ,
                    this.renderChild = function(t, e, n, i) {
                        var r = n.children[i];
                        r.attribute("x").hasValue() ? (r.x = r.attribute("x").toPixels("x") + e.getAnchorDelta(t, n, i),
                        r.attribute("dx").hasValue() && (r.x += r.attribute("dx").toPixels("x"))) : (r.attribute("dx").hasValue() && (e.x += r.attribute("dx").toPixels("x")),
                        r.x = e.x),
                        e.x = r.x + r.measureText(t),
                        r.attribute("y").hasValue() ? (r.y = r.attribute("y").toPixels("y"),
                        r.attribute("dy").hasValue() && (r.y += r.attribute("dy").toPixels("y"))) : (r.attribute("dy").hasValue() && (e.y += r.attribute("dy").toPixels("y")),
                        r.y = e.y),
                        e.y = r.y,
                        r.render(t);
                        for (var i = 0; i < r.children.length; i++)
                            e.renderChild(t, e, r, i)
                    }
                }
                ,
                o.Element.text.prototype = new o.Element.RenderedElementBase,
                o.Element.TextElementBase = function(t) {
                    this.base = o.Element.RenderedElementBase,
                    this.base(t),
                    this.getGlyph = function(t, e, n) {
                        var i = e[n]
                          , r = null;
                        if (t.isArabic) {
                            var o = "isolated";
                            (0 == n || " " == e[n - 1]) && n < e.length - 2 && " " != e[n + 1] && (o = "terminal"),
                            n > 0 && " " != e[n - 1] && n < e.length - 2 && " " != e[n + 1] && (o = "medial"),
                            n > 0 && " " != e[n - 1] && (n == e.length - 1 || " " == e[n + 1]) && (o = "initial"),
                            void 0 !== t.glyphs[i] && null == (r = t.glyphs[i][o]) && "glyph" == t.glyphs[i].type && (r = t.glyphs[i])
                        } else
                            r = t.glyphs[i];
                        return null == r && (r = t.missingGlyph),
                        r
                    }
                    ,
                    this.renderChildren = function(t) {
                        var e = this.parent.style("font-family").getDefinition();
                        if (null == e)
                            "" != t.fillStyle && t.fillText(o.compressSpaces(this.getText()), this.x, this.y),
                            "" != t.strokeStyle && t.strokeText(o.compressSpaces(this.getText()), this.x, this.y);
                        else {
                            var n = this.parent.style("font-size").numValueOrDefault(o.Font.Parse(o.ctx.font).fontSize)
                              , i = this.parent.style("font-style").valueOrDefault(o.Font.Parse(o.ctx.font).fontStyle)
                              , r = this.getText();
                            e.isRTL && (r = r.split("").reverse().join(""));
                            for (var s = o.ToNumberArray(this.parent.attribute("dx").value), a = 0; a < r.length; a++) {
                                var l = this.getGlyph(e, r, a)
                                  , c = n / e.fontFace.unitsPerEm;
                                t.translate(this.x, this.y),
                                t.scale(c, -c);
                                var h = t.lineWidth;
                                t.lineWidth = t.lineWidth * e.fontFace.unitsPerEm / n,
                                "italic" == i && t.transform(1, 0, .4, 1, 0, 0),
                                l.render(t),
                                "italic" == i && t.transform(1, 0, -.4, 1, 0, 0),
                                t.lineWidth = h,
                                t.scale(1 / c, -1 / c),
                                t.translate(-this.x, -this.y),
                                this.x += n * (l.horizAdvX || e.horizAdvX) / e.fontFace.unitsPerEm,
                                void 0 === s[a] || isNaN(s[a]) || (this.x += s[a])
                            }
                        }
                    }
                    ,
                    this.getText = function() {}
                    ,
                    this.measureTextRecursive = function(t) {
                        for (var e = this.measureText(t), n = 0; n < this.children.length; n++)
                            e += this.children[n].measureTextRecursive(t);
                        return e
                    }
                    ,
                    this.measureText = function(t) {
                        var e = this.parent.style("font-family").getDefinition();
                        if (null != e) {
                            var n = this.parent.style("font-size").numValueOrDefault(o.Font.Parse(o.ctx.font).fontSize)
                              , i = 0
                              , r = this.getText();
                            e.isRTL && (r = r.split("").reverse().join(""));
                            for (var s = o.ToNumberArray(this.parent.attribute("dx").value), a = 0; a < r.length; a++) {
                                i += (this.getGlyph(e, r, a).horizAdvX || e.horizAdvX) * n / e.fontFace.unitsPerEm,
                                void 0 === s[a] || isNaN(s[a]) || (i += s[a])
                            }
                            return i
                        }
                        var l = o.compressSpaces(this.getText());
                        if (!t.measureText)
                            return 10 * l.length;
                        t.save(),
                        this.setContext(t);
                        var c = t.measureText(l).width;
                        return t.restore(),
                        c
                    }
                }
                ,
                o.Element.TextElementBase.prototype = new o.Element.RenderedElementBase,
                o.Element.tspan = function(t) {
                    this.captureTextNodes = !0,
                    this.base = o.Element.TextElementBase,
                    this.base(t),
                    this.text = o.compressSpaces(t.value || t.text || t.textContent || ""),
                    this.getText = function() {
                        return this.children.length > 0 ? "" : this.text
                    }
                }
                ,
                o.Element.tspan.prototype = new o.Element.TextElementBase,
                o.Element.tref = function(t) {
                    this.base = o.Element.TextElementBase,
                    this.base(t),
                    this.getText = function() {
                        var t = this.getHrefAttribute().getDefinition();
                        if (null != t)
                            return t.children[0].getText()
                    }
                }
                ,
                o.Element.tref.prototype = new o.Element.TextElementBase,
                o.Element.a = function(t) {
                    this.base = o.Element.TextElementBase,
                    this.base(t),
                    this.hasText = t.childNodes.length > 0;
                    for (var e = 0; e < t.childNodes.length; e++)
                        3 != t.childNodes[e].nodeType && (this.hasText = !1);
                    this.text = this.hasText ? t.childNodes[0].value : "",
                    this.getText = function() {
                        return this.text
                    }
                    ,
                    this.baseRenderChildren = this.renderChildren,
                    this.renderChildren = function(t) {
                        if (this.hasText) {
                            this.baseRenderChildren(t);
                            var e = new o.Property("fontSize",o.Font.Parse(o.ctx.font).fontSize);
                            o.Mouse.checkBoundingBox(this, new o.BoundingBox(this.x,this.y - e.toPixels("y"),this.x + this.measureText(t),this.y))
                        } else if (this.children.length > 0) {
                            var n = new o.Element.g;
                            n.children = this.children,
                            n.parent = this,
                            n.render(t)
                        }
                    }
                    ,
                    this.onclick = function() {
                        window.open(this.getHrefAttribute().value)
                    }
                    ,
                    this.onmousemove = function() {
                        o.ctx.canvas.style.cursor = "pointer"
                    }
                }
                ,
                o.Element.a.prototype = new o.Element.TextElementBase,
                o.Element.image = function(t) {
                    this.base = o.Element.RenderedElementBase,
                    this.base(t);
                    var e = this.getHrefAttribute().value;
                    if ("" != e) {
                        var n = e.match(/\.svg$/);
                        if (o.Images.push(this),
                        this.loaded = !1,
                        n)
                            this.img = o.ajax(e),
                            this.loaded = !0;
                        else {
                            this.img = document.createElement("img"),
                            1 == o.opts.useCORS && (this.img.crossOrigin = "Anonymous");
                            var i = this;
                            this.img.onload = function() {
                                i.loaded = !0
                            }
                            ,
                            this.img.onerror = function() {
                                o.log('ERROR: image "' + e + '" not found'),
                                i.loaded = !0
                            }
                            ,
                            this.img.src = e
                        }
                        this.renderChildren = function(t) {
                            var e = this.attribute("x").toPixels("x")
                              , i = this.attribute("y").toPixels("y")
                              , r = this.attribute("width").toPixels("x")
                              , s = this.attribute("height").toPixels("y");
                            0 != r && 0 != s && (t.save(),
                            n ? t.drawSvg(this.img, e, i, r, s) : (t.translate(e, i),
                            o.AspectRatio(t, this.attribute("preserveAspectRatio").value, r, this.img.width, s, this.img.height, 0, 0),
                            t.drawImage(this.img, 0, 0)),
                            t.restore())
                        }
                        ,
                        this.getBoundingBox = function() {
                            var t = this.attribute("x").toPixels("x")
                              , e = this.attribute("y").toPixels("y")
                              , n = this.attribute("width").toPixels("x")
                              , i = this.attribute("height").toPixels("y");
                            return new o.BoundingBox(t,e,t + n,e + i)
                        }
                    }
                }
                ,
                o.Element.image.prototype = new o.Element.RenderedElementBase,
                o.Element.g = function(t) {
                    this.base = o.Element.RenderedElementBase,
                    this.base(t),
                    this.getBoundingBox = function() {
                        for (var t = new o.BoundingBox, e = 0; e < this.children.length; e++)
                            t.addBoundingBox(this.children[e].getBoundingBox());
                        return t
                    }
                }
                ,
                o.Element.g.prototype = new o.Element.RenderedElementBase,
                o.Element.symbol = function(t) {
                    this.base = o.Element.RenderedElementBase,
                    this.base(t),
                    this.render = function(t) {}
                }
                ,
                o.Element.symbol.prototype = new o.Element.RenderedElementBase,
                o.Element.style = function(t) {
                    this.base = o.Element.ElementBase,
                    this.base(t);
                    for (var e = "", i = 0; i < t.childNodes.length; i++)
                        e += t.childNodes[i].data;
                    e = e.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm, ""),
                    e = o.compressSpaces(e);
                    for (var r = e.split("}"), i = 0; i < r.length; i++)
                        if ("" != o.trim(r[i]))
                            for (var s = r[i].split("{"), a = s[0].split(","), l = s[1].split(";"), c = 0; c < a.length; c++) {
                                var h = o.trim(a[c]);
                                if ("" != h) {
                                    for (var u = o.Styles[h] || {}, d = 0; d < l.length; d++) {
                                        var p = l[d].indexOf(":")
                                          , f = l[d].substr(0, p)
                                          , g = l[d].substr(p + 1, l[d].length - p);
                                        null != f && null != g && (u[o.trim(f)] = new o.Property(o.trim(f),o.trim(g)))
                                    }
                                    if (o.Styles[h] = u,
                                    o.StylesSpecificity[h] = n(h),
                                    "@font-face" == h)
                                        for (var m = u["font-family"].value.replace(/"/g, ""), _ = u.src.value.split(","), v = 0; v < _.length; v++)
                                            if (_[v].indexOf('format("svg")') > 0)
                                                for (var y = _[v].indexOf("url"), b = _[v].indexOf(")", y), w = _[v].substr(y + 5, b - y - 6), x = o.parseXml(o.ajax(w)), C = x.getElementsByTagName("font"), T = 0; T < C.length; T++) {
                                                    var k = o.CreateElement(C[T]);
                                                    o.Definitions[m] = k
                                                }
                                }
                            }
                }
                ,
                o.Element.style.prototype = new o.Element.ElementBase,
                o.Element.use = function(t) {
                    this.base = o.Element.RenderedElementBase,
                    this.base(t),
                    this.baseSetContext = this.setContext,
                    this.setContext = function(t) {
                        this.baseSetContext(t),
                        this.attribute("x").hasValue() && t.translate(this.attribute("x").toPixels("x"), 0),
                        this.attribute("y").hasValue() && t.translate(0, this.attribute("y").toPixels("y"))
                    }
                    ;
                    var e = this.getHrefAttribute().getDefinition();
                    this.path = function(t) {
                        null != e && e.path(t)
                    }
                    ,
                    this.getBoundingBox = function() {
                        if (null != e)
                            return e.getBoundingBox()
                    }
                    ,
                    this.renderChildren = function(t) {
                        if (null != e) {
                            var n = e;
                            "symbol" == e.type && (n = new o.Element.svg,
                            n.type = "svg",
                            n.attributes.viewBox = new o.Property("viewBox",e.attribute("viewBox").value),
                            n.attributes.preserveAspectRatio = new o.Property("preserveAspectRatio",e.attribute("preserveAspectRatio").value),
                            n.attributes.overflow = new o.Property("overflow",e.attribute("overflow").value),
                            n.children = e.children),
                            "svg" == n.type && (this.attribute("width").hasValue() && (n.attributes.width = new o.Property("width",this.attribute("width").value)),
                            this.attribute("height").hasValue() && (n.attributes.height = new o.Property("height",this.attribute("height").value)));
                            var i = n.parent;
                            n.parent = null,
                            n.render(t),
                            n.parent = i
                        }
                    }
                }
                ,
                o.Element.use.prototype = new o.Element.RenderedElementBase,
                o.Element.mask = function(t) {
                    this.base = o.Element.ElementBase,
                    this.base(t),
                    this.apply = function(t, e) {
                        var n = this.attribute("x").toPixels("x")
                          , i = this.attribute("y").toPixels("y")
                          , r = this.attribute("width").toPixels("x")
                          , s = this.attribute("height").toPixels("y");
                        if (0 == r && 0 == s) {
                            for (var a = new o.BoundingBox, l = 0; l < this.children.length; l++)
                                a.addBoundingBox(this.children[l].getBoundingBox());
                            var n = Math.floor(a.x1)
                              , i = Math.floor(a.y1)
                              , r = Math.floor(a.width())
                              , s = Math.floor(a.height())
                        }
                        var c = e.attribute("mask").value;
                        e.attribute("mask").value = "";
                        var h = document.createElement("canvas");
                        h.width = n + r,
                        h.height = i + s;
                        var u = h.getContext("2d");
                        this.renderChildren(u);
                        var d = document.createElement("canvas");
                        d.width = n + r,
                        d.height = i + s;
                        var p = d.getContext("2d");
                        e.render(p),
                        p.globalCompositeOperation = "destination-in",
                        p.fillStyle = u.createPattern(h, "no-repeat"),
                        p.fillRect(0, 0, n + r, i + s),
                        t.fillStyle = p.createPattern(d, "no-repeat"),
                        t.fillRect(0, 0, n + r, i + s),
                        e.attribute("mask").value = c
                    }
                    ,
                    this.render = function(t) {}
                }
                ,
                o.Element.mask.prototype = new o.Element.ElementBase,
                o.Element.clipPath = function(t) {
                    this.base = o.Element.ElementBase,
                    this.base(t),
                    this.apply = function(t) {
                        var e = CanvasRenderingContext2D.prototype.beginPath;
                        CanvasRenderingContext2D.prototype.beginPath = function() {}
                        ;
                        var n = CanvasRenderingContext2D.prototype.closePath;
                        CanvasRenderingContext2D.prototype.closePath = function() {}
                        ,
                        e.call(t);
                        for (var i = 0; i < this.children.length; i++) {
                            var r = this.children[i];
                            if (void 0 !== r.path) {
                                var s = null;
                                r.style("transform", !1, !0).hasValue() && (s = new o.Transform(r.style("transform", !1, !0).value),
                                s.apply(t)),
                                r.path(t),
                                CanvasRenderingContext2D.prototype.closePath = n,
                                s && s.unapply(t)
                            }
                        }
                        n.call(t),
                        t.clip(),
                        CanvasRenderingContext2D.prototype.beginPath = e,
                        CanvasRenderingContext2D.prototype.closePath = n
                    }
                    ,
                    this.render = function(t) {}
                }
                ,
                o.Element.clipPath.prototype = new o.Element.ElementBase,
                o.Element.filter = function(t) {
                    this.base = o.Element.ElementBase,
                    this.base(t),
                    this.apply = function(t, e) {
                        var n = e.getBoundingBox()
                          , i = Math.floor(n.x1)
                          , r = Math.floor(n.y1)
                          , o = Math.floor(n.width())
                          , s = Math.floor(n.height())
                          , a = e.style("filter").value;
                        e.style("filter").value = "";
                        for (var l = 0, c = 0, h = 0; h < this.children.length; h++) {
                            var u = this.children[h].extraFilterDistance || 0;
                            l = Math.max(l, u),
                            c = Math.max(c, u)
                        }
                        var d = document.createElement("canvas");
                        d.width = o + 2 * l,
                        d.height = s + 2 * c;
                        var p = d.getContext("2d");
                        p.translate(-i + l, -r + c),
                        e.render(p);
                        for (var h = 0; h < this.children.length; h++)
                            "function" == typeof this.children[h].apply && this.children[h].apply(p, 0, 0, o + 2 * l, s + 2 * c);
                        t.drawImage(d, 0, 0, o + 2 * l, s + 2 * c, i - l, r - c, o + 2 * l, s + 2 * c),
                        e.style("filter", !0).value = a
                    }
                    ,
                    this.render = function(t) {}
                }
                ,
                o.Element.filter.prototype = new o.Element.ElementBase,
                o.Element.feMorphology = function(t) {
                    this.base = o.Element.ElementBase,
                    this.base(t),
                    this.apply = function(t, e, n, i, r) {}
                }
                ,
                o.Element.feMorphology.prototype = new o.Element.ElementBase,
                o.Element.feComposite = function(t) {
                    this.base = o.Element.ElementBase,
                    this.base(t),
                    this.apply = function(t, e, n, i, r) {}
                }
                ,
                o.Element.feComposite.prototype = new o.Element.ElementBase,
                o.Element.feColorMatrix = function(t) {
                    function e(t, e, n, i, r, o) {
                        return t[n * i * 4 + 4 * e + o]
                    }
                    function n(t, e, n, i, r, o, s) {
                        t[n * i * 4 + 4 * e + o] = s
                    }
                    function i(t, e) {
                        var n = r[t];
                        return n * (n < 0 ? e - 255 : e)
                    }
                    this.base = o.Element.ElementBase,
                    this.base(t);
                    var r = o.ToNumberArray(this.attribute("values").value);
                    switch (this.attribute("type").valueOrDefault("matrix")) {
                    case "saturate":
                        var s = r[0];
                        r = [.213 + .787 * s, .715 - .715 * s, .072 - .072 * s, 0, 0, .213 - .213 * s, .715 + .285 * s, .072 - .072 * s, 0, 0, .213 - .213 * s, .715 - .715 * s, .072 + .928 * s, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];
                        break;
                    case "hueRotate":
                        var a = r[0] * Math.PI / 180
                          , l = function(t, e, n) {
                            return t + Math.cos(a) * e + Math.sin(a) * n
                        };
                        r = [l(.213, .787, -.213), l(.715, -.715, -.715), l(.072, -.072, .928), 0, 0, l(.213, -.213, .143), l(.715, .285, .14), l(.072, -.072, -.283), 0, 0, l(.213, -.213, -.787), l(.715, -.715, .715), l(.072, .928, .072), 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1];
                        break;
                    case "luminanceToAlpha":
                        r = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, .2125, .7154, .0721, 0, 0, 0, 0, 0, 0, 1]
                    }
                    this.apply = function(t, r, o, s, a) {
                        for (var l = t.getImageData(0, 0, s, a), o = 0; o < a; o++)
                            for (var r = 0; r < s; r++) {
                                var c = e(l.data, r, o, s, a, 0)
                                  , h = e(l.data, r, o, s, a, 1)
                                  , u = e(l.data, r, o, s, a, 2)
                                  , d = e(l.data, r, o, s, a, 3);
                                n(l.data, r, o, s, a, 0, i(0, c) + i(1, h) + i(2, u) + i(3, d) + i(4, 1)),
                                n(l.data, r, o, s, a, 1, i(5, c) + i(6, h) + i(7, u) + i(8, d) + i(9, 1)),
                                n(l.data, r, o, s, a, 2, i(10, c) + i(11, h) + i(12, u) + i(13, d) + i(14, 1)),
                                n(l.data, r, o, s, a, 3, i(15, c) + i(16, h) + i(17, u) + i(18, d) + i(19, 1))
                            }
                        t.clearRect(0, 0, s, a),
                        t.putImageData(l, 0, 0)
                    }
                }
                ,
                o.Element.feColorMatrix.prototype = new o.Element.ElementBase,
                o.Element.feGaussianBlur = function(t) {
                    this.base = o.Element.ElementBase,
                    this.base(t),
                    this.blurRadius = Math.floor(this.attribute("stdDeviation").numValue()),
                    this.extraFilterDistance = this.blurRadius,
                    this.apply = function(t, n, i, r, s) {
                        if (void 0 === e.canvasRGBA)
                            return void o.log("ERROR: StackBlur.js must be included for blur to work");
                        t.canvas.id = o.UniqueId(),
                        t.canvas.style.display = "none",
                        document.body.appendChild(t.canvas),
                        e.canvasRGBA(t.canvas.id, n, i, r, s, this.blurRadius),
                        document.body.removeChild(t.canvas)
                    }
                }
                ,
                o.Element.feGaussianBlur.prototype = new o.Element.ElementBase,
                o.Element.title = function(t) {}
                ,
                o.Element.title.prototype = new o.Element.ElementBase,
                o.Element.desc = function(t) {}
                ,
                o.Element.desc.prototype = new o.Element.ElementBase,
                o.Element.MISSING = function(t) {
                    o.log("ERROR: Element '" + t.nodeName + "' not yet implemented.")
                }
                ,
                o.Element.MISSING.prototype = new o.Element.ElementBase,
                o.CreateElement = function(t) {
                    var e = t.nodeName.replace(/^[^:]+:/, "");
                    e = e.replace(/\-/g, "");
                    var n = null;
                    return n = void 0 !== o.Element[e] ? new o.Element[e](t) : new o.Element.MISSING(t),
                    n.type = t.nodeName,
                    n
                }
                ,
                o.load = function(t, e) {
                    o.loadXml(t, o.ajax(e))
                }
                ,
                o.loadXml = function(t, e) {
                    o.loadXmlDoc(t, o.parseXml(e))
                }
                ,
                o.loadXmlDoc = function(t, e) {
                    o.init(t);
                    var n = function(e) {
                        for (var n = t.canvas; n; )
                            e.x -= n.offsetLeft,
                            e.y -= n.offsetTop,
                            n = n.offsetParent;
                        return window.scrollX && (e.x += window.scrollX),
                        window.scrollY && (e.y += window.scrollY),
                        e
                    };
                    1 != o.opts.ignoreMouse && (t.canvas.onclick = function(t) {
                        var e = n(new o.Point(null != t ? t.clientX : event.clientX,null != t ? t.clientY : event.clientY));
                        o.Mouse.onclick(e.x, e.y)
                    }
                    ,
                    t.canvas.onmousemove = function(t) {
                        var e = n(new o.Point(null != t ? t.clientX : event.clientX,null != t ? t.clientY : event.clientY));
                        o.Mouse.onmousemove(e.x, e.y)
                    }
                    );
                    var i = o.CreateElement(e.documentElement);
                    i.root = !0,
                    i.addStylesFromStyleDefinition();
                    var r = !0
                      , s = function() {
                        o.ViewPort.Clear(),
                        t.canvas.parentNode && o.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth, t.canvas.parentNode.clientHeight),
                        1 != o.opts.ignoreDimensions && (i.style("width").hasValue() && (t.canvas.width = i.style("width").toPixels("x"),
                        t.canvas.style.width = t.canvas.width + "px"),
                        i.style("height").hasValue() && (t.canvas.height = i.style("height").toPixels("y"),
                        t.canvas.style.height = t.canvas.height + "px"));
                        var n = t.canvas.clientWidth || t.canvas.width
                          , s = t.canvas.clientHeight || t.canvas.height;
                        if (1 == o.opts.ignoreDimensions && i.style("width").hasValue() && i.style("height").hasValue() && (n = i.style("width").toPixels("x"),
                        s = i.style("height").toPixels("y")),
                        o.ViewPort.SetCurrent(n, s),
                        null != o.opts.offsetX && (i.attribute("x", !0).value = o.opts.offsetX),
                        null != o.opts.offsetY && (i.attribute("y", !0).value = o.opts.offsetY),
                        null != o.opts.scaleWidth || null != o.opts.scaleHeight) {
                            var a = null
                              , l = null
                              , c = o.ToNumberArray(i.attribute("viewBox").value);
                            null != o.opts.scaleWidth && (i.attribute("width").hasValue() ? a = i.attribute("width").toPixels("x") / o.opts.scaleWidth : isNaN(c[2]) || (a = c[2] / o.opts.scaleWidth)),
                            null != o.opts.scaleHeight && (i.attribute("height").hasValue() ? l = i.attribute("height").toPixels("y") / o.opts.scaleHeight : isNaN(c[3]) || (l = c[3] / o.opts.scaleHeight)),
                            null == a && (a = l),
                            null == l && (l = a),
                            i.attribute("width", !0).value = o.opts.scaleWidth,
                            i.attribute("height", !0).value = o.opts.scaleHeight,
                            i.style("transform", !0, !0).value += " scale(" + 1 / a + "," + 1 / l + ")"
                        }
                        1 != o.opts.ignoreClear && t.clearRect(0, 0, n, s),
                        i.render(t),
                        r && (r = !1,
                        "function" == typeof o.opts.renderCallback && o.opts.renderCallback(e))
                    }
                      , a = !0;
                    o.ImagesLoaded() && (a = !1,
                    s()),
                    o.intervalID = setInterval(function() {
                        var t = !1;
                        if (a && o.ImagesLoaded() && (a = !1,
                        t = !0),
                        1 != o.opts.ignoreMouse && (t |= o.Mouse.hasEvents()),
                        1 != o.opts.ignoreAnimation)
                            for (var e = 0; e < o.Animations.length; e++)
                                t |= o.Animations[e].update(1e3 / o.FRAMERATE);
                        "function" == typeof o.opts.forceRedraw && 1 == o.opts.forceRedraw() && (t = !0),
                        t && (s(),
                        o.Mouse.runEvents())
                    }, 1e3 / o.FRAMERATE)
                }
                ,
                o.stop = function() {
                    o.intervalID && clearInterval(o.intervalID)
                }
                ,
                o.Mouse = new function() {
                    this.events = [],
                    this.hasEvents = function() {
                        return 0 != this.events.length
                    }
                    ,
                    this.onclick = function(t, e) {
                        this.events.push({
                            type: "onclick",
                            x: t,
                            y: e,
                            run: function(t) {
                                t.onclick && t.onclick()
                            }
                        })
                    }
                    ,
                    this.onmousemove = function(t, e) {
                        this.events.push({
                            type: "onmousemove",
                            x: t,
                            y: e,
                            run: function(t) {
                                t.onmousemove && t.onmousemove()
                            }
                        })
                    }
                    ,
                    this.eventElements = [],
                    this.checkPath = function(t, e) {
                        for (var n = 0; n < this.events.length; n++) {
                            var i = this.events[n];
                            e.isPointInPath && e.isPointInPath(i.x, i.y) && (this.eventElements[n] = t)
                        }
                    }
                    ,
                    this.checkBoundingBox = function(t, e) {
                        for (var n = 0; n < this.events.length; n++) {
                            var i = this.events[n];
                            e.isPointInBox(i.x, i.y) && (this.eventElements[n] = t)
                        }
                    }
                    ,
                    this.runEvents = function() {
                        o.ctx.canvas.style.cursor = "";
                        for (var t = 0; t < this.events.length; t++)
                            for (var e = this.events[t], n = this.eventElements[t]; n; )
                                e.run(n),
                                n = n.parent;
                        this.events = [],
                        this.eventElements = []
                    }
                }
                ,
                o
            }
            var a, l = function(t, e, n) {
                if (null != t || null != e || null != n) {
                    "string" == typeof t && (t = document.getElementById(t)),
                    null != t.svg && t.svg.stop();
                    var i = s(n || {});
                    1 == t.childNodes.length && "OBJECT" == t.childNodes[0].nodeName || (t.svg = i);
                    var r = t.getContext("2d");
                    void 0 !== e.documentElement ? i.loadXmlDoc(r, e) : "<" == e.substr(0, 1) ? i.loadXml(r, e) : i.load(r, e)
                } else
                    for (var o = document.querySelectorAll("svg"), a = 0; a < o.length; a++) {
                        var c = o[a]
                          , h = document.createElement("canvas");
                        h.width = c.clientWidth,
                        h.height = c.clientHeight,
                        c.parentNode.insertBefore(h, c),
                        c.parentNode.removeChild(c);
                        var u = document.createElement("div");
                        u.appendChild(c),
                        l(h, u.innerHTML)
                    }
            };
            void 0 !== Element.prototype.matches ? a = function(t, e) {
                return t.matches(e)
            }
            : void 0 !== Element.prototype.webkitMatchesSelector ? a = function(t, e) {
                return t.webkitMatchesSelector(e)
            }
            : void 0 !== Element.prototype.mozMatchesSelector ? a = function(t, e) {
                return t.mozMatchesSelector(e)
            }
            : void 0 !== Element.prototype.msMatchesSelector ? a = function(t, e) {
                return t.msMatchesSelector(e)
            }
            : void 0 !== Element.prototype.oMatchesSelector ? a = function(t, e) {
                return t.oMatchesSelector(e)
            }
            : ("function" != typeof r && "function" != typeof Zepto || (a = function(t, e) {
                return o(t).is(e)
            }
            ),
            void 0 === a && (a = Sizzle.matchesSelector));
            var c = /(\[[^\]]+\])/g
              , h = /(#[^\s\+>~\.\[:]+)/g
              , u = /(\.[^\s\+>~\.\[:]+)/g
              , d = /(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi
              , p = /(:[\w-]+\([^\)]*\))/gi
              , f = /(:[^\s\+>~\.\[:]+)/g
              , g = /([^\s\+>~\.\[:]+)/g;
            return "undefined" != typeof CanvasRenderingContext2D && (CanvasRenderingContext2D.prototype.drawSvg = function(t, e, n, i, r, o) {
                var s = {
                    ignoreMouse: !0,
                    ignoreAnimation: !0,
                    ignoreDimensions: !0,
                    ignoreClear: !0,
                    offsetX: e,
                    offsetY: n,
                    scaleWidth: i,
                    scaleHeight: r
                };
                for (var a in o)
                    o.hasOwnProperty(a) && (s[a] = o[a]);
                l(this.canvas, t, s)
            }
            ),
            l
        })
    }
    ).call(e, n(0), n(0))
}
, function(t, e) {
    function n() {
        throw new Error("setTimeout has not been defined")
    }
    function i() {
        throw new Error("clearTimeout has not been defined")
    }
    function r(t) {
        if (h === setTimeout)
            return setTimeout(t, 0);
        if ((h === n || !h) && setTimeout)
            return h = setTimeout,
            setTimeout(t, 0);
        try {
            return h(t, 0)
        } catch (e) {
            try {
                return h.call(null, t, 0)
            } catch (e) {
                return h.call(this, t, 0)
            }
        }
    }
    function o(t) {
        if (u === clearTimeout)
            return clearTimeout(t);
        if ((u === i || !u) && clearTimeout)
            return u = clearTimeout,
            clearTimeout(t);
        try {
            return u(t)
        } catch (e) {
            try {
                return u.call(null, t)
            } catch (e) {
                return u.call(this, t)
            }
        }
    }
    function s() {
        g && p && (g = !1,
        p.length ? f = p.concat(f) : m = -1,
        f.length && a())
    }
    function a() {
        if (!g) {
            var t = r(s);
            g = !0;
            for (var e = f.length; e; ) {
                for (p = f,
                f = []; ++m < e; )
                    p && p[m].run();
                m = -1,
                e = f.length
            }
            p = null,
            g = !1,
            o(t)
        }
    }
    function l(t, e) {
        this.fun = t,
        this.array = e
    }
    function c() {}
    var h, u, d = t.exports = {};
    !function() {
        try {
            h = "function" == typeof setTimeout ? setTimeout : n
        } catch (t) {
            h = n
        }
        try {
            u = "function" == typeof clearTimeout ? clearTimeout : i
        } catch (t) {
            u = i
        }
    }();
    var p, f = [], g = !1, m = -1;
    d.nextTick = function(t) {
        var e = new Array(arguments.length - 1);
        if (arguments.length > 1)
            for (var n = 1; n < arguments.length; n++)
                e[n - 1] = arguments[n];
        f.push(new l(t,e)),
        1 !== f.length || g || r(a)
    }
    ,
    l.prototype.run = function() {
        this.fun.apply(null, this.array)
    }
    ,
    d.title = "browser",
    d.browser = !0,
    d.env = {},
    d.argv = [],
    d.version = "",
    d.versions = {},
    d.on = c,
    d.addListener = c,
    d.once = c,
    d.off = c,
    d.removeListener = c,
    d.removeAllListeners = c,
    d.emit = c,
    d.prependListener = c,
    d.prependOnceListener = c,
    d.listeners = function(t) {
        return []
    }
    ,
    d.binding = function(t) {
        throw new Error("process.binding is not supported")
    }
    ,
    d.cwd = function() {
        return "/"
    }
    ,
    d.chdir = function(t) {
        throw new Error("process.chdir is not supported")
    }
    ,
    d.umask = function() {
        return 0
    }
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(51)
      , o = n(15)
      , s = n(30)
      , a = function(t) {
        function e() {
            return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t),
        Object.defineProperty(e.prototype, "item", {
            get: function() {
                return this._item
            },
            enumerable: !0,
            configurable: !0
        }),
        e.prototype.draw = function(t) {
            void 0 === t && (t = null),
            this.context2d.save(),
            this.item.blendManager.toContext2d(this.item.blendMode, this.context2d);
            var e = this.getMatrixForContext2d();
            e.scale(this.zoom, this.zoom),
            null !== this.offsetMatrix && e.concat(this.offsetMatrix),
            e.setToContext2d(this.context2d);
            var n = s.BaseSvgExporter.changeEmblemAppearance(this.item.svg, this.getFill(t));
            this.drawSvg(n),
            this.context2d.restore()
        }
        ,
        e.prototype.drawSvg = function(t) {
            null == e.canvgOptions && (e.canvgOptions = {
                ignoreMouse: !0,
                ignoreAnimation: !0,
                ignoreDimensions: !0,
                ignoreClear: !0,
                offsetX: 0,
                offsetY: 0,
                scaleWidth: 0,
                scaleHeight: 0
            }),
            r(this.context2d.canvas, t, e.canvgOptions)
        }
        ,
        e.canvgOptions = null,
        e
    }(o.LogoItemView);
    e.SvgIconView = a
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = function() {
        function t() {}
        return t.getCanvas = function() {
            if (null == t.canvas) {
                var e = document.createElement("canvas");
                e.width = 1920,
                e.height = 1080,
                t.canvas = e
            }
            var n = t.canvas.getContext("2d");
            return n.clearRect(0, 0, n.canvas.width, n.canvas.height),
            t.canvas
        }
        ,
        t.clearContext2d = function(t) {
            t.clearRect(0, 0, t.canvas.width, t.canvas.height)
        }
        ,
        t.canvas = null,
        t
    }();
    e.Context2DManager = i
}
, function(t, e) {
    function n(t) {
        return "number" == typeof t && t > -1 && t % 1 == 0 && t <= i
    }
    var i = 9007199254740991;
    t.exports = n
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(7)
      , o = n(6)
      , s = n(57)
      , a = n(8)
      , l = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e.type = r.LogoItem.LINE,
            e
        }
        return i(e, t),
        Object.defineProperty(e.prototype, "maths", {
            get: function() {
                return this._maths
            },
            set: function(t) {
                this._maths = t
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(e.prototype, "bounds", {
            get: function() {
                return null == this._bounds && (this._bounds = this.calculateBounds()),
                this._bounds
            },
            set: function(t) {
                this._bounds = t
            },
            enumerable: !0,
            configurable: !0
        }),
        e.prototype.serialize = function() {
            var t = {
                id: this.id,
                type: this.type,
                group: this.group,
                maths: this.maths.serialize(),
                fill: o.Fill.serialize(this.fill),
                blendMode: this.blendMode
            };
            return JSON.stringify(t)
        }
        ,
        e.deserialize = function(t) {
            var n = new e;
            return n.id = t.i,
            n.group = t.g,
            n.maths = s.LineMaths.deserialize(t.m),
            n.fill = o.Fill.deserialize(t.f),
            n.blendMode = t.bm,
            n._source = n.clone(),
            n
        }
        ,
        e.prototype.calculateBounds = function() {
            var t = 0
              , e = 0
              , n = 0
              , i = 0;
            return this.maths.p1.x == this.maths.p2.x ? (t = Math.round(Math.min(this.maths.p1.x, this.maths.p2.x) - this.maths.lineWidth / 2),
            e = Math.round(Math.round(Math.min(this.maths.p1.y, this.maths.p2.y))),
            n = Math.round(this.maths.lineWidth),
            i = Math.round(Math.max(this.maths.p1.y, this.maths.p2.y) - Math.min(this.maths.p1.y, this.maths.p2.y))) : this.maths.p1.y == this.maths.p2.y ? (t = Math.round(Math.min(this.maths.p1.x, this.maths.p2.x)),
            e = Math.round(Math.min(this.maths.p1.y, this.maths.p2.y) - this.maths.lineWidth / 2),
            n = Math.round(Math.max(this.maths.p1.x, this.maths.p2.x) - Math.min(this.maths.p1.x, this.maths.p2.x)),
            i = Math.round(this.maths.lineWidth)) : (t = Math.round(Math.min(this.maths.p1.x, this.maths.p2.x)),
            e = Math.round(Math.min(this.maths.p1.y, this.maths.p2.y)),
            n = Math.round(Math.max(this.maths.p1.x, this.maths.p2.x) - t),
            i = Math.round(Math.max(this.maths.p1.y, this.maths.p2.y) - e)),
            new a.Rectangle(t,e,n,i)
        }
        ,
        e.prototype.clone = function() {
            var t = new e;
            return t.id = this.id,
            t.uid = this.uid,
            t.group = this.group,
            t.bounds = this._bounds ? this._bounds.clone() : null,
            t.maths = this.maths ? this.maths.clone() : null,
            t.fill = this.fill ? this.fill.clone() : null,
            t.blendMode = this.blendMode,
            t
        }
        ,
        e.prototype.debug = function() {
            return "Type: Line\n" + t.prototype.debug.call(this) + "\n"
        }
        ,
        e
    }(r.LogoItem);
    e.Line = l
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(13)
      , o = n(1)
      , s = n(14)
      , a = function(t) {
        function e() {
            var e = null !== t && t.apply(this, arguments) || this;
            return e.p1 = null,
            e.p2 = null,
            e.lineWidth = 1,
            e
        }
        return i(e, t),
        e.prototype.serialize = function() {
            return this.matrix.serialize() + ";" + this.lineWidth + ";" + this.p1.x + ";" + this.p1.y + ";" + this.p2.x + ";" + this.p2.y
        }
        ,
        e.deserialize = function(t) {
            var n = new e
              , i = t.split(";");
            return n.matrix = o.Matrix.deserialize(i[0]),
            n.lineWidth = Number(i[1]),
            n.p1 = new s.Point(Number(i[2]),Number(i[3])),
            n.p2 = new s.Point(Number(i[4]),Number(i[5])),
            n
        }
        ,
        e.prototype.clone = function() {
            return e.deserialize(this.serialize())
        }
        ,
        e.prototype.equals = function(e) {
            return t.prototype.equals.call(this, e) && this.p1.equals(e.p1) && this.p2.equals(e.p2) && this.lineWidth === e.lineWidth
        }
        ,
        e
    }(r.Maths);
    e.LineMaths = a
}
, , function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(64)
      , o = n(6)
      , s = n(30)
      , a = function(t) {
        function e() {
            var e = null !== t && t.apply(this, arguments) || this;
            return e.entries = [],
            e.angle = 0,
            e
        }
        return i(e, t),
        e.prototype.serializeGradientStops = function() {
            for (var t = "", e = 0; e < this.entries.length; e++) {
                var n = this.entries[e];
                t += " " + n.color.toString() + ";" + n.alpha + ";" + n.ratio.toString()
            }
            return t
        }
        ,
        e.prototype.serialize = function() {
            var e = t.prototype.serialize.call(this);
            return e += " lg",
            e += " " + this.angle.toString(),
            e += this.serializeGradientStops()
        }
        ,
        e.deserializeGradientStops = function(t) {
            var e = [];
            if (!(null == t || t.length < 3)) {
                for (var n = 3; n < t.length; n++) {
                    var i = t[n];
                    if ("" != i) {
                        var o = i.split(";")
                          , s = Number(o[2]);
                        (-1 == s || isNaN(s)) && (s = 1 / (t.length - 1) * n);
                        var a = new r.GradientEntry(o[0],parseInt(o[1]),s);
                        e.push(a)
                    }
                }
                return e
            }
        }
        ,
        e.deserialize = function(t) {
            var n = new e("000000")
              , i = t.split(" ");
            return "lg" == i[1] && (n.color = i[0],
            n.angle = parseInt(i[2]),
            n.entries = e.deserializeGradientStops(i)),
            n
        }
        ,
        e.prototype.toContext2d = function(t, e) {
            for (var n = t.createLinearGradient(e.x + e.width / 2, e.y, e.x + e.width / 2, e.y + e.height), i = 0; i < this.entries.length; i++) {
                var r = this.entries[i];
                n.addColorStop(r.ratio, "#" + r.color)
            }
            t.fillStyle = n
        }
        ,
        e.prototype.toSvg = function(t, e) {
            var n = t.getAttribute("id") + "_fill";
            e.appendChild(s.BaseSvgExporter.createGradientXml(n, this)),
            t.setAttribute("fill", "url(#{fillIdentifier})")
        }
        ,
        e
    }(o.Fill);
    e.LinearGradientFill = a
}
, function(t, e, n) {
    "use strict";
    (function(t, i) {
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var r = n(23)
          , o = n(3)
          , s = n(5)
          , a = n(43)
          , l = n(7)
          , c = n(47)
          , h = function() {
            function e() {
                this._logos = [],
                this.businessCards = [],
                this.socialProducts = [],
                this.logoMaps = [],
                this.inputData = null,
                this.textUid = null,
                this.sloganUid = null,
                this.verticalSloganLogo = null,
                this.verticalLogo = null,
                this.textLogo = null,
                this.textSloganLogo = null,
                this.horizontalLogo = null,
                this.horizontalSloganLogo = null,
                this.iconLogo = null,
                this.primaryMap = null,
                this.primaryLogo = null,
                this.primaryLogoType = null,
                this._groupedItems = null,
                this._nextGroup = null
            }
            return Object.defineProperty(e, "EDIT_URL", {
                get: function() {
                    return s.Site.MAIN_URL + "/v3/brands/{id}/edit/"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e, "SERVICE_URL", {
                get: function() {
                    return s.Site.MAIN_URL + "/v3/js/brand/"
                },
                enumerable: !0,
                configurable: !0
            }),
            e.prototype.getLogo = function(t, e, n) {
                if (void 0 === e && (e = null),
                void 0 === n && (n = null),
                null !== n)
                    return this.getLogoById(n);
                null === e && (e = this.primaryLogo.makerSlogans > 0);
                var i = null;
                if (t === r.LogoMakerType.Vertical && e)
                    i = this.verticalSloganLogo;
                else if (t !== r.LogoMakerType.Vertical || e)
                    if (t === r.LogoMakerType.Horizontal && e)
                        i = this.horizontalSloganLogo;
                    else if (t !== r.LogoMakerType.Horizontal || e)
                        if (t === r.LogoMakerType.Text && e)
                            i = this.textSloganLogo;
                        else if (t !== r.LogoMakerType.Text || e) {
                            if (t === r.LogoMakerType.Icon)
                                i = null === this.iconLogo ? this.verticalLogo : this.iconLogo;
                            else if (t >= o.Logo.START_INDEX) {
                                var s = t - o.Logo.START_INDEX;
                                i = s < this._logos.length ? this._logos[s] : this.verticalLogo
                            }
                        } else
                            i = this.textLogo;
                    else
                        i = this.horizontalLogo;
                else
                    i = this.verticalLogo;
                return i
            }
            ,
            e.prototype.getLogoById = function(t) {
                for (var e = null, n = 0, i = this._logos; n < i.length; n++) {
                    var r = i[n];
                    if (r.id === t) {
                        e = r;
                        break
                    }
                }
                return e
            }
            ,
            e.prototype.getBusinessCardById = function(t) {
                for (var e = null, n = 0, i = this.businessCards; n < i.length; n++) {
                    var r = i[n];
                    if (r.id === t) {
                        e = r;
                        break
                    }
                }
                return e
            }
            ,
            e.prototype.updateBusinessCard = function(t) {
                var e = this.businessCards.findIndex(function(e) {
                    return e.id === t.id
                });
                -1 !== e && (this.businessCards[e] = t)
            }
            ,
            e.prototype.getSocialProductBySizeType = function(t) {
                for (var e = null, n = 0, i = this.socialProducts; n < i.length; n++) {
                    var r = i[n];
                    if (r.sizeType === t) {
                        e = r;
                        break
                    }
                }
                return e
            }
            ,
            e.prototype.updateSocialProduct = function(t) {
                var e = this.socialProducts.findIndex(function(e) {
                    return e.sizeType === t.sizeType
                });
                -1 !== e && (this.socialProducts[e] = t)
            }
            ,
            Object.defineProperty(e.prototype, "id", {
                get: function() {
                    return this.primaryLogo.id
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "number", {
                get: function() {
                    return this.primaryLogo.number
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "colorRange", {
                get: function() {
                    return this.primaryLogo.colorRange
                },
                set: function(t) {
                    for (var e = 0, n = this._logos; e < n.length; e++) {
                        n[e].colorRange = t
                    }
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "text", {
                get: function() {
                    return this.primaryLogo.text
                },
                set: function(t) {
                    for (var e = 0, n = this._logos; e < n.length; e++) {
                        n[e].text = t
                    }
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "status", {
                get: function() {
                    return this.primaryLogo.status
                },
                set: function(t) {
                    for (var e = 0, n = this._logos; e < n.length; e++) {
                        n[e].status = t
                    }
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "logos", {
                get: function() {
                    return this._logos
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "groupedItems", {
                get: function() {
                    return null === this._groupedItems && this.groupItems(),
                    this._groupedItems
                },
                enumerable: !0,
                configurable: !0
            }),
            e.prototype.addLogo = function(t) {
                this._logos.push(t),
                t.makerType === r.LogoMakerType.Vertical && t.makerSlogans > 0 ? this.verticalSloganLogo = t : t.makerType === r.LogoMakerType.Vertical && 0 === t.makerSlogans ? this.verticalLogo = t : t.makerType === r.LogoMakerType.Horizontal && t.makerSlogans > 0 ? this.horizontalSloganLogo = t : t.makerType === r.LogoMakerType.Horizontal && 0 === t.makerSlogans ? this.horizontalLogo = t : t.makerType === r.LogoMakerType.Text && t.makerSlogans > 0 ? this.textSloganLogo = t : t.makerType === r.LogoMakerType.Text && 0 === t.makerSlogans ? this.textLogo = t : t.makerType === r.LogoMakerType.Icon && (this.iconLogo = t)
            }
            ,
            e.prototype.replaceLogo = function(t) {
                var e = this.getLogoById(t.id);
                if (null !== e && e.makerId === t.makerId) {
                    var n = this._logos.indexOf(e);
                    n > -1 && this._logos.splice(n, 1),
                    this.addLogo(t)
                }
            }
            ,
            e.prototype.serialize = function() {
                for (var t = {
                    primary: this.primaryLogo.serialize(),
                    others: [],
                    businessCards: []
                }, e = 0, n = this._logos; e < n.length; e++) {
                    var i = n[e];
                    i !== this.primaryLogo && t.others.push(i.serialize())
                }
                for (var r = 0, o = this.businessCards; r < o.length; r++) {
                    var s = o[r];
                    t.businessCards.push(s.serialize())
                }
                return JSON.stringify(t)
            }
            ,
            e.prototype.save = function() {
                var n = this;
                return new t(function(t, r) {
                    i.ajax({
                        type: "POST",
                        url: e.SERVICE_URL,
                        dataType: "json",
                        data: n.serialize(),
                        success: function(e) {
                            for (var i = 0, r = e; i < r.length; i++)
                                for (var o = r[i], s = 0, a = n._logos; s < a.length; s++) {
                                    var l = a[s];
                                    if (l.makerId === o.makerId) {
                                        l.id = o.id;
                                        break
                                    }
                                }
                            t(e)
                        }
                    })
                }
                )
            }
            ,
            e.prototype.partial_update = function() {
                for (var n = this, r = this.getChangedLogos(), o = [], s = 0, a = r; s < a.length; s++) {
                    var l = a[s];
                    o.push(l.serialize(!0))
                }
                return new t(function(t, r) {
                    i.ajax({
                        type: "PATCH",
                        url: e.SERVICE_URL + (n.id + "/"),
                        dataType: "json",
                        data: JSON.stringify(o),
                        success: function(e) {
                            t(e.brandId)
                        }
                    })
                }
                )
            }
            ,
            e.prototype.toggleFavorite = function() {
                return this.status == o.Logo.STATUS_FAVORITE ? (this.status = o.Logo.STATUS_DEFAULT,
                this.delete()) : (this.status = o.Logo.STATUS_FAVORITE,
                this.save())
            }
            ,
            e.prototype.delete = function() {
                var n = this
                  , r = {};
                return new t(function(t, o) {
                    i.ajax({
                        type: "DELETE",
                        url: e.SERVICE_URL + (n.id + "/"),
                        dataType: "json",
                        data: JSON.stringify(r),
                        success: function(e) {
                            for (var i = 0, r = n._logos; i < r.length; i++) {
                                r[i].id = 0
                            }
                            t()
                        }
                    })
                }
                )
            }
            ,
            e.fromId = function(t, e) {
                for (var n = 0, i = e; n < i.length; n++) {
                    var r = i[n];
                    if (r.primaryLogo.id === t)
                        return r
                }
                return null
            }
            ,
            e.fromParentMapId = function(t, e) {
                for (var n = 0, i = e; n < i.length; n++) {
                    var r = i[n];
                    if (r.parentMapId === t)
                        return r
                }
                return null
            }
            ,
            e.deserialize = function(t) {
                for (var n = new e, i = 0, r = t.logos; i < r.length; i++) {
                    var s = r[i]
                      , l = o.Logo.deserialize(s);
                    null === l.primaryId && (n.primaryLogo = l),
                    n.addLogo(l)
                }
                for (var h = 0, u = t.businessCards; h < u.length; h++) {
                    var d = u[h]
                      , p = a.BusinessCard.deserialize(d, n);
                    n.businessCards.push(p)
                }
                for (var f = 0, g = t.socialProducts; f < g.length; f++) {
                    var m = g[f]
                      , _ = c.SocialProduct.deserialize(m, n);
                    n.socialProducts.push(_)
                }
                return n
            }
            ,
            e.deserializeMany = function(t) {
                for (var n = [], i = 0, r = t; i < r.length; i++) {
                    var s = r[i]
                      , a = o.Logo.deserialize(s)
                      , l = a.getPrimaryId()
                      , c = null;
                    c = e.fromId(l, n),
                    null === c && (c = new e,
                    n.push(c)),
                    null === a.primaryId && (c.primaryLogo = a),
                    c.addLogo(a)
                }
                return n
            }
            ,
            e.groupLogoItems = function(t) {
                for (var e, n, i, r, o, s = [], a = 0, c = t.logos; a < c.length; a++) {
                    var h = c[a];
                    e = [],
                    n = {};
                    for (var u = 0, d = h.items; u < d.length; u++) {
                        var p = d[u];
                        if (p.group > 0)
                            return;
                        switch (p.type) {
                        case l.LogoItem.SVG_ICON:
                            o = p.type + "." + p.iconId;
                            break;
                        case l.LogoItem.BASE_TEXT:
                        case l.LogoItem.LOGO_NAME:
                        case l.LogoItem.TAGLINE:
                        case l.LogoItem.MONOGRAM:
                        case l.LogoItem.CUSTOM_TEXT:
                            o = p.type + "." + p.text;
                            break;
                        case l.LogoItem.LINE:
                            o = "" + p.type
                        }
                        -1 !== e.indexOf(o) ? (i = n[o] + 1,
                        n[o] = i,
                        o = o + "." + i) : (e.push(o),
                        n[o] = 0),
                        r = s.indexOf(o),
                        -1 === r && (s.push(o),
                        r = s.indexOf(o)),
                        p.group = r + 1
                    }
                }
            }
            ,
            e.prototype.sortLogos = function() {
                var t = this.primaryLogoType === r.LogoMakerType.Vertical ? r.LogoMakerType.Horizontal : r.LogoMakerType.Vertical
                  , e = [this.primaryLogoType, t, r.LogoMakerType.Text, r.LogoMakerType.Icon]
                  , n = [];
                n.push(this.primaryLogo),
                this._logos.splice(this._logos.indexOf(this.primaryLogo), 1);
                for (var i = 0, o = e; i < o.length; i++)
                    for (var s = o[i], a = this._logos.length; a > 0; )
                        a--,
                        this._logos[a].makerType == s && (n.push(this._logos[a]),
                        this._logos.splice(a, 1));
                this._logos = n
            }
            ,
            e.prototype.usedFonts = function() {
                for (var t = [], e = 0, n = this._logos; e < n.length; e++) {
                    var i = n[e];
                    t = t.concat(i.usedFonts())
                }
                for (var r = 0, o = this.businessCards; r < o.length; r++) {
                    var s = o[r];
                    t = t.concat(s.usedFonts())
                }
                for (var a = 0, l = this.socialProducts; a < l.length; a++) {
                    var c = l[a];
                    t = t.concat(c.usedFonts())
                }
                return t
            }
            ,
            e.prototype.haveSvgIcons = function() {
                for (var t = !1, e = 0, n = this._logos; e < n.length; e++) {
                    if (null !== n[e].icon) {
                        t = !0;
                        break
                    }
                }
                return t
            }
            ,
            e.prototype.getChangedLogos = function() {
                for (var t = [], e = 0, n = this._logos; e < n.length; e++) {
                    var i = n[e];
                    i.hasChanges() && t.push(i)
                }
                return t
            }
            ,
            e.prototype.groupItems = function() {
                this._groupedItems = {};
                for (var t = 0, e = this._logos; t < e.length; t++)
                    for (var n = e[t], i = 0, r = n.items; i < r.length; i++) {
                        var o = r[i]
                          , s = o.group;
                        this.groupedItems.hasOwnProperty(s) ? this.groupedItems[s].push(o) : this.groupedItems[s] = [o]
                    }
            }
            ,
            e.prototype.addLogoItem = function(t, e) {
                for (var n = null, i = 0, r = this._logos; i < r.length; i++) {
                    var o = r[i];
                    if (o.id === t) {
                        n = o.addItem(e);
                        break
                    }
                }
                return null !== n && this.groupItems(),
                n
            }
            ,
            e.prototype.deleteLogoItem = function(t) {
                for (var e = null, n = 0, i = this._logos; n < i.length; n++) {
                    if (null !== (e = i[n].deleteItem(t)))
                        break
                }
                return null !== e && this.groupItems(),
                e
            }
            ,
            Object.defineProperty(e.prototype, "nextGroup", {
                get: function() {
                    if (null === this._nextGroup)
                        for (var t = 0, e = this._logos; t < e.length; t++)
                            for (var n = e[t], i = 0, r = n.items; i < r.length; i++) {
                                var o = r[i];
                                o.group > this._nextGroup && (this._nextGroup = o.group)
                            }
                    return this._nextGroup += 1,
                    this._nextGroup
                },
                enumerable: !0,
                configurable: !0
            }),
            e.prototype.clone = function() {
                for (var t = new e, n = 0, i = this._logos; n < i.length; n++) {
                    var o = i[n];
                    o = o.clone(),
                    t._logos.push(o),
                    o.makerType === r.LogoMakerType.Vertical && o.makerSlogans > 0 ? t.verticalSloganLogo = o : o.makerType === r.LogoMakerType.Vertical && 0 === o.makerSlogans ? t.verticalLogo = o : o.makerType === r.LogoMakerType.Horizontal && o.makerSlogans > 0 ? t.horizontalSloganLogo = o : o.makerType === r.LogoMakerType.Horizontal && 0 === o.makerSlogans ? t.horizontalLogo = o : o.makerType === r.LogoMakerType.Text && o.makerSlogans > 0 ? t.textSloganLogo = o : o.makerType === r.LogoMakerType.Text && 0 === o.makerSlogans ? t.textLogo = o : o.makerType === r.LogoMakerType.Icon && (t.iconLogo = o),
                    null === o.primaryId && (t.primaryLogo = o)
                }
                return t.parentMapId = this.parentMapId,
                t.inputData = this.inputData,
                t.textUid = this.textUid,
                t.sloganUid = this.sloganUid,
                t.logoMaps = this.logoMaps,
                t.primaryMap = this.primaryMap,
                t.primaryLogoType = this.primaryLogoType,
                t._groupedItems = t.groupedItems,
                t
            }
            ,
            e
        }();
        e.Brand = h
    }
    ).call(e, n(4), n(0))
}
, function(t, e) {}
, function(t, e, n) {
    var i;
    /**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * @link   http://www.phpied.com/rgb-color-parser-in-javascript/
 * @license Use it if you like it
 */
    !function(r) {
        function o(t) {
            this.ok = !1,
            "#" == t.charAt(0) && (t = t.substr(1, 6)),
            t = t.replace(/ /g, ""),
            t = t.toLowerCase();
            var e = {
                aliceblue: "f0f8ff",
                antiquewhite: "faebd7",
                aqua: "00ffff",
                aquamarine: "7fffd4",
                azure: "f0ffff",
                beige: "f5f5dc",
                bisque: "ffe4c4",
                black: "000000",
                blanchedalmond: "ffebcd",
                blue: "0000ff",
                blueviolet: "8a2be2",
                brown: "a52a2a",
                burlywood: "deb887",
                cadetblue: "5f9ea0",
                chartreuse: "7fff00",
                chocolate: "d2691e",
                coral: "ff7f50",
                cornflowerblue: "6495ed",
                cornsilk: "fff8dc",
                crimson: "dc143c",
                cyan: "00ffff",
                darkblue: "00008b",
                darkcyan: "008b8b",
                darkgoldenrod: "b8860b",
                darkgray: "a9a9a9",
                darkgreen: "006400",
                darkkhaki: "bdb76b",
                darkmagenta: "8b008b",
                darkolivegreen: "556b2f",
                darkorange: "ff8c00",
                darkorchid: "9932cc",
                darkred: "8b0000",
                darksalmon: "e9967a",
                darkseagreen: "8fbc8f",
                darkslateblue: "483d8b",
                darkslategray: "2f4f4f",
                darkturquoise: "00ced1",
                darkviolet: "9400d3",
                deeppink: "ff1493",
                deepskyblue: "00bfff",
                dimgray: "696969",
                dodgerblue: "1e90ff",
                feldspar: "d19275",
                firebrick: "b22222",
                floralwhite: "fffaf0",
                forestgreen: "228b22",
                fuchsia: "ff00ff",
                gainsboro: "dcdcdc",
                ghostwhite: "f8f8ff",
                gold: "ffd700",
                goldenrod: "daa520",
                gray: "808080",
                green: "008000",
                greenyellow: "adff2f",
                honeydew: "f0fff0",
                hotpink: "ff69b4",
                indianred: "cd5c5c",
                indigo: "4b0082",
                ivory: "fffff0",
                khaki: "f0e68c",
                lavender: "e6e6fa",
                lavenderblush: "fff0f5",
                lawngreen: "7cfc00",
                lemonchiffon: "fffacd",
                lightblue: "add8e6",
                lightcoral: "f08080",
                lightcyan: "e0ffff",
                lightgoldenrodyellow: "fafad2",
                lightgrey: "d3d3d3",
                lightgreen: "90ee90",
                lightpink: "ffb6c1",
                lightsalmon: "ffa07a",
                lightseagreen: "20b2aa",
                lightskyblue: "87cefa",
                lightslateblue: "8470ff",
                lightslategray: "778899",
                lightsteelblue: "b0c4de",
                lightyellow: "ffffe0",
                lime: "00ff00",
                limegreen: "32cd32",
                linen: "faf0e6",
                magenta: "ff00ff",
                maroon: "800000",
                mediumaquamarine: "66cdaa",
                mediumblue: "0000cd",
                mediumorchid: "ba55d3",
                mediumpurple: "9370d8",
                mediumseagreen: "3cb371",
                mediumslateblue: "7b68ee",
                mediumspringgreen: "00fa9a",
                mediumturquoise: "48d1cc",
                mediumvioletred: "c71585",
                midnightblue: "191970",
                mintcream: "f5fffa",
                mistyrose: "ffe4e1",
                moccasin: "ffe4b5",
                navajowhite: "ffdead",
                navy: "000080",
                oldlace: "fdf5e6",
                olive: "808000",
                olivedrab: "6b8e23",
                orange: "ffa500",
                orangered: "ff4500",
                orchid: "da70d6",
                palegoldenrod: "eee8aa",
                palegreen: "98fb98",
                paleturquoise: "afeeee",
                palevioletred: "d87093",
                papayawhip: "ffefd5",
                peachpuff: "ffdab9",
                peru: "cd853f",
                pink: "ffc0cb",
                plum: "dda0dd",
                powderblue: "b0e0e6",
                purple: "800080",
                red: "ff0000",
                rosybrown: "bc8f8f",
                royalblue: "4169e1",
                saddlebrown: "8b4513",
                salmon: "fa8072",
                sandybrown: "f4a460",
                seagreen: "2e8b57",
                seashell: "fff5ee",
                sienna: "a0522d",
                silver: "c0c0c0",
                skyblue: "87ceeb",
                slateblue: "6a5acd",
                slategray: "708090",
                snow: "fffafa",
                springgreen: "00ff7f",
                steelblue: "4682b4",
                tan: "d2b48c",
                teal: "008080",
                thistle: "d8bfd8",
                tomato: "ff6347",
                turquoise: "40e0d0",
                violet: "ee82ee",
                violetred: "d02090",
                wheat: "f5deb3",
                white: "ffffff",
                whitesmoke: "f5f5f5",
                yellow: "ffff00",
                yellowgreen: "9acd32"
            };
            for (var n in e)
                t == n && (t = e[n]);
            for (var i = [{
                re: /^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,
                example: ["rgb(123, 234, 45)", "rgb(255,234,245)"],
                process: function(t) {
                    return [parseInt(t[1]), parseInt(t[2]), parseInt(t[3])]
                }
            }, {
                re: /^(\w{2})(\w{2})(\w{2})$/,
                example: ["#00ff00", "336699"],
                process: function(t) {
                    return [parseInt(t[1], 16), parseInt(t[2], 16), parseInt(t[3], 16)]
                }
            }, {
                re: /^(\w{1})(\w{1})(\w{1})$/,
                example: ["#fb0", "f0f"],
                process: function(t) {
                    return [parseInt(t[1] + t[1], 16), parseInt(t[2] + t[2], 16), parseInt(t[3] + t[3], 16)]
                }
            }], r = 0; r < i.length; r++) {
                var s = i[r].re
                  , a = i[r].process
                  , l = s.exec(t);
                l && (channels = a(l),
                this.r = channels[0],
                this.g = channels[1],
                this.b = channels[2],
                this.ok = !0)
            }
            this.r = this.r < 0 || isNaN(this.r) ? 0 : this.r > 255 ? 255 : this.r,
            this.g = this.g < 0 || isNaN(this.g) ? 0 : this.g > 255 ? 255 : this.g,
            this.b = this.b < 0 || isNaN(this.b) ? 0 : this.b > 255 ? 255 : this.b,
            this.toRGB = function() {
                return "rgb(" + this.r + ", " + this.g + ", " + this.b + ")"
            }
            ,
            this.toHex = function() {
                var t = this.r.toString(16)
                  , e = this.g.toString(16)
                  , n = this.b.toString(16);
                return 1 == t.length && (t = "0" + t),
                1 == e.length && (e = "0" + e),
                1 == n.length && (n = "0" + n),
                "#" + t + e + n
            }
            ,
            this.getHelpXML = function() {
                for (var t = new Array, n = 0; n < i.length; n++)
                    for (var r = i[n].example, s = 0; s < r.length; s++)
                        t[t.length] = r[s];
                for (var a in e)
                    t[t.length] = a;
                var l = document.createElement("ul");
                l.setAttribute("id", "rgbcolor-examples");
                for (var n = 0; n < t.length; n++)
                    try {
                        var c = document.createElement("li")
                          , h = new o(t[n])
                          , u = document.createElement("div");
                        u.style.cssText = "margin: 3px; border: 1px solid black; background:" + h.toHex() + "; color:" + h.toHex(),
                        u.appendChild(document.createTextNode("test"));
                        var d = document.createTextNode(" " + t[n] + " -> " + h.toRGB() + " -> " + h.toHex());
                        c.appendChild(u),
                        c.appendChild(d),
                        l.appendChild(c)
                    } catch (t) {}
                return l
            }
        }
        void 0 !== (i = function() {
            return o
        }
        .call(e, n, e, t)) && (t.exports = i),
        r.RGBColor = o
    }("undefined" != typeof window ? window : this)
}
, function(t, e, n) {
    var i;
    !function(r) {
        function o(t) {
            for (var e = t.data, n = t.width * t.height * 4, i = 0; i < n; i += 4) {
                var r = e[i + 3] / 255;
                e[i] *= r,
                e[i + 1] *= r,
                e[i + 2] *= r
            }
        }
        function s(t) {
            for (var e = t.data, n = t.width * t.height * 4, i = 0; i < n; i += 4) {
                var r = e[i + 3];
                0 != r && (r = 255 / r,
                e[i] *= r,
                e[i + 1] *= r,
                e[i + 2] *= r)
            }
        }
        function a(t, e, n, i) {
            var r = document.getElementById(t)
              , o = r.naturalWidth
              , s = r.naturalHeight
              , a = document.getElementById(e);
            a.style.width = o + "px",
            a.style.height = s + "px",
            a.width = o,
            a.height = s;
            var h = a.getContext("2d");
            h.clearRect(0, 0, o, s),
            h.drawImage(r, 0, 0),
            isNaN(n) || n < 1 || (i ? l(e, 0, 0, o, s, n) : c(e, 0, 0, o, s, n))
        }
        function l(t, e, n, i, r, a) {
            if (!(isNaN(a) || a < 1)) {
                a |= 0;
                var l, c = document.getElementById(t), p = c.getContext("2d");
                try {
                    try {
                        l = p.getImageData(e, n, i, r)
                    } catch (t) {
                        try {
                            netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),
                            l = p.getImageData(e, n, i, r)
                        } catch (t) {
                            throw alert("Cannot access local image"),
                            new Error("unable to access local image data: " + t)
                        }
                    }
                } catch (t) {
                    throw alert("Cannot access image"),
                    new Error("unable to access image data: " + t)
                }
                o(l);
                var f, g, m, _, v, y, b, w, x, C, T, k, I, L, E, P, S, j, O, A, R, B, M, D, N = l.data, H = a + a + 1, F = i - 1, z = r - 1, $ = a + 1, V = $ * ($ + 1) / 2, G = new h, U = G;
                for (m = 1; m < H; m++)
                    if (U = U.next = new h,
                    m == $)
                        var W = U;
                U.next = G;
                var q = null
                  , K = null;
                b = y = 0;
                var X = u[a]
                  , Y = d[a];
                for (g = 0; g < r; g++) {
                    for (P = S = j = O = w = x = C = T = 0,
                    k = $ * (A = N[y]),
                    I = $ * (R = N[y + 1]),
                    L = $ * (B = N[y + 2]),
                    E = $ * (M = N[y + 3]),
                    w += V * A,
                    x += V * R,
                    C += V * B,
                    T += V * M,
                    U = G,
                    m = 0; m < $; m++)
                        U.r = A,
                        U.g = R,
                        U.b = B,
                        U.a = M,
                        U = U.next;
                    for (m = 1; m < $; m++)
                        _ = y + ((F < m ? F : m) << 2),
                        w += (U.r = A = N[_]) * (D = $ - m),
                        x += (U.g = R = N[_ + 1]) * D,
                        C += (U.b = B = N[_ + 2]) * D,
                        T += (U.a = M = N[_ + 3]) * D,
                        P += A,
                        S += R,
                        j += B,
                        O += M,
                        U = U.next;
                    for (q = G,
                    K = W,
                    f = 0; f < i; f++)
                        N[y] = w * X >> Y,
                        N[y + 1] = x * X >> Y,
                        N[y + 2] = C * X >> Y,
                        N[y + 3] = T * X >> Y,
                        w -= k,
                        x -= I,
                        C -= L,
                        T -= E,
                        k -= q.r,
                        I -= q.g,
                        L -= q.b,
                        E -= q.a,
                        _ = b + ((_ = f + a + 1) < F ? _ : F) << 2,
                        P += q.r = N[_],
                        S += q.g = N[_ + 1],
                        j += q.b = N[_ + 2],
                        O += q.a = N[_ + 3],
                        w += P,
                        x += S,
                        C += j,
                        T += O,
                        q = q.next,
                        k += A = K.r,
                        I += R = K.g,
                        L += B = K.b,
                        E += M = K.a,
                        P -= A,
                        S -= R,
                        j -= B,
                        O -= M,
                        K = K.next,
                        y += 4;
                    b += i
                }
                for (f = 0; f < i; f++) {
                    for (S = j = O = P = x = C = T = w = 0,
                    y = f << 2,
                    k = $ * (A = N[y]),
                    I = $ * (R = N[y + 1]),
                    L = $ * (B = N[y + 2]),
                    E = $ * (M = N[y + 3]),
                    w += V * A,
                    x += V * R,
                    C += V * B,
                    T += V * M,
                    U = G,
                    m = 0; m < $; m++)
                        U.r = A,
                        U.g = R,
                        U.b = B,
                        U.a = M,
                        U = U.next;
                    for (v = i,
                    m = 1; m <= a; m++)
                        y = v + f << 2,
                        w += (U.r = A = N[y]) * (D = $ - m),
                        x += (U.g = R = N[y + 1]) * D,
                        C += (U.b = B = N[y + 2]) * D,
                        T += (U.a = M = N[y + 3]) * D,
                        P += A,
                        S += R,
                        j += B,
                        O += M,
                        U = U.next,
                        m < z && (v += i);
                    for (y = f,
                    q = G,
                    K = W,
                    g = 0; g < r; g++)
                        _ = y << 2,
                        N[_] = w * X >> Y,
                        N[_ + 1] = x * X >> Y,
                        N[_ + 2] = C * X >> Y,
                        N[_ + 3] = T * X >> Y,
                        w -= k,
                        x -= I,
                        C -= L,
                        T -= E,
                        k -= q.r,
                        I -= q.g,
                        L -= q.b,
                        E -= q.a,
                        _ = f + ((_ = g + $) < z ? _ : z) * i << 2,
                        w += P += q.r = N[_],
                        x += S += q.g = N[_ + 1],
                        C += j += q.b = N[_ + 2],
                        T += O += q.a = N[_ + 3],
                        q = q.next,
                        k += A = K.r,
                        I += R = K.g,
                        L += B = K.b,
                        E += M = K.a,
                        P -= A,
                        S -= R,
                        j -= B,
                        O -= M,
                        K = K.next,
                        y += i
                }
                s(l),
                p.putImageData(l, e, n)
            }
        }
        function c(t, e, n, i, r, o) {
            if (!(isNaN(o) || o < 1)) {
                o |= 0;
                var s, a = document.getElementById(t), l = a.getContext("2d");
                try {
                    try {
                        s = l.getImageData(e, n, i, r)
                    } catch (t) {
                        try {
                            netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),
                            s = l.getImageData(e, n, i, r)
                        } catch (t) {
                            throw alert("Cannot access local image"),
                            new Error("unable to access local image data: " + t)
                        }
                    }
                } catch (t) {
                    throw alert("Cannot access image"),
                    new Error("unable to access image data: " + t)
                }
                var c, p, f, g, m, _, v, y, b, w, x, C, T, k, I, L, E, P, S, j, O = s.data, A = o + o + 1, R = i - 1, B = r - 1, M = o + 1, D = M * (M + 1) / 2, N = new h, H = N;
                for (f = 1; f < A; f++)
                    if (H = H.next = new h,
                    f == M)
                        var F = H;
                H.next = N;
                var z = null
                  , $ = null;
                v = _ = 0;
                var V = u[o]
                  , G = d[o];
                for (p = 0; p < r; p++) {
                    for (k = I = L = y = b = w = 0,
                    x = M * (E = O[_]),
                    C = M * (P = O[_ + 1]),
                    T = M * (S = O[_ + 2]),
                    y += D * E,
                    b += D * P,
                    w += D * S,
                    H = N,
                    f = 0; f < M; f++)
                        H.r = E,
                        H.g = P,
                        H.b = S,
                        H = H.next;
                    for (f = 1; f < M; f++)
                        g = _ + ((R < f ? R : f) << 2),
                        y += (H.r = E = O[g]) * (j = M - f),
                        b += (H.g = P = O[g + 1]) * j,
                        w += (H.b = S = O[g + 2]) * j,
                        k += E,
                        I += P,
                        L += S,
                        H = H.next;
                    for (z = N,
                    $ = F,
                    c = 0; c < i; c++)
                        O[_] = y * V >> G,
                        O[_ + 1] = b * V >> G,
                        O[_ + 2] = w * V >> G,
                        y -= x,
                        b -= C,
                        w -= T,
                        x -= z.r,
                        C -= z.g,
                        T -= z.b,
                        g = v + ((g = c + o + 1) < R ? g : R) << 2,
                        k += z.r = O[g],
                        I += z.g = O[g + 1],
                        L += z.b = O[g + 2],
                        y += k,
                        b += I,
                        w += L,
                        z = z.next,
                        x += E = $.r,
                        C += P = $.g,
                        T += S = $.b,
                        k -= E,
                        I -= P,
                        L -= S,
                        $ = $.next,
                        _ += 4;
                    v += i
                }
                for (c = 0; c < i; c++) {
                    for (I = L = k = b = w = y = 0,
                    _ = c << 2,
                    x = M * (E = O[_]),
                    C = M * (P = O[_ + 1]),
                    T = M * (S = O[_ + 2]),
                    y += D * E,
                    b += D * P,
                    w += D * S,
                    H = N,
                    f = 0; f < M; f++)
                        H.r = E,
                        H.g = P,
                        H.b = S,
                        H = H.next;
                    for (m = i,
                    f = 1; f <= o; f++)
                        _ = m + c << 2,
                        y += (H.r = E = O[_]) * (j = M - f),
                        b += (H.g = P = O[_ + 1]) * j,
                        w += (H.b = S = O[_ + 2]) * j,
                        k += E,
                        I += P,
                        L += S,
                        H = H.next,
                        f < B && (m += i);
                    for (_ = c,
                    z = N,
                    $ = F,
                    p = 0; p < r; p++)
                        g = _ << 2,
                        O[g] = y * V >> G,
                        O[g + 1] = b * V >> G,
                        O[g + 2] = w * V >> G,
                        y -= x,
                        b -= C,
                        w -= T,
                        x -= z.r,
                        C -= z.g,
                        T -= z.b,
                        g = c + ((g = p + M) < B ? g : B) * i << 2,
                        y += k += z.r = O[g],
                        b += I += z.g = O[g + 1],
                        w += L += z.b = O[g + 2],
                        z = z.next,
                        x += E = $.r,
                        C += P = $.g,
                        T += S = $.b,
                        k -= E,
                        I -= P,
                        L -= S,
                        $ = $.next,
                        _ += i
                }
                l.putImageData(s, e, n)
            }
        }
        function h() {
            this.r = 0,
            this.g = 0,
            this.b = 0,
            this.a = 0,
            this.next = null
        }
        var u = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259]
          , d = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24]
          , p = {
            image: a,
            canvasRGBA: l,
            canvasRGB: c
        };
        void 0 !== (i = function() {
            return p
        }
        .call(e, n, e, t)) && (t.exports = i),
        r.stackBlur = p
    }("undefined" != typeof window ? window : this)
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = function() {
        function t(t, e, n) {
            void 0 === t && (t = "000000"),
            void 0 === e && (e = 1),
            void 0 === n && (n = 0),
            this.color = t,
            this.alpha = e,
            this.ratio = n
        }
        return Object.defineProperty(t.prototype, "colorHex", {
            get: function() {
                return "#" + this.color
            },
            enumerable: !0,
            configurable: !0
        }),
        t
    }();
    e.GradientEntry = i
}
, function(t, e, n) {
    var i, r, o;
    !function(s) {
        r = [n(0)],
        i = s,
        void 0 !== (o = "function" == typeof i ? i.apply(e, r) : i) && (t.exports = o)
    }(function(t) {
        return t.ui = t.ui || {},
        t.ui.version = "1.12.1"
    })
}
, function(t, e) {
    function n(t) {
        var e = typeof t;
        return !!t && ("object" == e || "function" == e)
    }
    t.exports = n
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = function() {
        function t() {
            this.openCallback = null,
            this.bindHandlers()
        }
        return t.prototype.bindHandlers = function() {
            this.openHandler = this.openHandler.bind(this)
        }
        ,
        t.prototype.openHandler = function(t) {
            null !== this.openCallback && this.openCallback(this)
        }
        ,
        t.prototype.hide = function() {}
        ,
        t
    }();
    e.LogasterPopup = i
}
, function(t, e, n) {
    "use strict";
    function i(t) {
        if (!(this instanceof i))
            return new i(t);
        this.options = l.assign({
            level: f,
            method: m,
            chunkSize: 16384,
            windowBits: 15,
            memLevel: 8,
            strategy: g,
            to: ""
        }, t || {});
        var e = this.options;
        e.raw && e.windowBits > 0 ? e.windowBits = -e.windowBits : e.gzip && e.windowBits > 0 && e.windowBits < 16 && (e.windowBits += 16),
        this.err = 0,
        this.msg = "",
        this.ended = !1,
        this.chunks = [],
        this.strm = new u,
        this.strm.avail_out = 0;
        var n = a.deflateInit2(this.strm, e.level, e.method, e.windowBits, e.memLevel, e.strategy);
        if (n !== p)
            throw new Error(h[n]);
        if (e.header && a.deflateSetHeader(this.strm, e.header),
        e.dictionary) {
            var r;
            if (r = "string" == typeof e.dictionary ? c.string2buf(e.dictionary) : "[object ArrayBuffer]" === d.call(e.dictionary) ? new Uint8Array(e.dictionary) : e.dictionary,
            (n = a.deflateSetDictionary(this.strm, r)) !== p)
                throw new Error(h[n]);
            this._dict_set = !0
        }
    }
    function r(t, e) {
        var n = new i(e);
        if (n.push(t, !0),
        n.err)
            throw n.msg || h[n.err];
        return n.result
    }
    function o(t, e) {
        return e = e || {},
        e.raw = !0,
        r(t, e)
    }
    function s(t, e) {
        return e = e || {},
        e.gzip = !0,
        r(t, e)
    }
    var a = n(69)
      , l = n(9)
      , c = n(40)
      , h = n(29)
      , u = n(41)
      , d = Object.prototype.toString
      , p = 0
      , f = -1
      , g = 0
      , m = 8;
    i.prototype.push = function(t, e) {
        var n, i, r = this.strm, o = this.options.chunkSize;
        if (this.ended)
            return !1;
        i = e === ~~e ? e : !0 === e ? 4 : 0,
        "string" == typeof t ? r.input = c.string2buf(t) : "[object ArrayBuffer]" === d.call(t) ? r.input = new Uint8Array(t) : r.input = t,
        r.next_in = 0,
        r.avail_in = r.input.length;
        do {
            if (0 === r.avail_out && (r.output = new l.Buf8(o),
            r.next_out = 0,
            r.avail_out = o),
            1 !== (n = a.deflate(r, i)) && n !== p)
                return this.onEnd(n),
                this.ended = !0,
                !1;
            0 !== r.avail_out && (0 !== r.avail_in || 4 !== i && 2 !== i) || ("string" === this.options.to ? this.onData(c.buf2binstring(l.shrinkBuf(r.output, r.next_out))) : this.onData(l.shrinkBuf(r.output, r.next_out)))
        } while ((r.avail_in > 0 || 0 === r.avail_out) && 1 !== n);return 4 === i ? (n = a.deflateEnd(this.strm),
        this.onEnd(n),
        this.ended = !0,
        n === p) : 2 !== i || (this.onEnd(p),
        r.avail_out = 0,
        !0)
    }
    ,
    i.prototype.onData = function(t) {
        this.chunks.push(t)
    }
    ,
    i.prototype.onEnd = function(t) {
        t === p && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = l.flattenChunks(this.chunks)),
        this.chunks = [],
        this.err = t,
        this.msg = this.strm.msg
    }
    ,
    e.Deflate = i,
    e.deflate = r,
    e.deflateRaw = o,
    e.gzip = s
}
, function(t, e, n) {
    "use strict";
    function i(t, e) {
        return t.msg = R[e],
        e
    }
    function r(t) {
        return (t << 1) - (t > 4 ? 9 : 0)
    }
    function o(t) {
        for (var e = t.length; --e >= 0; )
            t[e] = 0
    }
    function s(t) {
        var e = t.state
          , n = e.pending;
        n > t.avail_out && (n = t.avail_out),
        0 !== n && (S.arraySet(t.output, e.pending_buf, e.pending_out, n, t.next_out),
        t.next_out += n,
        e.pending_out += n,
        t.total_out += n,
        t.avail_out -= n,
        e.pending -= n,
        0 === e.pending && (e.pending_out = 0))
    }
    function a(t, e) {
        j._tr_flush_block(t, t.block_start >= 0 ? t.block_start : -1, t.strstart - t.block_start, e),
        t.block_start = t.strstart,
        s(t.strm)
    }
    function l(t, e) {
        t.pending_buf[t.pending++] = e
    }
    function c(t, e) {
        t.pending_buf[t.pending++] = e >>> 8 & 255,
        t.pending_buf[t.pending++] = 255 & e
    }
    function h(t, e, n, i) {
        var r = t.avail_in;
        return r > i && (r = i),
        0 === r ? 0 : (t.avail_in -= r,
        S.arraySet(e, t.input, t.next_in, r, n),
        1 === t.state.wrap ? t.adler = O(t.adler, e, r, n) : 2 === t.state.wrap && (t.adler = A(t.adler, e, r, n)),
        t.next_in += r,
        t.total_in += r,
        r)
    }
    function u(t, e) {
        var n, i, r = t.max_chain_length, o = t.strstart, s = t.prev_length, a = t.nice_match, l = t.strstart > t.w_size - ct ? t.strstart - (t.w_size - ct) : 0, c = t.window, h = t.w_mask, u = t.prev, d = t.strstart + lt, p = c[o + s - 1], f = c[o + s];
        t.prev_length >= t.good_match && (r >>= 2),
        a > t.lookahead && (a = t.lookahead);
        do {
            if (n = e,
            c[n + s] === f && c[n + s - 1] === p && c[n] === c[o] && c[++n] === c[o + 1]) {
                o += 2,
                n++;
                do {} while (c[++o] === c[++n] && c[++o] === c[++n] && c[++o] === c[++n] && c[++o] === c[++n] && c[++o] === c[++n] && c[++o] === c[++n] && c[++o] === c[++n] && c[++o] === c[++n] && o < d);if (i = lt - (d - o),
                o = d - lt,
                i > s) {
                    if (t.match_start = e,
                    s = i,
                    i >= a)
                        break;
                    p = c[o + s - 1],
                    f = c[o + s]
                }
            }
        } while ((e = u[e & h]) > l && 0 != --r);return s <= t.lookahead ? s : t.lookahead
    }
    function d(t) {
        var e, n, i, r, o, s = t.w_size;
        do {
            if (r = t.window_size - t.lookahead - t.strstart,
            t.strstart >= s + (s - ct)) {
                S.arraySet(t.window, t.window, s, s, 0),
                t.match_start -= s,
                t.strstart -= s,
                t.block_start -= s,
                n = t.hash_size,
                e = n;
                do {
                    i = t.head[--e],
                    t.head[e] = i >= s ? i - s : 0
                } while (--n);n = s,
                e = n;
                do {
                    i = t.prev[--e],
                    t.prev[e] = i >= s ? i - s : 0
                } while (--n);r += s
            }
            if (0 === t.strm.avail_in)
                break;
            if (n = h(t.strm, t.window, t.strstart + t.lookahead, r),
            t.lookahead += n,
            t.lookahead + t.insert >= at)
                for (o = t.strstart - t.insert,
                t.ins_h = t.window[o],
                t.ins_h = (t.ins_h << t.hash_shift ^ t.window[o + 1]) & t.hash_mask; t.insert && (t.ins_h = (t.ins_h << t.hash_shift ^ t.window[o + at - 1]) & t.hash_mask,
                t.prev[o & t.w_mask] = t.head[t.ins_h],
                t.head[t.ins_h] = o,
                o++,
                t.insert--,
                !(t.lookahead + t.insert < at)); )
                    ;
        } while (t.lookahead < ct && 0 !== t.strm.avail_in)
    }
    function p(t, e) {
        var n = 65535;
        for (n > t.pending_buf_size - 5 && (n = t.pending_buf_size - 5); ; ) {
            if (t.lookahead <= 1) {
                if (d(t),
                0 === t.lookahead && e === B)
                    return vt;
                if (0 === t.lookahead)
                    break
            }
            t.strstart += t.lookahead,
            t.lookahead = 0;
            var i = t.block_start + n;
            if ((0 === t.strstart || t.strstart >= i) && (t.lookahead = t.strstart - i,
            t.strstart = i,
            a(t, !1),
            0 === t.strm.avail_out))
                return vt;
            if (t.strstart - t.block_start >= t.w_size - ct && (a(t, !1),
            0 === t.strm.avail_out))
                return vt
        }
        return t.insert = 0,
        e === N ? (a(t, !0),
        0 === t.strm.avail_out ? bt : wt) : (t.strstart > t.block_start && (a(t, !1),
        t.strm.avail_out),
        vt)
    }
    function f(t, e) {
        for (var n, i; ; ) {
            if (t.lookahead < ct) {
                if (d(t),
                t.lookahead < ct && e === B)
                    return vt;
                if (0 === t.lookahead)
                    break
            }
            if (n = 0,
            t.lookahead >= at && (t.ins_h = (t.ins_h << t.hash_shift ^ t.window[t.strstart + at - 1]) & t.hash_mask,
            n = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h],
            t.head[t.ins_h] = t.strstart),
            0 !== n && t.strstart - n <= t.w_size - ct && (t.match_length = u(t, n)),
            t.match_length >= at)
                if (i = j._tr_tally(t, t.strstart - t.match_start, t.match_length - at),
                t.lookahead -= t.match_length,
                t.match_length <= t.max_lazy_match && t.lookahead >= at) {
                    t.match_length--;
                    do {
                        t.strstart++,
                        t.ins_h = (t.ins_h << t.hash_shift ^ t.window[t.strstart + at - 1]) & t.hash_mask,
                        n = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h],
                        t.head[t.ins_h] = t.strstart
                    } while (0 != --t.match_length);t.strstart++
                } else
                    t.strstart += t.match_length,
                    t.match_length = 0,
                    t.ins_h = t.window[t.strstart],
                    t.ins_h = (t.ins_h << t.hash_shift ^ t.window[t.strstart + 1]) & t.hash_mask;
            else
                i = j._tr_tally(t, 0, t.window[t.strstart]),
                t.lookahead--,
                t.strstart++;
            if (i && (a(t, !1),
            0 === t.strm.avail_out))
                return vt
        }
        return t.insert = t.strstart < at - 1 ? t.strstart : at - 1,
        e === N ? (a(t, !0),
        0 === t.strm.avail_out ? bt : wt) : t.last_lit && (a(t, !1),
        0 === t.strm.avail_out) ? vt : yt
    }
    function g(t, e) {
        for (var n, i, r; ; ) {
            if (t.lookahead < ct) {
                if (d(t),
                t.lookahead < ct && e === B)
                    return vt;
                if (0 === t.lookahead)
                    break
            }
            if (n = 0,
            t.lookahead >= at && (t.ins_h = (t.ins_h << t.hash_shift ^ t.window[t.strstart + at - 1]) & t.hash_mask,
            n = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h],
            t.head[t.ins_h] = t.strstart),
            t.prev_length = t.match_length,
            t.prev_match = t.match_start,
            t.match_length = at - 1,
            0 !== n && t.prev_length < t.max_lazy_match && t.strstart - n <= t.w_size - ct && (t.match_length = u(t, n),
            t.match_length <= 5 && (t.strategy === W || t.match_length === at && t.strstart - t.match_start > 4096) && (t.match_length = at - 1)),
            t.prev_length >= at && t.match_length <= t.prev_length) {
                r = t.strstart + t.lookahead - at,
                i = j._tr_tally(t, t.strstart - 1 - t.prev_match, t.prev_length - at),
                t.lookahead -= t.prev_length - 1,
                t.prev_length -= 2;
                do {
                    ++t.strstart <= r && (t.ins_h = (t.ins_h << t.hash_shift ^ t.window[t.strstart + at - 1]) & t.hash_mask,
                    n = t.prev[t.strstart & t.w_mask] = t.head[t.ins_h],
                    t.head[t.ins_h] = t.strstart)
                } while (0 != --t.prev_length);if (t.match_available = 0,
                t.match_length = at - 1,
                t.strstart++,
                i && (a(t, !1),
                0 === t.strm.avail_out))
                    return vt
            } else if (t.match_available) {
                if (i = j._tr_tally(t, 0, t.window[t.strstart - 1]),
                i && a(t, !1),
                t.strstart++,
                t.lookahead--,
                0 === t.strm.avail_out)
                    return vt
            } else
                t.match_available = 1,
                t.strstart++,
                t.lookahead--
        }
        return t.match_available && (i = j._tr_tally(t, 0, t.window[t.strstart - 1]),
        t.match_available = 0),
        t.insert = t.strstart < at - 1 ? t.strstart : at - 1,
        e === N ? (a(t, !0),
        0 === t.strm.avail_out ? bt : wt) : t.last_lit && (a(t, !1),
        0 === t.strm.avail_out) ? vt : yt
    }
    function m(t, e) {
        for (var n, i, r, o, s = t.window; ; ) {
            if (t.lookahead <= lt) {
                if (d(t),
                t.lookahead <= lt && e === B)
                    return vt;
                if (0 === t.lookahead)
                    break
            }
            if (t.match_length = 0,
            t.lookahead >= at && t.strstart > 0 && (r = t.strstart - 1,
            (i = s[r]) === s[++r] && i === s[++r] && i === s[++r])) {
                o = t.strstart + lt;
                do {} while (i === s[++r] && i === s[++r] && i === s[++r] && i === s[++r] && i === s[++r] && i === s[++r] && i === s[++r] && i === s[++r] && r < o);t.match_length = lt - (o - r),
                t.match_length > t.lookahead && (t.match_length = t.lookahead)
            }
            if (t.match_length >= at ? (n = j._tr_tally(t, 1, t.match_length - at),
            t.lookahead -= t.match_length,
            t.strstart += t.match_length,
            t.match_length = 0) : (n = j._tr_tally(t, 0, t.window[t.strstart]),
            t.lookahead--,
            t.strstart++),
            n && (a(t, !1),
            0 === t.strm.avail_out))
                return vt
        }
        return t.insert = 0,
        e === N ? (a(t, !0),
        0 === t.strm.avail_out ? bt : wt) : t.last_lit && (a(t, !1),
        0 === t.strm.avail_out) ? vt : yt
    }
    function _(t, e) {
        for (var n; ; ) {
            if (0 === t.lookahead && (d(t),
            0 === t.lookahead)) {
                if (e === B)
                    return vt;
                break
            }
            if (t.match_length = 0,
            n = j._tr_tally(t, 0, t.window[t.strstart]),
            t.lookahead--,
            t.strstart++,
            n && (a(t, !1),
            0 === t.strm.avail_out))
                return vt
        }
        return t.insert = 0,
        e === N ? (a(t, !0),
        0 === t.strm.avail_out ? bt : wt) : t.last_lit && (a(t, !1),
        0 === t.strm.avail_out) ? vt : yt
    }
    function v(t, e, n, i, r) {
        this.good_length = t,
        this.max_lazy = e,
        this.nice_length = n,
        this.max_chain = i,
        this.func = r
    }
    function y(t) {
        t.window_size = 2 * t.w_size,
        o(t.head),
        t.max_lazy_match = P[t.level].max_lazy,
        t.good_match = P[t.level].good_length,
        t.nice_match = P[t.level].nice_length,
        t.max_chain_length = P[t.level].max_chain,
        t.strstart = 0,
        t.block_start = 0,
        t.lookahead = 0,
        t.insert = 0,
        t.match_length = t.prev_length = at - 1,
        t.match_available = 0,
        t.ins_h = 0
    }
    function b() {
        this.strm = null,
        this.status = 0,
        this.pending_buf = null,
        this.pending_buf_size = 0,
        this.pending_out = 0,
        this.pending = 0,
        this.wrap = 0,
        this.gzhead = null,
        this.gzindex = 0,
        this.method = J,
        this.last_flush = -1,
        this.w_size = 0,
        this.w_bits = 0,
        this.w_mask = 0,
        this.window = null,
        this.window_size = 0,
        this.prev = null,
        this.head = null,
        this.ins_h = 0,
        this.hash_size = 0,
        this.hash_bits = 0,
        this.hash_mask = 0,
        this.hash_shift = 0,
        this.block_start = 0,
        this.match_length = 0,
        this.prev_match = 0,
        this.match_available = 0,
        this.strstart = 0,
        this.match_start = 0,
        this.lookahead = 0,
        this.prev_length = 0,
        this.max_chain_length = 0,
        this.max_lazy_match = 0,
        this.level = 0,
        this.strategy = 0,
        this.good_match = 0,
        this.nice_match = 0,
        this.dyn_ltree = new S.Buf16(2 * ot),
        this.dyn_dtree = new S.Buf16(2 * (2 * it + 1)),
        this.bl_tree = new S.Buf16(2 * (2 * rt + 1)),
        o(this.dyn_ltree),
        o(this.dyn_dtree),
        o(this.bl_tree),
        this.l_desc = null,
        this.d_desc = null,
        this.bl_desc = null,
        this.bl_count = new S.Buf16(st + 1),
        this.heap = new S.Buf16(2 * nt + 1),
        o(this.heap),
        this.heap_len = 0,
        this.heap_max = 0,
        this.depth = new S.Buf16(2 * nt + 1),
        o(this.depth),
        this.l_buf = 0,
        this.lit_bufsize = 0,
        this.last_lit = 0,
        this.d_buf = 0,
        this.opt_len = 0,
        this.static_len = 0,
        this.matches = 0,
        this.insert = 0,
        this.bi_buf = 0,
        this.bi_valid = 0
    }
    function w(t) {
        var e;
        return t && t.state ? (t.total_in = t.total_out = 0,
        t.data_type = Z,
        e = t.state,
        e.pending = 0,
        e.pending_out = 0,
        e.wrap < 0 && (e.wrap = -e.wrap),
        e.status = e.wrap ? ut : mt,
        t.adler = 2 === e.wrap ? 0 : 1,
        e.last_flush = B,
        j._tr_init(e),
        F) : i(t, $)
    }
    function x(t) {
        var e = w(t);
        return e === F && y(t.state),
        e
    }
    function C(t, e) {
        return t && t.state ? 2 !== t.state.wrap ? $ : (t.state.gzhead = e,
        F) : $
    }
    function T(t, e, n, r, o, s) {
        if (!t)
            return $;
        var a = 1;
        if (e === U && (e = 6),
        r < 0 ? (a = 0,
        r = -r) : r > 15 && (a = 2,
        r -= 16),
        o < 1 || o > Q || n !== J || r < 8 || r > 15 || e < 0 || e > 9 || s < 0 || s > X)
            return i(t, $);
        8 === r && (r = 9);
        var l = new b;
        return t.state = l,
        l.strm = t,
        l.wrap = a,
        l.gzhead = null,
        l.w_bits = r,
        l.w_size = 1 << l.w_bits,
        l.w_mask = l.w_size - 1,
        l.hash_bits = o + 7,
        l.hash_size = 1 << l.hash_bits,
        l.hash_mask = l.hash_size - 1,
        l.hash_shift = ~~((l.hash_bits + at - 1) / at),
        l.window = new S.Buf8(2 * l.w_size),
        l.head = new S.Buf16(l.hash_size),
        l.prev = new S.Buf16(l.w_size),
        l.lit_bufsize = 1 << o + 6,
        l.pending_buf_size = 4 * l.lit_bufsize,
        l.pending_buf = new S.Buf8(l.pending_buf_size),
        l.d_buf = 1 * l.lit_bufsize,
        l.l_buf = 3 * l.lit_bufsize,
        l.level = e,
        l.strategy = s,
        l.method = n,
        x(t)
    }
    function k(t, e) {
        return T(t, e, J, tt, et, Y)
    }
    function I(t, e) {
        var n, a, h, u;
        if (!t || !t.state || e > H || e < 0)
            return t ? i(t, $) : $;
        if (a = t.state,
        !t.output || !t.input && 0 !== t.avail_in || a.status === _t && e !== N)
            return i(t, 0 === t.avail_out ? G : $);
        if (a.strm = t,
        n = a.last_flush,
        a.last_flush = e,
        a.status === ut)
            if (2 === a.wrap)
                t.adler = 0,
                l(a, 31),
                l(a, 139),
                l(a, 8),
                a.gzhead ? (l(a, (a.gzhead.text ? 1 : 0) + (a.gzhead.hcrc ? 2 : 0) + (a.gzhead.extra ? 4 : 0) + (a.gzhead.name ? 8 : 0) + (a.gzhead.comment ? 16 : 0)),
                l(a, 255 & a.gzhead.time),
                l(a, a.gzhead.time >> 8 & 255),
                l(a, a.gzhead.time >> 16 & 255),
                l(a, a.gzhead.time >> 24 & 255),
                l(a, 9 === a.level ? 2 : a.strategy >= q || a.level < 2 ? 4 : 0),
                l(a, 255 & a.gzhead.os),
                a.gzhead.extra && a.gzhead.extra.length && (l(a, 255 & a.gzhead.extra.length),
                l(a, a.gzhead.extra.length >> 8 & 255)),
                a.gzhead.hcrc && (t.adler = A(t.adler, a.pending_buf, a.pending, 0)),
                a.gzindex = 0,
                a.status = dt) : (l(a, 0),
                l(a, 0),
                l(a, 0),
                l(a, 0),
                l(a, 0),
                l(a, 9 === a.level ? 2 : a.strategy >= q || a.level < 2 ? 4 : 0),
                l(a, xt),
                a.status = mt);
            else {
                var d = J + (a.w_bits - 8 << 4) << 8
                  , p = -1;
                p = a.strategy >= q || a.level < 2 ? 0 : a.level < 6 ? 1 : 6 === a.level ? 2 : 3,
                d |= p << 6,
                0 !== a.strstart && (d |= ht),
                d += 31 - d % 31,
                a.status = mt,
                c(a, d),
                0 !== a.strstart && (c(a, t.adler >>> 16),
                c(a, 65535 & t.adler)),
                t.adler = 1
            }
        if (a.status === dt)
            if (a.gzhead.extra) {
                for (h = a.pending; a.gzindex < (65535 & a.gzhead.extra.length) && (a.pending !== a.pending_buf_size || (a.gzhead.hcrc && a.pending > h && (t.adler = A(t.adler, a.pending_buf, a.pending - h, h)),
                s(t),
                h = a.pending,
                a.pending !== a.pending_buf_size)); )
                    l(a, 255 & a.gzhead.extra[a.gzindex]),
                    a.gzindex++;
                a.gzhead.hcrc && a.pending > h && (t.adler = A(t.adler, a.pending_buf, a.pending - h, h)),
                a.gzindex === a.gzhead.extra.length && (a.gzindex = 0,
                a.status = pt)
            } else
                a.status = pt;
        if (a.status === pt)
            if (a.gzhead.name) {
                h = a.pending;
                do {
                    if (a.pending === a.pending_buf_size && (a.gzhead.hcrc && a.pending > h && (t.adler = A(t.adler, a.pending_buf, a.pending - h, h)),
                    s(t),
                    h = a.pending,
                    a.pending === a.pending_buf_size)) {
                        u = 1;
                        break
                    }
                    u = a.gzindex < a.gzhead.name.length ? 255 & a.gzhead.name.charCodeAt(a.gzindex++) : 0,
                    l(a, u)
                } while (0 !== u);a.gzhead.hcrc && a.pending > h && (t.adler = A(t.adler, a.pending_buf, a.pending - h, h)),
                0 === u && (a.gzindex = 0,
                a.status = ft)
            } else
                a.status = ft;
        if (a.status === ft)
            if (a.gzhead.comment) {
                h = a.pending;
                do {
                    if (a.pending === a.pending_buf_size && (a.gzhead.hcrc && a.pending > h && (t.adler = A(t.adler, a.pending_buf, a.pending - h, h)),
                    s(t),
                    h = a.pending,
                    a.pending === a.pending_buf_size)) {
                        u = 1;
                        break
                    }
                    u = a.gzindex < a.gzhead.comment.length ? 255 & a.gzhead.comment.charCodeAt(a.gzindex++) : 0,
                    l(a, u)
                } while (0 !== u);a.gzhead.hcrc && a.pending > h && (t.adler = A(t.adler, a.pending_buf, a.pending - h, h)),
                0 === u && (a.status = gt)
            } else
                a.status = gt;
        if (a.status === gt && (a.gzhead.hcrc ? (a.pending + 2 > a.pending_buf_size && s(t),
        a.pending + 2 <= a.pending_buf_size && (l(a, 255 & t.adler),
        l(a, t.adler >> 8 & 255),
        t.adler = 0,
        a.status = mt)) : a.status = mt),
        0 !== a.pending) {
            if (s(t),
            0 === t.avail_out)
                return a.last_flush = -1,
                F
        } else if (0 === t.avail_in && r(e) <= r(n) && e !== N)
            return i(t, G);
        if (a.status === _t && 0 !== t.avail_in)
            return i(t, G);
        if (0 !== t.avail_in || 0 !== a.lookahead || e !== B && a.status !== _t) {
            var f = a.strategy === q ? _(a, e) : a.strategy === K ? m(a, e) : P[a.level].func(a, e);
            if (f !== bt && f !== wt || (a.status = _t),
            f === vt || f === bt)
                return 0 === t.avail_out && (a.last_flush = -1),
                F;
            if (f === yt && (e === M ? j._tr_align(a) : e !== H && (j._tr_stored_block(a, 0, 0, !1),
            e === D && (o(a.head),
            0 === a.lookahead && (a.strstart = 0,
            a.block_start = 0,
            a.insert = 0))),
            s(t),
            0 === t.avail_out))
                return a.last_flush = -1,
                F
        }
        return e !== N ? F : a.wrap <= 0 ? z : (2 === a.wrap ? (l(a, 255 & t.adler),
        l(a, t.adler >> 8 & 255),
        l(a, t.adler >> 16 & 255),
        l(a, t.adler >> 24 & 255),
        l(a, 255 & t.total_in),
        l(a, t.total_in >> 8 & 255),
        l(a, t.total_in >> 16 & 255),
        l(a, t.total_in >> 24 & 255)) : (c(a, t.adler >>> 16),
        c(a, 65535 & t.adler)),
        s(t),
        a.wrap > 0 && (a.wrap = -a.wrap),
        0 !== a.pending ? F : z)
    }
    function L(t) {
        var e;
        return t && t.state ? (e = t.state.status) !== ut && e !== dt && e !== pt && e !== ft && e !== gt && e !== mt && e !== _t ? i(t, $) : (t.state = null,
        e === mt ? i(t, V) : F) : $
    }
    function E(t, e) {
        var n, i, r, s, a, l, c, h, u = e.length;
        if (!t || !t.state)
            return $;
        if (n = t.state,
        2 === (s = n.wrap) || 1 === s && n.status !== ut || n.lookahead)
            return $;
        for (1 === s && (t.adler = O(t.adler, e, u, 0)),
        n.wrap = 0,
        u >= n.w_size && (0 === s && (o(n.head),
        n.strstart = 0,
        n.block_start = 0,
        n.insert = 0),
        h = new S.Buf8(n.w_size),
        S.arraySet(h, e, u - n.w_size, n.w_size, 0),
        e = h,
        u = n.w_size),
        a = t.avail_in,
        l = t.next_in,
        c = t.input,
        t.avail_in = u,
        t.next_in = 0,
        t.input = e,
        d(n); n.lookahead >= at; ) {
            i = n.strstart,
            r = n.lookahead - (at - 1);
            do {
                n.ins_h = (n.ins_h << n.hash_shift ^ n.window[i + at - 1]) & n.hash_mask,
                n.prev[i & n.w_mask] = n.head[n.ins_h],
                n.head[n.ins_h] = i,
                i++
            } while (--r);n.strstart = i,
            n.lookahead = at - 1,
            d(n)
        }
        return n.strstart += n.lookahead,
        n.block_start = n.strstart,
        n.insert = n.lookahead,
        n.lookahead = 0,
        n.match_length = n.prev_length = at - 1,
        n.match_available = 0,
        t.next_in = l,
        t.input = c,
        t.avail_in = a,
        n.wrap = s,
        F
    }
    var P, S = n(9), j = n(70), O = n(38), A = n(39), R = n(29), B = 0, M = 1, D = 3, N = 4, H = 5, F = 0, z = 1, $ = -2, V = -3, G = -5, U = -1, W = 1, q = 2, K = 3, X = 4, Y = 0, Z = 2, J = 8, Q = 9, tt = 15, et = 8, nt = 286, it = 30, rt = 19, ot = 2 * nt + 1, st = 15, at = 3, lt = 258, ct = lt + at + 1, ht = 32, ut = 42, dt = 69, pt = 73, ft = 91, gt = 103, mt = 113, _t = 666, vt = 1, yt = 2, bt = 3, wt = 4, xt = 3;
    P = [new v(0,0,0,0,p), new v(4,4,8,4,f), new v(4,5,16,8,f), new v(4,6,32,32,f), new v(4,4,16,16,g), new v(8,16,32,32,g), new v(8,16,128,128,g), new v(8,32,128,256,g), new v(32,128,258,1024,g), new v(32,258,258,4096,g)],
    e.deflateInit = k,
    e.deflateInit2 = T,
    e.deflateReset = x,
    e.deflateResetKeep = w,
    e.deflateSetHeader = C,
    e.deflate = I,
    e.deflateEnd = L,
    e.deflateSetDictionary = E,
    e.deflateInfo = "pako deflate (from Nodeca project)"
}
, function(t, e, n) {
    "use strict";
    function i(t) {
        for (var e = t.length; --e >= 0; )
            t[e] = 0
    }
    function r(t, e, n, i, r) {
        this.static_tree = t,
        this.extra_bits = e,
        this.extra_base = n,
        this.elems = i,
        this.max_length = r,
        this.has_stree = t && t.length
    }
    function o(t, e) {
        this.dyn_tree = t,
        this.max_code = 0,
        this.stat_desc = e
    }
    function s(t) {
        return t < 256 ? ot[t] : ot[256 + (t >>> 7)]
    }
    function a(t, e) {
        t.pending_buf[t.pending++] = 255 & e,
        t.pending_buf[t.pending++] = e >>> 8 & 255
    }
    function l(t, e, n) {
        t.bi_valid > q - n ? (t.bi_buf |= e << t.bi_valid & 65535,
        a(t, t.bi_buf),
        t.bi_buf = e >> q - t.bi_valid,
        t.bi_valid += n - q) : (t.bi_buf |= e << t.bi_valid & 65535,
        t.bi_valid += n)
    }
    function c(t, e, n) {
        l(t, n[2 * e], n[2 * e + 1])
    }
    function h(t, e) {
        var n = 0;
        do {
            n |= 1 & t,
            t >>>= 1,
            n <<= 1
        } while (--e > 0);return n >>> 1
    }
    function u(t) {
        16 === t.bi_valid ? (a(t, t.bi_buf),
        t.bi_buf = 0,
        t.bi_valid = 0) : t.bi_valid >= 8 && (t.pending_buf[t.pending++] = 255 & t.bi_buf,
        t.bi_buf >>= 8,
        t.bi_valid -= 8)
    }
    function d(t, e) {
        var n, i, r, o, s, a, l = e.dyn_tree, c = e.max_code, h = e.stat_desc.static_tree, u = e.stat_desc.has_stree, d = e.stat_desc.extra_bits, p = e.stat_desc.extra_base, f = e.stat_desc.max_length, g = 0;
        for (o = 0; o <= W; o++)
            t.bl_count[o] = 0;
        for (l[2 * t.heap[t.heap_max] + 1] = 0,
        n = t.heap_max + 1; n < U; n++)
            i = t.heap[n],
            o = l[2 * l[2 * i + 1] + 1] + 1,
            o > f && (o = f,
            g++),
            l[2 * i + 1] = o,
            i > c || (t.bl_count[o]++,
            s = 0,
            i >= p && (s = d[i - p]),
            a = l[2 * i],
            t.opt_len += a * (o + s),
            u && (t.static_len += a * (h[2 * i + 1] + s)));
        if (0 !== g) {
            do {
                for (o = f - 1; 0 === t.bl_count[o]; )
                    o--;
                t.bl_count[o]--,
                t.bl_count[o + 1] += 2,
                t.bl_count[f]--,
                g -= 2
            } while (g > 0);for (o = f; 0 !== o; o--)
                for (i = t.bl_count[o]; 0 !== i; )
                    (r = t.heap[--n]) > c || (l[2 * r + 1] !== o && (t.opt_len += (o - l[2 * r + 1]) * l[2 * r],
                    l[2 * r + 1] = o),
                    i--)
        }
    }
    function p(t, e, n) {
        var i, r, o = new Array(W + 1), s = 0;
        for (i = 1; i <= W; i++)
            o[i] = s = s + n[i - 1] << 1;
        for (r = 0; r <= e; r++) {
            var a = t[2 * r + 1];
            0 !== a && (t[2 * r] = h(o[a]++, a))
        }
    }
    function f() {
        var t, e, n, i, o, s = new Array(W + 1);
        for (n = 0,
        i = 0; i < F - 1; i++)
            for (at[i] = n,
            t = 0; t < 1 << Q[i]; t++)
                st[n++] = i;
        for (st[n - 1] = i,
        o = 0,
        i = 0; i < 16; i++)
            for (lt[i] = o,
            t = 0; t < 1 << tt[i]; t++)
                ot[o++] = i;
        for (o >>= 7; i < V; i++)
            for (lt[i] = o << 7,
            t = 0; t < 1 << tt[i] - 7; t++)
                ot[256 + o++] = i;
        for (e = 0; e <= W; e++)
            s[e] = 0;
        for (t = 0; t <= 143; )
            it[2 * t + 1] = 8,
            t++,
            s[8]++;
        for (; t <= 255; )
            it[2 * t + 1] = 9,
            t++,
            s[9]++;
        for (; t <= 279; )
            it[2 * t + 1] = 7,
            t++,
            s[7]++;
        for (; t <= 287; )
            it[2 * t + 1] = 8,
            t++,
            s[8]++;
        for (p(it, $ + 1, s),
        t = 0; t < V; t++)
            rt[2 * t + 1] = 5,
            rt[2 * t] = h(t, 5);
        ct = new r(it,Q,z + 1,$,W),
        ht = new r(rt,tt,0,V,W),
        ut = new r(new Array(0),et,0,G,K)
    }
    function g(t) {
        var e;
        for (e = 0; e < $; e++)
            t.dyn_ltree[2 * e] = 0;
        for (e = 0; e < V; e++)
            t.dyn_dtree[2 * e] = 0;
        for (e = 0; e < G; e++)
            t.bl_tree[2 * e] = 0;
        t.dyn_ltree[2 * X] = 1,
        t.opt_len = t.static_len = 0,
        t.last_lit = t.matches = 0
    }
    function m(t) {
        t.bi_valid > 8 ? a(t, t.bi_buf) : t.bi_valid > 0 && (t.pending_buf[t.pending++] = t.bi_buf),
        t.bi_buf = 0,
        t.bi_valid = 0
    }
    function _(t, e, n, i) {
        m(t),
        i && (a(t, n),
        a(t, ~n)),
        O.arraySet(t.pending_buf, t.window, e, n, t.pending),
        t.pending += n
    }
    function v(t, e, n, i) {
        var r = 2 * e
          , o = 2 * n;
        return t[r] < t[o] || t[r] === t[o] && i[e] <= i[n]
    }
    function y(t, e, n) {
        for (var i = t.heap[n], r = n << 1; r <= t.heap_len && (r < t.heap_len && v(e, t.heap[r + 1], t.heap[r], t.depth) && r++,
        !v(e, i, t.heap[r], t.depth)); )
            t.heap[n] = t.heap[r],
            n = r,
            r <<= 1;
        t.heap[n] = i
    }
    function b(t, e, n) {
        var i, r, o, a, h = 0;
        if (0 !== t.last_lit)
            do {
                i = t.pending_buf[t.d_buf + 2 * h] << 8 | t.pending_buf[t.d_buf + 2 * h + 1],
                r = t.pending_buf[t.l_buf + h],
                h++,
                0 === i ? c(t, r, e) : (o = st[r],
                c(t, o + z + 1, e),
                a = Q[o],
                0 !== a && (r -= at[o],
                l(t, r, a)),
                i--,
                o = s(i),
                c(t, o, n),
                0 !== (a = tt[o]) && (i -= lt[o],
                l(t, i, a)))
            } while (h < t.last_lit);c(t, X, e)
    }
    function w(t, e) {
        var n, i, r, o = e.dyn_tree, s = e.stat_desc.static_tree, a = e.stat_desc.has_stree, l = e.stat_desc.elems, c = -1;
        for (t.heap_len = 0,
        t.heap_max = U,
        n = 0; n < l; n++)
            0 !== o[2 * n] ? (t.heap[++t.heap_len] = c = n,
            t.depth[n] = 0) : o[2 * n + 1] = 0;
        for (; t.heap_len < 2; )
            r = t.heap[++t.heap_len] = c < 2 ? ++c : 0,
            o[2 * r] = 1,
            t.depth[r] = 0,
            t.opt_len--,
            a && (t.static_len -= s[2 * r + 1]);
        for (e.max_code = c,
        n = t.heap_len >> 1; n >= 1; n--)
            y(t, o, n);
        r = l;
        do {
            n = t.heap[1],
            t.heap[1] = t.heap[t.heap_len--],
            y(t, o, 1),
            i = t.heap[1],
            t.heap[--t.heap_max] = n,
            t.heap[--t.heap_max] = i,
            o[2 * r] = o[2 * n] + o[2 * i],
            t.depth[r] = (t.depth[n] >= t.depth[i] ? t.depth[n] : t.depth[i]) + 1,
            o[2 * n + 1] = o[2 * i + 1] = r,
            t.heap[1] = r++,
            y(t, o, 1)
        } while (t.heap_len >= 2);t.heap[--t.heap_max] = t.heap[1],
        d(t, e),
        p(o, c, t.bl_count)
    }
    function x(t, e, n) {
        var i, r, o = -1, s = e[1], a = 0, l = 7, c = 4;
        for (0 === s && (l = 138,
        c = 3),
        e[2 * (n + 1) + 1] = 65535,
        i = 0; i <= n; i++)
            r = s,
            s = e[2 * (i + 1) + 1],
            ++a < l && r === s || (a < c ? t.bl_tree[2 * r] += a : 0 !== r ? (r !== o && t.bl_tree[2 * r]++,
            t.bl_tree[2 * Y]++) : a <= 10 ? t.bl_tree[2 * Z]++ : t.bl_tree[2 * J]++,
            a = 0,
            o = r,
            0 === s ? (l = 138,
            c = 3) : r === s ? (l = 6,
            c = 3) : (l = 7,
            c = 4))
    }
    function C(t, e, n) {
        var i, r, o = -1, s = e[1], a = 0, h = 7, u = 4;
        for (0 === s && (h = 138,
        u = 3),
        i = 0; i <= n; i++)
            if (r = s,
            s = e[2 * (i + 1) + 1],
            !(++a < h && r === s)) {
                if (a < u)
                    do {
                        c(t, r, t.bl_tree)
                    } while (0 != --a);
                else
                    0 !== r ? (r !== o && (c(t, r, t.bl_tree),
                    a--),
                    c(t, Y, t.bl_tree),
                    l(t, a - 3, 2)) : a <= 10 ? (c(t, Z, t.bl_tree),
                    l(t, a - 3, 3)) : (c(t, J, t.bl_tree),
                    l(t, a - 11, 7));
                a = 0,
                o = r,
                0 === s ? (h = 138,
                u = 3) : r === s ? (h = 6,
                u = 3) : (h = 7,
                u = 4)
            }
    }
    function T(t) {
        var e;
        for (x(t, t.dyn_ltree, t.l_desc.max_code),
        x(t, t.dyn_dtree, t.d_desc.max_code),
        w(t, t.bl_desc),
        e = G - 1; e >= 3 && 0 === t.bl_tree[2 * nt[e] + 1]; e--)
            ;
        return t.opt_len += 3 * (e + 1) + 5 + 5 + 4,
        e
    }
    function k(t, e, n, i) {
        var r;
        for (l(t, e - 257, 5),
        l(t, n - 1, 5),
        l(t, i - 4, 4),
        r = 0; r < i; r++)
            l(t, t.bl_tree[2 * nt[r] + 1], 3);
        C(t, t.dyn_ltree, e - 1),
        C(t, t.dyn_dtree, n - 1)
    }
    function I(t) {
        var e, n = 4093624447;
        for (e = 0; e <= 31; e++,
        n >>>= 1)
            if (1 & n && 0 !== t.dyn_ltree[2 * e])
                return R;
        if (0 !== t.dyn_ltree[18] || 0 !== t.dyn_ltree[20] || 0 !== t.dyn_ltree[26])
            return B;
        for (e = 32; e < z; e++)
            if (0 !== t.dyn_ltree[2 * e])
                return B;
        return R
    }
    function L(t) {
        dt || (f(),
        dt = !0),
        t.l_desc = new o(t.dyn_ltree,ct),
        t.d_desc = new o(t.dyn_dtree,ht),
        t.bl_desc = new o(t.bl_tree,ut),
        t.bi_buf = 0,
        t.bi_valid = 0,
        g(t)
    }
    function E(t, e, n, i) {
        l(t, (D << 1) + (i ? 1 : 0), 3),
        _(t, e, n, !0)
    }
    function P(t) {
        l(t, N << 1, 3),
        c(t, X, it),
        u(t)
    }
    function S(t, e, n, i) {
        var r, o, s = 0;
        t.level > 0 ? (t.strm.data_type === M && (t.strm.data_type = I(t)),
        w(t, t.l_desc),
        w(t, t.d_desc),
        s = T(t),
        r = t.opt_len + 3 + 7 >>> 3,
        (o = t.static_len + 3 + 7 >>> 3) <= r && (r = o)) : r = o = n + 5,
        n + 4 <= r && -1 !== e ? E(t, e, n, i) : t.strategy === A || o === r ? (l(t, (N << 1) + (i ? 1 : 0), 3),
        b(t, it, rt)) : (l(t, (H << 1) + (i ? 1 : 0), 3),
        k(t, t.l_desc.max_code + 1, t.d_desc.max_code + 1, s + 1),
        b(t, t.dyn_ltree, t.dyn_dtree)),
        g(t),
        i && m(t)
    }
    function j(t, e, n) {
        return t.pending_buf[t.d_buf + 2 * t.last_lit] = e >>> 8 & 255,
        t.pending_buf[t.d_buf + 2 * t.last_lit + 1] = 255 & e,
        t.pending_buf[t.l_buf + t.last_lit] = 255 & n,
        t.last_lit++,
        0 === e ? t.dyn_ltree[2 * n]++ : (t.matches++,
        e--,
        t.dyn_ltree[2 * (st[n] + z + 1)]++,
        t.dyn_dtree[2 * s(e)]++),
        t.last_lit === t.lit_bufsize - 1
    }
    var O = n(9)
      , A = 4
      , R = 0
      , B = 1
      , M = 2
      , D = 0
      , N = 1
      , H = 2
      , F = 29
      , z = 256
      , $ = z + 1 + F
      , V = 30
      , G = 19
      , U = 2 * $ + 1
      , W = 15
      , q = 16
      , K = 7
      , X = 256
      , Y = 16
      , Z = 17
      , J = 18
      , Q = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]
      , tt = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]
      , et = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]
      , nt = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]
      , it = new Array(2 * ($ + 2));
    i(it);
    var rt = new Array(2 * V);
    i(rt);
    var ot = new Array(512);
    i(ot);
    var st = new Array(256);
    i(st);
    var at = new Array(F);
    i(at);
    var lt = new Array(V);
    i(lt);
    var ct, ht, ut, dt = !1;
    e._tr_init = L,
    e._tr_stored_block = E,
    e._tr_flush_block = S,
    e._tr_tally = j,
    e._tr_align = P
}
, function(t, e, n) {
    "use strict";
    function i(t) {
        if (!(this instanceof i))
            return new i(t);
        this.options = a.assign({
            chunkSize: 16384,
            windowBits: 0,
            to: ""
        }, t || {});
        var e = this.options;
        e.raw && e.windowBits >= 0 && e.windowBits < 16 && (e.windowBits = -e.windowBits,
        0 === e.windowBits && (e.windowBits = -15)),
        !(e.windowBits >= 0 && e.windowBits < 16) || t && t.windowBits || (e.windowBits += 32),
        e.windowBits > 15 && e.windowBits < 48 && 0 == (15 & e.windowBits) && (e.windowBits |= 15),
        this.err = 0,
        this.msg = "",
        this.ended = !1,
        this.chunks = [],
        this.strm = new u,
        this.strm.avail_out = 0;
        var n = s.inflateInit2(this.strm, e.windowBits);
        if (n !== c.Z_OK)
            throw new Error(h[n]);
        this.header = new d,
        s.inflateGetHeader(this.strm, this.header)
    }
    function r(t, e) {
        var n = new i(e);
        if (n.push(t, !0),
        n.err)
            throw n.msg || h[n.err];
        return n.result
    }
    function o(t, e) {
        return e = e || {},
        e.raw = !0,
        r(t, e)
    }
    var s = n(72)
      , a = n(9)
      , l = n(40)
      , c = n(42)
      , h = n(29)
      , u = n(41)
      , d = n(75)
      , p = Object.prototype.toString;
    i.prototype.push = function(t, e) {
        var n, i, r, o, h, u, d = this.strm, f = this.options.chunkSize, g = this.options.dictionary, m = !1;
        if (this.ended)
            return !1;
        i = e === ~~e ? e : !0 === e ? c.Z_FINISH : c.Z_NO_FLUSH,
        "string" == typeof t ? d.input = l.binstring2buf(t) : "[object ArrayBuffer]" === p.call(t) ? d.input = new Uint8Array(t) : d.input = t,
        d.next_in = 0,
        d.avail_in = d.input.length;
        do {
            if (0 === d.avail_out && (d.output = new a.Buf8(f),
            d.next_out = 0,
            d.avail_out = f),
            n = s.inflate(d, c.Z_NO_FLUSH),
            n === c.Z_NEED_DICT && g && (u = "string" == typeof g ? l.string2buf(g) : "[object ArrayBuffer]" === p.call(g) ? new Uint8Array(g) : g,
            n = s.inflateSetDictionary(this.strm, u)),
            n === c.Z_BUF_ERROR && !0 === m && (n = c.Z_OK,
            m = !1),
            n !== c.Z_STREAM_END && n !== c.Z_OK)
                return this.onEnd(n),
                this.ended = !0,
                !1;
            d.next_out && (0 !== d.avail_out && n !== c.Z_STREAM_END && (0 !== d.avail_in || i !== c.Z_FINISH && i !== c.Z_SYNC_FLUSH) || ("string" === this.options.to ? (r = l.utf8border(d.output, d.next_out),
            o = d.next_out - r,
            h = l.buf2string(d.output, r),
            d.next_out = o,
            d.avail_out = f - o,
            o && a.arraySet(d.output, d.output, r, o, 0),
            this.onData(h)) : this.onData(a.shrinkBuf(d.output, d.next_out)))),
            0 === d.avail_in && 0 === d.avail_out && (m = !0)
        } while ((d.avail_in > 0 || 0 === d.avail_out) && n !== c.Z_STREAM_END);return n === c.Z_STREAM_END && (i = c.Z_FINISH),
        i === c.Z_FINISH ? (n = s.inflateEnd(this.strm),
        this.onEnd(n),
        this.ended = !0,
        n === c.Z_OK) : i !== c.Z_SYNC_FLUSH || (this.onEnd(c.Z_OK),
        d.avail_out = 0,
        !0)
    }
    ,
    i.prototype.onData = function(t) {
        this.chunks.push(t)
    }
    ,
    i.prototype.onEnd = function(t) {
        t === c.Z_OK && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = a.flattenChunks(this.chunks)),
        this.chunks = [],
        this.err = t,
        this.msg = this.strm.msg
    }
    ,
    e.Inflate = i,
    e.inflate = r,
    e.inflateRaw = o,
    e.ungzip = r
}
, function(t, e, n) {
    "use strict";
    function i(t) {
        return (t >>> 24 & 255) + (t >>> 8 & 65280) + ((65280 & t) << 8) + ((255 & t) << 24)
    }
    function r() {
        this.mode = 0,
        this.last = !1,
        this.wrap = 0,
        this.havedict = !1,
        this.flags = 0,
        this.dmax = 0,
        this.check = 0,
        this.total = 0,
        this.head = null,
        this.wbits = 0,
        this.wsize = 0,
        this.whave = 0,
        this.wnext = 0,
        this.window = null,
        this.hold = 0,
        this.bits = 0,
        this.length = 0,
        this.offset = 0,
        this.extra = 0,
        this.lencode = null,
        this.distcode = null,
        this.lenbits = 0,
        this.distbits = 0,
        this.ncode = 0,
        this.nlen = 0,
        this.ndist = 0,
        this.have = 0,
        this.next = null,
        this.lens = new v.Buf16(320),
        this.work = new v.Buf16(288),
        this.lendyn = null,
        this.distdyn = null,
        this.sane = 0,
        this.back = 0,
        this.was = 0
    }
    function o(t) {
        var e;
        return t && t.state ? (e = t.state,
        t.total_in = t.total_out = e.total = 0,
        t.msg = "",
        e.wrap && (t.adler = 1 & e.wrap),
        e.mode = D,
        e.last = 0,
        e.havedict = 0,
        e.dmax = 32768,
        e.head = null,
        e.hold = 0,
        e.bits = 0,
        e.lencode = e.lendyn = new v.Buf32(gt),
        e.distcode = e.distdyn = new v.Buf32(mt),
        e.sane = 1,
        e.back = -1,
        P) : O
    }
    function s(t) {
        var e;
        return t && t.state ? (e = t.state,
        e.wsize = 0,
        e.whave = 0,
        e.wnext = 0,
        o(t)) : O
    }
    function a(t, e) {
        var n, i;
        return t && t.state ? (i = t.state,
        e < 0 ? (n = 0,
        e = -e) : (n = 1 + (e >> 4),
        e < 48 && (e &= 15)),
        e && (e < 8 || e > 15) ? O : (null !== i.window && i.wbits !== e && (i.window = null),
        i.wrap = n,
        i.wbits = e,
        s(t))) : O
    }
    function l(t, e) {
        var n, i;
        return t ? (i = new r,
        t.state = i,
        i.window = null,
        n = a(t, e),
        n !== P && (t.state = null),
        n) : O
    }
    function c(t) {
        return l(t, _t)
    }
    function h(t) {
        if (vt) {
            var e;
            for (m = new v.Buf32(512),
            _ = new v.Buf32(32),
            e = 0; e < 144; )
                t.lens[e++] = 8;
            for (; e < 256; )
                t.lens[e++] = 9;
            for (; e < 280; )
                t.lens[e++] = 7;
            for (; e < 288; )
                t.lens[e++] = 8;
            for (x(T, t.lens, 0, 288, m, 0, t.work, {
                bits: 9
            }),
            e = 0; e < 32; )
                t.lens[e++] = 5;
            x(k, t.lens, 0, 32, _, 0, t.work, {
                bits: 5
            }),
            vt = !1
        }
        t.lencode = m,
        t.lenbits = 9,
        t.distcode = _,
        t.distbits = 5
    }
    function u(t, e, n, i) {
        var r, o = t.state;
        return null === o.window && (o.wsize = 1 << o.wbits,
        o.wnext = 0,
        o.whave = 0,
        o.window = new v.Buf8(o.wsize)),
        i >= o.wsize ? (v.arraySet(o.window, e, n - o.wsize, o.wsize, 0),
        o.wnext = 0,
        o.whave = o.wsize) : (r = o.wsize - o.wnext,
        r > i && (r = i),
        v.arraySet(o.window, e, n - i, r, o.wnext),
        i -= r,
        i ? (v.arraySet(o.window, e, n - i, i, 0),
        o.wnext = i,
        o.whave = o.wsize) : (o.wnext += r,
        o.wnext === o.wsize && (o.wnext = 0),
        o.whave < o.wsize && (o.whave += r))),
        0
    }
    function d(t, e) {
        var n, r, o, s, a, l, c, d, p, f, g, m, _, gt, mt, _t, vt, yt, bt, wt, xt, Ct, Tt, kt, It = 0, Lt = new v.Buf8(4), Et = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
        if (!t || !t.state || !t.output || !t.input && 0 !== t.avail_in)
            return O;
        n = t.state,
        n.mode === K && (n.mode = X),
        a = t.next_out,
        o = t.output,
        c = t.avail_out,
        s = t.next_in,
        r = t.input,
        l = t.avail_in,
        d = n.hold,
        p = n.bits,
        f = l,
        g = c,
        Ct = P;
        t: for (; ; )
            switch (n.mode) {
            case D:
                if (0 === n.wrap) {
                    n.mode = X;
                    break
                }
                for (; p < 16; ) {
                    if (0 === l)
                        break t;
                    l--,
                    d += r[s++] << p,
                    p += 8
                }
                if (2 & n.wrap && 35615 === d) {
                    n.check = 0,
                    Lt[0] = 255 & d,
                    Lt[1] = d >>> 8 & 255,
                    n.check = b(n.check, Lt, 2, 0),
                    d = 0,
                    p = 0,
                    n.mode = N;
                    break
                }
                if (n.flags = 0,
                n.head && (n.head.done = !1),
                !(1 & n.wrap) || (((255 & d) << 8) + (d >> 8)) % 31) {
                    t.msg = "incorrect header check",
                    n.mode = dt;
                    break
                }
                if ((15 & d) !== M) {
                    t.msg = "unknown compression method",
                    n.mode = dt;
                    break
                }
                if (d >>>= 4,
                p -= 4,
                xt = 8 + (15 & d),
                0 === n.wbits)
                    n.wbits = xt;
                else if (xt > n.wbits) {
                    t.msg = "invalid window size",
                    n.mode = dt;
                    break
                }
                n.dmax = 1 << xt,
                t.adler = n.check = 1,
                n.mode = 512 & d ? W : K,
                d = 0,
                p = 0;
                break;
            case N:
                for (; p < 16; ) {
                    if (0 === l)
                        break t;
                    l--,
                    d += r[s++] << p,
                    p += 8
                }
                if (n.flags = d,
                (255 & n.flags) !== M) {
                    t.msg = "unknown compression method",
                    n.mode = dt;
                    break
                }
                if (57344 & n.flags) {
                    t.msg = "unknown header flags set",
                    n.mode = dt;
                    break
                }
                n.head && (n.head.text = d >> 8 & 1),
                512 & n.flags && (Lt[0] = 255 & d,
                Lt[1] = d >>> 8 & 255,
                n.check = b(n.check, Lt, 2, 0)),
                d = 0,
                p = 0,
                n.mode = H;
            case H:
                for (; p < 32; ) {
                    if (0 === l)
                        break t;
                    l--,
                    d += r[s++] << p,
                    p += 8
                }
                n.head && (n.head.time = d),
                512 & n.flags && (Lt[0] = 255 & d,
                Lt[1] = d >>> 8 & 255,
                Lt[2] = d >>> 16 & 255,
                Lt[3] = d >>> 24 & 255,
                n.check = b(n.check, Lt, 4, 0)),
                d = 0,
                p = 0,
                n.mode = F;
            case F:
                for (; p < 16; ) {
                    if (0 === l)
                        break t;
                    l--,
                    d += r[s++] << p,
                    p += 8
                }
                n.head && (n.head.xflags = 255 & d,
                n.head.os = d >> 8),
                512 & n.flags && (Lt[0] = 255 & d,
                Lt[1] = d >>> 8 & 255,
                n.check = b(n.check, Lt, 2, 0)),
                d = 0,
                p = 0,
                n.mode = z;
            case z:
                if (1024 & n.flags) {
                    for (; p < 16; ) {
                        if (0 === l)
                            break t;
                        l--,
                        d += r[s++] << p,
                        p += 8
                    }
                    n.length = d,
                    n.head && (n.head.extra_len = d),
                    512 & n.flags && (Lt[0] = 255 & d,
                    Lt[1] = d >>> 8 & 255,
                    n.check = b(n.check, Lt, 2, 0)),
                    d = 0,
                    p = 0
                } else
                    n.head && (n.head.extra = null);
                n.mode = $;
            case $:
                if (1024 & n.flags && (m = n.length,
                m > l && (m = l),
                m && (n.head && (xt = n.head.extra_len - n.length,
                n.head.extra || (n.head.extra = new Array(n.head.extra_len)),
                v.arraySet(n.head.extra, r, s, m, xt)),
                512 & n.flags && (n.check = b(n.check, r, m, s)),
                l -= m,
                s += m,
                n.length -= m),
                n.length))
                    break t;
                n.length = 0,
                n.mode = V;
            case V:
                if (2048 & n.flags) {
                    if (0 === l)
                        break t;
                    m = 0;
                    do {
                        xt = r[s + m++],
                        n.head && xt && n.length < 65536 && (n.head.name += String.fromCharCode(xt))
                    } while (xt && m < l);if (512 & n.flags && (n.check = b(n.check, r, m, s)),
                    l -= m,
                    s += m,
                    xt)
                        break t
                } else
                    n.head && (n.head.name = null);
                n.length = 0,
                n.mode = G;
            case G:
                if (4096 & n.flags) {
                    if (0 === l)
                        break t;
                    m = 0;
                    do {
                        xt = r[s + m++],
                        n.head && xt && n.length < 65536 && (n.head.comment += String.fromCharCode(xt))
                    } while (xt && m < l);if (512 & n.flags && (n.check = b(n.check, r, m, s)),
                    l -= m,
                    s += m,
                    xt)
                        break t
                } else
                    n.head && (n.head.comment = null);
                n.mode = U;
            case U:
                if (512 & n.flags) {
                    for (; p < 16; ) {
                        if (0 === l)
                            break t;
                        l--,
                        d += r[s++] << p,
                        p += 8
                    }
                    if (d !== (65535 & n.check)) {
                        t.msg = "header crc mismatch",
                        n.mode = dt;
                        break
                    }
                    d = 0,
                    p = 0
                }
                n.head && (n.head.hcrc = n.flags >> 9 & 1,
                n.head.done = !0),
                t.adler = n.check = 0,
                n.mode = K;
                break;
            case W:
                for (; p < 32; ) {
                    if (0 === l)
                        break t;
                    l--,
                    d += r[s++] << p,
                    p += 8
                }
                t.adler = n.check = i(d),
                d = 0,
                p = 0,
                n.mode = q;
            case q:
                if (0 === n.havedict)
                    return t.next_out = a,
                    t.avail_out = c,
                    t.next_in = s,
                    t.avail_in = l,
                    n.hold = d,
                    n.bits = p,
                    j;
                t.adler = n.check = 1,
                n.mode = K;
            case K:
                if (e === L || e === E)
                    break t;
            case X:
                if (n.last) {
                    d >>>= 7 & p,
                    p -= 7 & p,
                    n.mode = ct;
                    break
                }
                for (; p < 3; ) {
                    if (0 === l)
                        break t;
                    l--,
                    d += r[s++] << p,
                    p += 8
                }
                switch (n.last = 1 & d,
                d >>>= 1,
                p -= 1,
                3 & d) {
                case 0:
                    n.mode = Y;
                    break;
                case 1:
                    if (h(n),
                    n.mode = nt,
                    e === E) {
                        d >>>= 2,
                        p -= 2;
                        break t
                    }
                    break;
                case 2:
                    n.mode = Q;
                    break;
                case 3:
                    t.msg = "invalid block type",
                    n.mode = dt
                }
                d >>>= 2,
                p -= 2;
                break;
            case Y:
                for (d >>>= 7 & p,
                p -= 7 & p; p < 32; ) {
                    if (0 === l)
                        break t;
                    l--,
                    d += r[s++] << p,
                    p += 8
                }
                if ((65535 & d) != (d >>> 16 ^ 65535)) {
                    t.msg = "invalid stored block lengths",
                    n.mode = dt;
                    break
                }
                if (n.length = 65535 & d,
                d = 0,
                p = 0,
                n.mode = Z,
                e === E)
                    break t;
            case Z:
                n.mode = J;
            case J:
                if (m = n.length) {
                    if (m > l && (m = l),
                    m > c && (m = c),
                    0 === m)
                        break t;
                    v.arraySet(o, r, s, m, a),
                    l -= m,
                    s += m,
                    c -= m,
                    a += m,
                    n.length -= m;
                    break
                }
                n.mode = K;
                break;
            case Q:
                for (; p < 14; ) {
                    if (0 === l)
                        break t;
                    l--,
                    d += r[s++] << p,
                    p += 8
                }
                if (n.nlen = 257 + (31 & d),
                d >>>= 5,
                p -= 5,
                n.ndist = 1 + (31 & d),
                d >>>= 5,
                p -= 5,
                n.ncode = 4 + (15 & d),
                d >>>= 4,
                p -= 4,
                n.nlen > 286 || n.ndist > 30) {
                    t.msg = "too many length or distance symbols",
                    n.mode = dt;
                    break
                }
                n.have = 0,
                n.mode = tt;
            case tt:
                for (; n.have < n.ncode; ) {
                    for (; p < 3; ) {
                        if (0 === l)
                            break t;
                        l--,
                        d += r[s++] << p,
                        p += 8
                    }
                    n.lens[Et[n.have++]] = 7 & d,
                    d >>>= 3,
                    p -= 3
                }
                for (; n.have < 19; )
                    n.lens[Et[n.have++]] = 0;
                if (n.lencode = n.lendyn,
                n.lenbits = 7,
                Tt = {
                    bits: n.lenbits
                },
                Ct = x(C, n.lens, 0, 19, n.lencode, 0, n.work, Tt),
                n.lenbits = Tt.bits,
                Ct) {
                    t.msg = "invalid code lengths set",
                    n.mode = dt;
                    break
                }
                n.have = 0,
                n.mode = et;
            case et:
                for (; n.have < n.nlen + n.ndist; ) {
                    for (; It = n.lencode[d & (1 << n.lenbits) - 1],
                    mt = It >>> 24,
                    _t = It >>> 16 & 255,
                    vt = 65535 & It,
                    !(mt <= p); ) {
                        if (0 === l)
                            break t;
                        l--,
                        d += r[s++] << p,
                        p += 8
                    }
                    if (vt < 16)
                        d >>>= mt,
                        p -= mt,
                        n.lens[n.have++] = vt;
                    else {
                        if (16 === vt) {
                            for (kt = mt + 2; p < kt; ) {
                                if (0 === l)
                                    break t;
                                l--,
                                d += r[s++] << p,
                                p += 8
                            }
                            if (d >>>= mt,
                            p -= mt,
                            0 === n.have) {
                                t.msg = "invalid bit length repeat",
                                n.mode = dt;
                                break
                            }
                            xt = n.lens[n.have - 1],
                            m = 3 + (3 & d),
                            d >>>= 2,
                            p -= 2
                        } else if (17 === vt) {
                            for (kt = mt + 3; p < kt; ) {
                                if (0 === l)
                                    break t;
                                l--,
                                d += r[s++] << p,
                                p += 8
                            }
                            d >>>= mt,
                            p -= mt,
                            xt = 0,
                            m = 3 + (7 & d),
                            d >>>= 3,
                            p -= 3
                        } else {
                            for (kt = mt + 7; p < kt; ) {
                                if (0 === l)
                                    break t;
                                l--,
                                d += r[s++] << p,
                                p += 8
                            }
                            d >>>= mt,
                            p -= mt,
                            xt = 0,
                            m = 11 + (127 & d),
                            d >>>= 7,
                            p -= 7
                        }
                        if (n.have + m > n.nlen + n.ndist) {
                            t.msg = "invalid bit length repeat",
                            n.mode = dt;
                            break
                        }
                        for (; m--; )
                            n.lens[n.have++] = xt
                    }
                }
                if (n.mode === dt)
                    break;
                if (0 === n.lens[256]) {
                    t.msg = "invalid code -- missing end-of-block",
                    n.mode = dt;
                    break
                }
                if (n.lenbits = 9,
                Tt = {
                    bits: n.lenbits
                },
                Ct = x(T, n.lens, 0, n.nlen, n.lencode, 0, n.work, Tt),
                n.lenbits = Tt.bits,
                Ct) {
                    t.msg = "invalid literal/lengths set",
                    n.mode = dt;
                    break
                }
                if (n.distbits = 6,
                n.distcode = n.distdyn,
                Tt = {
                    bits: n.distbits
                },
                Ct = x(k, n.lens, n.nlen, n.ndist, n.distcode, 0, n.work, Tt),
                n.distbits = Tt.bits,
                Ct) {
                    t.msg = "invalid distances set",
                    n.mode = dt;
                    break
                }
                if (n.mode = nt,
                e === E)
                    break t;
            case nt:
                n.mode = it;
            case it:
                if (l >= 6 && c >= 258) {
                    t.next_out = a,
                    t.avail_out = c,
                    t.next_in = s,
                    t.avail_in = l,
                    n.hold = d,
                    n.bits = p,
                    w(t, g),
                    a = t.next_out,
                    o = t.output,
                    c = t.avail_out,
                    s = t.next_in,
                    r = t.input,
                    l = t.avail_in,
                    d = n.hold,
                    p = n.bits,
                    n.mode === K && (n.back = -1);
                    break
                }
                for (n.back = 0; It = n.lencode[d & (1 << n.lenbits) - 1],
                mt = It >>> 24,
                _t = It >>> 16 & 255,
                vt = 65535 & It,
                !(mt <= p); ) {
                    if (0 === l)
                        break t;
                    l--,
                    d += r[s++] << p,
                    p += 8
                }
                if (_t && 0 == (240 & _t)) {
                    for (yt = mt,
                    bt = _t,
                    wt = vt; It = n.lencode[wt + ((d & (1 << yt + bt) - 1) >> yt)],
                    mt = It >>> 24,
                    _t = It >>> 16 & 255,
                    vt = 65535 & It,
                    !(yt + mt <= p); ) {
                        if (0 === l)
                            break t;
                        l--,
                        d += r[s++] << p,
                        p += 8
                    }
                    d >>>= yt,
                    p -= yt,
                    n.back += yt
                }
                if (d >>>= mt,
                p -= mt,
                n.back += mt,
                n.length = vt,
                0 === _t) {
                    n.mode = lt;
                    break
                }
                if (32 & _t) {
                    n.back = -1,
                    n.mode = K;
                    break
                }
                if (64 & _t) {
                    t.msg = "invalid literal/length code",
                    n.mode = dt;
                    break
                }
                n.extra = 15 & _t,
                n.mode = rt;
            case rt:
                if (n.extra) {
                    for (kt = n.extra; p < kt; ) {
                        if (0 === l)
                            break t;
                        l--,
                        d += r[s++] << p,
                        p += 8
                    }
                    n.length += d & (1 << n.extra) - 1,
                    d >>>= n.extra,
                    p -= n.extra,
                    n.back += n.extra
                }
                n.was = n.length,
                n.mode = ot;
            case ot:
                for (; It = n.distcode[d & (1 << n.distbits) - 1],
                mt = It >>> 24,
                _t = It >>> 16 & 255,
                vt = 65535 & It,
                !(mt <= p); ) {
                    if (0 === l)
                        break t;
                    l--,
                    d += r[s++] << p,
                    p += 8
                }
                if (0 == (240 & _t)) {
                    for (yt = mt,
                    bt = _t,
                    wt = vt; It = n.distcode[wt + ((d & (1 << yt + bt) - 1) >> yt)],
                    mt = It >>> 24,
                    _t = It >>> 16 & 255,
                    vt = 65535 & It,
                    !(yt + mt <= p); ) {
                        if (0 === l)
                            break t;
                        l--,
                        d += r[s++] << p,
                        p += 8
                    }
                    d >>>= yt,
                    p -= yt,
                    n.back += yt
                }
                if (d >>>= mt,
                p -= mt,
                n.back += mt,
                64 & _t) {
                    t.msg = "invalid distance code",
                    n.mode = dt;
                    break
                }
                n.offset = vt,
                n.extra = 15 & _t,
                n.mode = st;
            case st:
                if (n.extra) {
                    for (kt = n.extra; p < kt; ) {
                        if (0 === l)
                            break t;
                        l--,
                        d += r[s++] << p,
                        p += 8
                    }
                    n.offset += d & (1 << n.extra) - 1,
                    d >>>= n.extra,
                    p -= n.extra,
                    n.back += n.extra
                }
                if (n.offset > n.dmax) {
                    t.msg = "invalid distance too far back",
                    n.mode = dt;
                    break
                }
                n.mode = at;
            case at:
                if (0 === c)
                    break t;
                if (m = g - c,
                n.offset > m) {
                    if ((m = n.offset - m) > n.whave && n.sane) {
                        t.msg = "invalid distance too far back",
                        n.mode = dt;
                        break
                    }
                    m > n.wnext ? (m -= n.wnext,
                    _ = n.wsize - m) : _ = n.wnext - m,
                    m > n.length && (m = n.length),
                    gt = n.window
                } else
                    gt = o,
                    _ = a - n.offset,
                    m = n.length;
                m > c && (m = c),
                c -= m,
                n.length -= m;
                do {
                    o[a++] = gt[_++]
                } while (--m);0 === n.length && (n.mode = it);
                break;
            case lt:
                if (0 === c)
                    break t;
                o[a++] = n.length,
                c--,
                n.mode = it;
                break;
            case ct:
                if (n.wrap) {
                    for (; p < 32; ) {
                        if (0 === l)
                            break t;
                        l--,
                        d |= r[s++] << p,
                        p += 8
                    }
                    if (g -= c,
                    t.total_out += g,
                    n.total += g,
                    g && (t.adler = n.check = n.flags ? b(n.check, o, g, a - g) : y(n.check, o, g, a - g)),
                    g = c,
                    (n.flags ? d : i(d)) !== n.check) {
                        t.msg = "incorrect data check",
                        n.mode = dt;
                        break
                    }
                    d = 0,
                    p = 0
                }
                n.mode = ht;
            case ht:
                if (n.wrap && n.flags) {
                    for (; p < 32; ) {
                        if (0 === l)
                            break t;
                        l--,
                        d += r[s++] << p,
                        p += 8
                    }
                    if (d !== (4294967295 & n.total)) {
                        t.msg = "incorrect length check",
                        n.mode = dt;
                        break
                    }
                    d = 0,
                    p = 0
                }
                n.mode = ut;
            case ut:
                Ct = S;
                break t;
            case dt:
                Ct = A;
                break t;
            case pt:
                return R;
            case ft:
            default:
                return O
            }
        return t.next_out = a,
        t.avail_out = c,
        t.next_in = s,
        t.avail_in = l,
        n.hold = d,
        n.bits = p,
        (n.wsize || g !== t.avail_out && n.mode < dt && (n.mode < ct || e !== I)) && u(t, t.output, t.next_out, g - t.avail_out) ? (n.mode = pt,
        R) : (f -= t.avail_in,
        g -= t.avail_out,
        t.total_in += f,
        t.total_out += g,
        n.total += g,
        n.wrap && g && (t.adler = n.check = n.flags ? b(n.check, o, g, t.next_out - g) : y(n.check, o, g, t.next_out - g)),
        t.data_type = n.bits + (n.last ? 64 : 0) + (n.mode === K ? 128 : 0) + (n.mode === nt || n.mode === Z ? 256 : 0),
        (0 === f && 0 === g || e === I) && Ct === P && (Ct = B),
        Ct)
    }
    function p(t) {
        if (!t || !t.state)
            return O;
        var e = t.state;
        return e.window && (e.window = null),
        t.state = null,
        P
    }
    function f(t, e) {
        var n;
        return t && t.state ? (n = t.state,
        0 == (2 & n.wrap) ? O : (n.head = e,
        e.done = !1,
        P)) : O
    }
    function g(t, e) {
        var n, i, r = e.length;
        return t && t.state ? (n = t.state,
        0 !== n.wrap && n.mode !== q ? O : n.mode === q && (i = 1,
        (i = y(i, e, r, 0)) !== n.check) ? A : u(t, e, r, r) ? (n.mode = pt,
        R) : (n.havedict = 1,
        P)) : O
    }
    var m, _, v = n(9), y = n(38), b = n(39), w = n(73), x = n(74), C = 0, T = 1, k = 2, I = 4, L = 5, E = 6, P = 0, S = 1, j = 2, O = -2, A = -3, R = -4, B = -5, M = 8, D = 1, N = 2, H = 3, F = 4, z = 5, $ = 6, V = 7, G = 8, U = 9, W = 10, q = 11, K = 12, X = 13, Y = 14, Z = 15, J = 16, Q = 17, tt = 18, et = 19, nt = 20, it = 21, rt = 22, ot = 23, st = 24, at = 25, lt = 26, ct = 27, ht = 28, ut = 29, dt = 30, pt = 31, ft = 32, gt = 852, mt = 592, _t = 15, vt = !0;
    e.inflateReset = s,
    e.inflateReset2 = a,
    e.inflateResetKeep = o,
    e.inflateInit = c,
    e.inflateInit2 = l,
    e.inflate = d,
    e.inflateEnd = p,
    e.inflateGetHeader = f,
    e.inflateSetDictionary = g,
    e.inflateInfo = "pako inflate (from Nodeca project)"
}
, function(t, e, n) {
    "use strict";
    t.exports = function(t, e) {
        var n, i, r, o, s, a, l, c, h, u, d, p, f, g, m, _, v, y, b, w, x, C, T, k, I;
        n = t.state,
        i = t.next_in,
        k = t.input,
        r = i + (t.avail_in - 5),
        o = t.next_out,
        I = t.output,
        s = o - (e - t.avail_out),
        a = o + (t.avail_out - 257),
        l = n.dmax,
        c = n.wsize,
        h = n.whave,
        u = n.wnext,
        d = n.window,
        p = n.hold,
        f = n.bits,
        g = n.lencode,
        m = n.distcode,
        _ = (1 << n.lenbits) - 1,
        v = (1 << n.distbits) - 1;
        t: do {
            f < 15 && (p += k[i++] << f,
            f += 8,
            p += k[i++] << f,
            f += 8),
            y = g[p & _];
            e: for (; ; ) {
                if (b = y >>> 24,
                p >>>= b,
                f -= b,
                0 === (b = y >>> 16 & 255))
                    I[o++] = 65535 & y;
                else {
                    if (!(16 & b)) {
                        if (0 == (64 & b)) {
                            y = g[(65535 & y) + (p & (1 << b) - 1)];
                            continue e
                        }
                        if (32 & b) {
                            n.mode = 12;
                            break t
                        }
                        t.msg = "invalid literal/length code",
                        n.mode = 30;
                        break t
                    }
                    w = 65535 & y,
                    b &= 15,
                    b && (f < b && (p += k[i++] << f,
                    f += 8),
                    w += p & (1 << b) - 1,
                    p >>>= b,
                    f -= b),
                    f < 15 && (p += k[i++] << f,
                    f += 8,
                    p += k[i++] << f,
                    f += 8),
                    y = m[p & v];
                    n: for (; ; ) {
                        if (b = y >>> 24,
                        p >>>= b,
                        f -= b,
                        !(16 & (b = y >>> 16 & 255))) {
                            if (0 == (64 & b)) {
                                y = m[(65535 & y) + (p & (1 << b) - 1)];
                                continue n
                            }
                            t.msg = "invalid distance code",
                            n.mode = 30;
                            break t
                        }
                        if (x = 65535 & y,
                        b &= 15,
                        f < b && (p += k[i++] << f,
                        (f += 8) < b && (p += k[i++] << f,
                        f += 8)),
                        (x += p & (1 << b) - 1) > l) {
                            t.msg = "invalid distance too far back",
                            n.mode = 30;
                            break t
                        }
                        if (p >>>= b,
                        f -= b,
                        b = o - s,
                        x > b) {
                            if ((b = x - b) > h && n.sane) {
                                t.msg = "invalid distance too far back",
                                n.mode = 30;
                                break t
                            }
                            if (C = 0,
                            T = d,
                            0 === u) {
                                if (C += c - b,
                                b < w) {
                                    w -= b;
                                    do {
                                        I[o++] = d[C++]
                                    } while (--b);C = o - x,
                                    T = I
                                }
                            } else if (u < b) {
                                if (C += c + u - b,
                                (b -= u) < w) {
                                    w -= b;
                                    do {
                                        I[o++] = d[C++]
                                    } while (--b);if (C = 0,
                                    u < w) {
                                        b = u,
                                        w -= b;
                                        do {
                                            I[o++] = d[C++]
                                        } while (--b);C = o - x,
                                        T = I
                                    }
                                }
                            } else if (C += u - b,
                            b < w) {
                                w -= b;
                                do {
                                    I[o++] = d[C++]
                                } while (--b);C = o - x,
                                T = I
                            }
                            for (; w > 2; )
                                I[o++] = T[C++],
                                I[o++] = T[C++],
                                I[o++] = T[C++],
                                w -= 3;
                            w && (I[o++] = T[C++],
                            w > 1 && (I[o++] = T[C++]))
                        } else {
                            C = o - x;
                            do {
                                I[o++] = I[C++],
                                I[o++] = I[C++],
                                I[o++] = I[C++],
                                w -= 3
                            } while (w > 2);w && (I[o++] = I[C++],
                            w > 1 && (I[o++] = I[C++]))
                        }
                        break
                    }
                }
                break
            }
        } while (i < r && o < a);w = f >> 3,
        i -= w,
        f -= w << 3,
        p &= (1 << f) - 1,
        t.next_in = i,
        t.next_out = o,
        t.avail_in = i < r ? r - i + 5 : 5 - (i - r),
        t.avail_out = o < a ? a - o + 257 : 257 - (o - a),
        n.hold = p,
        n.bits = f
    }
}
, function(t, e, n) {
    "use strict";
    var i = n(9)
      , r = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0]
      , o = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78]
      , s = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0]
      , a = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64];
    t.exports = function(t, e, n, l, c, h, u, d) {
        var p, f, g, m, _, v, y, b, w, x = d.bits, C = 0, T = 0, k = 0, I = 0, L = 0, E = 0, P = 0, S = 0, j = 0, O = 0, A = null, R = 0, B = new i.Buf16(16), M = new i.Buf16(16), D = null, N = 0;
        for (C = 0; C <= 15; C++)
            B[C] = 0;
        for (T = 0; T < l; T++)
            B[e[n + T]]++;
        for (L = x,
        I = 15; I >= 1 && 0 === B[I]; I--)
            ;
        if (L > I && (L = I),
        0 === I)
            return c[h++] = 20971520,
            c[h++] = 20971520,
            d.bits = 1,
            0;
        for (k = 1; k < I && 0 === B[k]; k++)
            ;
        for (L < k && (L = k),
        S = 1,
        C = 1; C <= 15; C++)
            if (S <<= 1,
            (S -= B[C]) < 0)
                return -1;
        if (S > 0 && (0 === t || 1 !== I))
            return -1;
        for (M[1] = 0,
        C = 1; C < 15; C++)
            M[C + 1] = M[C] + B[C];
        for (T = 0; T < l; T++)
            0 !== e[n + T] && (u[M[e[n + T]]++] = T);
        if (0 === t ? (A = D = u,
        v = 19) : 1 === t ? (A = r,
        R -= 257,
        D = o,
        N -= 257,
        v = 256) : (A = s,
        D = a,
        v = -1),
        O = 0,
        T = 0,
        C = k,
        _ = h,
        E = L,
        P = 0,
        g = -1,
        j = 1 << L,
        m = j - 1,
        1 === t && j > 852 || 2 === t && j > 592)
            return 1;
        for (; ; ) {
            y = C - P,
            u[T] < v ? (b = 0,
            w = u[T]) : u[T] > v ? (b = D[N + u[T]],
            w = A[R + u[T]]) : (b = 96,
            w = 0),
            p = 1 << C - P,
            f = 1 << E,
            k = f;
            do {
                f -= p,
                c[_ + (O >> P) + f] = y << 24 | b << 16 | w | 0
            } while (0 !== f);for (p = 1 << C - 1; O & p; )
                p >>= 1;
            if (0 !== p ? (O &= p - 1,
            O += p) : O = 0,
            T++,
            0 == --B[C]) {
                if (C === I)
                    break;
                C = e[n + u[T]]
            }
            if (C > L && (O & m) !== g) {
                for (0 === P && (P = L),
                _ += k,
                E = C - P,
                S = 1 << E; E + P < I && !((S -= B[E + P]) <= 0); )
                    E++,
                    S <<= 1;
                if (j += 1 << E,
                1 === t && j > 852 || 2 === t && j > 592)
                    return 1;
                g = O & m,
                c[g] = L << 24 | E << 16 | _ - h | 0
            }
        }
        return 0 !== O && (c[_ + O] = C - P << 24 | 64 << 16 | 0),
        d.bits = L,
        0
    }
}
, function(t, e, n) {
    "use strict";
    function i() {
        this.text = 0,
        this.time = 0,
        this.xflags = 0,
        this.os = 0,
        this.extra = null,
        this.extra_len = 0,
        this.name = "",
        this.comment = "",
        this.hcrc = 0,
        this.done = !1
    }
    t.exports = i
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = n(8)
          , r = n(1)
          , o = function() {
            function e() {}
            return e.getBounds = function(t, n) {
                var r = n
                  , o = null;
                return e.cache[r]instanceof i.Rectangle ? o = e.cache[r] : (o = e.getSvgBounds(t),
                e.cache[r] = o),
                o
            }
            ,
            e.getCanvas = function() {
                if (null == e.calcCanvas) {
                    var t = document.createElement("canvas");
                    t.width = 5e3,
                    t.height = 3e3,
                    e.calcCanvas = t
                }
                return e.calcCanvas
            }
            ,
            e.getSvgBounds = function(n) {
                var o = e.getCanvas().getContext("2d")
                  , s = t(n)
                  , a = parseInt(s[0].getAttribute("width"))
                  , l = parseInt(s[0].getAttribute("height"))
                  , c = a
                  , h = l
                  , u = 0
                  , d = 0
                  , p = 0
                  , f = 0
                  , g = 1
                  , m = 1;
                if (o.setTransform(1, 0, 0, 1, 0, 0),
                o.globalAlpha = 1,
                o.fillStyle = "#ffffff",
                r.Matrix.resetContext2d(o),
                o.clearRect(0, 0, o.canvas.width, o.canvas.height),
                e.calcCanvas.width < a || e.calcCanvas.height < l) {
                    g = o.canvas.width / a,
                    m = o.canvas.height / l,
                    g = .9 * Math.min(g, m),
                    m = g;
                    var _ = new r.Matrix;
                    _.scale(g, m),
                    _.setToContext2d(o)
                }
                o.drawSvg(n, 0, 0, a, l);
                for (var v = o.getImageData(0, 0, a, l), y = 0; y < v.data.length; y += 4) {
                    var b = (v.data[y],
                    v.data[y + 1],
                    v.data[y + 2],
                    v.data[y + 3]);
                    p = y / 4 % a,
                    f = y / 4 / a,
                    0 != b && (c = Math.min(c, p),
                    h = Math.min(h, f),
                    u = Math.max(u, p),
                    d = Math.max(d, f))
                }
                return a = u - c,
                l = d - h,
                c /= g,
                h /= m,
                a /= g,
                l /= m,
                new i.Rectangle(c,h,a,l)
            }
            ,
            e.cache = {},
            e.calcCanvas = null,
            e
        }();
        e.SvgBoundsManager = o
    }
    ).call(e, n(0))
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(7)
      , o = n(78)
      , s = n(12)
      , a = n(6)
      , l = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e.text = "",
            e.font = null,
            e.type = r.LogoItem.RICH_TEXT,
            e
        }
        return i(e, t),
        Object.defineProperty(e.prototype, "maths", {
            get: function() {
                return this._maths
            },
            set: function(t) {
                this._maths = t
            },
            enumerable: !0,
            configurable: !0
        }),
        e.prototype.serialize = function() {
            var t = {
                id: this.id,
                type: this.type,
                group: this.group,
                fontId: this.font.id,
                maths: this.maths.serialize(),
                text: this.text,
                fill: a.Fill.serialize(this.fill),
                blendMode: this.blendMode
            };
            return JSON.stringify(t)
        }
        ,
        e.deserialize = function(t) {
            var n = new e;
            return n.id = t.i,
            n.group = t.g,
            n.text = t.tt,
            n.maths = o.RichTextMaths.deserialize(t.m),
            n.font = s.Font.fromId(t.ft),
            n.blendMode = t.bm,
            n._source = n.clone(),
            n
        }
        ,
        e.prototype.clone = function() {
            var t = new e;
            return t.id = this.id,
            t.uid = this.uid,
            t.group = this.group,
            t.bounds = this._bounds ? this._bounds.clone() : null,
            t.maths = this.maths ? this.maths.clone() : null,
            t.fill = this.fill ? this.fill.clone() : null,
            t.text = this.text,
            t.font = this.font ? this.font : null,
            t.blendMode = this.blendMode,
            t
        }
        ,
        e.prototype.hasChanges = function() {
            return t.prototype.hasChanges.call(this) || this.text !== this._source.text || this.font.id !== this._source.font.id
        }
        ,
        e.prototype.debug = function() {
            var e = t.prototype.debug.call(this);
            return "Type: Rich text\nFontId: " + this.font.id + "\nFontName: " + this.font.fontFamily + "\n" + e + "\n"
        }
        ,
        e
    }(r.LogoItem);
    e.RichText = l
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(13)
      , o = n(1)
      , s = n(8)
      , a = function(t) {
        function e() {
            var e = null !== t && t.apply(this, arguments) || this;
            return e.charMatrices = [],
            e.bgShape = null,
            e.bgWidth = null,
            e.bgHeight = null,
            e.bgInner = null,
            e.bgCornerRadius = null,
            e.bgInnerAlign = null,
            e
        }
        return i(e, t),
        e.prototype.serialize = function() {
            var t = this.matrix.serialize();
            this.bgShape == e.SHAPE_RECTANGLE || this.bgShape == e.SHAPE_CIRCLE ? (t += "\n" + this.bgShape + " " + this.bgWidth + " " + this.bgHeight + " " + this.bgInner.x + " " + this.bgInner.y + " " + this.bgInner.width + " " + this.bgInner.height,
            this.bgInnerAlign && (t += " " + this.bgInnerAlign)) : this.bgShape == e.SHAPE_ROUNDED_RECTANGLE && (t += "\n" + this.bgShape + " " + this.bgWidth + " " + this.bgHeight + " " + this.bgCornerRadius + " " + this.bgInner.x + " " + this.bgInner.y + " " + this.bgInner.width + " " + this.bgInner.height,
            this.bgInnerAlign && (t += " " + this.bgInnerAlign));
            for (var n = 0, i = this.charMatrices; n < i.length; n++) {
                t += "\n" + i[n].serialize()
            }
            return t
        }
        ,
        e.deserialize = function(t) {
            var n = new e
              , i = t.split("\n");
            n.matrix = o.Matrix.deserialize(i[0]);
            var r = i[1].split(" ");
            r[0] == e.SHAPE_RECTANGLE || r[0] == e.SHAPE_CIRCLE ? (n.bgShape = r[0],
            n.bgWidth = Number(r[1]),
            n.bgHeight = Number(r[2]),
            n.bgInner = new s.Rectangle(Number(r[3]),Number(r[4]),Number(r[5]),Number(r[6])),
            void 0 !== r[7] && (n.bgInnerAlign = r[7])) : r[0] == e.SHAPE_ROUNDED_RECTANGLE && (n.bgShape = r[0],
            n.bgWidth = Number(r[1]),
            n.bgHeight = Number(r[2]),
            n.bgCornerRadius = Number(r[3]),
            n.bgInner = new s.Rectangle(Number(r[4]),Number(r[5]),Number(r[6]),Number(r[7])),
            void 0 !== r[8] && (n.bgInnerAlign = r[8]));
            var a = 1;
            for (null !== n.bgShape && (a = 2),
            a; a < i.length; a++) {
                var l = i[a]
                  , c = o.Matrix.deserialize(l);
                n.charMatrices.push(c)
            }
            return n
        }
        ,
        e.prototype.clone = function() {
            return e.deserialize(this.serialize())
        }
        ,
        e.prototype.equals = function(t) {
            throw new Error("Needed to implement after using RichTextMaths")
        }
        ,
        e.SHAPE_RECTANGLE = "r",
        e.SHAPE_ROUNDED_RECTANGLE = "rr",
        e.SHAPE_CIRCLE = "c",
        e
    }(r.Maths);
    e.RichTextMaths = a
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(7)
      , o = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e.text = null,
            e.font = null,
            e.cornerRadius = 0,
            e.svg = null,
            e.type = r.LogoItem.TEXT_ICON,
            e.cornerRadius = 1,
            e
        }
        return i(e, t),
        e.prototype.debug = function() {
            var e = t.prototype.debug.call(this);
            return "Type: Text icon\nFontId: " + this.font.id + "\nFontName: " + this.font.fontFamily + "\n" + e + "\n"
        }
        ,
        e
    }(r.LogoItem);
    e.TextIcon = o
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(15)
      , o = n(3)
      , s = n(1)
      , a = n(22)
      , l = function(t) {
        function e() {
            var e = null !== t && t.apply(this, arguments) || this;
            return e.fontSize = o.Logo.LOGO_TEXT_SIZE,
            e
        }
        return i(e, t),
        Object.defineProperty(e.prototype, "item", {
            get: function() {
                return this._item
            },
            enumerable: !0,
            configurable: !0
        }),
        e.prototype.initializeTransformable = function() {
            var t = this._item.bounds.width
              , e = this._item.bounds.height;
            (t <= 0 || e <= 0) && (t = 10,
            e = this.item.font.capHeightPx()),
            this.transformable = new a.Transformable(t,e,this.getMatrixForTransformable(),this)
        }
        ,
        e.prototype.draw = function(t) {
            void 0 === t && (t = null),
            this.context2d.save(),
            this.item.blendManager.toContext2d(this.item.blendMode, this.context2d),
            this.getFill(t).toContext2d(this.context2d, this.item.bounds),
            this.context2d.font = this.fontSize + "px '" + this.item.font.fontFamily + "'";
            var e = this.getMatrixForContext2d();
            if (0 === this.item.maths.kerning)
                e.scale(this.zoom, this.zoom),
                null !== this.offsetMatrix && e.concat(this.offsetMatrix),
                e.setToContext2d(this.context2d),
                this.context2d.fillText(this.item.text, 0, 0);
            else
                for (var n = this.item.text.split(""), i = 0, r = new s.Matrix, o = 0; o < n.length; o++) {
                    var a = n[o]
                      , l = this.item.font.glyphWidth(a);
                    if (o > 0) {
                        var c = n[o - 1];
                        i += this.item.font.kerning(c, a),
                        i += this.item.maths.kerning
                    }
                    r.identity(),
                    r.translate(this.item.font.fUnitsToPx(i), 0),
                    r.concat(e),
                    r.scale(this.zoom, this.zoom),
                    null !== this.offsetMatrix && r.concat(this.offsetMatrix),
                    r.setToContext2d(this.context2d),
                    this.context2d.fillText(a, 0, 0),
                    i += l
                }
            this.context2d.restore()
        }
        ,
        e
    }(r.LogoItemView);
    e.TextView = l
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(15)
      , o = function(t) {
        function e() {
            return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t),
        Object.defineProperty(e.prototype, "item", {
            get: function() {
                return this._item
            },
            enumerable: !0,
            configurable: !0
        }),
        e.prototype.draw = function() {}
        ,
        e
    }(r.LogoItemView);
    e.RichTextView = o
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(15)
      , o = function(t) {
        function e() {
            return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t),
        Object.defineProperty(e.prototype, "item", {
            get: function() {
                return this._item
            },
            enumerable: !0,
            configurable: !0
        }),
        e
    }(r.LogoItemView);
    e.TextIconView = o
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(15)
      , o = function(t) {
        function e() {
            return null !== t && t.apply(this, arguments) || this
        }
        return i(e, t),
        Object.defineProperty(e.prototype, "item", {
            get: function() {
                return this._item
            },
            enumerable: !0,
            configurable: !0
        }),
        e.prototype.draw = function(t) {
            void 0 === t && (t = null),
            this.context2d.save(),
            this.item.blendManager.toContext2d(this.item.blendMode, this.context2d);
            var e = this.item.maths.matrix.clone();
            e.scale(this.zoom, this.zoom),
            null !== this.offsetMatrix && e.concat(this.offsetMatrix),
            e.setToContext2d(this.context2d),
            this.getFill(t).toContext2d(this.context2d, this.item.bounds),
            this.item.maths.p1.x == this.item.maths.p2.x ? this.context2d.fillRect(Math.round(Math.min(this.item.maths.p1.x, this.item.maths.p2.x) - this.item.maths.lineWidth / 2), Math.round(Math.min(this.item.maths.p1.y, this.item.maths.p2.y)), Math.round(this.item.maths.lineWidth), Math.round(Math.max(this.item.maths.p1.y, this.item.maths.p2.y) - Math.min(this.item.maths.p1.y, this.item.maths.p2.y))) : this.item.maths.p1.y == this.item.maths.p2.y ? this.context2d.fillRect(Math.round(Math.min(this.item.maths.p1.x, this.item.maths.p2.x)), Math.round(Math.min(this.item.maths.p1.y, this.item.maths.p2.y) - this.item.maths.lineWidth / 2), Math.round(Math.max(this.item.maths.p1.x, this.item.maths.p2.x) - Math.min(this.item.maths.p1.x, this.item.maths.p2.x)), Math.round(this.item.maths.lineWidth)) : (this.context2d.lineWidth = this.item.maths.lineWidth,
            this.context2d.beginPath(),
            this.context2d.moveTo(this.item.maths.p1.x, this.item.maths.p1.y),
            this.context2d.lineTo(this.item.maths.p2.x, this.item.maths.p2.y),
            this.context2d.stroke()),
            this.context2d.restore()
        }
        ,
        e
    }(r.LogoItemView);
    e.LineView = o
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(16)
      , r = function() {
        function t() {}
        return t.getInstance = function() {
            return null === t._instance && (t._instance = new t),
            t._instance
        }
        ,
        t.prototype.buildTextItem = function(t, e, n) {
            if (null !== n) {
                var r = n.getItemByTarget(e.target);
                if (null !== r) {
                    var o = i.BrandProduct.getTemplateById(n.template.id, n.templates)
                      , s = o.getItemByTarget(e.target);
                    r.content !== s.content && (e.content = r.content)
                }
            }
        }
        ,
        t.prototype.buildLogoItem = function(t, e, n) {
            void 0 === n && (n = null),
            e.logo = t.getLogo(e.logoType, e.withSlogan)
        }
        ,
        t.prototype.buildSvgItem = function(t, e, n) {
            void 0 === n && (n = null)
        }
        ,
        t._instance = null,
        t
    }();
    e.BrandProductBuilder = r
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(67)
      , o = function(t) {
        function e(e) {
            var n = t.call(this) || this;
            return n.dropDown = null,
            n.changeCallback = null,
            n.container = e,
            n.bindHandlers(),
            n
        }
        return i(e, t),
        e.prototype.bindHandlers = function() {
            t.prototype.bindHandlers.call(this),
            this.changeHandler = this.changeHandler.bind(this)
        }
        ,
        e.prototype.render = function() {}
        ,
        e.prototype.update = function(t) {}
        ,
        e.prototype.changeHandler = function(t) {
            this.changeCallback && this.changeCallback()
        }
        ,
        e.prototype.hide = function() {
            this.dropDown.close()
        }
        ,
        e
    }(r.LogasterPopup);
    e.DropDown = o
}
, , function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(117)
      , r = n(118)
      , o = function() {
        function t() {}
        return t.prototype.process = function(t, e) {
            void 0 === e && (e = "");
            var n = new i.UserInputData;
            return this.update(n, t, e),
            n
        }
        ,
        t.prototype.update = function(e, n, i) {
            void 0 === i && (i = "");
            var r = null
              , o = e.slogan !== i;
            if (e.text !== n) {
                var s = t.separate(n);
                if (s.length > 4 || s.join(" ").length > 25) {
                    r = [],
                    n = "";
                    for (var a, l = 0, c = 0, h = 0, u = s; h < u.length; h++) {
                        var d = u[h];
                        a = d.length;
                        {
                            if (!(c < 4 && l + a < 26))
                                break;
                            c++,
                            l += a,
                            n += d + " "
                        }
                    }
                    if (n = n.trim(),
                    c > 0)
                        r = s.slice(c),
                        s = s.slice(0, c);
                    else {
                        var p = s[0];
                        n = p.slice(0, 25),
                        r = [p.slice(25)].concat(s.slice(1)),
                        s = [n]
                    }
                    o = !0
                }
                var f = this.getAbbr(s);
                e.text = n,
                e.words = s.length,
                e.texts = this.makeTextVariations(n, s),
                e.abbrs = this.makerAbbrVariations(f, s)
            }
            if (o) {
                var g = t.separate(i);
                null !== r && (g = r.concat(g)),
                i = g.join(" "),
                e.slogan = i,
                e.sloganWords = g.length,
                e.slogans = this.makeTextVariations(i, g, !0)
            }
        }
        ,
        t.prototype.shortWords = function(t) {
            for (var e = !0, n = 0; n < t.length; n++)
                e = e && (2 == t[n].length || 3 == t[n].length);
            return e
        }
        ,
        t.prototype.makeTextVariations = function(t, e, n) {
            void 0 === n && (n = !1);
            var i = [];
            if (e.length > 0 && i.push(new r.TextVariation(e)),
            e.length > 1 && i.push(new r.TextVariation([t])),
            2 == e.length ? i.push(new r.TextVariation([this.concat(e[0], e[1])])) : 3 == e.length ? (i.push(new r.TextVariation([this.concat(e[0], e[1]), e[2]])),
            i.push(new r.TextVariation([e[0], this.concat(e[1], e[2])]))) : 4 == e.length ? (i.push(new r.TextVariation([this.concat(e[0], e[1]), e[2], e[3]])),
            i.push(new r.TextVariation([this.concat(e[0], e[1]), this.concat(e[2], e[3])])),
            i.push(new r.TextVariation([e[0], this.concat(e[1], e[2]), e[3]])),
            i.push(new r.TextVariation([e[0], e[1], this.concat(e[2], e[3])])),
            i.push(new r.TextVariation([this.concat(e[0], this.concat(e[1], e[2])), e[3]])),
            i.push(new r.TextVariation([e[0], this.concat(e[1], this.concat(e[2], e[3]))]))) : 5 == e.length ? (i.push(new r.TextVariation([this.concat(e[0], e[1]), e[2], e[3], e[4]])),
            i.push(new r.TextVariation([e[0], this.concat(e[1], e[2]), e[3], e[4]])),
            i.push(new r.TextVariation([e[0], e[1], this.concat(e[2], e[3]), e[4]])),
            i.push(new r.TextVariation([this.concat(e[0], e[1]), this.concat(e[2], e[3]), e[4]])),
            i.push(new r.TextVariation([e[0], e[1], e[2], this.concat(e[3], e[4])])),
            i.push(new r.TextVariation([this.concat(e[0], e[1]), e[2], this.concat(e[3], e[4])])),
            i.push(new r.TextVariation([e[0], this.concat(e[1], e[2]), this.concat(e[3], e[4])])),
            i.push(new r.TextVariation([this.concat(e[0], this.concat(e[1], e[2])), this.concat(e[3], e[4])])),
            i.push(new r.TextVariation([e[0], this.concat(this.concat(e[1], this.concat(e[2], e[3])), e[4])])),
            i.push(new r.TextVariation([e[0], e[1], this.concat(e[2], this.concat(e[3], e[4]))]))) : 6 == e.length && (i.push(new r.TextVariation([this.concat(e[0], e[1]), e[2], e[3], e[4], e[5]])),
            i.push(new r.TextVariation([this.concat(e[0], e[1]), e[2], e[3], this.concat(e[4], e[5])])),
            i.push(new r.TextVariation([e[0], this.concat(e[1], e[2]), e[3], e[4], e[5]])),
            i.push(new r.TextVariation([e[0], this.concat(e[1], e[2]), e[3], this.concat(e[4], e[5])])),
            i.push(new r.TextVariation([e[0], e[1], this.concat(e[2], e[3]), e[4], e[5]])),
            i.push(new r.TextVariation([this.concat(e[0], e[1]), this.concat(e[2], e[3]), e[4], e[5]])),
            i.push(new r.TextVariation([e[0], e[1], this.concat(e[2], e[3]), this.concat(e[4], e[5])])),
            i.push(new r.TextVariation([e[0], e[1], e[2], this.concat(e[3], e[4]), e[5]])),
            i.push(new r.TextVariation([e[0], this.concat(e[1], e[2]), this.concat(e[3], e[4]), e[5]])),
            i.push(new r.TextVariation([this.concat(e[0], e[1]), e[2], this.concat(e[3], e[4]), e[5]])),
            i.push(new r.TextVariation([e[0], e[1], e[2], e[3], this.concat(e[4], e[5])])),
            i.push(new r.TextVariation([this.concat(e[0], this.concat(e[1], e[2])), this.concat(e[3], e[4]), e[5]])),
            i.push(new r.TextVariation([this.concat(e[0], this.concat(e[1], e[2])), e[3], this.concat(e[4], e[5])])),
            i.push(new r.TextVariation([e[0], this.concat(e[1], this.concat(e[2], e[3])), e[4], e[5]])),
            i.push(new r.TextVariation([e[0], this.concat(e[1], this.concat(e[2], e[3])), this.concat(e[4], e[5])])),
            i.push(new r.TextVariation([e[0], e[1], this.concat(e[2], this.concat(e[3], e[4])), e[5]])),
            i.push(new r.TextVariation([this.concat(e[0], e[1]), this.concat(e[2], this.concat(e[3], e[4])), e[5]])),
            i.push(new r.TextVariation([e[0], e[1], e[2], this.concat(e[3], this.concat(e[4], e[5]))])),
            i.push(new r.TextVariation([this.concat(e[0], this.concat(e[1], e[2])), this.concat(e[3], this.concat(e[4], e[5]))])),
            i.push(new r.TextVariation([this.concat(e[0], e[1]), e[2], this.concat(e[3], this.concat(e[4], e[5]))])),
            i.push(new r.TextVariation([e[0], this.concat(e[1], e[2]), this.concat(e[3], this.concat(e[4], e[5]))]))),
            !this.shortWords(e) && !n) {
                for (var o, s = [], a = 0, l = i; a < l.length; a++) {
                    var c = l[a];
                    o = !0;
                    for (var h = 0, u = c; h < u.length; h++) {
                        var d = u[h];
                        o = o && d.length >= 4
                    }
                    o && s.push(c)
                }
                i = s,
                s = [];
                for (var p = 0, f = i; p < f.length; p++) {
                    var c = f[p];
                    1 == c.length && i.length > 1 || s.push(c)
                }
                0 == s.length && s.push(i[0]),
                i = s
            }
            return i
        }
        ,
        t.prototype.makerAbbrVariations = function(t, e) {
            var n = [];
            return t.length > 0 && n.push(t),
            2 == e.length ? n.push([t[0] + t[1]]) : 3 == e.length ? n.push([t[0] + t[1] + t[2]]) : 4 == e.length ? (n.push([t[0] + t[1], t[2] + t[3]]),
            n.push([t[0] + t[1] + t[2] + t[3]])) : 5 == e.length ? n.push([t[0] + t[1] + t[2] + t[3] + t[4]]) : 6 == e.length && (n.push([t[0] + t[1] + t[2] + t[3] + t[4] + t[5]]),
            n.push([t[0] + t[1] + t[2], t[3] + t[4] + t[5]]),
            n.push([t[0] + t[1], t[2] + t[3], t[4] + t[5]])),
            n
        }
        ,
        t.getAbbrByLength = function(t, e, n) {
            void 0 === e && (e = 0);
            var i = ""
              , r = 0;
            n += e;
            for (var r = e; r < t.abbrs[0].length; r++)
                r <= n - 1 && (i += t.abbrs[0][r]);
            return i
        }
        ,
        t.separate = function(t) {
            for (var e = /([!"|#$%&()*+,-.\\\/:;<=>?@\[\]^_`{}~\r\t])/gm, n = t.replace(e, "$1 ").split(" "), i = [], r = 0, o = n; r < o.length; r++) {
                var s = o[r];
                "" !== s && i.push(s)
            }
            return i
        }
        ,
        t.prototype.getAbbr = function(t) {
            for (var e = [], n = 0, i = t; n < i.length; n++) {
                var r = i[n];
                e.push(r[0])
            }
            return e
        }
        ,
        t.prototype.concat = function(t, e) {
            return isNaN(t) && isNaN(e) ? t + " " + e : t + e
        }
        ,
        t
    }();
    e.UserInputProcessor = o
}
, function(t, e, n) {
    var i = n(108)
      , r = n(96)
      , o = n(66)
      , s = n(146)
      , a = i(Object, "keys")
      , l = a ? function(t) {
        var e = null == t ? void 0 : t.constructor;
        return "function" == typeof e && e.prototype === t || "function" != typeof t && r(t) ? s(t) : o(t) ? a(t) : []
    }
    : s;
    t.exports = l
}
, function(t, e) {
    function n(t) {
        return !!t && "object" == typeof t
    }
    t.exports = n
}
, function(t, e, n) {
    var i = n(108)
      , r = n(55)
      , o = n(89)
      , s = Object.prototype
      , a = s.toString
      , l = i(Array, "isArray")
      , c = l || function(t) {
        return o(t) && r(t.length) && "[object Array]" == a.call(t)
    }
    ;
    t.exports = c
}
, function(module, exports, __webpack_require__) {
    (function(jQuery) {
        var msBeautify = msBeautify || {};
        !function($) {
            function dd(element, settings) {
                var settings = $.extend(!0, {
                    byJson: {
                        data: null,
                        selectedIndex: 0,
                        name: null,
                        size: 0,
                        multiple: !1,
                        width: 250
                    },
                    mainCSS: "dd",
                    height: 120,
                    visibleRows: 7,
                    rowHeight: 0,
                    showIcon: !0,
                    zIndex: 9999,
                    useSprite: !1,
                    animStyle: "slideDown",
                    event: "click",
                    openDirection: "auto",
                    jsonTitle: !0,
                    style: "",
                    disabledOpacity: .7,
                    disabledOptionEvents: !0,
                    childWidth: 0,
                    enableCheckbox: !1,
                    checkboxNameSuffix: "_mscheck",
                    append: "",
                    prepend: "",
                    reverseMode: !0,
                    roundedCorner: !0,
                    enableAutoFilter: !0,
                    on: {
                        create: null,
                        open: null,
                        close: null,
                        add: null,
                        remove: null,
                        change: null,
                        blur: null,
                        click: null,
                        dblclick: null,
                        mousemove: null,
                        mouseover: null,
                        mouseout: null,
                        focus: null,
                        mousedown: null,
                        mouseup: null
                    }
                }, settings), $this = this, holderId = {
                    postElementHolder: "_msddHolder",
                    postID: "_msdd",
                    postTitleID: "_title",
                    postTitleTextID: "_titleText",
                    postChildID: "_child"
                }, css = {
                    dd: settings.mainCSS,
                    ddTitle: "ddTitle",
                    arrow: "ddArrow arrowoff",
                    ddChild: "ddChild",
                    ddTitleText: "ddTitleText",
                    disabled: "disabled",
                    enabled: "enabled",
                    ddOutOfVision: "ddOutOfVision",
                    borderTop: "borderTop",
                    noBorderTop: "noBorderTop",
                    selected: "selected",
                    divider: "divider",
                    optgroup: "optgroup",
                    optgroupTitle: "optgroupTitle",
                    description: "description",
                    label: "ddlabel",
                    hover: "hover",
                    disabledAll: "disabledAll"
                }, css_i = {
                    li: "_msddli_",
                    borderRadiusTp: "borderRadiusTp",
                    ddChildMore: "border shadow",
                    fnone: "fnone"
                }, isList = !1, isMultiple = !1, isDisabled = !1, cacheElement = {}, element, orginial = {}, isOpen = !1, DOWN_ARROW = 40, UP_ARROW = 38, LEFT_ARROW = 37, RIGHT_ARROW = 39, ESCAPE = 27, ENTER = 13, ALPHABETS_START = 47, SHIFT = 16, CONTROL = 17, BACKSPACE = 8, DELETE = 46, shiftHolded = !1, controlHolded = !1, lastTarget = null, forcedTrigger = !1, oldSelected, isCreated = !1, doc = document, ua = window.navigator.userAgent, isIE = ua.match(/msie/i);
                settings.reverseMode = settings.reverseMode.toString(),
                settings.roundedCorner = settings.roundedCorner.toString();
                var isArray = function(t) {
                    return "[object Array]" == Object.prototype.toString.call(t)
                }
                  , msieversion = function() {
                    var t = ua.indexOf("MSIE");
                    return t > 0 ? parseInt(ua.substring(t + 5, ua.indexOf(".", t))) : 0
                }
                  , checkDataSetting = function() {
                    settings.mainCSS = $("#" + element).data("maincss") || settings.mainCSS,
                    settings.visibleRows = $("#" + element).data("visiblerows") || settings.visibleRows,
                    0 == $("#" + element).data("showicon") && (settings.showIcon = $("#" + element).data("showicon")),
                    settings.useSprite = $("#" + element).data("usesprite") || settings.useSprite,
                    settings.animStyle = $("#" + element).data("animstyle") || settings.animStyle,
                    settings.event = $("#" + element).data("event") || settings.event,
                    settings.openDirection = $("#" + element).data("opendirection") || settings.openDirection,
                    settings.jsonTitle = $("#" + element).data("jsontitle") || settings.jsonTitle,
                    settings.disabledOpacity = $("#" + element).data("disabledopacity") || settings.disabledOpacity,
                    settings.childWidth = $("#" + element).data("childwidth") || settings.childWidth,
                    settings.enableCheckbox = $("#" + element).data("enablecheckbox") || settings.enableCheckbox,
                    settings.checkboxNameSuffix = $("#" + element).data("checkboxnamesuffix") || settings.checkboxNameSuffix,
                    settings.append = $("#" + element).data("append") || settings.append,
                    settings.prepend = $("#" + element).data("prepend") || settings.prepend,
                    settings.reverseMode = $("#" + element).data("reversemode") || settings.reverseMode,
                    settings.roundedCorner = $("#" + element).data("roundedcorner") || settings.roundedCorner,
                    settings.enableAutoFilter = $("#" + element).data("enableautofilter") || settings.enableAutoFilter,
                    settings.reverseMode = settings.reverseMode.toString(),
                    settings.roundedCorner = settings.roundedCorner.toString(),
                    settings.enableAutoFilter = settings.enableAutoFilter.toString()
                }
                  , getElement = function(t) {
                    return void 0 === cacheElement[t] && (cacheElement[t] = doc.getElementById(t)),
                    cacheElement[t]
                }
                  , getIndex = function(t) {
                    var e = getPostID("postChildID");
                    return $("#" + e + " li." + css_i.li).index(t)
                }
                  , createByJson = function() {
                    if (settings.byJson.data) {
                        var validData = ["description", "image", "title"];
                        try {
                            element.id || (element.id = "dropdown" + msBeautify.counter),
                            settings.byJson.data = eval(settings.byJson.data);
                            var id = "msdropdown" + msBeautify.counter++
                              , obj = {};
                            obj.id = id,
                            obj.name = settings.byJson.name || element.id,
                            settings.byJson.size > 0 && (obj.size = settings.byJson.size),
                            obj.multiple = settings.byJson.multiple;
                            for (var oSelect = createElement("select", obj), i = 0; i < settings.byJson.data.length; i++) {
                                var current = settings.byJson.data[i]
                                  , opt = new Option(current.text,current.value);
                                for (var p in current)
                                    if ("text" != p.toLowerCase()) {
                                        var key = -1 != $.inArray(p.toLowerCase(), validData) ? "data-" : "";
                                        opt.setAttribute(key + p, current[p])
                                    }
                                oSelect.options[i] = opt
                            }
                            getElement(element.id).appendChild(oSelect),
                            oSelect.selectedIndex = settings.byJson.selectedIndex,
                            $(oSelect).css({
                                width: settings.byJson.width + "px"
                            }),
                            element = oSelect
                        } catch (t) {
                            throw "There is an error in json data."
                        }
                    }
                }
                  , init = function() {
                    createByJson(),
                    element.id || (element.id = "msdrpdd" + msBeautify.counter++),
                    element = element.id,
                    $this.element = element,
                    checkDataSetting(),
                    isDisabled = getElement(element).disabled,
                    "true" === settings.enableCheckbox.toString() && (getElement(element).multiple = !0,
                    settings.enableCheckbox = !0),
                    isList = getElement(element).size > 1 || 1 == getElement(element).multiple,
                    isList && (isMultiple = getElement(element).multiple),
                    mergeAllProp(),
                    createLayout(),
                    updateProp("uiData", getDataAndUI()),
                    updateProp("selectedOptions", $("#" + element + " option:selected"));
                    var t = getPostID("postChildID");
                    oldSelected = $("#" + t + " li." + css.selected),
                    "true" === settings.reverseMode && $("#" + element).on("change", function() {
                        setValue(this.selectedIndex)
                    }),
                    getElement(element).refresh = function(t) {
                        $("#" + element).msDropdown().data("dd").refresh()
                    }
                }
                  , getPostID = function(t) {
                    return element + holderId[t]
                }
                  , getInternalStyle = function(t) {
                    return void 0 === t.style ? "" : t.style.cssText
                }
                  , parseOption = function(opt) {
                    var imagePath = "", title = "", description = "", value = -1, text = "", className = "", imagecss = "", index;
                    if (void 0 !== opt) {
                        var attrTitle = opt.title || "";
                        if ("" != attrTitle) {
                            var reg = /^\{.*\}$/
                              , isJson = reg.test(attrTitle);
                            if (isJson && settings.jsonTitle)
                                var obj = eval("[" + attrTitle + "]");
                            title = isJson && settings.jsonTitle ? obj[0].title : title,
                            description = isJson && settings.jsonTitle ? obj[0].description : description,
                            imagePath = isJson && settings.jsonTitle ? obj[0].image : attrTitle,
                            imagecss = isJson && settings.jsonTitle ? obj[0].imagecss : imagecss,
                            index = opt.index
                        }
                        text = opt.text || "",
                        value = opt.value || "",
                        className = opt.className || "",
                        title = $(opt).prop("data-title") || $(opt).data("title") || title || "",
                        description = $(opt).prop("data-description") || $(opt).data("description") || description || "",
                        imagePath = $(opt).prop("data-image") || $(opt).data("image") || imagePath || "",
                        imagecss = $(opt).prop("data-imagecss") || $(opt).data("imagecss") || imagecss || "",
                        index = $(opt).index()
                    }
                    var o = {
                        image: imagePath,
                        title: title,
                        description: description,
                        value: value,
                        text: text,
                        className: className,
                        imagecss: imagecss,
                        index: index
                    };
                    return o
                }
                  , createElement = function(t, e, n) {
                    var i = doc.createElement(t);
                    if (e)
                        for (var r in e)
                            switch (r) {
                            case "style":
                                i.style.cssText = e[r];
                                break;
                            default:
                                i[r] = e[r]
                            }
                    return n && (i.innerHTML = n),
                    i
                }
                  , hideOriginal = function() {
                    var t = getPostID("postElementHolder");
                    if (0 == $("#" + t).length) {
                        var e = {
                            style: "height: 0px;overflow: hidden;position: absolute;",
                            className: css.ddOutOfVision
                        };
                        e.id = t;
                        var n = createElement("div", e);
                        $("#" + element).after(n),
                        $("#" + element).appendTo($("#" + t))
                    } else
                        $("#" + t).css({
                            height: 0,
                            overflow: "hidden",
                            position: "absolute"
                        });
                    getElement(element).tabIndex = -1
                }
                  , createWrapper = function() {
                    var t = "true" == settings.roundedCorner ? " borderRadius" : ""
                      , e = {
                        className: css.dd + " ddcommon" + t
                    }
                      , n = getInternalStyle(getElement(element))
                      , i = $("#" + element).outerWidth();
                    return e.style = "width: " + i + "px;",
                    n.length > 0 && (e.style = e.style + "" + n),
                    e.id = getPostID("postID"),
                    e.tabIndex = getElement(element).tabIndex,
                    createElement("div", e)
                }
                  , createTitle = function() {
                    var t;
                    t = getElement(element).selectedIndex >= 0 ? getElement(element).options[getElement(element).selectedIndex] : {
                        value: "",
                        text: ""
                    };
                    var e = ""
                      , n = ""
                      , i = $("#" + element).data("usesprite");
                    i && (settings.useSprite = i),
                    0 != settings.useSprite && (e = " " + settings.useSprite,
                    n = " " + t.className);
                    var r = "true" == settings.roundedCorner ? " " + css_i.borderRadiusTp : ""
                      , o = createElement("div", {
                        className: css.ddTitle + e + r
                    })
                      , s = createElement("span", {
                        className: css.divider
                    })
                      , a = createElement("span", {
                        className: css.arrow
                    })
                      , l = getPostID("postTitleID")
                      , c = createElement("span", {
                        className: css.ddTitleText + n,
                        id: l
                    })
                      , h = parseOption(t)
                      , u = h.image
                      , d = h.text || "";
                    if ("" != u && settings.showIcon) {
                        var p = createElement("img");
                        p.src = u,
                        "" != h.imagecss && (p.className = h.imagecss + " ")
                    }
                    var f = createElement("span", {
                        className: css.label
                    }, d);
                    o.appendChild(s),
                    o.appendChild(a),
                    p && c.appendChild(p),
                    c.appendChild(f),
                    o.appendChild(c);
                    var g = createElement("span", {
                        className: css.description
                    }, h.description);
                    return c.appendChild(g),
                    o
                }
                  , createFilterBox = function() {
                    var t = getPostID("postTitleTextID")
                      , e = "true" == settings.roundedCorner ? "borderRadius" : "";
                    return createElement("input", {
                        id: t,
                        type: "text",
                        value: "",
                        autocomplete: "off",
                        className: "text shadow " + e,
                        style: "display: none"
                    })
                }
                  , createChild = function(t) {
                    var e = {}
                      , n = getInternalStyle(t);
                    n.length > 0 && (e.style = n);
                    var i = t.disabled ? css.disabled : css.enabled;
                    i = t.selected ? i + " " + css.selected : i,
                    i = i + " " + css_i.li,
                    e.className = i,
                    0 != settings.useSprite && (e.className = i + " " + t.className);
                    var r = createElement("li", e)
                      , o = parseOption(t);
                    "" != o.title && (r.title = o.title);
                    var s = o.image;
                    if ("" != s && settings.showIcon) {
                        var a = createElement("img");
                        a.src = s,
                        "" != o.imagecss && (a.className = o.imagecss + " ")
                    }
                    if ("" != o.description)
                        var l = createElement("span", {
                            className: css.description
                        }, o.description);
                    var c = t.text || ""
                      , h = createElement("span", {
                        className: css.label
                    }, c);
                    if (!0 === settings.enableCheckbox) {
                        var u = createElement("input", {
                            type: "checkbox",
                            name: element + settings.checkboxNameSuffix + "[]",
                            value: t.value || "",
                            className: "checkbox"
                        });
                        r.appendChild(u),
                        !0 === settings.enableCheckbox && (u.checked = !!t.selected)
                    }
                    a && r.appendChild(a),
                    r.appendChild(h),
                    l ? r.appendChild(l) : a && (a.className = a.className + css_i.fnone);
                    var d = createElement("div", {
                        className: "clear"
                    });
                    return r.appendChild(d),
                    r
                }
                  , createChildren = function() {
                    var t = getPostID("postChildID")
                      , e = {
                        className: css.ddChild + " ddchild_ " + css_i.ddChildMore,
                        id: t
                    };
                    e.style = 0 == isList ? "z-index: " + settings.zIndex : "z-index:1";
                    var n = $("#" + element).data("childwidth") || settings.childWidth;
                    n && (e.style = (e.style || "") + ";width:" + n);
                    var i = createElement("div", e)
                      , r = createElement("ul");
                    0 != settings.useSprite && (r.className = settings.useSprite);
                    for (var o = getElement(element).children, s = 0; s < o.length; s++) {
                        var a, l = o[s];
                        if ("optgroup" == l.nodeName.toLowerCase()) {
                            a = createElement("li", {
                                className: css.optgroup
                            });
                            var c = createElement("span", {
                                className: css.optgroupTitle
                            }, l.label);
                            a.appendChild(c);
                            for (var h = l.children, u = createElement("ul"), d = 0; d < h.length; d++) {
                                var p = createChild(h[d]);
                                u.appendChild(p)
                            }
                            a.appendChild(u)
                        } else
                            a = createChild(l);
                        r.appendChild(a)
                    }
                    return i.appendChild(r),
                    i
                }
                  , childHeight = function(t) {
                    var e = getPostID("postChildID");
                    if (t)
                        return -1 == t ? $("#" + e).css({
                            height: "auto",
                            overflow: "auto"
                        }) : $("#" + e).css("height", t + "px"),
                        !1;
                    var n, i = getElement(element).options.length;
                    if (i > settings.visibleRows || settings.visibleRows) {
                        var r = $("#" + e + " li:first")
                          , o = parseInt(r.css("padding-bottom")) + parseInt(r.css("padding-top"));
                        0 === settings.rowHeight && ($("#" + e).css({
                            visibility: "hidden",
                            display: "block"
                        }),
                        settings.rowHeight = Math.ceil(r.height()),
                        $("#" + e).css({
                            visibility: "visible"
                        }),
                        isList && !0 !== settings.enableCheckbox || $("#" + e).css({
                            display: "none"
                        })),
                        n = (settings.rowHeight + o) * Math.min(settings.visibleRows, i) + 3
                    } else
                        isList && (n = $("#" + element).height());
                    return n
                }
                  , applyChildEvents = function() {
                    var t = getPostID("postChildID");
                    $("#" + t).on("click", function(t) {
                        if (!0 === isDisabled)
                            return !1;
                        t.preventDefault(),
                        t.stopPropagation(),
                        isList && bind_on_events()
                    }),
                    $("#" + t + " li." + css.enabled).on("click", function(t) {
                        "input" !== t.target.nodeName.toLowerCase() && close(this)
                    }),
                    $("#" + t + " li." + css.enabled).on("mousedown", function(e) {
                        if (!0 === isDisabled)
                            return !1;
                        if (oldSelected = $("#" + t + " li." + css.selected),
                        lastTarget = this,
                        e.preventDefault(),
                        e.stopPropagation(),
                        !0 === settings.enableCheckbox && "input" === e.target.nodeName.toLowerCase() && (controlHolded = !0),
                        !0 === isList)
                            if (isMultiple)
                                if (!0 === shiftHolded) {
                                    $(this).addClass(css.selected);
                                    var n = $("#" + t + " li." + css.selected)
                                      , i = getIndex(this);
                                    if (n.length > 1) {
                                        var r = $("#" + t + " li." + css_i.li)
                                          , o = getIndex(n[0])
                                          , s = getIndex(n[1]);
                                        i > s && (o = i,
                                        s += 1);
                                        for (var a = Math.min(o, s); a <= Math.max(o, s); a++) {
                                            var l = r[a];
                                            $(l).hasClass(css.enabled) && $(l).addClass(css.selected)
                                        }
                                    }
                                } else if (!0 === controlHolded) {
                                    if ($(this).toggleClass(css.selected),
                                    !0 === settings.enableCheckbox) {
                                        var c = this.childNodes[0];
                                        c.checked = !c.checked
                                    }
                                } else
                                    $("#" + t + " li." + css.selected).removeClass(css.selected),
                                    $("#" + t + " input:checkbox").prop("checked", !1),
                                    $(this).addClass(css.selected),
                                    !0 === settings.enableCheckbox && (this.childNodes[0].checked = !0);
                            else
                                $("#" + t + " li." + css.selected).removeClass(css.selected),
                                $(this).addClass(css.selected);
                        else
                            $("#" + t + " li." + css.selected).removeClass(css.selected),
                            $(this).addClass(css.selected)
                    }),
                    $("#" + t + " li." + css.enabled).on("mouseenter", function(t) {
                        if (!0 === isDisabled)
                            return !1;
                        t.preventDefault(),
                        t.stopPropagation(),
                        null != lastTarget && isMultiple && ($(this).addClass(css.selected),
                        !0 === settings.enableCheckbox && (this.childNodes[0].checked = !0))
                    }),
                    $("#" + t + " li." + css.enabled).on("mouseover", function(t) {
                        if (!0 === isDisabled)
                            return !1;
                        $(this).addClass(css.hover)
                    }),
                    $("#" + t + " li." + css.enabled).on("mouseout", function(e) {
                        if (!0 === isDisabled)
                            return !1;
                        $("#" + t + " li." + css.hover).removeClass(css.hover)
                    }),
                    $("#" + t + " li." + css.enabled).on("mouseup", function(e) {
                        if (!0 === isDisabled)
                            return !1;
                        e.preventDefault(),
                        e.stopPropagation(),
                        !0 === settings.enableCheckbox && (controlHolded = !1);
                        var n = $("#" + t + " li." + css.selected).length;
                        forcedTrigger = oldSelected.length != n || 0 == n,
                        fireAfterItemClicked(),
                        unbind_on_events(),
                        bind_on_events(),
                        lastTarget = null
                    }),
                    0 == settings.disabledOptionEvents && ($("#" + t + " li." + css_i.li).on("click", function(t) {
                        if (!0 === isDisabled)
                            return !1;
                        fireOptionEventIfExist(this, "click")
                    }),
                    $("#" + t + " li." + css_i.li).on("mouseenter", function(t) {
                        if (!0 === isDisabled)
                            return !1;
                        fireOptionEventIfExist(this, "mouseenter")
                    }),
                    $("#" + t + " li." + css_i.li).on("mouseover", function(t) {
                        if (!0 === isDisabled)
                            return !1;
                        fireOptionEventIfExist(this, "mouseover")
                    }),
                    $("#" + t + " li." + css_i.li).on("mouseout", function(t) {
                        if (!0 === isDisabled)
                            return !1;
                        fireOptionEventIfExist(this, "mouseout")
                    }),
                    $("#" + t + " li." + css_i.li).on("mousedown", function(t) {
                        if (!0 === isDisabled)
                            return !1;
                        fireOptionEventIfExist(this, "mousedown")
                    }),
                    $("#" + t + " li." + css_i.li).on("mouseup", function(t) {
                        if (!0 === isDisabled)
                            return !1;
                        fireOptionEventIfExist(this, "mouseup")
                    }))
                }
                  , removeChildEvents = function() {
                    var t = getPostID("postChildID");
                    $("#" + t).off("click"),
                    $("#" + t + " li." + css.enabled).off("mouseenter"),
                    $("#" + t + " li." + css.enabled).off("click"),
                    $("#" + t + " li." + css.enabled).off("mouseover"),
                    $("#" + t + " li." + css.enabled).off("mouseout"),
                    $("#" + t + " li." + css.enabled).off("mousedown"),
                    $("#" + t + " li." + css.enabled).off("mouseup")
                }
                  , triggerBypassingHandler = function(t, e, n) {
                    $("#" + t).off(e, n),
                    $("#" + t).trigger(e),
                    $("#" + t).on(e, n)
                }
                  , applyEvents = function() {
                    var t = getPostID("postID")
                      , e = getPostID("postTitleTextID");
                    getPostID("postChildID");
                    $("#" + t).on(settings.event, function(t) {
                        if (!0 === isDisabled)
                            return !1;
                        fireEventIfExist(settings.event),
                        t.preventDefault(),
                        t.stopPropagation(),
                        open(t)
                    }),
                    $("#" + t).on("keydown", function(t) {
                        var e = t.which;
                        !isOpen && (e == ENTER || e == UP_ARROW || e == DOWN_ARROW || e == LEFT_ARROW || e == RIGHT_ARROW || e >= ALPHABETS_START && !isList) && (open(t),
                        e >= ALPHABETS_START || (t.preventDefault(),
                        t.stopImmediatePropagation()))
                    }),
                    $("#" + t).on("focus", wrapperFocusHandler),
                    $("#" + t).on("blur", wrapperBlurHandler),
                    $("#" + e).on("blur", function(e) {
                        triggerBypassingHandler(t, "focus", wrapperFocusHandler)
                    }),
                    applyChildEvents(),
                    $("#" + t).on("dblclick", on_dblclick),
                    $("#" + t).on("mousemove", on_mousemove),
                    $("#" + t).on("mouseenter", on_mouseover),
                    $("#" + t).on("mouseleave", on_mouseout),
                    $("#" + t).on("mousedown", on_mousedown),
                    $("#" + t).on("mouseup", on_mouseup)
                }
                  , wrapperFocusHandler = function(t) {
                    fireEventIfExist("focus")
                }
                  , wrapperBlurHandler = function(t) {
                    fireEventIfExist("blur")
                }
                  , fixedForList = function() {
                    var t = getPostID("postID")
                      , e = getPostID("postChildID");
                    if (!0 === isList && !1 === settings.enableCheckbox)
                        $("#" + t + " ." + css.ddTitle).hide(),
                        $("#" + e).css({
                            display: "block",
                            position: "relative"
                        });
                    else {
                        !1 === settings.enableCheckbox && (isMultiple = !1),
                        $("#" + t + " ." + css.ddTitle).show(),
                        $("#" + e).css({
                            display: "none",
                            position: "absolute"
                        });
                        var n = $("#" + e + " li." + css.selected)[0];
                        $("#" + e + " li." + css.selected).removeClass(css.selected);
                        var i = getIndex($(n).addClass(css.selected));
                        setValue(i)
                    }
                    childHeight(childHeight())
                }
                  , fixedForDisabled = function() {
                    var t = getPostID("postID");
                    1 == isDisabled && settings.disabledOpacity;
                    !0 === isDisabled ? $("#" + t).addClass(css.disabledAll) : $("#" + t).removeClass(css.disabledAll)
                }
                  , fixedSomeUI = function() {
                    var t = getPostID("postTitleTextID");
                    "true" == settings.enableAutoFilter && $("#" + t).on("keyup", applyFilters),
                    fixedForList(),
                    fixedForDisabled()
                }
                  , createLayout = function() {
                    var t = createWrapper()
                      , e = createTitle();
                    t.appendChild(e);
                    var n = createFilterBox();
                    t.appendChild(n);
                    var i = createChildren();
                    t.appendChild(i),
                    $("#" + element).after(t),
                    hideOriginal(),
                    fixedSomeUI(),
                    applyEvents();
                    var r = getPostID("postChildID");
                    "" != settings.append && $("#" + r).append(settings.append),
                    "" != settings.prepend && $("#" + r).prepend(settings.prepend),
                    "function" == typeof settings.on.create && settings.on.create.apply($this, arguments)
                }
                  , selectUI_LI = function(t) {
                    function e(t) {
                        $($("#" + n + " li." + css_i.li)[t]).addClass(css.selected),
                        !0 === settings.enableCheckbox && $($("#" + n + " li." + css_i.li)[t]).find("input.checkbox").prop("checked", "checked")
                    }
                    var n = getPostID("postChildID");
                    if ($("#" + n + " li." + css_i.li).removeClass(css.selected),
                    !0 === settings.enableCheckbox && $("#" + n + " li." + css_i.li + " input.checkbox").prop("checked", !1),
                    !0 === isArray(t))
                        for (var i = 0; i < t.length; i++)
                            e(t[i]);
                    else
                        e(t)
                }
                  , selectMutipleOptions = function(t, e) {
                    for (var n = getPostID("postChildID"), i = t || $("#" + n + " li." + css.selected), r = 0; r < i.length; r++) {
                        var o = !0 === e ? i[r] : getIndex(i[r]);
                        getElement(element).options[o].selected = "selected"
                    }
                    setValue(i)
                }
                  , fireAfterItemClicked = function() {
                    var t = getPostID("postChildID")
                      , e = $("#" + t + " li." + css.selected);
                    (isMultiple && (shiftHolded || controlHolded) || forcedTrigger) && (getElement(element).selectedIndex = -1);
                    var n;
                    if (0 == e.length ? n = -1 : e.length > 1 ? selectMutipleOptions(e) : n = getIndex($("#" + t + " li." + css.selected)),
                    (getElement(element).selectedIndex != n || forcedTrigger) && e.length <= 1) {
                        forcedTrigger = !1;
                        has_handler("change");
                        if (getElement(element).selectedIndex = n,
                        setValue(n),
                        "function" == typeof settings.on.change) {
                            var i = getDataAndUI();
                            settings.on.change(i.data, i.ui)
                        }
                        $("#" + element).trigger("change")
                    }
                }
                  , setValue = function(t, e) {
                    if (void 0 !== t) {
                        var n, i, r;
                        if (-1 == t)
                            n = -1,
                            i = "",
                            r = "",
                            updateTitleUI(-1);
                        else if ("object" != typeof t) {
                            var o = getElement(element).options[t];
                            getElement(element).selectedIndex = t,
                            n = t,
                            i = parseOption(o),
                            r = t >= 0 ? getElement(element).options[t].text : "",
                            updateTitleUI(void 0, i),
                            i = i.value
                        } else
                            n = e && e.index || getElement(element).selectedIndex,
                            i = e && e.value || getElement(element).value,
                            r = e && e.text || getElement(element).options[getElement(element).selectedIndex].text || "",
                            updateTitleUI(n);
                        updateProp("selectedIndex", n),
                        updateProp("value", i),
                        updateProp("selectedText", r),
                        updateProp("children", getElement(element).children),
                        updateProp("uiData", getDataAndUI()),
                        updateProp("selectedOptions", $("#" + element + " option:selected"))
                    }
                }
                  , has_handler = function(t) {
                    var e = {
                        byElement: !1,
                        byJQuery: !1,
                        hasEvent: !1
                    }
                      , n = $("#" + element);
                    try {
                        null !== n.prop("on" + t) && (e.hasEvent = !0,
                        e.byElement = !0)
                    } catch (t) {}
                    var i;
                    return i = "function" == typeof $._data ? $._data(n[0], "events") : n.data("events"),
                    i && i[t] && (e.hasEvent = !0,
                    e.byJQuery = !0),
                    e
                }
                  , bind_on_events = function() {
                    unbind_on_events(),
                    $("body").on("click", close),
                    $(document).on("keydown", on_keydown),
                    $(document).on("keyup", on_keyup)
                }
                  , unbind_on_events = function() {
                    $("body").off("click", close),
                    $(document).off("keydown", on_keydown),
                    $(document).off("keyup", on_keyup)
                }
                  , applyFilters = function(t) {
                    if (t.keyCode < ALPHABETS_START && t.keyCode != BACKSPACE && t.keyCode != DELETE)
                        return !1;
                    var e = getPostID("postChildID")
                      , n = getPostID("postTitleTextID")
                      , i = getElement(n).value;
                    if (0 == i.length)
                        $("#" + e + " li:hidden").show(),
                        childHeight(childHeight());
                    else {
                        $("#" + e + " li").hide();
                        var r = $("#" + e + " li:Contains('" + i + "')").show();
                        $("#" + e + " li:visible").length <= settings.visibleRows && childHeight(-1),
                        (r.length > 0 && !isList || !isMultiple) && ($("#" + e + " ." + css.selected).removeClass(css.selected),
                        $(r[0]).addClass(css.selected))
                    }
                    isList || adjustOpen()
                }
                  , showFilterBox = function() {
                    if ("true" == settings.enableAutoFilter) {
                        var t = getPostID("postID")
                          , e = getPostID("postTitleTextID");
                        $("#" + e + ":hidden").length > 0 && 0 == controlHolded && ($("#" + e + ":hidden").show().val(""),
                        triggerBypassingHandler(t, "blur", wrapperBlurHandler),
                        getElement(e).focus())
                    }
                }
                  , hideFilterBox = function() {
                    var t = getPostID("postTitleTextID");
                    $("#" + t + ":visible").length > 0 && ($("#" + t + ":visible").hide(),
                    getElement(t).blur())
                }
                  , on_keydown = function(t) {
                    var e = (getPostID("postTitleTextID"),
                    getPostID("postChildID"));
                    switch (t.keyCode) {
                    case DOWN_ARROW:
                    case RIGHT_ARROW:
                        t.preventDefault(),
                        t.stopPropagation(),
                        next();
                        break;
                    case UP_ARROW:
                    case LEFT_ARROW:
                        t.preventDefault(),
                        t.stopPropagation(),
                        previous();
                        break;
                    case ESCAPE:
                    case ENTER:
                        t.preventDefault(),
                        t.stopPropagation(),
                        close();
                        var n = $("#" + e + " li." + css.selected).length;
                        forcedTrigger = oldSelected.length != n || 0 == n,
                        fireAfterItemClicked(),
                        unbind_on_events(),
                        lastTarget = null;
                        break;
                    case SHIFT:
                        shiftHolded = !0;
                        break;
                    case CONTROL:
                        controlHolded = !0;
                        break;
                    default:
                        t.keyCode,
                        fireAfterItemClicked(),
                        unbind_on_events(),
                        lastTarget = null
                    }
                    if (!0 === isDisabled)
                        return !1;
                    fireEventIfExist("keydown")
                }
                  , on_keyup = function(t) {
                    switch (t.keyCode) {
                    case SHIFT:
                        shiftHolded = !1;
                        break;
                    case CONTROL:
                        controlHolded = !1
                    }
                    if (!0 === isDisabled)
                        return !1;
                    fireEventIfExist("keyup")
                }
                  , on_dblclick = function(t) {
                    if (!0 === isDisabled)
                        return !1;
                    fireEventIfExist("dblclick")
                }
                  , on_mousemove = function(t) {
                    if (!0 === isDisabled)
                        return !1;
                    fireEventIfExist("mousemove")
                }
                  , on_mouseover = function(t) {
                    if (!0 === isDisabled)
                        return !1;
                    t.preventDefault(),
                    fireEventIfExist("mouseover")
                }
                  , on_mouseout = function(t) {
                    if (!0 === isDisabled)
                        return !1;
                    t.preventDefault(),
                    fireEventIfExist("mouseout")
                }
                  , on_mousedown = function(t) {
                    if (!0 === isDisabled)
                        return !1;
                    fireEventIfExist("mousedown")
                }
                  , on_mouseup = function(t) {
                    if (!0 === isDisabled)
                        return !1;
                    fireEventIfExist("mouseup")
                }
                  , option_has_handler = function(t, e) {
                    var n = {
                        byElement: !1,
                        byJQuery: !1,
                        hasEvent: !1
                    };
                    void 0 != $(t).prop("on" + e) && (n.hasEvent = !0,
                    n.byElement = !0);
                    var i = $(t).data("events");
                    return i && i[e] && (n.hasEvent = !0,
                    n.byJQuery = !0),
                    n
                }
                  , fireOptionEventIfExist = function(t, e) {
                    if (0 == settings.disabledOptionEvents) {
                        var n = getElement(element).options[getIndex(t)];
                        if (!0 === option_has_handler(n, e).hasEvent) {
                            if (!0 === option_has_handler(n, e).byElement && n["on" + e](),
                            !0 === option_has_handler(n, e).byJQuery)
                                switch (e) {
                                case "keydown":
                                case "keyup":
                                    break;
                                default:
                                    $(n).trigger(e)
                                }
                            return !1
                        }
                    }
                }
                  , fireEventIfExist = function(t) {
                    if ("function" == typeof settings.on[t] && settings.on[t].apply(this, arguments),
                    !0 === has_handler(t).hasEvent) {
                        if (!0 === has_handler(t).byElement)
                            getElement(element)["on" + t]();
                        else if (!0 === has_handler(t).byJQuery)
                            switch (t) {
                            case "keydown":
                            case "keyup":
                                break;
                            default:
                                $("#" + element).triggerHandler(t)
                            }
                        return !1
                    }
                }
                  , scrollToIfNeeded = function(t) {
                    var e = getPostID("postChildID");
                    if (t = void 0 !== t ? t : $("#" + e + " li." + css.selected),
                    t.length > 0) {
                        var n = parseInt($(t).position().top)
                          , i = parseInt($("#" + e).height());
                        if (n > i) {
                            var r = n + $("#" + e).scrollTop() - i / 2;
                            $("#" + e).scrollTop(r)
                        }
                    }
                }
                  , next = function() {
                    function t(e) {
                        return e += 1,
                        e > n.length ? e : !0 === $(n[e]).hasClass(css.enabled) ? e : e = t(e)
                    }
                    var e = getPostID("postChildID")
                      , n = $("#" + e + " li:visible." + css_i.li)
                      , i = $("#" + e + " li:visible." + css.selected);
                    i = 0 == i.length ? n[0] : i;
                    var r = $("#" + e + " li:visible." + css_i.li).index(i);
                    r < n.length - 1 && (r = t(r),
                    r < n.length && (shiftHolded && isList && isMultiple || $("#" + e + " ." + css.selected).removeClass(css.selected),
                    $(n[r]).addClass(css.selected),
                    updateTitleUI(r),
                    1 == isList && fireAfterItemClicked(),
                    scrollToIfNeeded($(n[r]))),
                    isList || adjustOpen())
                }
                  , previous = function() {
                    function t(e) {
                        return e -= 1,
                        e < 0 ? e : !0 === $(i[e]).hasClass(css.enabled) ? e : e = t(e)
                    }
                    var e = getPostID("postChildID")
                      , n = $("#" + e + " li:visible." + css.selected)
                      , i = $("#" + e + " li:visible." + css_i.li)
                      , r = $("#" + e + " li:visible." + css_i.li).index(n[0]);
                    if (r >= 0) {
                        if ((r = t(r)) >= 0 && (shiftHolded && isList && isMultiple || $("#" + e + " ." + css.selected).removeClass(css.selected),
                        $(i[r]).addClass(css.selected),
                        updateTitleUI(r),
                        1 == isList && fireAfterItemClicked(),
                        parseInt($(i[r]).position().top + $(i[r]).height()) <= 0)) {
                            var o = $("#" + e).scrollTop() - $("#" + e).height() - $(i[r]).height();
                            $("#" + e).scrollTop(o)
                        }
                        isList || adjustOpen()
                    }
                }
                  , adjustOpen = function() {
                    var t = getPostID("postID")
                      , e = getPostID("postChildID")
                      , n = $("#" + t).offset()
                      , i = $("#" + t).height()
                      , r = $(window).height()
                      , o = $(window).scrollTop()
                      , s = $("#" + e).height()
                      , a = $("#" + t).height()
                      , l = settings.openDirection.toLowerCase();
                    if ((r + o < Math.floor(s + i + n.top) || "alwaysup" == l) && "alwaysdown" != l) {
                        a = s,
                        $("#" + e).css({
                            top: "-" + a + "px",
                            display: "block",
                            zIndex: settings.zIndex
                        }),
                        "true" == settings.roundedCorner && $("#" + t).removeClass("borderRadius borderRadiusTp").addClass("borderRadiusBtm");
                        var a = $("#" + e).offset().top;
                        a < -10 && ($("#" + e).css({
                            top: parseInt($("#" + e).css("top")) - a + 20 + o + "px",
                            zIndex: settings.zIndex
                        }),
                        "true" == settings.roundedCorner && $("#" + t).removeClass("borderRadiusBtm borderRadiusTp").addClass("borderRadius"))
                    } else
                        $("#" + e).css({
                            top: a + "px",
                            zIndex: settings.zIndex
                        }),
                        "true" == settings.roundedCorner && $("#" + t).removeClass("borderRadius borderRadiusBtm").addClass("borderRadiusTp");
                    isIE && msieversion() <= 7 && ($("div.ddcommon").css("zIndex", settings.zIndex - 10),
                    $("#" + t).css("zIndex", settings.zIndex + 5))
                }
                  , open = function(t) {
                    if (!0 === isDisabled)
                        return !1;
                    var e = (getPostID("postID"),
                    getPostID("postChildID"));
                    if (isOpen)
                        "mouseover" !== settings.event && close();
                    else {
                        isOpen = !0,
                        "" != msBeautify.oldDiv && $("#" + msBeautify.oldDiv).css({
                            display: "none"
                        }),
                        msBeautify.oldDiv = e,
                        $("#" + e + " li:hidden").show(),
                        adjustOpen();
                        var n = settings.animStyle;
                        if ("" == n || "none" == n) {
                            if ($("#" + e).css({
                                display: "block"
                            }),
                            scrollToIfNeeded(),
                            "function" == typeof settings.on.open) {
                                var i = getDataAndUI();
                                settings.on.open(i.data, i.ui)
                            }
                        } else
                            $("#" + e)[n](0, function() {
                                if (scrollToIfNeeded(),
                                "function" == typeof settings.on.open) {
                                    var t = getDataAndUI();
                                    settings.on.open(t.data, t.ui)
                                }
                            });
                        bind_on_events()
                    }
                }
                  , close = function(t) {
                    isOpen = !1;
                    var e = getPostID("postID")
                      , n = getPostID("postChildID");
                    if (!1 !== isList && !0 !== settings.enableCheckbox || ($("#" + n).css({
                        display: "none"
                    }),
                    "true" == settings.roundedCorner && $("#" + e).removeClass("borderRadiusTp borderRadiusBtm").addClass("borderRadius")),
                    unbind_on_events(),
                    "function" == typeof settings.on.close) {
                        var i = getDataAndUI();
                        settings.on.close(i.data, i.ui)
                    }
                    hideFilterBox(),
                    childHeight(childHeight()),
                    $("#" + n).css({
                        zIndex: 1
                    }),
                    updateTitleUI(getElement(element).selectedIndex)
                }
                  , mergeAllProp = function() {
                    try {
                        orginial = $.extend(!0, {}, getElement(element));
                        for (var t in orginial)
                            "function" != typeof orginial[t] && ($this[t] = orginial[t])
                    } catch (t) {}
                    $this.selectedText = getElement(element).selectedIndex >= 0 ? getElement(element).options[getElement(element).selectedIndex].text : "",
                    $this.version = msBeautify.version.msDropdown,
                    $this.author = msBeautify.author
                }
                  , getDataAndUIByOption = function(t) {
                    if (null != t && void 0 !== t) {
                        var e = getPostID("postChildID");
                        return {
                            data: parseOption(t),
                            ui: $("#" + e + " li." + css_i.li + ":eq(" + t.index + ")"),
                            option: t,
                            index: t.index
                        }
                    }
                    return null
                }
                  , getDataAndUI = function() {
                    var t, e, n, i, r = getPostID("postChildID"), o = getElement(element);
                    if (-1 == o.selectedIndex)
                        t = null,
                        e = null,
                        n = null,
                        i = -1;
                    else if (e = $("#" + r + " li." + css.selected),
                    e.length > 1) {
                        for (var s = [], a = [], l = 0; l < e.length; l++) {
                            var c = getIndex(e[l]);
                            s.push(c),
                            a.push(o.options[c])
                        }
                        t = s,
                        n = a,
                        i = s
                    } else
                        n = o.options[o.selectedIndex],
                        t = parseOption(n),
                        i = o.selectedIndex;
                    return {
                        data: t,
                        ui: e,
                        index: i,
                        option: n
                    }
                }
                  , updateTitleUI = function(t, e) {
                    var n = getPostID("postTitleID")
                      , i = {};
                    if (-1 == t)
                        i.text = "&nbsp;",
                        i.className = "",
                        i.description = "",
                        i.image = "";
                    else if (void 0 !== t) {
                        var r = getElement(element).options[t];
                        i = parseOption(r)
                    } else
                        i = e;
                    $("#" + n).find("." + css.label).html(i.text),
                    getElement(n).className = css.ddTitleText + " " + i.className,
                    "" != i.description ? $("#" + n).find("." + css.description).html(i.description).show() : $("#" + n).find("." + css.description).html("").hide();
                    var o = $("#" + n).find("img");
                    o.length > 0 && $(o).remove(),
                    "" != i.image && settings.showIcon && (o = createElement("img", {
                        src: i.image
                    }),
                    $("#" + n).prepend(o),
                    "" != i.imagecss && (o.className = i.imagecss + " "),
                    "" == i.description && (o.className = o.className + css_i.fnone))
                }
                  , updateProp = function(t, e) {
                    $this[t] = e
                }
                  , updateUI = function(t, e, n) {
                    var i = getPostID("postChildID")
                      , r = !1;
                    switch (t) {
                    case "add":
                        var o, s = createChild(e || getElement(element).options[n]);
                        if ((o = 3 == arguments.length ? n : $("#" + i + " li." + css_i.li).length - 1) < 0 || !o)
                            $("#" + i + " ul").append(s);
                        else {
                            var a = $("#" + i + " li." + css_i.li)[o];
                            $(a).before(s)
                        }
                        removeChildEvents(),
                        applyChildEvents(),
                        null != settings.on.add && settings.on.add.apply(this, arguments);
                        break;
                    case "remove":
                        r = $($("#" + i + " li." + css_i.li)[n]).hasClass(css.selected),
                        $("#" + i + " li." + css_i.li + ":eq(" + n + ")").remove();
                        var l = $("#" + i + " li." + css.enabled);
                        if (1 == r && l.length > 0) {
                            $(l[0]).addClass(css.selected);
                            var c = $("#" + i + " li." + css_i.li).index(l[0]);
                            setValue(c)
                        }
                        0 == l.length && setValue(-1),
                        $("#" + i + " li." + css_i.li).length < settings.visibleRows && !isList && childHeight(-1),
                        null != settings.on.remove && settings.on.remove.apply(this, arguments)
                    }
                };
                this.act = function() {
                    var t = arguments[0];
                    switch (Array.prototype.shift.call(arguments),
                    t) {
                    case "add":
                        $this.add.apply(this, arguments);
                        break;
                    case "remove":
                        $this.remove.apply(this, arguments);
                        break;
                    default:
                        try {
                            getElement(element)[t].apply(getElement(element), arguments)
                        } catch (t) {}
                    }
                }
                ,
                this.add = function() {
                    var t, e, n, i, r, o = arguments[0];
                    "string" == typeof o ? (t = o,
                    e = t,
                    opt = new Option(t,e)) : (t = o.text || "",
                    e = o.value || t,
                    n = o.title || "",
                    i = o.image || "",
                    r = o.description || "",
                    opt = new Option(t,e),
                    $(opt).data("description", r),
                    $(opt).data("image", i),
                    $(opt).data("title", n)),
                    arguments[0] = opt,
                    getElement(element).add.apply(getElement(element), arguments),
                    updateProp("children", getElement(element).children),
                    updateProp("length", getElement(element).length),
                    updateUI("add", opt, arguments[1])
                }
                ,
                this.remove = function(t) {
                    getElement(element).remove(t),
                    updateProp("children", getElement(element).children),
                    updateProp("length", getElement(element).length),
                    updateUI("remove", void 0, t)
                }
                ,
                this.set = function(t, e) {
                    if (void 0 === t || void 0 === e)
                        return !1;
                    t = t.toString();
                    try {
                        updateProp(t, e)
                    } catch (t) {}
                    switch (t) {
                    case "size":
                        getElement(element)[t] = e,
                        0 == e && (getElement(element).multiple = !1),
                        isList = getElement(element).size > 1 || 1 == getElement(element).multiple,
                        fixedForList();
                        break;
                    case "multiple":
                        getElement(element)[t] = e,
                        isList = getElement(element).size > 1 || 1 == getElement(element).multiple,
                        isMultiple = getElement(element).multiple,
                        fixedForList(),
                        updateProp(t, e);
                        break;
                    case "disabled":
                        getElement(element)[t] = e,
                        isDisabled = e,
                        fixedForDisabled();
                        break;
                    case "selectedIndex":
                    case "value":
                        "selectedIndex" == t && !0 === isArray(e) ? ($("#" + element + " option").prop("selected", !1),
                        selectMutipleOptions(e, !0),
                        selectUI_LI(e)) : (getElement(element)[t] = e,
                        selectUI_LI(getElement(element).selectedIndex),
                        setValue(getElement(element).selectedIndex));
                        break;
                    case "length":
                        var n = getPostID("postChildID");
                        e < getElement(element).length && (getElement(element)[t] = e,
                        0 == e ? ($("#" + n + " li." + css_i.li).remove(),
                        setValue(-1)) : ($("#" + n + " li." + css_i.li + ":gt(" + (e - 1) + ")").remove(),
                        0 == $("#" + n + " li." + css.selected).length && $("#" + n + " li." + css.enabled + ":eq(0)").addClass(css.selected)),
                        updateProp(t, e),
                        updateProp("children", getElement(element).children));
                        break;
                    case "id":
                        break;
                    default:
                        try {
                            getElement(element)[t] = e,
                            updateProp(t, e)
                        } catch (t) {}
                    }
                }
                ,
                this.get = function(t) {
                    return $this[t] || getElement(element)[t]
                }
                ,
                this.visible = function(t) {
                    var e = getPostID("postID");
                    if (!0 === t)
                        $("#" + e).show();
                    else {
                        if (!1 !== t)
                            return "none" != $("#" + e).css("display");
                        $("#" + e).hide()
                    }
                }
                ,
                this.debug = function(t) {
                    msBeautify.debug(t)
                }
                ,
                this.close = function() {
                    close()
                }
                ,
                this.open = function() {
                    open()
                }
                ,
                this.showRows = function(t) {
                    if (void 0 === t || 0 == t)
                        return !1;
                    settings.visibleRows = t,
                    childHeight(childHeight())
                }
                ,
                this.visibleRows = this.showRows,
                this.on = function(t, e) {
                    $("#" + element).on(t, e)
                }
                ,
                this.off = function(t, e) {
                    $("#" + element).off(t, e)
                }
                ,
                this.addMyEvent = this.on,
                this.getData = function() {
                    return getDataAndUI()
                }
                ,
                this.namedItem = function() {
                    var t = getElement(element).namedItem.apply(getElement(element), arguments);
                    return getDataAndUIByOption(t)
                }
                ,
                this.item = function() {
                    var t = getElement(element).item.apply(getElement(element), arguments);
                    return getDataAndUIByOption(t)
                }
                ,
                this.setIndexByValue = function(t) {
                    this.set("value", t)
                }
                ,
                this.destroy = function() {
                    var t = (getPostID("postElementHolder"),
                    getPostID("postID"));
                    $("#" + t + ", #" + t + " *").off(),
                    getElement(element).tabIndex = getElement(t).tabIndex,
                    $("#" + t).remove(),
                    $("#" + element).parent().replaceWith($("#" + element)),
                    $("#" + element).data("dd", null)
                }
                ,
                this.refresh = function() {
                    setValue(getElement(element).selectedIndex)
                }
                ,
                init()
            }
            msBeautify = {
                version: {
                    msDropdown: "3.5.2"
                },
                author: "Marghoob Suleman",
                counter: 20,
                debug: function(t) {
                    !1 !== t ? $(".ddOutOfVision").css({
                        height: "auto",
                        position: "relative"
                    }) : $(".ddOutOfVision").css({
                        height: "0px",
                        position: "absolute"
                    })
                },
                oldDiv: "",
                create: function(t, e, n) {
                    n = n || "dropdown";
                    var i;
                    switch (n.toLowerCase()) {
                    case "dropdown":
                    case "select":
                        i = $(t).msDropdown(e).data("dd")
                    }
                    return i
                }
            },
            $.msDropDown = {},
            $.msDropdown = {},
            $.extend(!0, $.msDropDown, msBeautify),
            $.extend(!0, $.msDropdown, msBeautify),
            void 0 === $.fn.prop && ($.fn.prop = $.fn.attr),
            void 0 === $.fn.on && ($.fn.on = $.fn.bind,
            $.fn.off = $.fn.unbind),
            "function" == typeof $.expr.createPseudo ? $.expr[":"].Contains = $.expr.createPseudo(function(t) {
                return function(e) {
                    return $(e).text().toUpperCase().indexOf(t.toUpperCase()) >= 0
                }
            }) : $.expr[":"].Contains = function(t, e, n) {
                return $(t).text().toUpperCase().indexOf(n[3].toUpperCase()) >= 0
            }
            ,
            $.fn.extend({
                msDropDown: function(t) {
                    return this.each(function() {
                        if (!$(this).data("dd")) {
                            var e = new dd(this,t);
                            $(this).data("dd", e)
                        }
                    })
                }
            }),
            $.fn.msDropdown = $.fn.msDropDown
        }(jQuery)
    }
    ).call(exports, __webpack_require__(0))
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = n(5)
          , r = function() {
            function e(e, n, i, r, o) {
                var s = document.createElement("img");
                t(s).attr("crossOrigin", "anonymous"),
                t(s).attr("src", n).one("load", function() {
                    var t = e.createPattern(s, "repeat");
                    e.fillStyle = t,
                    e.fillRect(0, 0, r, o),
                    e.globalCompositeOperation = "multiply",
                    e.fillStyle = "#" + i,
                    e.fillRect(0, 0, r, o)
                })
            }
            return e.getNextTextureIndex = function() {
                return null == this.textureIndex ? (this.textureIndex = Math.floor(Math.random() * (this.textureCount - 1)) + 1,
                this.textureIndex) : (this.textureIndex++,
                this.textureIndex > this.textureCount && (this.textureIndex = 1),
                this.textureIndex)
            }
            ,
            e.getRandomUrl = function() {
                return i.Site.STATIC_ROOT_URL + "/static/v3/texture/" + e.padNumber(e.getNextTextureIndex(), 2) + ".png"
            }
            ,
            e.padNumber = function(t, e) {
                for (var n = t.toString(); n.length < e; )
                    n = "0" + n;
                return n
            }
            ,
            e.textureIndex = null,
            e.textureCount = 42,
            e
        }();
        e.TextureView = r
    }
    ).call(e, n(0))
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = function() {
        function t() {
            this.locked = !1
        }
        return t.prototype.acquire = function() {
            this.locked = !0
        }
        ,
        t.prototype.release = function() {
            this.locked = !1
        }
        ,
        t
    }();
    e.Locker = i
}
, , , function(t, e, n) {
    function i(t) {
        return null != t && o(r(t))
    }
    var r = n(97)
      , o = n(55);
    t.exports = i
}
, function(t, e, n) {
    var i = n(145)
      , r = i("length");
    t.exports = r
}
, function(t, e) {
    function n(t, e) {
        return t = "number" == typeof t || i.test(t) ? +t : -1,
        e = null == e ? r : e,
        t > -1 && t % 1 == 0 && t < e
    }
    var i = /^\d+$/
      , r = 9007199254740991;
    t.exports = n
}
, , , function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(2)
      , r = function() {
        function t(t, e) {
            this.uid = "",
            this.title = "",
            this.colors = null,
            this.id = t,
            this.title = e
        }
        return Object.defineProperty(t.prototype, "colorsData", {
            get: function() {
                for (var t = "", e = 0; e < this.colors.length; e++)
                    t += this.colors[e].toString(16) + ";";
                return t
            },
            set: function(t) {
                for (var e = t.split(";"), n = [], i = 0; i < e.length; i++)
                    "" != e[i] && n.push(parseInt("0x" + e[i]));
                this.colors = n
            },
            enumerable: !0,
            configurable: !0
        }),
        t.init = function() {
            if (null == t.categories) {
                var e = getColorRangeCategories();
                if (null == e)
                    return null;
                for (var n = [], i = 0; i < e.length; i++)
                    n.push(t.parseColorRangeCategory(e[i]));
                t.categories = n
            }
        }
        ,
        t.parseColorRangeCategory = function(e) {
            if (!e)
                return null;
            var n = new t(e.id,e.title);
            return n.colorsData = e.colorsData,
            n
        }
        ,
        t.getColorRanges = function(e) {
            if (null == e || 0 == e.length || e.length == t.categories.length)
                return i.ColorRange.colorRanges;
            var n, r = [], o = [], s = !1;
            for (n = 0; n < e.length; n++)
                r.push(e[n].id);
            for (n = 0; n < i.ColorRange.colorRanges.length; n++) {
                var a = i.ColorRange.colorRanges[n];
                s = !1;
                for (var l = 0; l < a.categories.length; l++) {
                    var c = a.categories[l];
                    if (-1 == r.indexOf(c)) {
                        s = !0;
                        break
                    }
                }
                s || o.push(a)
            }
            return o
        }
        ,
        t.getById = function(e) {
            for (var n = 0; n < t.categories.length; n++)
                if (t.categories[n].id == e)
                    return t.categories[n];
            return null
        }
        ,
        t.categories = null,
        t
    }();
    e.ColorRangeCategory = r
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = function() {
        function t(t, e, n, i, r) {
            this.id = t,
            this.name = e,
            this.emblemsCount = n,
            this.children = r,
            this.tags = i
        }
        return t.init = function() {
            if (null == t.activityTypes) {
                var e = getActivityTypes();
                if (null == e)
                    return null;
                t.activityTypes = [];
                for (var n = 0, i = e; n < i.length; n++) {
                    var r = i[n]
                      , o = new t(r.id,r.name,r.emblemsCount,r.tags,r.children);
                    t.activityTypes.push(o)
                }
            }
        }
        ,
        t.getById = function(e) {
            for (var n = 0, i = t.activityTypes; n < i.length; n++) {
                var r = i[n];
                if (r.id === e)
                    return r
            }
            return null
        }
        ,
        t.DEFAULT_ACTIVITY_TYPE = 28,
        t.activityTypes = null,
        t
    }();
    e.ActivityType = i
}
, , , , , function(t, e, n) {
    function i(t) {
        return r(t) ? t : Object(t)
    }
    var r = n(66);
    t.exports = i
}
, function(t, e, n) {
    function i(t, e) {
        var n = null == t ? void 0 : t[e];
        return r(n) ? n : void 0
    }
    var r = n(144);
    t.exports = i
}
, function(t, e, n) {
    function i(t) {
        return r(t) && a.call(t) == o
    }
    var r = n(66)
      , o = "[object Function]"
      , s = Object.prototype
      , a = s.toString;
    t.exports = i
}
, function(t, e, n) {
    function i(t) {
        return o(t) && r(t) && a.call(t, "callee") && !l.call(t, "callee")
    }
    var r = n(96)
      , o = n(89)
      , s = Object.prototype
      , a = s.hasOwnProperty
      , l = s.propertyIsEnumerable;
    t.exports = i
}
, function(t, e, n) {
    function i(t, e, n) {
        if ("function" != typeof t)
            return r;
        if (void 0 === e)
            return t;
        switch (n) {
        case 1:
            return function(n) {
                return t.call(e, n)
            }
            ;
        case 3:
            return function(n, i, r) {
                return t.call(e, n, i, r)
            }
            ;
        case 4:
            return function(n, i, r, o) {
                return t.call(e, n, i, r, o)
            }
            ;
        case 5:
            return function(n, i, r, o, s) {
                return t.call(e, n, i, r, o, s)
            }
        }
        return function() {
            return t.apply(e, arguments)
        }
    }
    var r = n(150);
    t.exports = i
}
, function(t, e, n) {
    function i(t, e, n) {
        if (!s(n))
            return !1;
        var i = typeof e;
        if ("number" == i ? r(n) && o(e, n.length) : "string" == i && e in n) {
            var a = n[e];
            return t === t ? t === a : a !== a
        }
        return !1
    }
    var r = n(96)
      , o = n(98)
      , s = n(66);
    t.exports = i
}
, function(t, e, n) {
    (function(t) {
        function i(t, e) {
            this._id = t,
            this._clearFn = e
        }
        var r = void 0 !== t && t || "undefined" != typeof self && self || window
          , o = Function.prototype.apply;
        e.setTimeout = function() {
            return new i(o.call(setTimeout, r, arguments),clearTimeout)
        }
        ,
        e.setInterval = function() {
            return new i(o.call(setInterval, r, arguments),clearInterval)
        }
        ,
        e.clearTimeout = e.clearInterval = function(t) {
            t && t.close()
        }
        ,
        i.prototype.unref = i.prototype.ref = function() {}
        ,
        i.prototype.close = function() {
            this._clearFn.call(r, this._id)
        }
        ,
        e.enroll = function(t, e) {
            clearTimeout(t._idleTimeoutId),
            t._idleTimeout = e
        }
        ,
        e.unenroll = function(t) {
            clearTimeout(t._idleTimeoutId),
            t._idleTimeout = -1
        }
        ,
        e._unrefActive = e.active = function(t) {
            clearTimeout(t._idleTimeoutId);
            var e = t._idleTimeout;
            e >= 0 && (t._idleTimeoutId = setTimeout(function() {
                t._onTimeout && t._onTimeout()
            }, e))
        }
        ,
        n(170),
        e.setImmediate = "undefined" != typeof self && self.setImmediate || void 0 !== t && t.setImmediate || this && this.setImmediate,
        e.clearImmediate = "undefined" != typeof self && self.clearImmediate || void 0 !== t && t.clearImmediate || this && this.clearImmediate
    }
    ).call(e, n(36))
}
, , function(t, e, n) {
    "use strict";
    (function(t) {
        var i = this && this.__extends || function() {
            var t = Object.setPrototypeOf || {
                __proto__: []
            }instanceof Array && function(t, e) {
                t.__proto__ = e
            }
            || function(t, e) {
                for (var n in e)
                    e.hasOwnProperty(n) && (t[n] = e[n])
            }
            ;
            return function(e, n) {
                function i() {
                    this.constructor = e
                }
                t(e, n),
                e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                new i)
            }
        }();
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var r = n(11)
          , o = n(116)
          , s = n(45)
          , a = n(23)
          , l = n(23)
          , c = n(3)
          , h = n(13)
          , u = n(56)
          , d = n(57)
          , p = n(14)
          , f = n(1)
          , g = n(5)
          , m = n(12)
          , _ = n(31)
          , v = n(17)
          , y = n(60)
          , b = n(87)
          , w = n(119)
          , x = function(e) {
            function n() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t._loadedParentMakers = [],
                t._loadedFamilies = [],
                t._loadedEmblemIds = [],
                t._useSlogansData = !0,
                t._sloganProcessor = null,
                t
            }
            return i(n, e),
            Object.defineProperty(n, "DB_MAKER_SERVICE_URL", {
                get: function() {
                    return g.Site.MAIN_URL + "/v3/js/maker/"
                },
                enumerable: !0,
                configurable: !0
            }),
            n.prototype.makeLogo = function(t, e) {
                this.loadPrerequisites(t, e)
            }
            ,
            n.prototype._makeBrand = function(t, e, n) {
                void 0 === n && (n = null),
                this.loadPrerequisites(t, e, n)
            }
            ,
            n.prototype.loadPrerequisites = function(e, i, o) {
                void 0 === o && (o = null);
                var l = e.inputData
                  , c = this.prepareTextsData(l.texts)
                  , h = this._useSlogansData ? this.prepareTextsData(l.slogans) : []
                  , u = {
                    w: l.words,
                    sw: this._useSlogansData ? l.sloganWords : 0,
                    ts: JSON.stringify(r.shuffle(c)),
                    ss: JSON.stringify(r.shuffle(h)),
                    lfm: JSON.stringify(this._loadedFamilies),
                    lm: JSON.stringify(this._loadedParentMakers),
                    lei: JSON.stringify(this._loadedEmblemIds),
                    at: e.activityType
                };
                void 0 !== e.inputFamily && (u.fm = e.inputFamily),
                void 0 !== e.brandCreationData && (e.brandCreationData.setDbMakerFields(l.words, this._useSlogansData ? l.sloganWords : 0, r.shuffle(c), r.shuffle(h), this._loadedFamilies, this._loadedParentMakers, this._loadedEmblemIds, e.inputFamily),
                u.bcd = e.brandCreationData.serialize());
                var d = this;
                t.ajax({
                    type: "POST",
                    url: n.DB_MAKER_SERVICE_URL,
                    dataType: "json",
                    data: u,
                    success: function(t) {
                        m.Font.load(t.fontsIds).then(function() {
                            if (t.resetFamilies && (d._loadedFamilies.length = 0),
                            d._useSlogansData = t.useSlogansData,
                            0 === t.makers.length && null !== o)
                                return void o();
                            for (var n = [], r = 0, c = t.makers; r < c.length; r++) {
                                var h = c[r]
                                  , u = a.LogoMap.deserialize(h);
                                u.makeLogoArgs = e,
                                null != h.i && (u.icon = s.SvgIcon.deserialize({
                                    e: h.i
                                }),
                                -1 === d._loadedEmblemIds.indexOf(u.icon.iconId) && d._loadedEmblemIds.push(u.icon.iconId)),
                                null !== h.ti && (u.texts = l.getTexts(h.ti),
                                u.slogans = l.getSlogans(h.si),
                                u.abbrs = l.getAbbrs(u.mapAbbrsCount)),
                                -1 === d._loadedFamilies.indexOf(h.fi) && d._loadedFamilies.push(h.fi);
                                var p = null === u.parentId ? u.id : u.parentId
                                  , f = null;
                                f = y.Brand.fromParentMapId(p, n),
                                null === f && (f = new y.Brand,
                                f.parentMapId = p,
                                f.inputData = l,
                                null !== h.ti && (f.primaryLogoType = u.type,
                                f.textUid = h.ti,
                                f.sloganUid = h.si),
                                n.push(f)),
                                f.logoMaps.push(u),
                                null === u.parentId && d._loadedParentMakers.indexOf(u.parentId) >= 0 && d._loadedParentMakers.push(p)
                            }
                            for (var g = 0, m = n; g < m.length; g++) {
                                var f = m[g];
                                d.initBrandPrimaryMap(f),
                                d.instantiateBrand(f, i)
                            }
                        })
                    }
                })
            }
            ,
            n.prototype.initBrandPrimaryMap = function(t) {
                for (var e, n = "" !== t.inputData.slogan, i = 0, r = t.logoMaps; i < r.length; i++) {
                    var o = r[i];
                    if (e = o.mapSlogans.length > 0,
                    o.type === t.primaryLogoType && n === e)
                        return void (t.primaryMap = o)
                }
            }
            ,
            n.prototype.prepareTextsData = function(t) {
                for (var e = [], n = 0, i = t; n < i.length; n++) {
                    var r = i[n];
                    if (!(r.length > 4)) {
                        for (var o = {
                            textUid: null,
                            textsCount: null,
                            charsCount: [],
                            scripts: null
                        }, s = 0, a = r; s < a.length; s++) {
                            var l = a[s];
                            o.charsCount.push(l.length),
                            o.scripts = _.LanguageScript.determineScripts(l)
                        }
                        o.textUid = r.uid,
                        o.textsCount = r.length,
                        e.push(o)
                    }
                }
                return e
            }
            ,
            n.prototype.instantiateBrand = function(t, e) {
                for (var n = 0, i = t.logoMaps; n < i.length; n++) {
                    var r = i[n];
                    if (null === r.texts && (r.texts = t.inputData.getTexts(t.textUid),
                    null !== r.texts && r.texts.length != r.mapTextsCount))
                        for (var o = 0, s = t.inputData.texts; o < s.length; o++) {
                            var a = s[o];
                            if (a.length === r.mapTextsCount) {
                                r.texts = a;
                                break
                            }
                        }
                    if (null === r.slogans && r.mapSlogans.length > 0) {
                        if (null !== t.sloganUid && (r.slogans = t.inputData.getSlogans(t.sloganUid),
                        null !== r.slogans && r.slogans.length != r.mapSlogans.length))
                            for (var l = 0, c = t.inputData.slogans; l < c.length; l++) {
                                var a = c[l];
                                if (a.length === r.mapSlogans.length) {
                                    r.slogans = a;
                                    break
                                }
                            }
                        if (null === r.slogans || r.slogans.length != r.mapSlogans.length) {
                            for (var h = [], u = 0, d = r.mapSlogans; u < d.length; u++) {
                                var p = d[u];
                                h.push({
                                    fontName: p.fontFamily,
                                    minChars: p.minChars,
                                    maxChars: p.maxChars
                                })
                            }
                            null === this._sloganProcessor && (this._sloganProcessor = new w.SloganProcessor),
                            r.slogans = this._sloganProcessor.process(t.inputData, h)
                        }
                    }
                    null === r.abbrs && r.mapAbbrsCount > 0 && (r.abbrs = t.inputData.getAbbrs(r.mapAbbrsCount)),
                    this.instantiateLogo(r, function(n, i, r) {
                        t.addLogo(i),
                        t.primaryMap.id === r.id && (t.primaryLogo = i),
                        t.logos.length === t.logoMaps.length && (y.Brand.groupLogoItems(t),
                        t.sortLogos(),
                        e(n, t))
                    })
                }
            }
            ,
            n.prototype.instantiateLogo = function(t, e) {
                var n = new c.Logo
                  , i = 0
                  , r = 0
                  , o = 0
                  , s = 1
                  , h = new f.Matrix
                  , g = []
                  , m = []
                  , _ = []
                  , y = []
                  , w = 0;
                n.makerId = t.id,
                n.makerType = t.type,
                n.makerSlogans = t.mapSlogans.length,
                n.activityTypeId = t.makeLogoArgs.activityType,
                n.maker = t;
                for (var x = 0, C = t; x < C.length; x++) {
                    var T = C[x];
                    if (T.type == a.MapItem.TRANSLATE)
                        h.translate(T.x, T.y);
                    else if (T.type == a.MapItem.ICON) {
                        var k = T
                          , I = t.icon;
                        this.calculateIconMaths(k, I, h),
                        I.blendMode = I.blendManager.toModel(k.blendModeRule);
                        var L = k.height / I.bounds.height
                          , E = I.bounds.width * L;
                        n.items.push(I),
                        g.push(T.width),
                        m.push(T.height),
                        _.push(E),
                        y.push(T.height)
                    } else if (T.type == a.MapItem.TEXT || T.type == a.MapItem.SLOGAN) {
                        var P;
                        P = T.type == a.MapItem.SLOGAN ? this.getTextItem(T, t.slogans[r++]) : this.getTextItem(T, t.texts[i++]),
                        s = T.height / P.bounds.height,
                        s = T.transform == v.TextTransform.UPPERCASE ? T.height / P.font.capHeightPx() : T.height / P.font.xHeightPx(),
                        P.maths.matrix.translate(-P.bounds.x, 0),
                        P.maths.matrix.scale(s, s),
                        P.maths.matrix.concat(h),
                        P.transform = T.transform;
                        var S = P.bounds.width * s;
                        T.align == l.Align.Bottom ? P.maths.matrix.translate((T.width - S) / 2, 0) : T.align == l.Align.Right && P.maths.matrix.translate(T.width - S, 0),
                        n.items.push(P),
                        g.push(T.width),
                        m.push(T.height),
                        _.push(S),
                        y.push(T.height)
                    } else if (T.type == a.MapItem.ABBR) {
                        var j = "";
                        T.length > 0 ? (j = b.UserInputProcessor.getAbbrByLength(t.makeLogoArgs.inputData, w, T.length),
                        w += T.length) : j = t.abbrs[o++];
                        var P = this.getTextItem(T, j);
                        s = T.height / P.bounds.height,
                        s = T.transform == v.TextTransform.UPPERCASE ? T.height / P.font.capHeightPx() : T.height / P.font.xHeightPx(),
                        P.maths.matrix.translate(-P.bounds.x, 0),
                        P.maths.matrix.scale(s, s),
                        P.maths.matrix.concat(h),
                        P.transform = T.transform;
                        var S = P.bounds.width * s;
                        T.align == l.Align.Bottom ? P.maths.matrix.translate((T.width - S) / 2, 0) : T.align == l.Align.Right && P.maths.matrix.translate(T.width - S, 0),
                        n.items.push(P),
                        g.push(T.width),
                        m.push(T.height),
                        _.push(S),
                        y.push(T.height)
                    } else
                        T.type == a.MapItem.LINE && (T.positionMatrix = h.clone())
                }
                for (var O = 0, A = t; O < A.length; O++) {
                    var T = A[O];
                    if (T.type == a.MapItem.LINE) {
                        var R = T.calculate("p1x", g, m, _, y)
                          , B = T.calculate("p1y", g, m, _, y)
                          , M = T.calculate("p2x", g, m, _, y)
                          , D = T.calculate("p2y", g, m, _, y)
                          , N = new u.Line;
                        N.maths = new d.LineMaths,
                        N.maths.lineWidth = T.lineWidth,
                        N.maths.p1 = T.positionMatrix.transformPoint(new p.Point(R,B)),
                        N.maths.p2 = T.positionMatrix.transformPoint(new p.Point(M,D)),
                        N.bounds = N.calculateBounds(),
                        N.blendMode = N.blendManager.toModel(T.blendModeRule),
                        n.items.push(N)
                    }
                }
                n.center(),
                e(this, n, t)
            }
            ,
            n.prototype.calculateIconMaths = function(t, e, n) {
                e.maths = new h.Maths;
                var i = t.height / e.bounds.height;
                e.maths.matrix.translate(-e.bounds.x, -e.bounds.y),
                e.maths.matrix.scale(i, i),
                e.maths.matrix.concat(n);
                var r = e.bounds.width * i;
                t.align == l.Align.Bottom ? e.maths.matrix.translate((t.width - r) / 2, 0) : t.align == l.Align.Right && e.maths.matrix.translate(t.width - r, 0)
            }
            ,
            n.prototype.resetUsage = function() {
                e.prototype.resetUsage.call(this),
                this._loadedFamilies.length = 0,
                this._loadedParentMakers.length = 0,
                this._loadedEmblemIds.length = 0,
                this._useSlogansData = !0
            }
            ,
            n.prototype.changeSvgIcon = function(t, e, n) {
                for (var i = null, r = new f.Matrix, o = e.clone(), s = 0, l = t.maker; s < l.length; s++) {
                    var c = l[s];
                    if (c.type === a.MapItem.TRANSLATE)
                        r.translate(c.x, c.y);
                    else if (c.type === a.MapItem.ICON) {
                        i = c;
                        break
                    }
                }
                this.calculateIconMaths(i, o, r);
                var h = e.maths.matrix.subtract(o.maths.matrix);
                this.calculateIconMaths(i, n, r),
                n.maths.matrix.concat(h),
                e.iconId = n.iconId,
                e.svg = n.svg,
                e.bounds = n.bounds,
                e.maths = n.maths,
                e.nounEmblem = n.nounEmblem
            }
            ,
            n
        }(o.LogoMaker);
        e.DBMaker = x
    }
    ).call(e, n(0))
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(12)
      , r = n(46)
      , o = n(27)
      , s = n(17)
      , a = function() {
        function t() {
            this._usage = 0,
            this._usageBrands = 0,
            this.loadedIconIds = null
        }
        return Object.defineProperty(t.prototype, "usage", {
            get: function() {
                return this._usage
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "usageBrands", {
            get: function() {
                return this._usageBrands
            },
            enumerable: !0,
            configurable: !0
        }),
        t.prototype.make = function(t, e, n) {
            void 0 === n && (n = null),
            this.makeLogo(t, function(n, i, r) {
                null != i && (this._usage += 1,
                i.text = t.inputData.text,
                e(n, i, r))
            }
            .bind(this), n)
        }
        ,
        t.prototype.makeLogo = function(t, e, n) {
            return void 0 === n && (n = null),
            null
        }
        ,
        t.prototype.makeBrand = function(t, e, n) {
            void 0 === n && (n = null),
            this._makeBrand(t, function(n, i) {
                null != i && (this._usageBrands += 1,
                i.text = t.inputData.text,
                e(n, i))
            }
            .bind(this), n)
        }
        ,
        t.prototype._makeBrand = function(t, e, n) {
            return void 0 === n && (n = null),
            null
        }
        ,
        t.prototype.getTextItem = function(t, e) {
            var n = r.BaseText.initText(t.logoItemType);
            return n.text = e,
            n.font = i.Font.fromName(t.fontFamily),
            n.blendMode = n.blendManager.toModel(t.blendModeRule),
            n.text = s.TextTransform.transform(e, t.transform).trim(),
            n.maths = new o.TextMaths,
            n.maths.kerning = t.kerning,
            n
        }
        ,
        t.prototype.resetUsage = function() {
            this._usage = 0,
            this._usageBrands = 0
        }
        ,
        t
    }();
    e.LogoMaker = a
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(31)
      , r = function() {
        function t() {
            this._text = "",
            this._slogan = "",
            this._textScripts = null,
            this._sloganScripts = null,
            this.abbrs = [],
            this.texts = [],
            this.slogans = [],
            this.words = 0,
            this.sloganWords = 0
        }
        return Object.defineProperty(t.prototype, "text", {
            get: function() {
                return this._text
            },
            set: function(t) {
                t !== this._text && (this._text = t,
                this._textScripts = null)
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "slogan", {
            get: function() {
                return this._slogan
            },
            set: function(t) {
                t !== this._slogan && (this._slogan = t,
                this._sloganScripts = null)
            },
            enumerable: !0,
            configurable: !0
        }),
        t.prototype.getTexts = function(t) {
            for (var e = 0, n = this.texts; e < n.length; e++) {
                var i = n[e];
                if (i.uid == t)
                    return i
            }
            return null
        }
        ,
        t.prototype.getAbbrs = function(t) {
            for (var e = 0, n = this.abbrs; e < n.length; e++) {
                var i = n[e];
                if (i.length == t)
                    return i
            }
            return null
        }
        ,
        t.prototype.getSlogans = function(t) {
            for (var e = 0, n = this.slogans; e < n.length; e++) {
                var i = n[e];
                if (i.uid == t)
                    return i
            }
            return null
        }
        ,
        t.prototype.getTextScripts = function() {
            return null === this._textScripts && (this._textScripts = i.LanguageScript.determineScripts(this._text)),
            this._textScripts
        }
        ,
        t.prototype.getSloganScripts = function() {
            return null === this._sloganScripts && (this._sloganScripts = i.LanguageScript.determineScripts(this._slogan)),
            this._sloganScripts
        }
        ,
        t.familySlogans = null,
        t
    }();
    e.UserInputData = r
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = function(t) {
        function e(n) {
            var i = t.call(this) || this;
            i._uid = ++e._uid;
            for (var r = 0, o = n; r < o.length; r++) {
                var s = o[r];
                i.push(s)
            }
            return Object.defineProperty(i, "uid", {
                get: function() {
                    return this._uid
                }
            }),
            i
        }
        return i(e, t),
        e._uid = 0,
        e
    }(Array);
    e.TextVariation = r
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(11)
      , r = n(12)
      , o = n(31)
      , s = n(87)
      , a = function() {
        function t() {
            this._neededSloganScripts = null
        }
        return Object.defineProperty(t.prototype, "neededSloganScripts", {
            get: function() {
                if (null === this._neededSloganScripts) {
                    this._neededSloganScripts = [];
                    for (var t = 0, e = this._slogansParams; t < e.length; t++) {
                        var n = e[t];
                        this._neededSloganScripts = this._neededSloganScripts.concat(r.Font.fromName(n.fontName).scripts)
                    }
                    this._neededSloganScripts = i.uniq(this._neededSloganScripts)
                }
                return this._neededSloganScripts
            },
            enumerable: !0,
            configurable: !0
        }),
        t.prototype.process = function(t, e) {
            return this.updateParams(t, e),
            this.canSlogansFontsSupportText() && !this._useDefaultSlogans ? this.processUserSlogan() : this.processDefaultSlogan()
        }
        ,
        t.prototype.updateParams = function(t, e) {
            this._userInputData = t,
            this._slogansParams = e,
            this._neededSloganScripts = null,
            this._useDefaultSlogans = !1,
            this._userInputData.slogan.length > 0 ? this._userTextScripts = this._userInputData.getSloganScripts() : (this._userTextScripts = this._userInputData.getTextScripts(),
            this._useDefaultSlogans = !0)
        }
        ,
        t.prototype.processUserSlogan = function() {
            for (var t = s.UserInputProcessor.separate(this._userInputData.slogan), e = t.join(" "), n = 0, i = 0, r = 0, o = this._slogansParams; r < o.length; r++) {
                var a = o[r];
                n += a.minChars,
                i += a.maxChars
            }
            return (e.length < n || t.length < this._slogansParams.length) && (e = this.increaseSlogan(e, n, i)),
            this.processSlogan(e)
        }
        ,
        t.prototype.processDefaultSlogan = function() {
            for (var e = Object.keys(t._defaultSloganMap), n = o.LanguageScript.getLanguagesByScripts(this.neededSloganScripts), i = o.LanguageScript.getLanguagesByScripts(this._userTextScripts), r = this.getPossibleLanguages(e, n, i)[0], s = 0, a = 0, l = this._slogansParams; a < l.length; a++) {
                var c = l[a];
                s += Math.round((c.minChars + c.maxChars) / 2)
            }
            var h = t._defaultSloganMap[r]
              , u = h[s];
            return void 0 === u && (u = h[36]),
            this.processSlogan(u)
        }
        ,
        t.prototype.processSlogan = function(t) {
            for (var e = t.split(" "), n = [], i = 0, r = 0; r < this._slogansParams.length; r++) {
                for (var o = this._slogansParams[r], s = "", a = 0, l = e.slice(i); a < l.length; a++) {
                    var c = l[a];
                    if (s = s.length > 0 ? s + " " + c : c,
                    i += 1,
                    s.length >= o.minChars && r !== this._slogansParams.length - 1)
                        break
                }
                s = this.cutSlogan(s, o),
                n.push(s)
            }
            return n
        }
        ,
        t.prototype.cutSlogan = function(t, e) {
            return t.length > e.maxChars ? t.slice(0, e.maxChars - 1) + "" : t
        }
        ,
        t.prototype.increaseSlogan = function(e, n, i) {
            var r, s = Object.keys(t._defaultSloganPiecesMap), a = o.LanguageScript.getLanguagesByScripts(this.neededSloganScripts), l = o.LanguageScript.getLanguagesByScripts(this._userTextScripts), c = this.getPossibleLanguages(s, a, l)[0], h = t._defaultSloganPiecesMap[c], u = Math.abs(n - e.length);
            if (u <= 2 && 1 === this._slogansParams.length)
                return "" + e + h[u];
            if (u = n - e.length - " ".length,
            r = i - e.length - " ".length,
            1 === this._slogansParams.length)
                return e + " " + h[u];
            if (this._slogansParams.length >= 2) {
                for (var d = this._slogansParams[0], p = this._slogansParams.slice(1, this._slogansParams.length), f = 0, g = 0; g < p.length; g++)
                    f += p[g].minChars;
                var m = d.minChars - e.length;
                if (m <= 0)
                    return e + " " + h[f];
                for (var _, v = d.maxChars - e.length - " ".length, y = u; y < r; y++)
                    for (_ = h[y],
                    void 0 === _ && (_ = h[15]),
                    m = d.minChars - e.length; m < v && !(_.length < m + f); m++)
                        if (" " === _[m])
                            return e + " " + _
            }
            return e
        }
        ,
        t.prototype.getPossibleLanguages = function() {
            for (var t = [], e = 0; e < arguments.length; e++)
                t[e] = arguments[e];
            for (var n = t.shift(), r = 0, o = t; r < o.length; r++) {
                var s = o[r];
                n = i.intersection(n, s)
            }
            if (0 === n.length)
                return ["en"];
            if (n.length > 1) {
                var a = n.indexOf("en");
                a > -1 && n.splice(a, 1)
            }
            return n
        }
        ,
        t.prototype.canSlogansFontsSupportText = function() {
            return 0 === i.difference(this._userTextScripts, this.neededSloganScripts).length
        }
        ,
        t._defaultSloganMap = {
            en: {
                5: "Motto",
                6: "Slogan",
                7: "Tagline",
                8: "Tagline?",
                9: "Strapline",
                10: "Your motto",
                11: "Your slogan",
                12: "Brand slogan",
                13: "Top strapline",
                14: "Good catchline",
                15: "Your strengths?",
                16: "Define your firm",
                17: "Enter your slogan",
                18: "Add your catchline",
                19: "The best motto ever",
                20: "Your corporate motto",
                21: "Describe your company",
                22: "Strong company tagline",
                23: "Your business statement",
                24: "Smart business catchline",
                25: "Powerful corporate slogan",
                26: "Compelling brand catchline",
                27: "Brilliant corporate tagline",
                28: "Best tagline for your brand!",
                29: "Cool motto for a cool company",
                30: "Create a motto for your brand!",
                31: "Your brand's advertising slogan",
                32: "Add a fascinating brand tagline!",
                33: "Type your business specialization",
                34: "Probably the best corporate slogan",
                35: "Amazing strapline for your business",
                36: "Create a clever slogan for your firm"
            },
            ru: {
                5: "",
                6: "",
                7: "?",
                8: "",
                9: " ",
                10: " ",
                11: " ",
                12: " ",
                13: " ",
                14: " ",
                15: "   ?",
                16: " ",
                17: "  ?",
                18: "  ",
                19: "  ",
                20: "  ",
                21: "  ",
                22: "  ",
                23: "  ",
                24: "  ",
                25: "  ",
                26: "  ",
                27: "  ",
                28: "   ",
                29: "   ",
                30: "   ",
                31: "   ",
                32: "   ",
                33: ",   ",
                34: ",    ",
                35: "   ",
                36: "    "
            }
        },
        t._defaultSloganPiecesMap = {
            en: {
                1: "!",
                2: " !",
                3: "OK!",
                4: "Call",
                5: "Do it",
                6: "Get it",
                7: "Try it!",
                8: "Pay Less",
                9: "join now!",
                10: "- book now",
                11: "now you can",
                12: "- contact us",
                13: "- join today!",
                14: "- choose your!",
                15: "check this out!"
            },
            ru: {
                1: "!",
                2: " !",
                3: "!",
                4: "- ",
                5: "",
                6: "!",
                7: "!",
                8: "!",
                9: " ",
                10: "- !",
                11: "-  !",
                12: "  !",
                13: "- !",
                14: "- !",
                15: " !"
            }
        },
        t
    }();
    e.SloganProcessor = a
}
, , , , , , , , function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = function() {
        function t(t) {
            this.disabled = !1,
            this.select = t
        }
        return t.prototype.setIndexByValue = function(t) {
            this.select.find("option").removeAttr("selected").each(function(e, n) {
                if (parseInt(n.value) === t)
                    return n.setAttribute("selected", "selected"),
                    !1
            })
        }
        ,
        t.prototype.set = function(t, e) {
            this[t] = e,
            this.updateWithProps()
        }
        ,
        t.prototype.updateWithProps = function() {
            this.select.prop("disabled", this.disabled)
        }
        ,
        t.prototype.close = function() {}
        ,
        t
    }();
    e.LogasterDropDown = i
}
, , function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(24)
      , o = n(18)
      , s = n(20)
      , a = n(19)
      , l = n(21)
      , c = n(3)
      , h = n(2)
      , u = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e.index = Math.floor(Math.random() * e.showcases.length),
            e
        }
        return i(e, t),
        e.prototype.getShowcases = function() {
            return [new o.LogoShowcase(0,[new s.ImageLayer("logo_choose/01.png"), new s.ImageLayer("logo_choose/01_bc.png",h.ColorRange.BG_A), new s.ImageLayer("logo_choose/01_1st_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN1), new s.ImageLayer("logo_choose/01_2nd_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN2), new a.LogoLayer([new l.LogoLayerItem(c.Logo.VERTICAL,41,41,"0.899 0.438 -0.581 0.829 126 146",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.VERTICAL,35,35,"0.899 0.438 -0.549 0.845 106 234",h.ColorRange.BG_A,!1), new l.LogoLayerItem(c.Logo.HORIZONTAL,65,24,"0.934 0.358 -0.54 0.864 377 70",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.ICON,22,20,"0.946 0.326 -0.475 0.894 592 290",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.HORIZONTAL,30,18,"0.914 0.407 -0.439 0.899 551 363",h.ColorRange.BG_WHITE,!1)])]), new o.LogoShowcase(0,[new s.ImageLayer("logo_choose/02.png"), new s.ImageLayer("logo_choose/02_bc1.png",h.ColorRange.BG_A), new a.LogoLayer([new l.LogoLayerItem(c.Logo.HORIZONTAL,63,22,"0.891 0.454 -0.516 0.859 626 191",h.ColorRange.BG_A)]), new s.ImageLayer("logo_choose/02_bc2.png",h.ColorRange.BG_A), new a.LogoLayer([new l.LogoLayerItem(c.Logo.VERTICAL,41,42,"0.914 0.407 -0.519 0.864 83 176",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.VERTICAL,35,35,"0.914 0.407 -0.503 0.871 61 251",h.ColorRange.BG_A,!1), new l.LogoLayerItem(c.Logo.HORIZONTAL,63,23,"0.934 0.358 -0.523 0.87 322 90",h.ColorRange.BG_WHITE), new l.LogoLayerItem(c.Logo.HORIZONTAL,59,27,"0.53 0.848 -0.894 0.456 622 220",h.ColorRange.BG_A)]), new s.ImageLayer("logo_choose/02_1st_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN1), new s.ImageLayer("logo_choose/02_2nd_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN2), new s.ImageLayer("logo_choose/02_bc_shadow.png")]), new o.LogoShowcase(0,[new s.ImageLayer("logo_choose/03.png"), new s.ImageLayer("logo_choose/03_bc.png",h.ColorRange.BG_A), new s.ImageLayer("logo_choose/03_2nd_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN2), new s.ImageLayer("logo_choose/03_bc_1st_de.png",h.ColorRange.BG_A,h.ColorRange.EL_DESIGN1), new a.LogoLayer([new l.LogoLayerItem(c.Logo.VERTICAL,41,42,"0.921 0.391 -0.537 0.859 125 170",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.VERTICAL,35,35,"0.914 0.407 -0.503 0.871 103 245",h.ColorRange.BG_A,!1), new l.LogoLayerItem(c.Logo.HORIZONTAL,62,22,"0.934 0.358 -0.523 0.87 363 78",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.ICON,75,29,"0.921 0.391 -0.52 0.866 595 249",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.VERTICAL,68,69,"0.921 0.391 -0.504 0.873 544 337",h.ColorRange.BG_WHITE,!0)])]), new o.LogoShowcase(0,[new s.ImageLayer("logo_choose/04.png"), new s.ImageLayer("logo_choose/04_bc.png",h.ColorRange.BG_A), new s.ImageLayer("logo_choose/04_1st_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN1), new s.ImageLayer("logo_choose/04_2nd_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN2), new a.LogoLayer([new l.LogoLayerItem(c.Logo.ICON,21,18,"0.934 0.358 -0.473 0.89 135 285",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.HORIZONTAL,30,18,"0.927 0.375 -0.456 0.894 83 367",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.HORIZONTAL,62,22,"0.934 0.358 -0.523 0.87 390 104",h.ColorRange.BG_WHITE), new l.LogoLayerItem(c.Logo.VERTICAL,40,40,"0.921 0.391 -0.537 0.859 611 267",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.VERTICAL,35,35,"0.927 0.375 -0.472 0.888 589 341",h.ColorRange.BG_A,!1)])]), new o.LogoShowcase(0,[new s.ImageLayer("logo_choose/05.png"), new s.ImageLayer("logo_choose/05_bc.png",h.ColorRange.BG_A), new s.ImageLayer("logo_choose/05_1st_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN1), new s.ImageLayer("logo_choose/05_2nd_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN2), new a.LogoLayer([new l.LogoLayerItem(c.Logo.HORIZONTAL,55,19,"0 -1 1 0.554 149 134",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.HORIZONTAL,64,26,"0.915 0.404 -0.532 0.858 378 65",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.VERTICAL,45,46,"0.899 0.438 -0.565 0.837 583 266",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.VERTICAL,39,38,"0.906 0.423 -0.518 0.862 561 353",h.ColorRange.BG_A,!1)]), new s.ImageLayer("logo_choose/05_shadow.png")]), new o.LogoShowcase(0,[new s.ImageLayer("logo_choose/06.png"), new s.ImageLayer("logo_choose/06_bc.png",h.ColorRange.BG_A), new s.ImageLayer("logo_choose/06_1st_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN1), new s.ImageLayer("logo_choose/06_2nd_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN2), new a.LogoLayer([new l.LogoLayerItem(c.Logo.ICON,18,17,"0.934 0.358 -0.473 0.89 128 246",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.HORIZONTAL,64,23,"0.934 0.358 -0.523 0.87 340 104",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.VERTICAL,40,42,"0.927 0.375 -0.538 0.861 561 268",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.VERTICAL,37,37,"0.927 0.375 -0.456 0.894 538 340",h.ColorRange.BG_A,!1)])]), new o.LogoShowcase(0,[new s.ImageLayer("logo_choose/07.png"), new s.ImageLayer("logo_choose/07_bc1.png",h.ColorRange.BG_A), new a.LogoLayer([new l.LogoLayerItem(c.Logo.VERTICAL,39,38,"0.891 0.454 -0.454 0.891 569 341",h.ColorRange.BG_A,!1)]), new s.ImageLayer("logo_choose/07_bc2.png",h.ColorRange.BG_A), new a.LogoLayer([new l.LogoLayerItem(c.Logo.ICON,22,19,"0.934 0.358 -0.456 0.896 154 146",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.VERTICAL,39,41,"0.914 0.407 -0.551 0.849 104 209",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.HORIZONTAL,64,23,"0.934 0.358 -0.523 0.87 367 83",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.VERTICAL,41,41,"0.53 0.848 -0.857 0.515 565 371",h.ColorRange.BG_A,!1)]), new s.ImageLayer("logo_choose/07_1st_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN1), new s.ImageLayer("logo_choose/07_2nd_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN2), new s.ImageLayer("logo_choose/07_shadows.png")]), new o.LogoShowcase(0,[new s.ImageLayer("logo_choose/08.png"), new s.ImageLayer("logo_choose/08_bc.png",h.ColorRange.BG_A), new s.ImageLayer("logo_choose/08_1st_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN1), new s.ImageLayer("logo_choose/08_2nd_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN2), new a.LogoLayer([new l.LogoLayerItem(c.Logo.VERTICAL,43,43,"0.906 0.423 -0.566 0.839 203 40",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.ICON,72,27,"0.906 0.423 -0.534 0.854 145 133",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.VERTICAL,60,60,"0.899 0.438 -0.549 0.845 104 207",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.HORIZONTAL,64,26,"0.914 0.407 -0.535 0.856 388 67",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.VERTICAL,38,38,"0.899 0.438 -0.533 0.853 558 375",h.ColorRange.BG_A,!1)]), new s.ImageLayer("logo_choose/08_shadow.png")]), new o.LogoShowcase(0,[new s.ImageLayer("logo_choose/09.png"), new s.ImageLayer("logo_choose/09_bc.png",h.ColorRange.BG_A), new s.ImageLayer("logo_choose/09_1st_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN1), new s.ImageLayer("logo_choose/09_2nd_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN2), new a.LogoLayer([new l.LogoLayerItem(c.Logo.VERTICAL,40,41,"0.927 0.375 -0.521 0.868 155 209",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.VERTICAL,37,37,"0.927 0.375 -0.538 0.861 134 283",h.ColorRange.BG_A,!1), new l.LogoLayerItem(c.Logo.HORIZONTAL,64,22,"0.934 0.358 -0.523 0.87 402 103",h.ColorRange.BG_WHITE,!1)])]), new o.LogoShowcase(0,[new s.ImageLayer("logo_choose/10.png"), new s.ImageLayer("logo_choose/10_bc1.png",h.ColorRange.BG_A), new a.LogoLayer([new l.LogoLayerItem(c.Logo.VERTICAL,37,37,"0.891 0.454 -0.47 0.883 582 331",h.ColorRange.BG_A,!1)]), new s.ImageLayer("logo_choose/10_bc2.png",h.ColorRange.BG_A), new a.LogoLayer([new l.LogoLayerItem(c.Logo.VERTICAL,41,43,"0.906 0.423 -0.582 0.832 204 38",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.HORIZONTAL,63,23,"0.934 0.358 -0.523 0.87 376 90",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.VERTICAL,40,40,"0.545 0.839 -0.858 0.515 576 361",h.ColorRange.BG_A,!1)]), new s.ImageLayer("logo_choose/10_1st_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN1), new s.ImageLayer("logo_choose/10_2nd_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN2), new s.ImageLayer("logo_choose/10_shadow.png")]), new o.LogoShowcase(0,[new s.ImageLayer("logo_choose/11.png"), new s.ImageLayer("logo_choose/11_bc.png",h.ColorRange.BG_A), new s.ImageLayer("logo_choose/11_1st_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN1), new s.ImageLayer("logo_choose/11_2nd_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN2), new a.LogoLayer([new l.LogoLayerItem(c.Logo.HORIZONTAL,55,19,"0 -1 1 0.554 167 125",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.ICON,19,16,"0.914 0.407 -0.535 0.856 137 228",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.HORIZONTAL,63,23,"0.934 0.358 -0.523 0.87 352 79",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.VERTICAL,44,44,"0.899 0.438 -0.565 0.837 566 281",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.VERTICAL,39,39,"0.899 0.438 -0.533 0.853 544 367",h.ColorRange.BG_A,!1)])]), new o.LogoShowcase(0,[new s.ImageLayer("logo_choose/12.png"), new s.ImageLayer("logo_choose/12_bc.png",h.ColorRange.BG_A), new s.ImageLayer("logo_choose/12_1st_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN1), new s.ImageLayer("logo_choose/12_2nd_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN2), new a.LogoLayer([new l.LogoLayerItem(c.Logo.VERTICAL,43,44,"0.899 0.438 -0.565 0.837 207 41",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.VERTICAL,38,37,"0.899 0.438 -0.533 0.853 185 128",h.ColorRange.BG_A,!1), new l.LogoLayerItem(c.Logo.HORIZONTAL,64,26,"0.914 0.407 -0.535 0.856 404 62",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.ICON,21,19,"0.895 0.446 -0.572 0.832 201 384",h.ColorRange.BG_WHITE,!1)]), new s.ImageLayer("logo_choose/12_shadow.png")]), new o.LogoShowcase(0,[new s.ImageLayer("logo_choose/13.png"), new s.ImageLayer("logo_choose/13_bc1.png",h.ColorRange.BG_A), new a.LogoLayer([new l.LogoLayerItem(c.Logo.VERTICAL,39,38,"0.891 0.454 -0.454 0.891 594 336",h.ColorRange.BG_A,!1)]), new s.ImageLayer("logo_choose/13_bc2.png",h.ColorRange.BG_A), new s.ImageLayer("logo_choose/13_1st_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN1), new s.ImageLayer("logo_choose/13_2nd_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN2), new a.LogoLayer([new l.LogoLayerItem(c.Logo.HORIZONTAL,63,23,"0.934 0.358 -0.523 0.87 368 91",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.VERTICAL,39,40,"0.53 0.848 -0.857 0.515 590 367",h.ColorRange.BG_A,!1)]), new s.ImageLayer("logo_choose/13_shadow.png")]), new o.LogoShowcase(0,[new s.ImageLayer("logo_choose/14.png"), new s.ImageLayer("logo_choose/14_bc.png",h.ColorRange.BG_A), new s.ImageLayer("logo_choose/14_1st_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN1), new s.ImageLayer("logo_choose/14_2nd_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN2), new a.LogoLayer([new l.LogoLayerItem(c.Logo.HORIZONTAL,63,25,"0.914 0.407 -0.535 0.856 329 62",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.VERTICAL,43,44,"0.899 0.438 -0.549 0.845 596 182",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.VERTICAL,38,38,"0.899 0.438 -0.533 0.853 574 269",h.ColorRange.BG_A,!1), new l.LogoLayerItem(c.Logo.HORIZONTAL,28,17,"0.921 0.391 -0.439 0.9 479 351",h.ColorRange.BG_WHITE,!1)]), new s.ImageLayer("logo_choose/14_shadow.png")]), new o.LogoShowcase(0,[new s.ImageLayer("logo_choose/15.png"), new s.ImageLayer("logo_choose/15_bc.png",h.ColorRange.BG_A), new s.ImageLayer("logo_choose/15_1st_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN1), new s.ImageLayer("logo_choose/15_2nd_de.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN2), new a.LogoLayer([new l.LogoLayerItem(c.Logo.ICON,22,19,"0.934 0.358 -0.44 0.902 195 65",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.VERTICAL,38,41,"0.921 0.391 -0.57 0.845 107 205",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.HORIZONTAL,64,24,"0.933 0.36 -0.525 0.869 377 76",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.VERTICAL,38,38,"0.921 0.391 -0.487 0.879 617 264",h.ColorRange.BG_A,!1)])])]
        }
        ,
        e.prototype.drawNext = function(t, e) {
            e.clearRect(0, 0, e.canvas.width, e.canvas.height),
            this.getNext().draw(t, e)
        }
        ,
        e.prototype.drawCurrent = function(t, e) {
            return e.clearRect(0, 0, e.canvas.width, e.canvas.height),
            this.showcases[this.index].draw(t, e)
        }
        ,
        e.prototype.getNext = function() {
            return this.index++,
            this.index > this.showcases.length - 1 && (this.index = 0),
            this.showcases[this.index]
        }
        ,
        e
    }(r.Presentation);
    e.CreateLogo = u
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(18)
      , o = n(20)
      , s = n(19)
      , a = n(131)
      , l = n(21)
      , c = n(3)
      , h = n(2)
      , u = n(24)
      , d = n(132)
      , p = function(t) {
        function e() {
            var e = null !== t && t.apply(this, arguments) || this;
            return e.contextMenu = null,
            e
        }
        return i(e, t),
        e.prototype.draw = function(e, n) {
            for (var i = [], r = 0; r < this.showcases.length; r++)
                i[r] = this.showcases[r].canvasRef;
            return this.contextMenu = new d.PopupContextMenu(e,i),
            t.prototype.draw.call(this, e, n)
        }
        ,
        e.prototype.getShowcases = function() {
            return [new r.LogoShowcase(0,[new o.ImageLayer("logo_popup/00_cube_01.png",h.ColorRange.BG_B), new o.ImageLayer("logo_popup/00_cube_02.png",h.ColorRange.BG_WHITE), new o.ImageLayer("logo_popup/00_cube_03.png",h.ColorRange.BG_C), new o.ImageLayer("logo_popup/00_cube_04.png",h.ColorRange.BG_A), new o.ImageLayer("logo_popup/00_cube_05.png",h.ColorRange.BG_BLACK), new o.ImageLayer("logo_popup/00_cube_06.png",h.ColorRange.BG_WHITE), new o.ImageLayer("logo_popup/00_cube_07.png",h.ColorRange.BG_GRAY), new s.LogoLayer([new l.LogoLayerItem(c.Logo.I_0,349,145,"1 0 0 1 342 177",h.ColorRange.BG_B), new l.LogoLayerItem(c.Logo.I_1,122,146,"1 0 0 1 65 574",h.ColorRange.BG_WHITE), new l.LogoLayerItem(c.Logo.I_2,122,124,"1 0 0 1 316 585",h.ColorRange.BG_C), new l.LogoLayerItem(c.Logo.I_3,251,83,"1 0 0 1 628 605",h.ColorRange.BG_A), new l.LogoLayerItem(c.Logo.I_4,201,123,"1 0 0 1 152 882",h.ColorRange.BG_BLACK), new l.LogoLayerItem(c.Logo.I_6,91,91,"1 0 0 1 583 898",h.ColorRange.BG_WHITE), new l.LogoLayerItem(c.Logo.I_5,139,61,"1 0 0 1 809 913",h.ColorRange.BG_GRAY)])],"logo-demo-canvas-0"), new r.LogoShowcase(0,[new o.ImageLayer("logo_popup/01.jpg"), new a.MaskLogoLayer("logo_popup/01_reflection_mask.jpg",[new l.LogoLayerItem(c.Logo.HORIZONTAL,568,348,"1 0 0 1 219 165",h.ColorRange.BG_WHITE,!0)])],"logo-demo-canvas-1"), new r.LogoShowcase(0,[new o.ImageLayer("logo_popup/02.jpg"), new o.ImageLayer("logo_popup/02_1st_design_element.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN1), new o.ImageLayer("logo_popup/02_2nd_design_element.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN2), new s.LogoLayer([new l.LogoLayerItem(c.Logo.HORIZONTAL,129,54,"0.973 -0.232 0.232 0.973 170.615 280",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.HORIZONTAL,98,41,"0.94 -0.342 0.342 0.94 67 542",h.ColorRange.BG_WHITE,!0)])],"logo-demo-canvas-2"), new r.LogoShowcase(0,[new o.ImageLayer("logo_popup/03.jpg"), new o.ImageLayer("logo_popup/03_branded_bg_color.png",h.ColorRange.BG_B), new o.ImageLayer("logo_popup/03_top_youtube_menu.png",h.ColorRange.BG_B,h.ColorRange.EL_TEXT), new o.ImageLayer("logo_popup/03_favicons_bg_color.png",h.ColorRange.BG_B), new s.LogoLayer([new l.LogoLayerItem(c.Logo.ICON,25,25,"0.966 0.259 -0.259 0.966 53 227",h.ColorRange.BG_B,!1), new l.LogoLayerItem(c.Logo.ICON,40,40,"0.97 -0.242 0.242 0.97 559 427",h.ColorRange.BG_B,!1), new l.LogoLayerItem(c.Logo.ICON,13,13,"0.97 -0.242 0.242 0.97 760 498",h.ColorRange.BG_B,!1), new l.LogoLayerItem(c.Logo.HORIZONTAL,63,19,"1 0 0 1 78 792",h.ColorRange.BG_WHITE,!1)])],"logo-demo-canvas-3"), new r.LogoShowcase(0,[new o.ImageLayer("logo_popup/04.jpg"), new o.ImageLayer("logo_popup/04_1st_design_element.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN1), new o.ImageLayer("logo_popup/04_2nd_design_element.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_DESIGN2), new o.ImageLayer("logo_popup/04_iphone_bg1.png",h.ColorRange.BG_C), new o.ImageLayer("logo_popup/04_iphone_bg2.png",h.ColorRange.BG_C,h.ColorRange.EL_DESIGN2), new o.ImageLayer("logo_popup/04_bc1_bg.png",h.ColorRange.BG_C), new o.ImageLayer("logo_popup/04_bc2_bg1.png",h.ColorRange.BG_A), new o.ImageLayer("logo_popup/04_bc2_bg2.png",h.ColorRange.BG_A,h.ColorRange.EL_DESIGN2), new o.ImageLayer("logo_popup/04_mail_contacts.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_TEXT), new s.LogoLayer([new l.LogoLayerItem(c.Logo.VERTICAL,98,118,"1 0 0 1 137 217",null,!0,"777777"), new l.LogoLayerItem(c.Logo.HORIZONTAL,84,26,"1 0 0 1 379 293",h.ColorRange.BG_C,!1), new l.LogoLayerItem(c.Logo.HORIZONTAL,100,40,"1 0 0 1 824 119",h.ColorRange.BG_C,!0), new l.LogoLayerItem(c.Logo.HORIZONTAL,170,69,"1 0 0 1 714 347",h.ColorRange.BG_A,!0), new l.LogoLayerItem(c.Logo.HORIZONTAL,146,59,"1 0 0 1 190 654",h.ColorRange.BG_WHITE,!0)])],"logo-demo-canvas-4"), new r.LogoShowcase(0,[new o.ImageLayer("logo_popup/05.jpg"), new o.ImageLayer("logo_popup/05_bg_color.png",h.ColorRange.BG_B), new s.LogoLayer([new l.LogoLayerItem(c.Logo.VERTICAL,83,100,"0.98 -0.199 0.199 0.98 67 394",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.VERTICAL,84,100,"0.98 -0.199 0.199 0.98 223 360",h.ColorRange.BG_B,!0), new l.LogoLayerItem(c.Logo.HORIZONTAL,261,109,"0.981 -0.194 0.194 0.981 379 325",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.VERTICAL,81,81,"0.98 -0.199 0.199 0.98 103 550",h.ColorRange.BG_GRAY,!1), new l.LogoLayerItem(c.Logo.TEXT,45,21,"0.98 -0.199 0.199 0.98 266 547",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.ICON,28,27,"0.98 -0.199 0.199 0.98 427 510",h.ColorRange.BG_WHITE,!1), new l.LogoLayerItem(c.Logo.ICON,28,27,"0.98 -0.199 0.199 0.98 493 496",h.ColorRange.BG_B,!1)]), new o.ImageLayer("logo_popup/05_top_shadow.png")],"logo-demo-canvas-5"), new r.LogoShowcase(0,[new o.ImageLayer("logo_popup/06.jpg"), new o.ImageLayer("logo_popup/06_bg_elements.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_LOGO1), new o.ImageLayer("logo_popup/06_wallpaper.png",h.ColorRange.BG_B), new s.LogoLayer([new l.LogoLayerItem(c.Logo.ICON,29,29,"1 0 0 1 379 109",h.ColorRange.BG_B,!1), new l.LogoLayerItem(c.Logo.VERTICAL,110,110,"0.982 -0.191 0.191 0.982 638 136",h.ColorRange.BG_B,!1), new l.LogoLayerItem(c.Logo.ICON,6,6,"0.985 0.174 -0.174 0.985 202 302",h.ColorRange.BG_B,!1), new l.LogoLayerItem(c.Logo.HORIZONTAL,234,77,"0.985 0.174 -0.174 0.985 360 492",h.ColorRange.BG_B,!0)])],"logo-demo-canvas-6"), new r.LogoShowcase(0,[new o.ImageLayer("logo_popup/07.jpg"), new o.ImageLayer("logo_popup/07_badge_name.png",h.ColorRange.BG_WHITE,h.ColorRange.EL_TEXT), new o.ImageLayer("logo_popup/07_element_with_bg_color.png",h.ColorRange.BG_WHITE,h.ColorRange.TEXTURE_COLOR), new s.LogoLayer([new l.LogoLayerItem(c.Logo.VERTICAL,122,146,"1 0 0 1 721 176",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.HORIZONTAL,105,44,"1 0 0 1 152 590",h.ColorRange.BG_B,!0), new l.LogoLayerItem(c.Logo.TEXT,114,50,"1 0 0 1 449 543",h.ColorRange.BG_WHITE,!1)]), new o.ImageLayer("logo_popup/07_top_shadow.png")],"logo-demo-canvas-7"), new r.LogoShowcase(0,[new o.ImageLayer("logo_popup/08.jpg"), new o.ImageLayer("logo_popup/08_frame1_bg.png",h.ColorRange.BG_B,h.ColorRange.EL_DESIGN1), new o.ImageLayer("logo_popup/08_frame2_bg.png",h.ColorRange.BG_B,h.ColorRange.EL_DESIGN2), new o.ImageLayer("logo_popup/08_frames.png"), new s.LogoLayer([new l.LogoLayerItem(c.Logo.VERTICAL,52,62,"1 0 0 1 632 209",h.ColorRange.BG_WHITE,!0), new l.LogoLayerItem(c.Logo.VERTICAL,52,62,"1 0 0 1 840 209",h.ColorRange.BG_WHITE,!0)]), new o.ImageLayer("logo_popup/08_wall_light_and_shadow.png")],"logo-demo-canvas-8"), new r.LogoShowcase(0,[new o.ImageLayer("logo_popup/09.jpg"), new o.ImageLayer("logo_popup/09_billboard_wall.png",h.ColorRange.BG_B), new s.LogoLayer([new l.LogoLayerItem(c.Logo.HORIZONTAL,409,163,"0.999 -0.035 -0.017 1.001 273 114",h.ColorRange.BG_B,!0)]), new o.ImageLayer("logo_popup/09_light_and_shadows.png")],"logo-demo-canvas-9"), new r.LogoShowcase(0,[new o.ImageLayer("logo_popup/10.jpg"), new s.LogoLayer([new l.LogoLayerItem(c.Logo.VERTICAL,145,204,"0.994 0.14 -0.052 0.999 190 112",h.ColorRange.BG_BLACK,!0), new l.LogoLayerItem(c.Logo.VERTICAL,126,152,"1 0.035 0 1 686 153",h.ColorRange.BG_WHITE,!0)]), new o.ImageLayer("logo_popup/10_signage_shadow.png"), new o.ImageLayer("logo_popup/10_citylight_reflection.png")],"logo-demo-canvas-10")]
        }
        ,
        e
    }(u.Presentation);
    e.CreateLogoPopup = p
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        var i = this && this.__extends || function() {
            var t = Object.setPrototypeOf || {
                __proto__: []
            }instanceof Array && function(t, e) {
                t.__proto__ = e
            }
            || function(t, e) {
                for (var n in e)
                    e.hasOwnProperty(n) && (t[n] = e[n])
            }
            ;
            return function(e, n) {
                function i() {
                    this.constructor = e
                }
                t(e, n),
                e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                new i)
            }
        }();
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var r = n(19)
          , o = function(e) {
            function n(t, n) {
                var i = e.call(this, n) || this;
                return i.tempContext2d = null,
                i.imageUrl = i.getFullUrl(t),
                i.tempContext2d = document.createElement("canvas").getContext("2d"),
                i
            }
            return i(n, e),
            n.prototype.load = function() {
                var n = this
                  , i = [];
                return i.push(e.prototype.load.call(this)),
                i.push(new t(function(t, e) {
                    n.image = new Image,
                    n.image.crossOrigin = "anonymous",
                    n.image.src = n.imageUrl,
                    n.image.onload = function() {
                        n.tempContext2d.canvas.width = n.image.width,
                        n.tempContext2d.canvas.height = n.image.height,
                        t()
                    }
                    ,
                    n.image.onerror = function() {
                        e()
                    }
                }
                )),
                t.all(i)
            }
            ,
            n.prototype.draw = function(t, e, n, i, r) {
                this.tempContext2d.clearRect(0, 0, this.tempContext2d.canvas.width, this.tempContext2d.canvas.height);
                for (var o = 0, s = this.items; o < s.length; o++) {
                    s[o].draw(t, this.tempContext2d, null, r)
                }
                this.tempContext2d.save(),
                this.tempContext2d.globalCompositeOperation = "source-in",
                this.tempContext2d.drawImage(this.image, 0, 0),
                this.tempContext2d.restore(),
                e.save(),
                null !== n && n.setToContext2d(e),
                e.drawImage(this.tempContext2d.canvas, 0, 0),
                e.restore()
            }
            ,
            n
        }(r.LogoLayer);
        e.MaskLogoLayer = o
    }
    ).call(e, n(4))
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = n(133)
          , r = n(3)
          , o = function() {
            function e(t, e) {
                this.brand = null,
                this.menu = null,
                this.canvases = null,
                this.brand = t,
                this.canvases = e,
                this.initMenu(),
                this.deleteUnusedMenus()
            }
            return e.prototype.generateSearchString = function(t) {
                for (var e = [], n = 0; n < t.length; n++)
                    e[n] = '[data-scref="' + t[n] + '"]';
                return e.join(",")
            }
            ,
            e.prototype.deleteUnusedMenus = function() {
                var t = document.getElementsByClassName("dropdown bootstrapMenu");
                if (t.length > 1)
                    for (var e = 0; e < t.length - 1; e++)
                        t[e].remove(),
                        e--
            }
            ,
            e.prototype.initMenu = function() {
                var e = null
                  , n = this.brand.text
                  , o = this.brand.number
                  , s = this.brand.status
                  , a = this.canvases
                  , l = t(".logo-demo-container");
                this.menu = new i(this.generateSearchString(a),{
                    fetchElementData: function(t) {
                        return t.data("scref")
                    },
                    actions: [{
                        name: translation.SaveAsImage,
                        onClick: function(t) {
                            var i = a.indexOf(t) + 1
                              , c = l.find("[data-scref='" + t + "']")[0];
                            n = n.replace(/ /g, "_"),
                            e = null === o || s === r.Logo.STATUS_FAVORITE ? n + "_brand_usage_#" + i + "_created_by_logaster.png" : n + "_#" + o + "_brand_usage_#" + i + "_created_by_logaster.png";
                            var h = document.createElement("a");
                            h.setAttribute("href", c.toDataURL()),
                            h.setAttribute("download", e),
                            h.click()
                        }
                    }]
                })
            }
            ,
            e
        }();
        e.PopupContextMenu = o
    }
    ).call(e, n(0))
}
, function(t, e, n) {
    "use strict";
    function i(t) {
        var e = u('<div class="dropdown bootstrapMenu" style="z-index:10000;position:absolute;" />')
          , n = u('<ul class="dropdown-menu" style="position:static;display:block;font-size:0.9em;" />')
          , i = [];
        i[0] = [],
        d.each(t.options.actionsGroups, function(t, e) {
            i[e + 1] = []
        });
        var r = !1;
        d.each(t.options.actions, function(e, n) {
            var o = !1;
            d.each(t.options.actionsGroups, function(t, e) {
                d.contains(t, n) && (i[e + 1].push(n),
                o = !0)
            }),
            !1 === o && i[0].push(n),
            void 0 !== e.iconClass && (r = !0)
        });
        var o = !0;
        return d.each(i, function(e) {
            0 != e.length && (!1 === o && n.append('<li class="divider"></li>'),
            o = !1,
            d.each(e, function(e) {
                var i = t.options.actions[e];
                !0 === r ? n.append('<li role="presentation" data-action="' + e + '"><a href="#" role="menuitem"><i class="fa fa-fw fa-lg ' + (i.iconClass || "") + '"></i> <span class="actionName"></span></a></li>') : n.append('<li role="presentation" data-action="' + e + '"><a href="#" role="menuitem"><span class="actionName"></span></a></li>')
            }),
            n.append('<li role="presentation" class="noActionsMessage disabled"><a href="#" role="menuitem"><span>' + t.options.noActionsMessage + "</span></a></li>"))
        }),
        e.append(n)
    }
    function r(t) {
        var e = null;
        switch (t.options.menuEvent) {
        case "click":
            e = "click";
            break;
        case "right-click":
            e = "contextmenu";
            break;
        case "hover":
            e = "mouseenter";
            break;
        default:
            throw new Error("Unknown BootstrapMenu 'menuEvent' option")
        }
        t.$container.on(e + t.namespace, t.selector, function(e) {
            var n = u(this);
            return t.open(n, e),
            !1
        })
    }
    function o(t) {
        t.$container.off(t.namespace)
    }
    function s(t) {
        var e = t.options._actionSelectEvent + t.namespace;
        t.$menu.on(e, function(e) {
            e.preventDefault(),
            e.stopPropagation();
            var n = u(e.target)
              , i = n.closest("[data-action]");
            if (i && i.length && !i.is(".disabled")) {
                var r = i.data("action")
                  , o = t.options.fetchElementData(t.$openTarget);
                t.options.actions[r].onClick(o),
                t.close()
            }
        })
    }
    function a(t) {
        t.$menu.off(t.namespace)
    }
    function l(t) {
        switch (t.options.menuEvent) {
        case "click":
        case "right-click":
            break;
        case "hover":
            var e = t.$openTarget.add(t.$menu);
            e.on("mouseleave" + t.closeNamespace, function(n) {
                var i = n.toElement || n.relatedTarget;
                t.$openTarget.is(i) || t.$menu.is(i) || (e.off(t.closeNamespace),
                t.close())
            });
            break;
        default:
            throw new Error("Unknown BootstrapMenu 'menuEvent' option")
        }
        t.$container.on("click" + t.closeNamespace, function() {
            t.close()
        })
    }
    function c(t) {
        t.$container.off(t.closeNamespace)
    }
    var h = n(134)
      , u = n(0);
    n(135);
    var d = function() {
        throw new Error("Custom lodash build for BootstrapMenu. lodash chaining is not included")
    };
    d.noop = n(136),
    d.each = n(137),
    d.contains = n(151),
    d.extend = n(158),
    d.uniqueId = n(165),
    d.isFunction = n(109);
    var p = {
        container: "body",
        fetchElementData: d.noop,
        menuSource: "mouse",
        menuPosition: "belowLeft",
        menuEvent: "right-click",
        actionsGroups: [],
        noActionsMessage: "No available actions",
        _actionSelectEvent: "click"
    }
      , f = function(t, e) {
        this.selector = t,
        this.options = d.extend({}, p, e),
        this.namespace = d.uniqueId(".BootstrapMenu_"),
        this.closeNamespace = d.uniqueId(".BootstrapMenuClose_"),
        this.init()
    }
      , g = [];
    f.prototype.init = function() {
        this.$container = u(this.options.container),
        this.$menu = i(this),
        this.$menuList = this.$menu.children(),
        this.$menu.hide().appendTo(this.$container),
        this.$openTarget = null,
        this.openEvent = null,
        r(this),
        s(this),
        g.push(this)
    }
    ,
    f.prototype.updatePosition = function() {
        var t = null
          , e = null
          , n = null;
        switch (this.options.menuSource) {
        case "element":
            e = this.$openTarget;
            break;
        case "mouse":
            e = this.openEvent;
            break;
        default:
            throw new Error("Unknown BootstrapMenu 'menuSource' option")
        }
        switch (this.options.menuPosition) {
        case "belowRight":
            t = "right top",
            n = "right bottom";
            break;
        case "belowLeft":
            t = "left top",
            n = "left bottom";
            break;
        case "aboveRight":
            t = "right bottom",
            n = "right top";
            break;
        case "aboveLeft":
            t = "left bottom",
            n = "left top";
            break;
        default:
            throw new Error("Unknown BootstrapMenu 'menuPosition' option")
        }
        this.$menu.css({
            display: "block"
        }),
        this.$menu.css({
            height: this.$menuList.height(),
            width: this.$menuList.width()
        }),
        this.$menu.position({
            my: t,
            at: n,
            of: e
        })
    }
    ,
    f.prototype.open = function(t, e) {
        var n = this;
        f.closeAll(),
        this.$openTarget = t,
        this.openEvent = e;
        var i = n.options.fetchElementData(n.$openTarget)
          , r = this.$menu.find("[data-action]")
          , o = this.$menu.find(".noActionsMessage");
        r.show(),
        o.hide();
        var s = 0;
        r.each(function() {
            var t = u(this)
              , e = t.data("action")
              , r = n.options.actions[e]
              , o = r.classNames || null;
            if (o && d.isFunction(o) && (o = o(i)),
            t.attr("class", h(o || "")),
            r.isShown && !1 === r.isShown(i))
                return void t.hide();
            s++,
            t.find(".actionName").html(d.isFunction(r.name) && r.name(i) || r.name),
            r.isEnabled && !1 === r.isEnabled(i) && t.addClass("disabled")
        }),
        0 === s && o.show(),
        this.updatePosition(),
        this.$menu.show(),
        l(this)
    }
    ,
    f.prototype.close = function() {
        this.$menu.hide(),
        c(this)
    }
    ,
    f.prototype.destroy = function() {
        this.close(),
        o(this),
        a(this)
    }
    ,
    f.closeAll = function() {
        d.each(g, function(t) {
            t.close()
        })
    }
    ,
    t.exports = f
}
, function(t, e, n) {
    var i, r;
    /*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
    !function() {
        "use strict";
        function n() {
            for (var t = [], e = 0; e < arguments.length; e++) {
                var i = arguments[e];
                if (i) {
                    var r = typeof i;
                    if ("string" === r || "number" === r)
                        t.push(i);
                    else if (Array.isArray(i) && i.length) {
                        var s = n.apply(null, i);
                        s && t.push(s)
                    } else if ("object" === r)
                        for (var a in i)
                            o.call(i, a) && i[a] && t.push(a)
                }
            }
            return t.join(" ")
        }
        var o = {}.hasOwnProperty;
        void 0 !== t && t.exports ? (n.default = n,
        t.exports = n) : (i = [],
        void 0 !== (r = function() {
            return n
        }
        .apply(e, i)) && (t.exports = r))
    }()
}
, function(t, e, n) {
    var i, r, o;
    /*!
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
    !function(s) {
        r = [n(0), n(65)],
        i = s,
        void 0 !== (o = "function" == typeof i ? i.apply(e, r) : i) && (t.exports = o)
    }(function(t) {
        return function() {
            function e(t, e, n) {
                return [parseFloat(t[0]) * (u.test(t[0]) ? e / 100 : 1), parseFloat(t[1]) * (u.test(t[1]) ? n / 100 : 1)]
            }
            function n(e, n) {
                return parseInt(t.css(e, n), 10) || 0
            }
            function i(e) {
                var n = e[0];
                return 9 === n.nodeType ? {
                    width: e.width(),
                    height: e.height(),
                    offset: {
                        top: 0,
                        left: 0
                    }
                } : t.isWindow(n) ? {
                    width: e.width(),
                    height: e.height(),
                    offset: {
                        top: e.scrollTop(),
                        left: e.scrollLeft()
                    }
                } : n.preventDefault ? {
                    width: 0,
                    height: 0,
                    offset: {
                        top: n.pageY,
                        left: n.pageX
                    }
                } : {
                    width: e.outerWidth(),
                    height: e.outerHeight(),
                    offset: e.offset()
                }
            }
            var r, o = Math.max, s = Math.abs, a = /left|center|right/, l = /top|center|bottom/, c = /[\+\-]\d+(\.[\d]+)?%?/, h = /^\w+/, u = /%$/, d = t.fn.position;
            t.position = {
                scrollbarWidth: function() {
                    if (void 0 !== r)
                        return r;
                    var e, n, i = t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"), o = i.children()[0];
                    return t("body").append(i),
                    e = o.offsetWidth,
                    i.css("overflow", "scroll"),
                    n = o.offsetWidth,
                    e === n && (n = i[0].clientWidth),
                    i.remove(),
                    r = e - n
                },
                getScrollInfo: function(e) {
                    var n = e.isWindow || e.isDocument ? "" : e.element.css("overflow-x")
                      , i = e.isWindow || e.isDocument ? "" : e.element.css("overflow-y")
                      , r = "scroll" === n || "auto" === n && e.width < e.element[0].scrollWidth;
                    return {
                        width: "scroll" === i || "auto" === i && e.height < e.element[0].scrollHeight ? t.position.scrollbarWidth() : 0,
                        height: r ? t.position.scrollbarWidth() : 0
                    }
                },
                getWithinInfo: function(e) {
                    var n = t(e || window)
                      , i = t.isWindow(n[0])
                      , r = !!n[0] && 9 === n[0].nodeType;
                    return {
                        element: n,
                        isWindow: i,
                        isDocument: r,
                        offset: i || r ? {
                            left: 0,
                            top: 0
                        } : t(e).offset(),
                        scrollLeft: n.scrollLeft(),
                        scrollTop: n.scrollTop(),
                        width: n.outerWidth(),
                        height: n.outerHeight()
                    }
                }
            },
            t.fn.position = function(r) {
                if (!r || !r.of)
                    return d.apply(this, arguments);
                r = t.extend({}, r);
                var u, p, f, g, m, _, v = t(r.of), y = t.position.getWithinInfo(r.within), b = t.position.getScrollInfo(y), w = (r.collision || "flip").split(" "), x = {};
                return _ = i(v),
                v[0].preventDefault && (r.at = "left top"),
                p = _.width,
                f = _.height,
                g = _.offset,
                m = t.extend({}, g),
                t.each(["my", "at"], function() {
                    var t, e, n = (r[this] || "").split(" ");
                    1 === n.length && (n = a.test(n[0]) ? n.concat(["center"]) : l.test(n[0]) ? ["center"].concat(n) : ["center", "center"]),
                    n[0] = a.test(n[0]) ? n[0] : "center",
                    n[1] = l.test(n[1]) ? n[1] : "center",
                    t = c.exec(n[0]),
                    e = c.exec(n[1]),
                    x[this] = [t ? t[0] : 0, e ? e[0] : 0],
                    r[this] = [h.exec(n[0])[0], h.exec(n[1])[0]]
                }),
                1 === w.length && (w[1] = w[0]),
                "right" === r.at[0] ? m.left += p : "center" === r.at[0] && (m.left += p / 2),
                "bottom" === r.at[1] ? m.top += f : "center" === r.at[1] && (m.top += f / 2),
                u = e(x.at, p, f),
                m.left += u[0],
                m.top += u[1],
                this.each(function() {
                    var i, a, l = t(this), c = l.outerWidth(), h = l.outerHeight(), d = n(this, "marginLeft"), _ = n(this, "marginTop"), C = c + d + n(this, "marginRight") + b.width, T = h + _ + n(this, "marginBottom") + b.height, k = t.extend({}, m), I = e(x.my, l.outerWidth(), l.outerHeight());
                    "right" === r.my[0] ? k.left -= c : "center" === r.my[0] && (k.left -= c / 2),
                    "bottom" === r.my[1] ? k.top -= h : "center" === r.my[1] && (k.top -= h / 2),
                    k.left += I[0],
                    k.top += I[1],
                    i = {
                        marginLeft: d,
                        marginTop: _
                    },
                    t.each(["left", "top"], function(e, n) {
                        t.ui.position[w[e]] && t.ui.position[w[e]][n](k, {
                            targetWidth: p,
                            targetHeight: f,
                            elemWidth: c,
                            elemHeight: h,
                            collisionPosition: i,
                            collisionWidth: C,
                            collisionHeight: T,
                            offset: [u[0] + I[0], u[1] + I[1]],
                            my: r.my,
                            at: r.at,
                            within: y,
                            elem: l
                        })
                    }),
                    r.using && (a = function(t) {
                        var e = g.left - k.left
                          , n = e + p - c
                          , i = g.top - k.top
                          , a = i + f - h
                          , u = {
                            target: {
                                element: v,
                                left: g.left,
                                top: g.top,
                                width: p,
                                height: f
                            },
                            element: {
                                element: l,
                                left: k.left,
                                top: k.top,
                                width: c,
                                height: h
                            },
                            horizontal: n < 0 ? "left" : e > 0 ? "right" : "center",
                            vertical: a < 0 ? "top" : i > 0 ? "bottom" : "middle"
                        };
                        p < c && s(e + n) < p && (u.horizontal = "center"),
                        f < h && s(i + a) < f && (u.vertical = "middle"),
                        o(s(e), s(n)) > o(s(i), s(a)) ? u.important = "horizontal" : u.important = "vertical",
                        r.using.call(this, t, u)
                    }
                    ),
                    l.offset(t.extend(k, {
                        using: a
                    }))
                })
            }
            ,
            t.ui.position = {
                fit: {
                    left: function(t, e) {
                        var n, i = e.within, r = i.isWindow ? i.scrollLeft : i.offset.left, s = i.width, a = t.left - e.collisionPosition.marginLeft, l = r - a, c = a + e.collisionWidth - s - r;
                        e.collisionWidth > s ? l > 0 && c <= 0 ? (n = t.left + l + e.collisionWidth - s - r,
                        t.left += l - n) : t.left = c > 0 && l <= 0 ? r : l > c ? r + s - e.collisionWidth : r : l > 0 ? t.left += l : c > 0 ? t.left -= c : t.left = o(t.left - a, t.left)
                    },
                    top: function(t, e) {
                        var n, i = e.within, r = i.isWindow ? i.scrollTop : i.offset.top, s = e.within.height, a = t.top - e.collisionPosition.marginTop, l = r - a, c = a + e.collisionHeight - s - r;
                        e.collisionHeight > s ? l > 0 && c <= 0 ? (n = t.top + l + e.collisionHeight - s - r,
                        t.top += l - n) : t.top = c > 0 && l <= 0 ? r : l > c ? r + s - e.collisionHeight : r : l > 0 ? t.top += l : c > 0 ? t.top -= c : t.top = o(t.top - a, t.top)
                    }
                },
                flip: {
                    left: function(t, e) {
                        var n, i, r = e.within, o = r.offset.left + r.scrollLeft, a = r.width, l = r.isWindow ? r.scrollLeft : r.offset.left, c = t.left - e.collisionPosition.marginLeft, h = c - l, u = c + e.collisionWidth - a - l, d = "left" === e.my[0] ? -e.elemWidth : "right" === e.my[0] ? e.elemWidth : 0, p = "left" === e.at[0] ? e.targetWidth : "right" === e.at[0] ? -e.targetWidth : 0, f = -2 * e.offset[0];
                        h < 0 ? ((n = t.left + d + p + f + e.collisionWidth - a - o) < 0 || n < s(h)) && (t.left += d + p + f) : u > 0 && ((i = t.left - e.collisionPosition.marginLeft + d + p + f - l) > 0 || s(i) < u) && (t.left += d + p + f)
                    },
                    top: function(t, e) {
                        var n, i, r = e.within, o = r.offset.top + r.scrollTop, a = r.height, l = r.isWindow ? r.scrollTop : r.offset.top, c = t.top - e.collisionPosition.marginTop, h = c - l, u = c + e.collisionHeight - a - l, d = "top" === e.my[1], p = d ? -e.elemHeight : "bottom" === e.my[1] ? e.elemHeight : 0, f = "top" === e.at[1] ? e.targetHeight : "bottom" === e.at[1] ? -e.targetHeight : 0, g = -2 * e.offset[1];
                        h < 0 ? ((i = t.top + p + f + g + e.collisionHeight - a - o) < 0 || i < s(h)) && (t.top += p + f + g) : u > 0 && ((n = t.top - e.collisionPosition.marginTop + p + f + g - l) > 0 || s(n) < u) && (t.top += p + f + g)
                    }
                },
                flipfit: {
                    left: function() {
                        t.ui.position.flip.left.apply(this, arguments),
                        t.ui.position.fit.left.apply(this, arguments)
                    },
                    top: function() {
                        t.ui.position.flip.top.apply(this, arguments),
                        t.ui.position.fit.top.apply(this, arguments)
                    }
                }
            }
        }(),
        t.ui.position
    })
}
, function(t, e) {
    function n() {}
    t.exports = n
}
, function(t, e, n) {
    t.exports = n(138)
}
, function(t, e, n) {
    var i = n(139)
      , r = n(140)
      , o = n(149)
      , s = o(i, r);
    t.exports = s
}
, function(t, e) {
    function n(t, e) {
        for (var n = -1, i = t.length; ++n < i && !1 !== e(t[n], n, t); )
            ;
        return t
    }
    t.exports = n
}
, function(t, e, n) {
    var i = n(141)
      , r = n(148)
      , o = r(i);
    t.exports = o
}
, function(t, e, n) {
    function i(t, e) {
        return r(t, e, o)
    }
    var r = n(142)
      , o = n(88);
    t.exports = i
}
, function(t, e, n) {
    var i = n(143)
      , r = i();
    t.exports = r
}
, function(t, e, n) {
    function i(t) {
        return function(e, n, i) {
            for (var o = r(e), s = i(e), a = s.length, l = t ? a : -1; t ? l-- : ++l < a; ) {
                var c = s[l];
                if (!1 === n(o[c], c, o))
                    break
            }
            return e
        }
    }
    var r = n(107);
    t.exports = i
}
, function(t, e, n) {
    function i(t) {
        return null != t && (r(t) ? h.test(l.call(t)) : o(t) && s.test(t))
    }
    var r = n(109)
      , o = n(89)
      , s = /^\[object .+?Constructor\]$/
      , a = Object.prototype
      , l = Function.prototype.toString
      , c = a.hasOwnProperty
      , h = RegExp("^" + l.call(c).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$");
    t.exports = i
}
, function(t, e) {
    function n(t) {
        return function(e) {
            return null == e ? void 0 : e[t]
        }
    }
    t.exports = n
}
, function(t, e, n) {
    function i(t) {
        for (var e = l(t), n = e.length, i = n && t.length, c = !!i && a(i) && (o(t) || r(t)), u = -1, d = []; ++u < n; ) {
            var p = e[u];
            (c && s(p, i) || h.call(t, p)) && d.push(p)
        }
        return d
    }
    var r = n(110)
      , o = n(90)
      , s = n(98)
      , a = n(55)
      , l = n(147)
      , c = Object.prototype
      , h = c.hasOwnProperty;
    t.exports = i
}
, function(t, e, n) {
    function i(t) {
        if (null == t)
            return [];
        l(t) || (t = Object(t));
        var e = t.length;
        e = e && a(e) && (o(t) || r(t)) && e || 0;
        for (var n = t.constructor, i = -1, c = "function" == typeof n && n.prototype === t, u = Array(e), d = e > 0; ++i < e; )
            u[i] = i + "";
        for (var p in t)
            d && s(p, e) || "constructor" == p && (c || !h.call(t, p)) || u.push(p);
        return u
    }
    var r = n(110)
      , o = n(90)
      , s = n(98)
      , a = n(55)
      , l = n(66)
      , c = Object.prototype
      , h = c.hasOwnProperty;
    t.exports = i
}
, function(t, e, n) {
    function i(t, e) {
        return function(n, i) {
            var a = n ? r(n) : 0;
            if (!o(a))
                return t(n, i);
            for (var l = e ? a : -1, c = s(n); (e ? l-- : ++l < a) && !1 !== i(c[l], l, c); )
                ;
            return n
        }
    }
    var r = n(97)
      , o = n(55)
      , s = n(107);
    t.exports = i
}
, function(t, e, n) {
    function i(t, e) {
        return function(n, i, s) {
            return "function" == typeof i && void 0 === s && o(n) ? t(n, i) : e(n, r(i, s, 3))
        }
    }
    var r = n(111)
      , o = n(90);
    t.exports = i
}
, function(t, e) {
    function n(t) {
        return t
    }
    t.exports = n
}
, function(t, e, n) {
    t.exports = n(152)
}
, function(t, e, n) {
    function i(t, e, n, i) {
        var d = t ? o(t) : 0;
        return l(d) || (t = h(t),
        d = t.length),
        n = "number" != typeof n || i && a(e, n, i) ? 0 : n < 0 ? u(d + n, 0) : n || 0,
        "string" == typeof t || !s(t) && c(t) ? n <= d && t.indexOf(e, n) > -1 : !!d && r(t, e, n) > -1
    }
    var r = n(153)
      , o = n(97)
      , s = n(90)
      , a = n(112)
      , l = n(55)
      , c = n(155)
      , h = n(156)
      , u = Math.max;
    t.exports = i
}
, function(t, e, n) {
    function i(t, e, n) {
        if (e !== e)
            return r(t, n);
        for (var i = n - 1, o = t.length; ++i < o; )
            if (t[i] === e)
                return i;
        return -1
    }
    var r = n(154);
    t.exports = i
}
, function(t, e) {
    function n(t, e, n) {
        for (var i = t.length, r = e + (n ? 0 : -1); n ? r-- : ++r < i; ) {
            var o = t[r];
            if (o !== o)
                return r
        }
        return -1
    }
    t.exports = n
}
, function(t, e, n) {
    function i(t) {
        return "string" == typeof t || r(t) && a.call(t) == o
    }
    var r = n(89)
      , o = "[object String]"
      , s = Object.prototype
      , a = s.toString;
    t.exports = i
}
, function(t, e, n) {
    function i(t) {
        return r(t, o(t))
    }
    var r = n(157)
      , o = n(88);
    t.exports = i
}
, function(t, e) {
    function n(t, e) {
        for (var n = -1, i = e.length, r = Array(i); ++n < i; )
            r[n] = t[e[n]];
        return r
    }
    t.exports = n
}
, function(t, e, n) {
    t.exports = n(159)
}
, function(t, e, n) {
    var i = n(160)
      , r = n(161)
      , o = n(163)
      , s = o(function(t, e, n) {
        return n ? i(t, e, n) : r(t, e)
    });
    t.exports = s
}
, function(t, e, n) {
    function i(t, e, n) {
        for (var i = -1, o = r(e), s = o.length; ++i < s; ) {
            var a = o[i]
              , l = t[a]
              , c = n(l, e[a], a, t, e);
            (c === c ? c === l : l !== l) && (void 0 !== l || a in t) || (t[a] = c)
        }
        return t
    }
    var r = n(88);
    t.exports = i
}
, function(t, e, n) {
    function i(t, e) {
        return null == e ? t : r(e, o(e), t)
    }
    var r = n(162)
      , o = n(88);
    t.exports = i
}
, function(t, e) {
    function n(t, e, n) {
        n || (n = {});
        for (var i = -1, r = e.length; ++i < r; ) {
            var o = e[i];
            n[o] = t[o]
        }
        return n
    }
    t.exports = n
}
, function(t, e, n) {
    function i(t) {
        return s(function(e, n) {
            var i = -1
              , s = null == e ? 0 : n.length
              , a = s > 2 ? n[s - 2] : void 0
              , l = s > 2 ? n[2] : void 0
              , c = s > 1 ? n[s - 1] : void 0;
            for ("function" == typeof a ? (a = r(a, c, 5),
            s -= 2) : (a = "function" == typeof c ? c : void 0,
            s -= a ? 1 : 0),
            l && o(n[0], n[1], l) && (a = s < 3 ? void 0 : a,
            s = 1); ++i < s; ) {
                var h = n[i];
                h && t(e, h, a)
            }
            return e
        })
    }
    var r = n(111)
      , o = n(112)
      , s = n(164);
    t.exports = i
}
, function(t, e) {
    function n(t, e) {
        if ("function" != typeof t)
            throw new TypeError(i);
        return e = r(void 0 === e ? t.length - 1 : +e || 0, 0),
        function() {
            for (var n = arguments, i = -1, o = r(n.length - e, 0), s = Array(o); ++i < o; )
                s[i] = n[e + i];
            switch (e) {
            case 0:
                return t.call(this, s);
            case 1:
                return t.call(this, n[0], s);
            case 2:
                return t.call(this, n[0], n[1], s)
            }
            var a = Array(e + 1);
            for (i = -1; ++i < e; )
                a[i] = n[i];
            return a[e] = s,
            t.apply(this, a)
        }
    }
    var i = "Expected a function"
      , r = Math.max;
    t.exports = n
}
, function(t, e, n) {
    function i(t) {
        var e = ++o;
        return r(t) + e
    }
    var r = n(166)
      , o = 0;
    t.exports = i
}
, function(t, e) {
    function n(t) {
        return null == t ? "" : t + ""
    }
    t.exports = n
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        var i = this && this.__extends || function() {
            var t = Object.setPrototypeOf || {
                __proto__: []
            }instanceof Array && function(t, e) {
                t.__proto__ = e
            }
            || function(t, e) {
                for (var n in e)
                    e.hasOwnProperty(n) && (t[n] = e[n])
            }
            ;
            return function(e, n) {
                function i() {
                    this.constructor = e
                }
                t(e, n),
                e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                new i)
            }
        }();
        Object.defineProperty(e, "__esModule", {
            value: !0
        }),
        n(91);
        var r = n(85)
          , o = n(35)
          , s = n(102)
          , a = n(127)
          , l = function(e) {
            function n(t, i, r) {
                void 0 === i && (i = null),
                void 0 === r && (r = !1);
                var o = e.call(this, t) || this;
                return o.items = [],
                o.isMobile = r,
                o.items = null === i ? n.getItems() : i,
                o
            }
            return i(n, e),
            n.getItems = function() {
                for (var t = [], e = 0, n = s.ActivityType.activityTypes; e < n.length; e++) {
                    var i = n[e];
                    t.push({
                        value: i.id,
                        name: i.name,
                        model: i
                    })
                }
                return t
            }
            ,
            n.prototype.render = function() {
                for (var e, n = document.createElement("select"), i = 0, r = this.items; i < r.length; i++) {
                    var o = r[i];
                    e = document.createElement("option"),
                    e.value = "" + o.value,
                    e.text = o.name,
                    o.cssClass && (e.className = o.cssClass),
                    n.appendChild(e)
                }
                this.container.append(n);
                var s = t(n);
                this.isMobile ? (s.addClass("custom-select custom-select-lg"),
                s.on("change", this.changeHandler),
                this.dropDown = new a.LogasterDropDown(s)) : (this.dropDown = s.msDropDown({
                    useSprite: !0,
                    on: {
                        close: this.closeHandler.bind(this)
                    }
                }).data("dd"),
                this.dropDown.on("change", this.changeHandler),
                this.dropDown.on("click", this.openHandler))
            }
            ,
            n.prototype.closeHandler = function() {
                this.container.removeClass("opened")
            }
            ,
            n.prototype.openHandler = function(t) {
                if (o.WaitLocker.isLocked())
                    return this.dropDown.set("disabled", !0),
                    void setTimeout(function() {
                        this.dropDown.set("disabled", !1)
                    }
                    .bind(this), 100);
                this.container.addClass("opened"),
                e.prototype.openHandler.call(this, t)
            }
            ,
            n.prototype.changeHandler = function(e) {
                var n = t(e.target).find("option:selected")
                  , i = Number(n.val());
                this.selectedValue = i,
                null !== this.changeCallback && this.changeCallback(i)
            }
            ,
            n.prototype.update = function(t) {
                this.selectedValue = t,
                this.dropDown.setIndexByValue(t)
            }
            ,
            n
        }(r.DropDown);
        e.ActivityTypeDropDown = l
    }
    ).call(e, n(0))
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        var i = this && this.__extends || function() {
            var t = Object.setPrototypeOf || {
                __proto__: []
            }instanceof Array && function(t, e) {
                t.__proto__ = e
            }
            || function(t, e) {
                for (var n in e)
                    e.hasOwnProperty(n) && (t[n] = e[n])
            }
            ;
            return function(e, n) {
                function i() {
                    this.constructor = e
                }
                t(e, n),
                e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                new i)
            }
        }();
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var r = n(213)
          , o = n(67)
          , s = function(e) {
            function n(t, n, i, o) {
                var s = e.call(this) || this;
                return s._template = null,
                s.templateHtml = null,
                s._clickedElement = null,
                s._initialised = !1,
                s._closeButton = null,
                s._elementToInsert = null,
                s.popupWrapper = null,
                s.brandCreationData = null,
                s.okClickHandler = null,
                s.brandCreationData = r.BrandCreationData.getInstance(),
                s._clickedElement = t,
                s._elementToInsert = n,
                s.popupWrapper = t.find(".popup-wrapper"),
                s._clickedElement.find(".pulldown-button").on("click", s.openHandler),
                s.okClickHandler = i,
                s.openCallback = o,
                s
            }
            return i(n, e),
            n.prototype.bindHandlers = function() {
                e.prototype.bindHandlers.call(this),
                this.openHandler = this.openHandler.bind(this),
                this.create = this.create.bind(this),
                this.hide = this.hide.bind(this),
                this.globalClickHandler = this.globalClickHandler.bind(this),
                this.leaveCurrentElement = this.leaveCurrentElement.bind(this),
                this.applyChangesHandler = this.applyChangesHandler.bind(this)
            }
            ,
            n.prototype.create = function() {
                this.popupWrapper.append('<span aria-hidden="true" class="icon-close"></span>'),
                this.popupWrapper.append(this.templateHtml),
                this._initialised = !0,
                this._closeButton = this.popupWrapper.find(".icon-close"),
                this._closeButton.on("click", this.hide),
                this.popupWrapper.find(".ok-btn").on("click", this.applyChangesHandler)
            }
            ,
            n.prototype.openHandler = function(n) {
                e.prototype.openHandler.call(this, n),
                this._initialised || this.create(),
                n.stopPropagation(),
                this.popupWrapper.fadeIn(300),
                this._clickedElement.addClass("opened"),
                t(document).on("click.PopUpClickGlobal", this.globalClickHandler)
            }
            ,
            n.prototype.globalClickHandler = function(t) {
                0 == this._clickedElement.has(t.target).length && this.hide()
            }
            ,
            n.prototype.hide = function() {
                t(document).off("click.PopUpClickGlobal"),
                this.popupWrapper.fadeOut(300),
                this._clickedElement.removeClass("opened")
            }
            ,
            n.prototype.leaveCurrentElement = function() {
                this._clickedElement.find(".popup-wrapper input:checkbox").prop("checked", !1)
            }
            ,
            n.prototype.applyChangesHandler = function() {
                this.hide(),
                this.okClickHandler()
            }
            ,
            n
        }(o.LogasterPopup);
        e.PulldownMenu = s
    }
    ).call(e, n(0))
}
, function(t, e, n) {
    (function(i) {
        var r, o;
        /*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */
        !function(i, s) {
            r = [n(0)],
            void 0 !== (o = function(t) {
                return s(t)
            }
            .apply(e, r)) && (t.exports = o)
        }(0, function(t) {
            var e = function() {
                "use strict";
                return {
                    isMsie: function() {
                        return !!/(msie|trident)/i.test(navigator.userAgent) && navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]
                    },
                    isBlankString: function(t) {
                        return !t || /^\s*$/.test(t)
                    },
                    escapeRegExChars: function(t) {
                        return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&")
                    },
                    isString: function(t) {
                        return "string" == typeof t
                    },
                    isNumber: function(t) {
                        return "number" == typeof t
                    },
                    isArray: t.isArray,
                    isFunction: t.isFunction,
                    isObject: t.isPlainObject,
                    isUndefined: function(t) {
                        return void 0 === t
                    },
                    isElement: function(t) {
                        return !(!t || 1 !== t.nodeType)
                    },
                    isJQuery: function(e) {
                        return e instanceof t
                    },
                    toStr: function(t) {
                        return e.isUndefined(t) || null === t ? "" : t + ""
                    },
                    bind: t.proxy,
                    each: function(e, n) {
                        function i(t, e) {
                            return n(e, t)
                        }
                        t.each(e, i)
                    },
                    map: t.map,
                    filter: t.grep,
                    every: function(e, n) {
                        var i = !0;
                        return e ? (t.each(e, function(t, r) {
                            if (!(i = n.call(null, r, t, e)))
                                return !1
                        }),
                        !!i) : i
                    },
                    some: function(e, n) {
                        var i = !1;
                        return e ? (t.each(e, function(t, r) {
                            if (i = n.call(null, r, t, e))
                                return !1
                        }),
                        !!i) : i
                    },
                    mixin: t.extend,
                    identity: function(t) {
                        return t
                    },
                    clone: function(e) {
                        return t.extend(!0, {}, e)
                    },
                    getIdGenerator: function() {
                        var t = 0;
                        return function() {
                            return t++
                        }
                    },
                    templatify: function(e) {
                        function n() {
                            return String(e)
                        }
                        return t.isFunction(e) ? e : n
                    },
                    defer: function(t) {
                        setTimeout(t, 0)
                    },
                    debounce: function(t, e, n) {
                        var i, r;
                        return function() {
                            var o, s, a = this, l = arguments;
                            return o = function() {
                                i = null,
                                n || (r = t.apply(a, l))
                            }
                            ,
                            s = n && !i,
                            clearTimeout(i),
                            i = setTimeout(o, e),
                            s && (r = t.apply(a, l)),
                            r
                        }
                    },
                    throttle: function(t, e) {
                        var n, i, r, o, s, a;
                        return s = 0,
                        a = function() {
                            s = new Date,
                            r = null,
                            o = t.apply(n, i)
                        }
                        ,
                        function() {
                            var l = new Date
                              , c = e - (l - s);
                            return n = this,
                            i = arguments,
                            c <= 0 ? (clearTimeout(r),
                            r = null,
                            s = l,
                            o = t.apply(n, i)) : r || (r = setTimeout(a, c)),
                            o
                        }
                    },
                    stringify: function(t) {
                        return e.isString(t) ? t : JSON.stringify(t)
                    },
                    noop: function() {}
                }
            }()
              , n = function() {
                "use strict";
                function t(t) {
                    var s, a;
                    return a = e.mixin({}, o, t),
                    s = {
                        css: r(),
                        classes: a,
                        html: n(a),
                        selectors: i(a)
                    },
                    {
                        css: s.css,
                        html: s.html,
                        classes: s.classes,
                        selectors: s.selectors,
                        mixin: function(t) {
                            e.mixin(t, s)
                        }
                    }
                }
                function n(t) {
                    return {
                        wrapper: '<span class="' + t.wrapper + '"></span>',
                        menu: '<div class="' + t.menu + '"></div>'
                    }
                }
                function i(t) {
                    var n = {};
                    return e.each(t, function(t, e) {
                        n[e] = "." + t
                    }),
                    n
                }
                function r() {
                    var t = {
                        wrapper: {
                            position: "relative",
                            display: "inline-block"
                        },
                        hint: {
                            position: "absolute",
                            top: "0",
                            left: "0",
                            borderColor: "transparent",
                            boxShadow: "none",
                            opacity: "1"
                        },
                        input: {
                            position: "relative",
                            verticalAlign: "top",
                            backgroundColor: "transparent"
                        },
                        inputWithNoHint: {
                            position: "relative",
                            verticalAlign: "top"
                        },
                        menu: {
                            position: "absolute",
                            top: "100%",
                            left: "0",
                            zIndex: "100",
                            display: "none"
                        },
                        ltr: {
                            left: "0",
                            right: "auto"
                        },
                        rtl: {
                            left: "auto",
                            right: " 0"
                        }
                    };
                    return e.isMsie() && e.mixin(t.input, {
                        backgroundImage: "url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"
                    }),
                    t
                }
                var o = {
                    wrapper: "twitter-typeahead",
                    input: "tt-input",
                    hint: "tt-hint",
                    menu: "tt-menu",
                    dataset: "tt-dataset",
                    suggestion: "tt-suggestion",
                    selectable: "tt-selectable",
                    empty: "tt-empty",
                    open: "tt-open",
                    cursor: "tt-cursor",
                    highlight: "tt-highlight"
                };
                return t
            }()
              , r = function() {
                "use strict";
                function n(e) {
                    e && e.el || t.error("EventBus initialized without el"),
                    this.$el = t(e.el)
                }
                var i, r;
                return i = "typeahead:",
                r = {
                    render: "rendered",
                    cursorchange: "cursorchanged",
                    select: "selected",
                    autocomplete: "autocompleted"
                },
                e.mixin(n.prototype, {
                    _trigger: function(e, n) {
                        var r;
                        return r = t.Event(i + e),
                        (n = n || []).unshift(r),
                        this.$el.trigger.apply(this.$el, n),
                        r
                    },
                    before: function(t) {
                        var e, n;
                        return e = [].slice.call(arguments, 1),
                        n = this._trigger("before" + t, e),
                        n.isDefaultPrevented()
                    },
                    trigger: function(t) {
                        var e;
                        this._trigger(t, [].slice.call(arguments, 1)),
                        (e = r[t]) && this._trigger(e, [].slice.call(arguments, 1))
                    }
                }),
                n
            }()
              , o = function() {
                "use strict";
                function t(t, e, n, i) {
                    var r;
                    if (!n)
                        return this;
                    for (e = e.split(l),
                    n = i ? a(n, i) : n,
                    this._callbacks = this._callbacks || {}; r = e.shift(); )
                        this._callbacks[r] = this._callbacks[r] || {
                            sync: [],
                            async: []
                        },
                        this._callbacks[r][t].push(n);
                    return this
                }
                function e(e, n, i) {
                    return t.call(this, "async", e, n, i)
                }
                function n(e, n, i) {
                    return t.call(this, "sync", e, n, i)
                }
                function r(t) {
                    var e;
                    if (!this._callbacks)
                        return this;
                    for (t = t.split(l); e = t.shift(); )
                        delete this._callbacks[e];
                    return this
                }
                function o(t) {
                    var e, n, i, r, o;
                    if (!this._callbacks)
                        return this;
                    for (t = t.split(l),
                    i = [].slice.call(arguments, 1); (e = t.shift()) && (n = this._callbacks[e]); )
                        r = s(n.sync, this, [e].concat(i)),
                        o = s(n.async, this, [e].concat(i)),
                        r() && c(o);
                    return this
                }
                function s(t, e, n) {
                    function i() {
                        for (var i, r = 0, o = t.length; !i && r < o; r += 1)
                            i = !1 === t[r].apply(e, n);
                        return !i
                    }
                    return i
                }
                function a(t, e) {
                    return t.bind ? t.bind(e) : function() {
                        t.apply(e, [].slice.call(arguments, 0))
                    }
                }
                var l = /\s+/
                  , c = function() {
                    return window.setImmediate ? function(t) {
                        i(function() {
                            t()
                        })
                    }
                    : function(t) {
                        setTimeout(function() {
                            t()
                        }, 0)
                    }
                }();
                return {
                    onSync: n,
                    onAsync: e,
                    off: r,
                    trigger: o
                }
            }()
              , s = function(t) {
                "use strict";
                function n(t, n, i) {
                    for (var r, o = [], s = 0, a = t.length; s < a; s++)
                        o.push(e.escapeRegExChars(t[s]));
                    return r = i ? "\\b(" + o.join("|") + ")\\b" : "(" + o.join("|") + ")",
                    n ? new RegExp(r) : new RegExp(r,"i")
                }
                var i = {
                    node: null,
                    pattern: null,
                    tagName: "strong",
                    className: null,
                    wordsOnly: !1,
                    caseSensitive: !1
                };
                return function(r) {
                    function o(e) {
                        var n, i, o;
                        return (n = a.exec(e.data)) && (o = t.createElement(r.tagName),
                        r.className && (o.className = r.className),
                        i = e.splitText(n.index),
                        i.splitText(n[0].length),
                        o.appendChild(i.cloneNode(!0)),
                        e.parentNode.replaceChild(o, i)),
                        !!n
                    }
                    function s(t, e) {
                        for (var n, i = 0; i < t.childNodes.length; i++)
                            n = t.childNodes[i],
                            3 === n.nodeType ? i += e(n) ? 1 : 0 : s(n, e)
                    }
                    var a;
                    r = e.mixin({}, i, r),
                    r.node && r.pattern && (r.pattern = e.isArray(r.pattern) ? r.pattern : [r.pattern],
                    a = n(r.pattern, r.caseSensitive, r.wordsOnly),
                    s(r.node, o))
                }
            }(window.document)
              , a = function() {
                "use strict";
                function n(n, r) {
                    n = n || {},
                    n.input || t.error("input is missing"),
                    r.mixin(this),
                    this.$hint = t(n.hint),
                    this.$input = t(n.input),
                    this.query = this.$input.val(),
                    this.queryWhenFocused = this.hasFocus() ? this.query : null,
                    this.$overflowHelper = i(this.$input),
                    this._checkLanguageDirection(),
                    0 === this.$hint.length && (this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = e.noop)
                }
                function i(e) {
                    return t('<pre aria-hidden="true"></pre>').css({
                        position: "absolute",
                        visibility: "hidden",
                        whiteSpace: "pre",
                        fontFamily: e.css("font-family"),
                        fontSize: e.css("font-size"),
                        fontStyle: e.css("font-style"),
                        fontVariant: e.css("font-variant"),
                        fontWeight: e.css("font-weight"),
                        wordSpacing: e.css("word-spacing"),
                        letterSpacing: e.css("letter-spacing"),
                        textIndent: e.css("text-indent"),
                        textRendering: e.css("text-rendering"),
                        textTransform: e.css("text-transform")
                    }).insertAfter(e)
                }
                function r(t, e) {
                    return n.normalizeQuery(t) === n.normalizeQuery(e)
                }
                function s(t) {
                    return t.altKey || t.ctrlKey || t.metaKey || t.shiftKey
                }
                var a;
                return a = {
                    9: "tab",
                    27: "esc",
                    37: "left",
                    39: "right",
                    13: "enter",
                    38: "up",
                    40: "down"
                },
                n.normalizeQuery = function(t) {
                    return e.toStr(t).replace(/^\s*/g, "").replace(/\s{2,}/g, " ")
                }
                ,
                e.mixin(n.prototype, o, {
                    _onBlur: function() {
                        this.resetInputValue(),
                        this.trigger("blurred")
                    },
                    _onFocus: function() {
                        this.queryWhenFocused = this.query,
                        this.trigger("focused")
                    },
                    _onKeydown: function(t) {
                        var e = a[t.which || t.keyCode];
                        this._managePreventDefault(e, t),
                        e && this._shouldTrigger(e, t) && this.trigger(e + "Keyed", t)
                    },
                    _onInput: function() {
                        this._setQuery(this.getInputValue()),
                        this.clearHintIfInvalid(),
                        this._checkLanguageDirection()
                    },
                    _managePreventDefault: function(t, e) {
                        var n;
                        switch (t) {
                        case "up":
                        case "down":
                            n = !s(e);
                            break;
                        default:
                            n = !1
                        }
                        n && e.preventDefault()
                    },
                    _shouldTrigger: function(t, e) {
                        var n;
                        switch (t) {
                        case "tab":
                            n = !s(e);
                            break;
                        default:
                            n = !0
                        }
                        return n
                    },
                    _checkLanguageDirection: function() {
                        var t = (this.$input.css("direction") || "ltr").toLowerCase();
                        this.dir !== t && (this.dir = t,
                        this.$hint.attr("dir", t),
                        this.trigger("langDirChanged", t))
                    },
                    _setQuery: function(t, e) {
                        var n, i;
                        n = r(t, this.query),
                        i = !!n && this.query.length !== t.length,
                        this.query = t,
                        e || n ? !e && i && this.trigger("whitespaceChanged", this.query) : this.trigger("queryChanged", this.query)
                    },
                    bind: function() {
                        var t, n, i, r, o = this;
                        return t = e.bind(this._onBlur, this),
                        n = e.bind(this._onFocus, this),
                        i = e.bind(this._onKeydown, this),
                        r = e.bind(this._onInput, this),
                        this.$input.on("blur.tt", t).on("focus.tt", n).on("keydown.tt", i),
                        !e.isMsie() || e.isMsie() > 9 ? this.$input.on("input.tt", r) : this.$input.on("keydown.tt keypress.tt cut.tt paste.tt", function(t) {
                            a[t.which || t.keyCode] || e.defer(e.bind(o._onInput, o, t))
                        }),
                        this
                    },
                    focus: function() {
                        this.$input.focus()
                    },
                    blur: function() {
                        this.$input.blur()
                    },
                    getLangDir: function() {
                        return this.dir
                    },
                    getQuery: function() {
                        return this.query || ""
                    },
                    setQuery: function(t, e) {
                        this.setInputValue(t),
                        this._setQuery(t, e)
                    },
                    hasQueryChangedSinceLastFocus: function() {
                        return this.query !== this.queryWhenFocused
                    },
                    getInputValue: function() {
                        return this.$input.val()
                    },
                    setInputValue: function(t) {
                        this.$input.val(t),
                        this.clearHintIfInvalid(),
                        this._checkLanguageDirection()
                    },
                    resetInputValue: function() {
                        this.setInputValue(this.query)
                    },
                    getHint: function() {
                        return this.$hint.val()
                    },
                    setHint: function(t) {
                        this.$hint.val(t)
                    },
                    clearHint: function() {
                        this.setHint("")
                    },
                    clearHintIfInvalid: function() {
                        var t, e, n, i;
                        t = this.getInputValue(),
                        e = this.getHint(),
                        n = t !== e && 0 === e.indexOf(t),
                        !(i = "" !== t && n && !this.hasOverflow()) && this.clearHint()
                    },
                    hasFocus: function() {
                        return this.$input.is(":focus")
                    },
                    hasOverflow: function() {
                        var t = this.$input.width() - 2;
                        return this.$overflowHelper.text(this.getInputValue()),
                        this.$overflowHelper.width() >= t
                    },
                    isCursorAtEnd: function() {
                        var t, n, i;
                        return t = this.$input.val().length,
                        n = this.$input[0].selectionStart,
                        e.isNumber(n) ? n === t : !document.selection || (i = document.selection.createRange(),
                        i.moveStart("character", -t),
                        t === i.text.length)
                    },
                    destroy: function() {
                        this.$hint.off(".tt"),
                        this.$input.off(".tt"),
                        this.$overflowHelper.remove(),
                        this.$hint = this.$input = this.$overflowHelper = t("<div>")
                    }
                }),
                n
            }()
              , l = function() {
                "use strict";
                function n(n, o) {
                    n = n || {},
                    n.templates = n.templates || {},
                    n.templates.notFound = n.templates.notFound || n.templates.empty,
                    n.source || t.error("missing source"),
                    n.node || t.error("missing node"),
                    n.name && !a(n.name) && t.error("invalid dataset name: " + n.name),
                    o.mixin(this),
                    this.highlight = !!n.highlight,
                    this.name = n.name || c(),
                    this.limit = n.limit || 5,
                    this.displayFn = i(n.display || n.displayKey),
                    this.templates = r(n.templates, this.displayFn),
                    this.source = n.source.__ttAdapter ? n.source.__ttAdapter() : n.source,
                    this.async = e.isUndefined(n.async) ? this.source.length > 2 : !!n.async,
                    this._resetLastSuggestion(),
                    this.$el = t(n.node).addClass(this.classes.dataset).addClass(this.classes.dataset + "-" + this.name)
                }
                function i(t) {
                    function n(e) {
                        return e[t]
                    }
                    return t = t || e.stringify,
                    e.isFunction(t) ? t : n
                }
                function r(n, i) {
                    function r(e) {
                        return t("<div>").text(i(e))
                    }
                    return {
                        notFound: n.notFound && e.templatify(n.notFound),
                        pending: n.pending && e.templatify(n.pending),
                        header: n.header && e.templatify(n.header),
                        footer: n.footer && e.templatify(n.footer),
                        suggestion: n.suggestion || r
                    }
                }
                function a(t) {
                    return /^[_a-zA-Z0-9-]+$/.test(t)
                }
                var l, c;
                return l = {
                    val: "tt-selectable-display",
                    obj: "tt-selectable-object"
                },
                c = e.getIdGenerator(),
                n.extractData = function(e) {
                    var n = t(e);
                    return n.data(l.obj) ? {
                        val: n.data(l.val) || "",
                        obj: n.data(l.obj) || null
                    } : null
                }
                ,
                e.mixin(n.prototype, o, {
                    _overwrite: function(t, e) {
                        e = e || [],
                        e.length ? this._renderSuggestions(t, e) : this.async && this.templates.pending ? this._renderPending(t) : !this.async && this.templates.notFound ? this._renderNotFound(t) : this._empty(),
                        this.trigger("rendered", this.name, e, !1)
                    },
                    _append: function(t, e) {
                        e = e || [],
                        e.length && this.$lastSuggestion.length ? this._appendSuggestions(t, e) : e.length ? this._renderSuggestions(t, e) : !this.$lastSuggestion.length && this.templates.notFound && this._renderNotFound(t),
                        this.trigger("rendered", this.name, e, !0)
                    },
                    _renderSuggestions: function(t, e) {
                        var n;
                        n = this._getSuggestionsFragment(t, e),
                        this.$lastSuggestion = n.children().last(),
                        this.$el.html(n).prepend(this._getHeader(t, e)).append(this._getFooter(t, e))
                    },
                    _appendSuggestions: function(t, e) {
                        var n, i;
                        n = this._getSuggestionsFragment(t, e),
                        i = n.children().last(),
                        this.$lastSuggestion.after(n),
                        this.$lastSuggestion = i
                    },
                    _renderPending: function(t) {
                        var e = this.templates.pending;
                        this._resetLastSuggestion(),
                        e && this.$el.html(e({
                            query: t,
                            dataset: this.name
                        }))
                    },
                    _renderNotFound: function(t) {
                        var e = this.templates.notFound;
                        this._resetLastSuggestion(),
                        e && this.$el.html(e({
                            query: t,
                            dataset: this.name
                        }))
                    },
                    _empty: function() {
                        this.$el.empty(),
                        this._resetLastSuggestion()
                    },
                    _getSuggestionsFragment: function(n, i) {
                        var r, o = this;
                        return r = document.createDocumentFragment(),
                        e.each(i, function(e) {
                            var i, s;
                            s = o._injectQuery(n, e),
                            i = t(o.templates.suggestion(s)).data(l.obj, e).data(l.val, o.displayFn(e)).addClass(o.classes.suggestion + " " + o.classes.selectable),
                            r.appendChild(i[0])
                        }),
                        this.highlight && s({
                            className: this.classes.highlight,
                            node: r,
                            pattern: n
                        }),
                        t(r)
                    },
                    _getFooter: function(t, e) {
                        return this.templates.footer ? this.templates.footer({
                            query: t,
                            suggestions: e,
                            dataset: this.name
                        }) : null
                    },
                    _getHeader: function(t, e) {
                        return this.templates.header ? this.templates.header({
                            query: t,
                            suggestions: e,
                            dataset: this.name
                        }) : null
                    },
                    _resetLastSuggestion: function() {
                        this.$lastSuggestion = t()
                    },
                    _injectQuery: function(t, n) {
                        return e.isObject(n) ? e.mixin({
                            _query: t
                        }, n) : n
                    },
                    update: function(e) {
                        function n(t) {
                            s || (s = !0,
                            t = (t || []).slice(0, r.limit),
                            a = t.length,
                            r._overwrite(e, t),
                            a < r.limit && r.async && r.trigger("asyncRequested", e))
                        }
                        function i(n) {
                            n = n || [],
                            !o && a < r.limit && (r.cancel = t.noop,
                            r._append(e, n.slice(0, r.limit - a)),
                            a += r.limit - a,
                            r.async && r.trigger("asyncReceived", e))
                        }
                        var r = this
                          , o = !1
                          , s = !1
                          , a = 0;
                        this.cancel(),
                        this.cancel = function() {
                            o = !0,
                            r.cancel = t.noop,
                            r.async && r.trigger("asyncCanceled", e)
                        }
                        ,
                        this.source(e, n, i),
                        !s && n([])
                    },
                    cancel: t.noop,
                    clear: function() {
                        this._empty(),
                        this.cancel(),
                        this.trigger("cleared")
                    },
                    isEmpty: function() {
                        return this.$el.is(":empty")
                    },
                    destroy: function() {
                        this.$el = t("<div>")
                    }
                }),
                n
            }()
              , c = function() {
                "use strict";
                function n(n, i) {
                    function r(e) {
                        var n = o.$node.find(e.node).first();
                        return e.node = n.length ? n : t("<div>").appendTo(o.$node),
                        new l(e,i)
                    }
                    var o = this;
                    n = n || {},
                    n.node || t.error("node is required"),
                    i.mixin(this),
                    this.$node = t(n.node),
                    this.query = null,
                    this.datasets = e.map(n.datasets, r)
                }
                return e.mixin(n.prototype, o, {
                    _onSelectableClick: function(e) {
                        this.trigger("selectableClicked", t(e.currentTarget))
                    },
                    _onRendered: function(t, e, n, i) {
                        this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty()),
                        this.trigger("datasetRendered", e, n, i)
                    },
                    _onCleared: function() {
                        this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty()),
                        this.trigger("datasetCleared")
                    },
                    _propagate: function() {
                        this.trigger.apply(this, arguments)
                    },
                    _allDatasetsEmpty: function() {
                        function t(t) {
                            return t.isEmpty()
                        }
                        return e.every(this.datasets, t)
                    },
                    _getSelectables: function() {
                        return this.$node.find(this.selectors.selectable)
                    },
                    _removeCursor: function() {
                        var t = this.getActiveSelectable();
                        t && t.removeClass(this.classes.cursor)
                    },
                    _ensureVisible: function(t) {
                        var e, n, i, r;
                        e = t.position().top,
                        n = e + t.outerHeight(!0),
                        i = this.$node.scrollTop(),
                        r = this.$node.height() + parseInt(this.$node.css("paddingTop"), 10) + parseInt(this.$node.css("paddingBottom"), 10),
                        e < 0 ? this.$node.scrollTop(i + e) : r < n && this.$node.scrollTop(i + (n - r))
                    },
                    bind: function() {
                        var t, n = this;
                        return t = e.bind(this._onSelectableClick, this),
                        this.$node.on("click.tt", this.selectors.selectable, t),
                        e.each(this.datasets, function(t) {
                            t.onSync("asyncRequested", n._propagate, n).onSync("asyncCanceled", n._propagate, n).onSync("asyncReceived", n._propagate, n).onSync("rendered", n._onRendered, n).onSync("cleared", n._onCleared, n)
                        }),
                        this
                    },
                    isOpen: function() {
                        return this.$node.hasClass(this.classes.open)
                    },
                    open: function() {
                        this.$node.addClass(this.classes.open)
                    },
                    close: function() {
                        this.$node.removeClass(this.classes.open),
                        this._removeCursor()
                    },
                    setLanguageDirection: function(t) {
                        this.$node.attr("dir", t)
                    },
                    selectableRelativeToCursor: function(t) {
                        var e, n, i, r;
                        return n = this.getActiveSelectable(),
                        e = this._getSelectables(),
                        i = n ? e.index(n) : -1,
                        r = i + t,
                        r = (r + 1) % (e.length + 1) - 1,
                        r = r < -1 ? e.length - 1 : r,
                        -1 === r ? null : e.eq(r)
                    },
                    setCursor: function(t) {
                        this._removeCursor(),
                        (t = t && t.first()) && (t.addClass(this.classes.cursor),
                        this._ensureVisible(t))
                    },
                    getSelectableData: function(t) {
                        return t && t.length ? l.extractData(t) : null
                    },
                    getActiveSelectable: function() {
                        var t = this._getSelectables().filter(this.selectors.cursor).first();
                        return t.length ? t : null
                    },
                    getTopSelectable: function() {
                        var t = this._getSelectables().first();
                        return t.length ? t : null
                    },
                    update: function(t) {
                        function n(e) {
                            e.update(t)
                        }
                        var i = t !== this.query;
                        return i && (this.query = t,
                        e.each(this.datasets, n)),
                        i
                    },
                    empty: function() {
                        function t(t) {
                            t.clear()
                        }
                        e.each(this.datasets, t),
                        this.query = null,
                        this.$node.addClass(this.classes.empty)
                    },
                    destroy: function() {
                        function n(t) {
                            t.destroy()
                        }
                        this.$node.off(".tt"),
                        this.$node = t("<div>"),
                        e.each(this.datasets, n)
                    }
                }),
                n
            }()
              , h = function() {
                "use strict";
                function t() {
                    c.apply(this, [].slice.call(arguments, 0))
                }
                var n = c.prototype;
                return e.mixin(t.prototype, c.prototype, {
                    open: function() {
                        return !this._allDatasetsEmpty() && this._show(),
                        n.open.apply(this, [].slice.call(arguments, 0))
                    },
                    close: function() {
                        return this._hide(),
                        n.close.apply(this, [].slice.call(arguments, 0))
                    },
                    _onRendered: function() {
                        return this._allDatasetsEmpty() ? this._hide() : this.isOpen() && this._show(),
                        n._onRendered.apply(this, [].slice.call(arguments, 0))
                    },
                    _onCleared: function() {
                        return this._allDatasetsEmpty() ? this._hide() : this.isOpen() && this._show(),
                        n._onCleared.apply(this, [].slice.call(arguments, 0))
                    },
                    setLanguageDirection: function(t) {
                        return this.$node.css("ltr" === t ? this.css.ltr : this.css.rtl),
                        n.setLanguageDirection.apply(this, [].slice.call(arguments, 0))
                    },
                    _hide: function() {
                        this.$node.hide()
                    },
                    _show: function() {
                        this.$node.css("display", "block")
                    }
                }),
                t
            }()
              , u = function() {
                "use strict";
                function n(n, r) {
                    var o, s, a, l, c, h, u, d, p, f, g;
                    n = n || {},
                    n.input || t.error("missing input"),
                    n.menu || t.error("missing menu"),
                    n.eventBus || t.error("missing event bus"),
                    r.mixin(this),
                    this.eventBus = n.eventBus,
                    this.minLength = e.isNumber(n.minLength) ? n.minLength : 1,
                    this.input = n.input,
                    this.menu = n.menu,
                    this.enabled = !0,
                    this.active = !1,
                    this.input.hasFocus() && this.activate(),
                    this.dir = this.input.getLangDir(),
                    this._hacks(),
                    this.menu.bind().onSync("selectableClicked", this._onSelectableClicked, this).onSync("asyncRequested", this._onAsyncRequested, this).onSync("asyncCanceled", this._onAsyncCanceled, this).onSync("asyncReceived", this._onAsyncReceived, this).onSync("datasetRendered", this._onDatasetRendered, this).onSync("datasetCleared", this._onDatasetCleared, this),
                    o = i(this, "activate", "open", "_onFocused"),
                    s = i(this, "deactivate", "_onBlurred"),
                    a = i(this, "isActive", "isOpen", "_onEnterKeyed"),
                    l = i(this, "isActive", "isOpen", "_onTabKeyed"),
                    c = i(this, "isActive", "_onEscKeyed"),
                    h = i(this, "isActive", "open", "_onUpKeyed"),
                    u = i(this, "isActive", "open", "_onDownKeyed"),
                    d = i(this, "isActive", "isOpen", "_onLeftKeyed"),
                    p = i(this, "isActive", "isOpen", "_onRightKeyed"),
                    f = i(this, "_openIfActive", "_onQueryChanged"),
                    g = i(this, "_openIfActive", "_onWhitespaceChanged"),
                    this.input.bind().onSync("focused", o, this).onSync("blurred", s, this).onSync("enterKeyed", a, this).onSync("tabKeyed", l, this).onSync("escKeyed", c, this).onSync("upKeyed", h, this).onSync("downKeyed", u, this).onSync("leftKeyed", d, this).onSync("rightKeyed", p, this).onSync("queryChanged", f, this).onSync("whitespaceChanged", g, this).onSync("langDirChanged", this._onLangDirChanged, this)
                }
                function i(t) {
                    var n = [].slice.call(arguments, 1);
                    return function() {
                        var i = [].slice.call(arguments);
                        e.each(n, function(e) {
                            return t[e].apply(t, i)
                        })
                    }
                }
                return e.mixin(n.prototype, {
                    _hacks: function() {
                        var n, i;
                        n = this.input.$input || t("<div>"),
                        i = this.menu.$node || t("<div>"),
                        n.on("blur.tt", function(t) {
                            var r, o, s;
                            r = document.activeElement,
                            o = i.is(r),
                            s = i.has(r).length > 0,
                            e.isMsie() && (o || s) && (t.preventDefault(),
                            t.stopImmediatePropagation(),
                            e.defer(function() {
                                n.focus()
                            }))
                        }),
                        i.on("mousedown.tt", function(t) {
                            t.preventDefault()
                        })
                    },
                    _onSelectableClicked: function(t, e) {
                        this.select(e)
                    },
                    _onDatasetCleared: function() {
                        this._updateHint()
                    },
                    _onDatasetRendered: function(t, e, n, i) {
                        this._updateHint(),
                        this.eventBus.trigger("render", n, i, e)
                    },
                    _onAsyncRequested: function(t, e, n) {
                        this.eventBus.trigger("asyncrequest", n, e)
                    },
                    _onAsyncCanceled: function(t, e, n) {
                        this.eventBus.trigger("asynccancel", n, e)
                    },
                    _onAsyncReceived: function(t, e, n) {
                        this.eventBus.trigger("asyncreceive", n, e)
                    },
                    _onFocused: function() {
                        this._minLengthMet() && this.menu.update(this.input.getQuery())
                    },
                    _onBlurred: function() {
                        this.input.hasQueryChangedSinceLastFocus() && this.eventBus.trigger("change", this.input.getQuery())
                    },
                    _onEnterKeyed: function(t, e) {
                        var n;
                        (n = this.menu.getActiveSelectable()) && this.select(n) && e.preventDefault()
                    },
                    _onTabKeyed: function(t, e) {
                        var n;
                        (n = this.menu.getActiveSelectable()) ? this.select(n) && e.preventDefault() : (n = this.menu.getTopSelectable()) && this.autocomplete(n) && e.preventDefault()
                    },
                    _onEscKeyed: function() {
                        this.close()
                    },
                    _onUpKeyed: function() {
                        this.moveCursor(-1)
                    },
                    _onDownKeyed: function() {
                        this.moveCursor(1)
                    },
                    _onLeftKeyed: function() {
                        "rtl" === this.dir && this.input.isCursorAtEnd() && this.autocomplete(this.menu.getTopSelectable())
                    },
                    _onRightKeyed: function() {
                        "ltr" === this.dir && this.input.isCursorAtEnd() && this.autocomplete(this.menu.getTopSelectable())
                    },
                    _onQueryChanged: function(t, e) {
                        this._minLengthMet(e) ? this.menu.update(e) : this.menu.empty()
                    },
                    _onWhitespaceChanged: function() {
                        this._updateHint()
                    },
                    _onLangDirChanged: function(t, e) {
                        this.dir !== e && (this.dir = e,
                        this.menu.setLanguageDirection(e))
                    },
                    _openIfActive: function() {
                        this.isActive() && this.open()
                    },
                    _minLengthMet: function(t) {
                        return t = e.isString(t) ? t : this.input.getQuery() || "",
                        t.length >= this.minLength
                    },
                    _updateHint: function() {
                        var t, n, i, r, o, s, l;
                        t = this.menu.getTopSelectable(),
                        n = this.menu.getSelectableData(t),
                        i = this.input.getInputValue(),
                        !n || e.isBlankString(i) || this.input.hasOverflow() ? this.input.clearHint() : (r = a.normalizeQuery(i),
                        o = e.escapeRegExChars(r),
                        s = new RegExp("^(?:" + o + ")(.+$)","i"),
                        (l = s.exec(n.val)) && this.input.setHint(i + l[1]))
                    },
                    isEnabled: function() {
                        return this.enabled
                    },
                    enable: function() {
                        this.enabled = !0
                    },
                    disable: function() {
                        this.enabled = !1
                    },
                    isActive: function() {
                        return this.active
                    },
                    activate: function() {
                        return !!this.isActive() || !(!this.isEnabled() || this.eventBus.before("active")) && (this.active = !0,
                        this.eventBus.trigger("active"),
                        !0)
                    },
                    deactivate: function() {
                        return !this.isActive() || !this.eventBus.before("idle") && (this.active = !1,
                        this.close(),
                        this.eventBus.trigger("idle"),
                        !0)
                    },
                    isOpen: function() {
                        return this.menu.isOpen()
                    },
                    open: function() {
                        return this.isOpen() || this.eventBus.before("open") || (this.menu.open(),
                        this._updateHint(),
                        this.eventBus.trigger("open")),
                        this.isOpen()
                    },
                    close: function() {
                        return this.isOpen() && !this.eventBus.before("close") && (this.menu.close(),
                        this.input.clearHint(),
                        this.input.resetInputValue(),
                        this.eventBus.trigger("close")),
                        !this.isOpen()
                    },
                    setVal: function(t) {
                        this.input.setQuery(e.toStr(t))
                    },
                    getVal: function() {
                        return this.input.getQuery()
                    },
                    select: function(t) {
                        var e = this.menu.getSelectableData(t);
                        return !(!e || this.eventBus.before("select", e.obj)) && (this.input.setQuery(e.val, !0),
                        this.eventBus.trigger("select", e.obj),
                        this.close(),
                        !0)
                    },
                    autocomplete: function(t) {
                        var e, n;
                        return e = this.input.getQuery(),
                        n = this.menu.getSelectableData(t),
                        !(!(n && e !== n.val) || this.eventBus.before("autocomplete", n.obj)) && (this.input.setQuery(n.val),
                        this.eventBus.trigger("autocomplete", n.obj),
                        !0)
                    },
                    moveCursor: function(t) {
                        var e, n, i, r;
                        return e = this.input.getQuery(),
                        n = this.menu.selectableRelativeToCursor(t),
                        i = this.menu.getSelectableData(n),
                        r = i ? i.obj : null,
                        !(this._minLengthMet() && this.menu.update(e)) && !this.eventBus.before("cursorchange", r) && (this.menu.setCursor(n),
                        i ? this.input.setInputValue(i.val) : (this.input.resetInputValue(),
                        this._updateHint()),
                        this.eventBus.trigger("cursorchange", r),
                        !0)
                    },
                    destroy: function() {
                        this.input.destroy(),
                        this.menu.destroy()
                    }
                }),
                n
            }();
            !function() {
                "use strict";
                function i(e, n) {
                    e.each(function() {
                        var e, i = t(this);
                        (e = i.data(g.typeahead)) && n(e, i)
                    })
                }
                function o(t, e) {
                    return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(l(t)).prop("readonly", !0).removeAttr("id name placeholder required").attr({
                        autocomplete: "off",
                        spellcheck: "false",
                        tabindex: -1
                    })
                }
                function s(t, e) {
                    t.data(g.attrs, {
                        dir: t.attr("dir"),
                        autocomplete: t.attr("autocomplete"),
                        spellcheck: t.attr("spellcheck"),
                        style: t.attr("style")
                    }),
                    t.addClass(e.classes.input).attr({
                        autocomplete: "off",
                        spellcheck: !1
                    });
                    try {
                        !t.attr("dir") && t.attr("dir", "auto")
                    } catch (t) {}
                    return t
                }
                function l(t) {
                    return {
                        backgroundAttachment: t.css("background-attachment"),
                        backgroundClip: t.css("background-clip"),
                        backgroundColor: t.css("background-color"),
                        backgroundImage: t.css("background-image"),
                        backgroundOrigin: t.css("background-origin"),
                        backgroundPosition: t.css("background-position"),
                        backgroundRepeat: t.css("background-repeat"),
                        backgroundSize: t.css("background-size")
                    }
                }
                function d(t) {
                    var n, i;
                    n = t.data(g.www),
                    i = t.parent().filter(n.selectors.wrapper),
                    e.each(t.data(g.attrs), function(n, i) {
                        e.isUndefined(n) ? t.removeAttr(i) : t.attr(i, n)
                    }),
                    t.removeData(g.typeahead).removeData(g.www).removeData(g.attr).removeClass(n.classes.input),
                    i.length && (t.detach().insertAfter(i),
                    i.remove())
                }
                function p(n) {
                    var i, r;
                    return i = e.isJQuery(n) || e.isElement(n),
                    r = i ? t(n).first() : [],
                    r.length ? r : null
                }
                var f, g, m;
                f = t.fn.typeahead,
                g = {
                    www: "tt-www",
                    attrs: "tt-attrs",
                    typeahead: "tt-typeahead"
                },
                m = {
                    initialize: function(i, l) {
                        function d() {
                            var n, d, m, _, v, y, b, w, x, C, T;
                            e.each(l, function(t) {
                                t.highlight = !!i.highlight
                            }),
                            n = t(this),
                            d = t(f.html.wrapper),
                            m = p(i.hint),
                            _ = p(i.menu),
                            v = !1 !== i.hint && !m,
                            y = !1 !== i.menu && !_,
                            v && (m = o(n, f)),
                            y && (_ = t(f.html.menu).css(f.css.menu)),
                            m && m.val(""),
                            n = s(n, f),
                            (v || y) && (d.css(f.css.wrapper),
                            n.css(v ? f.css.input : f.css.inputWithNoHint),
                            n.wrap(d).parent().prepend(v ? m : null).append(y ? _ : null)),
                            T = y ? h : c,
                            b = new r({
                                el: n
                            }),
                            w = new a({
                                hint: m,
                                input: n
                            },f),
                            x = new T({
                                node: _,
                                datasets: l
                            },f),
                            C = new u({
                                input: w,
                                menu: x,
                                eventBus: b,
                                minLength: i.minLength
                            },f),
                            n.data(g.www, f),
                            n.data(g.typeahead, C)
                        }
                        var f;
                        return l = e.isArray(l) ? l : [].slice.call(arguments, 1),
                        i = i || {},
                        f = n(i.classNames),
                        this.each(d)
                    },
                    isEnabled: function() {
                        var t;
                        return i(this.first(), function(e) {
                            t = e.isEnabled()
                        }),
                        t
                    },
                    enable: function() {
                        return i(this, function(t) {
                            t.enable()
                        }),
                        this
                    },
                    disable: function() {
                        return i(this, function(t) {
                            t.disable()
                        }),
                        this
                    },
                    isActive: function() {
                        var t;
                        return i(this.first(), function(e) {
                            t = e.isActive()
                        }),
                        t
                    },
                    activate: function() {
                        return i(this, function(t) {
                            t.activate()
                        }),
                        this
                    },
                    deactivate: function() {
                        return i(this, function(t) {
                            t.deactivate()
                        }),
                        this
                    },
                    isOpen: function() {
                        var t;
                        return i(this.first(), function(e) {
                            t = e.isOpen()
                        }),
                        t
                    },
                    open: function() {
                        return i(this, function(t) {
                            t.open()
                        }),
                        this
                    },
                    close: function() {
                        return i(this, function(t) {
                            t.close()
                        }),
                        this
                    },
                    select: function(e) {
                        var n = !1
                          , r = t(e);
                        return i(this.first(), function(t) {
                            n = t.select(r)
                        }),
                        n
                    },
                    autocomplete: function(e) {
                        var n = !1
                          , r = t(e);
                        return i(this.first(), function(t) {
                            n = t.autocomplete(r)
                        }),
                        n
                    },
                    moveCursor: function(t) {
                        var e = !1;
                        return i(this.first(), function(n) {
                            e = n.moveCursor(t)
                        }),
                        e
                    },
                    val: function(t) {
                        var e;
                        return arguments.length ? (i(this, function(e) {
                            e.setVal(t)
                        }),
                        this) : (i(this.first(), function(t) {
                            e = t.getVal()
                        }),
                        e)
                    },
                    destroy: function() {
                        return i(this, function(t, e) {
                            d(e),
                            t.destroy()
                        }),
                        this
                    }
                },
                t.fn.typeahead = function(t) {
                    return m[t] ? m[t].apply(this, [].slice.call(arguments, 1)) : m.initialize.apply(this, arguments)
                }
                ,
                t.fn.typeahead.noConflict = function() {
                    return t.fn.typeahead = f,
                    this
                }
            }()
        })
    }
    ).call(e, n(113).setImmediate)
}
, function(t, e, n) {
    (function(t, e) {
        !function(t, n) {
            "use strict";
            function i(t) {
                "function" != typeof t && (t = new Function("" + t));
                for (var e = new Array(arguments.length - 1), n = 0; n < e.length; n++)
                    e[n] = arguments[n + 1];
                var i = {
                    callback: t,
                    args: e
                };
                return c[l] = i,
                a(l),
                l++
            }
            function r(t) {
                delete c[t]
            }
            function o(t) {
                var e = t.callback
                  , i = t.args;
                switch (i.length) {
                case 0:
                    e();
                    break;
                case 1:
                    e(i[0]);
                    break;
                case 2:
                    e(i[0], i[1]);
                    break;
                case 3:
                    e(i[0], i[1], i[2]);
                    break;
                default:
                    e.apply(n, i)
                }
            }
            function s(t) {
                if (h)
                    setTimeout(s, 0, t);
                else {
                    var e = c[t];
                    if (e) {
                        h = !0;
                        try {
                            o(e)
                        } finally {
                            r(t),
                            h = !1
                        }
                    }
                }
            }
            if (!t.setImmediate) {
                var a, l = 1, c = {}, h = !1, u = t.document, d = Object.getPrototypeOf && Object.getPrototypeOf(t);
                d = d && d.setTimeout ? d : t,
                "[object process]" === {}.toString.call(t.process) ? function() {
                    a = function(t) {
                        e.nextTick(function() {
                            s(t)
                        })
                    }
                }() : function() {
                    if (t.postMessage && !t.importScripts) {
                        var e = !0
                          , n = t.onmessage;
                        return t.onmessage = function() {
                            e = !1
                        }
                        ,
                        t.postMessage("", "*"),
                        t.onmessage = n,
                        e
                    }
                }() ? function() {
                    var e = "setImmediate$" + Math.random() + "$"
                      , n = function(n) {
                        n.source === t && "string" == typeof n.data && 0 === n.data.indexOf(e) && s(+n.data.slice(e.length))
                    };
                    t.addEventListener ? t.addEventListener("message", n, !1) : t.attachEvent("onmessage", n),
                    a = function(n) {
                        t.postMessage(e + n, "*")
                    }
                }() : t.MessageChannel ? function() {
                    var t = new MessageChannel;
                    t.port1.onmessage = function(t) {
                        s(t.data)
                    }
                    ,
                    a = function(e) {
                        t.port2.postMessage(e)
                    }
                }() : u && "onreadystatechange"in u.createElement("script") ? function() {
                    var t = u.documentElement;
                    a = function(e) {
                        var n = u.createElement("script");
                        n.onreadystatechange = function() {
                            s(e),
                            n.onreadystatechange = null,
                            t.removeChild(n),
                            n = null
                        }
                        ,
                        t.appendChild(n)
                    }
                }() : function() {
                    a = function(t) {
                        setTimeout(s, 0, t)
                    }
                }(),
                d.setImmediate = i,
                d.clearImmediate = r
            }
        }("undefined" == typeof self ? void 0 === t ? this : t : self)
    }
    ).call(e, n(36), n(52))
}
, function(t, e, n) {
    t.exports = {
        Bloodhound: n(172),
        loadjQueryPlugin: function() {
            n(173)
        }
    }
}
, function(t, e, n) {
    var i, r;
    /*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */
    !function(o, s) {
        i = [n(0)],
        void 0 !== (r = function(t) {
            return o.Bloodhound = s(t)
        }
        .apply(e, i)) && (t.exports = r)
    }(this, function(t) {
        var e = function() {
            "use strict";
            return {
                isMsie: function() {
                    return !!/(msie|trident)/i.test(navigator.userAgent) && navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]
                },
                isBlankString: function(t) {
                    return !t || /^\s*$/.test(t)
                },
                escapeRegExChars: function(t) {
                    return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&")
                },
                isString: function(t) {
                    return "string" == typeof t
                },
                isNumber: function(t) {
                    return "number" == typeof t
                },
                isArray: t.isArray,
                isFunction: t.isFunction,
                isObject: t.isPlainObject,
                isUndefined: function(t) {
                    return void 0 === t
                },
                isElement: function(t) {
                    return !(!t || 1 !== t.nodeType)
                },
                isJQuery: function(e) {
                    return e instanceof t
                },
                toStr: function(t) {
                    return e.isUndefined(t) || null === t ? "" : t + ""
                },
                bind: t.proxy,
                each: function(e, n) {
                    function i(t, e) {
                        return n(e, t)
                    }
                    t.each(e, i)
                },
                map: t.map,
                filter: t.grep,
                every: function(e, n) {
                    var i = !0;
                    return e ? (t.each(e, function(t, r) {
                        if (!(i = n.call(null, r, t, e)))
                            return !1
                    }),
                    !!i) : i
                },
                some: function(e, n) {
                    var i = !1;
                    return e ? (t.each(e, function(t, r) {
                        if (i = n.call(null, r, t, e))
                            return !1
                    }),
                    !!i) : i
                },
                mixin: t.extend,
                identity: function(t) {
                    return t
                },
                clone: function(e) {
                    return t.extend(!0, {}, e)
                },
                getIdGenerator: function() {
                    var t = 0;
                    return function() {
                        return t++
                    }
                },
                templatify: function(e) {
                    function n() {
                        return String(e)
                    }
                    return t.isFunction(e) ? e : n
                },
                defer: function(t) {
                    setTimeout(t, 0)
                },
                debounce: function(t, e, n) {
                    var i, r;
                    return function() {
                        var o, s, a = this, l = arguments;
                        return o = function() {
                            i = null,
                            n || (r = t.apply(a, l))
                        }
                        ,
                        s = n && !i,
                        clearTimeout(i),
                        i = setTimeout(o, e),
                        s && (r = t.apply(a, l)),
                        r
                    }
                },
                throttle: function(t, e) {
                    var n, i, r, o, s, a;
                    return s = 0,
                    a = function() {
                        s = new Date,
                        r = null,
                        o = t.apply(n, i)
                    }
                    ,
                    function() {
                        var l = new Date
                          , c = e - (l - s);
                        return n = this,
                        i = arguments,
                        c <= 0 ? (clearTimeout(r),
                        r = null,
                        s = l,
                        o = t.apply(n, i)) : r || (r = setTimeout(a, c)),
                        o
                    }
                },
                stringify: function(t) {
                    return e.isString(t) ? t : JSON.stringify(t)
                },
                noop: function() {}
            }
        }()
          , n = "0.11.1"
          , i = function() {
            "use strict";
            function t(t) {
                return t = e.toStr(t),
                t ? t.split(/\s+/) : []
            }
            function n(t) {
                return t = e.toStr(t),
                t ? t.split(/\W+/) : []
            }
            function i(t) {
                return function(n) {
                    return n = e.isArray(n) ? n : [].slice.call(arguments, 0),
                    function(i) {
                        var r = [];
                        return e.each(n, function(n) {
                            r = r.concat(t(e.toStr(i[n])))
                        }),
                        r
                    }
                }
            }
            return {
                nonword: n,
                whitespace: t,
                obj: {
                    nonword: i(n),
                    whitespace: i(t)
                }
            }
        }()
          , r = function() {
            "use strict";
            function n(n) {
                this.maxSize = e.isNumber(n) ? n : 100,
                this.reset(),
                this.maxSize <= 0 && (this.set = this.get = t.noop)
            }
            function i() {
                this.head = this.tail = null
            }
            function r(t, e) {
                this.key = t,
                this.val = e,
                this.prev = this.next = null
            }
            return e.mixin(n.prototype, {
                set: function(t, e) {
                    var n, i = this.list.tail;
                    this.size >= this.maxSize && (this.list.remove(i),
                    delete this.hash[i.key],
                    this.size--),
                    (n = this.hash[t]) ? (n.val = e,
                    this.list.moveToFront(n)) : (n = new r(t,e),
                    this.list.add(n),
                    this.hash[t] = n,
                    this.size++)
                },
                get: function(t) {
                    var e = this.hash[t];
                    if (e)
                        return this.list.moveToFront(e),
                        e.val
                },
                reset: function() {
                    this.size = 0,
                    this.hash = {},
                    this.list = new i
                }
            }),
            e.mixin(i.prototype, {
                add: function(t) {
                    this.head && (t.next = this.head,
                    this.head.prev = t),
                    this.head = t,
                    this.tail = this.tail || t
                },
                remove: function(t) {
                    t.prev ? t.prev.next = t.next : this.head = t.next,
                    t.next ? t.next.prev = t.prev : this.tail = t.prev
                },
                moveToFront: function(t) {
                    this.remove(t),
                    this.add(t)
                }
            }),
            n
        }()
          , o = function() {
            "use strict";
            function n(t, n) {
                this.prefix = ["__", t, "__"].join(""),
                this.ttlKey = "__ttl__",
                this.keyMatcher = new RegExp("^" + e.escapeRegExChars(this.prefix)),
                this.ls = n || a,
                !this.ls && this._noop()
            }
            function i() {
                return (new Date).getTime()
            }
            function r(t) {
                return JSON.stringify(e.isUndefined(t) ? null : t)
            }
            function o(e) {
                return t.parseJSON(e)
            }
            function s(t) {
                var e, n, i = [], r = a.length;
                for (e = 0; e < r; e++)
                    (n = a.key(e)).match(t) && i.push(n.replace(t, ""));
                return i
            }
            var a;
            try {
                a = window.localStorage,
                a.setItem("~~~", "!"),
                a.removeItem("~~~")
            } catch (t) {
                a = null
            }
            return e.mixin(n.prototype, {
                _prefix: function(t) {
                    return this.prefix + t
                },
                _ttlKey: function(t) {
                    return this._prefix(t) + this.ttlKey
                },
                _noop: function() {
                    this.get = this.set = this.remove = this.clear = this.isExpired = e.noop
                },
                _safeSet: function(t, e) {
                    try {
                        this.ls.setItem(t, e)
                    } catch (t) {
                        "QuotaExceededError" === t.name && (this.clear(),
                        this._noop())
                    }
                },
                get: function(t) {
                    return this.isExpired(t) && this.remove(t),
                    o(this.ls.getItem(this._prefix(t)))
                },
                set: function(t, n, o) {
                    return e.isNumber(o) ? this._safeSet(this._ttlKey(t), r(i() + o)) : this.ls.removeItem(this._ttlKey(t)),
                    this._safeSet(this._prefix(t), r(n))
                },
                remove: function(t) {
                    return this.ls.removeItem(this._ttlKey(t)),
                    this.ls.removeItem(this._prefix(t)),
                    this
                },
                clear: function() {
                    var t, e = s(this.keyMatcher);
                    for (t = e.length; t--; )
                        this.remove(e[t]);
                    return this
                },
                isExpired: function(t) {
                    var n = o(this.ls.getItem(this._ttlKey(t)));
                    return !!(e.isNumber(n) && i() > n)
                }
            }),
            n
        }()
          , s = function() {
            "use strict";
            function n(t) {
                t = t || {},
                this.cancelled = !1,
                this.lastReq = null,
                this._send = t.transport,
                this._get = t.limiter ? t.limiter(this._get) : this._get,
                this._cache = !1 === t.cache ? new r(0) : a
            }
            var i = 0
              , o = {}
              , s = 6
              , a = new r(10);
            return n.setMaxPendingRequests = function(t) {
                s = t
            }
            ,
            n.resetCache = function() {
                a.reset()
            }
            ,
            e.mixin(n.prototype, {
                _fingerprint: function(e) {
                    return e = e || {},
                    e.url + e.type + t.param(e.data || {})
                },
                _get: function(t, e) {
                    function n(t) {
                        e(null, t),
                        h._cache.set(l, t)
                    }
                    function r() {
                        e(!0)
                    }
                    function a() {
                        i--,
                        delete o[l],
                        h.onDeckRequestArgs && (h._get.apply(h, h.onDeckRequestArgs),
                        h.onDeckRequestArgs = null)
                    }
                    var l, c, h = this;
                    l = this._fingerprint(t),
                    this.cancelled || l !== this.lastReq || ((c = o[l]) ? c.done(n).fail(r) : i < s ? (i++,
                    o[l] = this._send(t).done(n).fail(r).always(a)) : this.onDeckRequestArgs = [].slice.call(arguments, 0))
                },
                get: function(n, i) {
                    var r, o;
                    i = i || t.noop,
                    n = e.isString(n) ? {
                        url: n
                    } : n || {},
                    o = this._fingerprint(n),
                    this.cancelled = !1,
                    this.lastReq = o,
                    (r = this._cache.get(o)) ? i(null, r) : this._get(n, i)
                },
                cancel: function() {
                    this.cancelled = !0
                }
            }),
            n
        }()
          , a = window.SearchIndex = function() {
            "use strict";
            function n(n) {
                n = n || {},
                n.datumTokenizer && n.queryTokenizer || t.error("datumTokenizer and queryTokenizer are both required"),
                this.identify = n.identify || e.stringify,
                this.datumTokenizer = n.datumTokenizer,
                this.queryTokenizer = n.queryTokenizer,
                this.reset()
            }
            function i(t) {
                return t = e.filter(t, function(t) {
                    return !!t
                }),
                t = e.map(t, function(t) {
                    return t.toLowerCase()
                })
            }
            function r() {
                var t = {};
                return t[l] = [],
                t[a] = {},
                t
            }
            function o(t) {
                for (var e = {}, n = [], i = 0, r = t.length; i < r; i++)
                    e[t[i]] || (e[t[i]] = !0,
                    n.push(t[i]));
                return n
            }
            function s(t, e) {
                var n = 0
                  , i = 0
                  , r = [];
                t = t.sort(),
                e = e.sort();
                for (var o = t.length, s = e.length; n < o && i < s; )
                    t[n] < e[i] ? n++ : t[n] > e[i] ? i++ : (r.push(t[n]),
                    n++,
                    i++);
                return r
            }
            var a = "c"
              , l = "i";
            return e.mixin(n.prototype, {
                bootstrap: function(t) {
                    this.datums = t.datums,
                    this.trie = t.trie
                },
                add: function(t) {
                    var n = this;
                    t = e.isArray(t) ? t : [t],
                    e.each(t, function(t) {
                        var o, s;
                        n.datums[o = n.identify(t)] = t,
                        s = i(n.datumTokenizer(t)),
                        e.each(s, function(t) {
                            var e, i, s;
                            for (e = n.trie,
                            i = t.split(""); s = i.shift(); )
                                e = e[a][s] || (e[a][s] = r()),
                                e[l].push(o)
                        })
                    })
                },
                get: function(t) {
                    var n = this;
                    return e.map(t, function(t) {
                        return n.datums[t]
                    })
                },
                search: function(t) {
                    var n, r, c = this;
                    return n = i(this.queryTokenizer(t)),
                    e.each(n, function(t) {
                        var e, n, i, o;
                        if (r && 0 === r.length)
                            return !1;
                        for (e = c.trie,
                        n = t.split(""); e && (i = n.shift()); )
                            e = e[a][i];
                        if (!e || 0 !== n.length)
                            return r = [],
                            !1;
                        o = e[l].slice(0),
                        r = r ? s(r, o) : o
                    }),
                    r ? e.map(o(r), function(t) {
                        return c.datums[t]
                    }) : []
                },
                all: function() {
                    var t = [];
                    for (var e in this.datums)
                        t.push(this.datums[e]);
                    return t
                },
                reset: function() {
                    this.datums = {},
                    this.trie = r()
                },
                serialize: function() {
                    return {
                        datums: this.datums,
                        trie: this.trie
                    }
                }
            }),
            n
        }()
          , l = function() {
            "use strict";
            function t(t) {
                this.url = t.url,
                this.ttl = t.ttl,
                this.cache = t.cache,
                this.prepare = t.prepare,
                this.transform = t.transform,
                this.transport = t.transport,
                this.thumbprint = t.thumbprint,
                this.storage = new o(t.cacheKey)
            }
            var n;
            return n = {
                data: "data",
                protocol: "protocol",
                thumbprint: "thumbprint"
            },
            e.mixin(t.prototype, {
                _settings: function() {
                    return {
                        url: this.url,
                        type: "GET",
                        dataType: "json"
                    }
                },
                store: function(t) {
                    this.cache && (this.storage.set(n.data, t, this.ttl),
                    this.storage.set(n.protocol, location.protocol, this.ttl),
                    this.storage.set(n.thumbprint, this.thumbprint, this.ttl))
                },
                fromCache: function() {
                    var t, e = {};
                    return this.cache ? (e.data = this.storage.get(n.data),
                    e.protocol = this.storage.get(n.protocol),
                    e.thumbprint = this.storage.get(n.thumbprint),
                    t = e.thumbprint !== this.thumbprint || e.protocol !== location.protocol,
                    e.data && !t ? e.data : null) : null
                },
                fromNetwork: function(t) {
                    function e() {
                        t(!0)
                    }
                    function n(e) {
                        t(null, r.transform(e))
                    }
                    var i, r = this;
                    t && (i = this.prepare(this._settings()),
                    this.transport(i).fail(e).done(n))
                },
                clear: function() {
                    return this.storage.clear(),
                    this
                }
            }),
            t
        }()
          , c = function() {
            "use strict";
            function t(t) {
                this.url = t.url,
                this.prepare = t.prepare,
                this.transform = t.transform,
                this.transport = new s({
                    cache: t.cache,
                    limiter: t.limiter,
                    transport: t.transport
                })
            }
            return e.mixin(t.prototype, {
                _settings: function() {
                    return {
                        url: this.url,
                        type: "GET",
                        dataType: "json"
                    }
                },
                get: function(t, e) {
                    function n(t, n) {
                        e(t ? [] : r.transform(n))
                    }
                    var i, r = this;
                    if (e)
                        return t = t || "",
                        i = this.prepare(t, this._settings()),
                        this.transport.get(i, n)
                },
                cancelLastRequest: function() {
                    this.transport.cancel()
                }
            }),
            t
        }()
          , h = function() {
            "use strict";
            function i(i) {
                var r;
                return i ? (r = {
                    url: null,
                    ttl: 864e5,
                    cache: !0,
                    cacheKey: null,
                    thumbprint: "",
                    prepare: e.identity,
                    transform: e.identity,
                    transport: null
                },
                i = e.isString(i) ? {
                    url: i
                } : i,
                i = e.mixin(r, i),
                !i.url && t.error("prefetch requires url to be set"),
                i.transform = i.filter || i.transform,
                i.cacheKey = i.cacheKey || i.url,
                i.thumbprint = n + i.thumbprint,
                i.transport = i.transport ? a(i.transport) : t.ajax,
                i) : null
            }
            function r(n) {
                var i;
                if (n)
                    return i = {
                        url: null,
                        cache: !0,
                        prepare: null,
                        replace: null,
                        wildcard: null,
                        limiter: null,
                        rateLimitBy: "debounce",
                        rateLimitWait: 300,
                        transform: e.identity,
                        transport: null
                    },
                    n = e.isString(n) ? {
                        url: n
                    } : n,
                    n = e.mixin(i, n),
                    !n.url && t.error("remote requires url to be set"),
                    n.transform = n.filter || n.transform,
                    n.prepare = o(n),
                    n.limiter = s(n),
                    n.transport = n.transport ? a(n.transport) : t.ajax,
                    delete n.replace,
                    delete n.wildcard,
                    delete n.rateLimitBy,
                    delete n.rateLimitWait,
                    n
            }
            function o(t) {
                function e(t, e) {
                    return e.url = o(e.url, t),
                    e
                }
                function n(t, e) {
                    return e.url = e.url.replace(s, encodeURIComponent(t)),
                    e
                }
                function i(t, e) {
                    return e
                }
                var r, o, s;
                return r = t.prepare,
                o = t.replace,
                s = t.wildcard,
                r || (r = o ? e : t.wildcard ? n : i)
            }
            function s(t) {
                var n, i, r;
                return n = t.limiter,
                i = t.rateLimitBy,
                r = t.rateLimitWait,
                n || (n = /^throttle$/i.test(i) ? function(t) {
                    return function(n) {
                        return e.throttle(n, t)
                    }
                }(r) : function(t) {
                    return function(n) {
                        return e.debounce(n, t)
                    }
                }(r)),
                n
            }
            function a(n) {
                return function(i) {
                    function r(t) {
                        e.defer(function() {
                            s.resolve(t)
                        })
                    }
                    function o(t) {
                        e.defer(function() {
                            s.reject(t)
                        })
                    }
                    var s = t.Deferred();
                    return n(i, r, o),
                    s
                }
            }
            return function(n) {
                var o, s;
                return o = {
                    initialize: !0,
                    identify: e.stringify,
                    datumTokenizer: null,
                    queryTokenizer: null,
                    sufficient: 5,
                    sorter: null,
                    local: [],
                    prefetch: null,
                    remote: null
                },
                n = e.mixin(o, n || {}),
                !n.datumTokenizer && t.error("datumTokenizer is required"),
                !n.queryTokenizer && t.error("queryTokenizer is required"),
                s = n.sorter,
                n.sorter = s ? function(t) {
                    return t.sort(s)
                }
                : e.identity,
                n.local = e.isFunction(n.local) ? n.local() : n.local,
                n.prefetch = i(n.prefetch),
                n.remote = r(n.remote),
                n
            }
        }();
        return function() {
            "use strict";
            function n(t) {
                t = h(t),
                this.sorter = t.sorter,
                this.identify = t.identify,
                this.sufficient = t.sufficient,
                this.local = t.local,
                this.remote = t.remote ? new c(t.remote) : null,
                this.prefetch = t.prefetch ? new l(t.prefetch) : null,
                this.index = new a({
                    identify: this.identify,
                    datumTokenizer: t.datumTokenizer,
                    queryTokenizer: t.queryTokenizer
                }),
                !1 !== t.initialize && this.initialize()
            }
            var r;
            return r = window && window.Bloodhound,
            n.noConflict = function() {
                return window && (window.Bloodhound = r),
                n
            }
            ,
            n.tokenizers = i,
            e.mixin(n.prototype, {
                __ttAdapter: function() {
                    function t(t, e, i) {
                        return n.search(t, e, i)
                    }
                    function e(t, e) {
                        return n.search(t, e)
                    }
                    var n = this;
                    return this.remote ? t : e
                },
                _loadPrefetch: function() {
                    function e(t, e) {
                        if (t)
                            return n.reject();
                        r.add(e),
                        r.prefetch.store(r.index.serialize()),
                        n.resolve()
                    }
                    var n, i, r = this;
                    return n = t.Deferred(),
                    this.prefetch ? (i = this.prefetch.fromCache()) ? (this.index.bootstrap(i),
                    n.resolve()) : this.prefetch.fromNetwork(e) : n.resolve(),
                    n.promise()
                },
                _initialize: function() {
                    function t() {
                        e.add(e.local)
                    }
                    var e = this;
                    return this.clear(),
                    (this.initPromise = this._loadPrefetch()).done(t),
                    this.initPromise
                },
                initialize: function(t) {
                    return !this.initPromise || t ? this._initialize() : this.initPromise
                },
                add: function(t) {
                    return this.index.add(t),
                    this
                },
                get: function(t) {
                    return t = e.isArray(t) ? t : [].slice.call(arguments),
                    this.index.get(t)
                },
                search: function(t, n, i) {
                    function r(t) {
                        var n = [];
                        e.each(t, function(t) {
                            !e.some(o, function(e) {
                                return s.identify(t) === s.identify(e)
                            }) && n.push(t)
                        }),
                        i && i(n)
                    }
                    var o, s = this;
                    return o = this.sorter(this.index.search(t)),
                    n(this.remote ? o.slice() : o),
                    this.remote && o.length < this.sufficient ? this.remote.get(t, r) : this.remote && this.remote.cancelLastRequest(),
                    this
                },
                all: function() {
                    return this.index.all()
                },
                clear: function() {
                    return this.index.reset(),
                    this
                },
                clearPrefetchCache: function() {
                    return this.prefetch && this.prefetch.clear(),
                    this
                },
                clearRemoteCache: function() {
                    return s.resetCache(),
                    this
                },
                ttAdapter: function() {
                    return this.__ttAdapter()
                }
            }),
            n
        }()
    })
}
, function(t, e, n) {
    (function(i) {
        var r, o, r, o;
        /*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */
        !function(i, s) {
            r = [n(0)],
            void 0 !== (o = function(t) {
                return i.Bloodhound = s(t)
            }
            .apply(e, r)) && (t.exports = o)
        }(this, function(t) {
            var e = function() {
                "use strict";
                return {
                    isMsie: function() {
                        return !!/(msie|trident)/i.test(navigator.userAgent) && navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]
                    },
                    isBlankString: function(t) {
                        return !t || /^\s*$/.test(t)
                    },
                    escapeRegExChars: function(t) {
                        return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&")
                    },
                    isString: function(t) {
                        return "string" == typeof t
                    },
                    isNumber: function(t) {
                        return "number" == typeof t
                    },
                    isArray: t.isArray,
                    isFunction: t.isFunction,
                    isObject: t.isPlainObject,
                    isUndefined: function(t) {
                        return void 0 === t
                    },
                    isElement: function(t) {
                        return !(!t || 1 !== t.nodeType)
                    },
                    isJQuery: function(e) {
                        return e instanceof t
                    },
                    toStr: function(t) {
                        return e.isUndefined(t) || null === t ? "" : t + ""
                    },
                    bind: t.proxy,
                    each: function(e, n) {
                        function i(t, e) {
                            return n(e, t)
                        }
                        t.each(e, i)
                    },
                    map: t.map,
                    filter: t.grep,
                    every: function(e, n) {
                        var i = !0;
                        return e ? (t.each(e, function(t, r) {
                            if (!(i = n.call(null, r, t, e)))
                                return !1
                        }),
                        !!i) : i
                    },
                    some: function(e, n) {
                        var i = !1;
                        return e ? (t.each(e, function(t, r) {
                            if (i = n.call(null, r, t, e))
                                return !1
                        }),
                        !!i) : i
                    },
                    mixin: t.extend,
                    identity: function(t) {
                        return t
                    },
                    clone: function(e) {
                        return t.extend(!0, {}, e)
                    },
                    getIdGenerator: function() {
                        var t = 0;
                        return function() {
                            return t++
                        }
                    },
                    templatify: function(e) {
                        function n() {
                            return String(e)
                        }
                        return t.isFunction(e) ? e : n
                    },
                    defer: function(t) {
                        setTimeout(t, 0)
                    },
                    debounce: function(t, e, n) {
                        var i, r;
                        return function() {
                            var o, s, a = this, l = arguments;
                            return o = function() {
                                i = null,
                                n || (r = t.apply(a, l))
                            }
                            ,
                            s = n && !i,
                            clearTimeout(i),
                            i = setTimeout(o, e),
                            s && (r = t.apply(a, l)),
                            r
                        }
                    },
                    throttle: function(t, e) {
                        var n, i, r, o, s, a;
                        return s = 0,
                        a = function() {
                            s = new Date,
                            r = null,
                            o = t.apply(n, i)
                        }
                        ,
                        function() {
                            var l = new Date
                              , c = e - (l - s);
                            return n = this,
                            i = arguments,
                            c <= 0 ? (clearTimeout(r),
                            r = null,
                            s = l,
                            o = t.apply(n, i)) : r || (r = setTimeout(a, c)),
                            o
                        }
                    },
                    stringify: function(t) {
                        return e.isString(t) ? t : JSON.stringify(t)
                    },
                    noop: function() {}
                }
            }()
              , n = "0.11.1"
              , i = function() {
                "use strict";
                function t(t) {
                    return t = e.toStr(t),
                    t ? t.split(/\s+/) : []
                }
                function n(t) {
                    return t = e.toStr(t),
                    t ? t.split(/\W+/) : []
                }
                function i(t) {
                    return function(n) {
                        return n = e.isArray(n) ? n : [].slice.call(arguments, 0),
                        function(i) {
                            var r = [];
                            return e.each(n, function(n) {
                                r = r.concat(t(e.toStr(i[n])))
                            }),
                            r
                        }
                    }
                }
                return {
                    nonword: n,
                    whitespace: t,
                    obj: {
                        nonword: i(n),
                        whitespace: i(t)
                    }
                }
            }()
              , r = function() {
                "use strict";
                function n(n) {
                    this.maxSize = e.isNumber(n) ? n : 100,
                    this.reset(),
                    this.maxSize <= 0 && (this.set = this.get = t.noop)
                }
                function i() {
                    this.head = this.tail = null
                }
                function r(t, e) {
                    this.key = t,
                    this.val = e,
                    this.prev = this.next = null
                }
                return e.mixin(n.prototype, {
                    set: function(t, e) {
                        var n, i = this.list.tail;
                        this.size >= this.maxSize && (this.list.remove(i),
                        delete this.hash[i.key],
                        this.size--),
                        (n = this.hash[t]) ? (n.val = e,
                        this.list.moveToFront(n)) : (n = new r(t,e),
                        this.list.add(n),
                        this.hash[t] = n,
                        this.size++)
                    },
                    get: function(t) {
                        var e = this.hash[t];
                        if (e)
                            return this.list.moveToFront(e),
                            e.val
                    },
                    reset: function() {
                        this.size = 0,
                        this.hash = {},
                        this.list = new i
                    }
                }),
                e.mixin(i.prototype, {
                    add: function(t) {
                        this.head && (t.next = this.head,
                        this.head.prev = t),
                        this.head = t,
                        this.tail = this.tail || t
                    },
                    remove: function(t) {
                        t.prev ? t.prev.next = t.next : this.head = t.next,
                        t.next ? t.next.prev = t.prev : this.tail = t.prev
                    },
                    moveToFront: function(t) {
                        this.remove(t),
                        this.add(t)
                    }
                }),
                n
            }()
              , o = function() {
                "use strict";
                function n(t, n) {
                    this.prefix = ["__", t, "__"].join(""),
                    this.ttlKey = "__ttl__",
                    this.keyMatcher = new RegExp("^" + e.escapeRegExChars(this.prefix)),
                    this.ls = n || a,
                    !this.ls && this._noop()
                }
                function i() {
                    return (new Date).getTime()
                }
                function r(t) {
                    return JSON.stringify(e.isUndefined(t) ? null : t)
                }
                function o(e) {
                    return t.parseJSON(e)
                }
                function s(t) {
                    var e, n, i = [], r = a.length;
                    for (e = 0; e < r; e++)
                        (n = a.key(e)).match(t) && i.push(n.replace(t, ""));
                    return i
                }
                var a;
                try {
                    a = window.localStorage,
                    a.setItem("~~~", "!"),
                    a.removeItem("~~~")
                } catch (t) {
                    a = null
                }
                return e.mixin(n.prototype, {
                    _prefix: function(t) {
                        return this.prefix + t
                    },
                    _ttlKey: function(t) {
                        return this._prefix(t) + this.ttlKey
                    },
                    _noop: function() {
                        this.get = this.set = this.remove = this.clear = this.isExpired = e.noop
                    },
                    _safeSet: function(t, e) {
                        try {
                            this.ls.setItem(t, e)
                        } catch (t) {
                            "QuotaExceededError" === t.name && (this.clear(),
                            this._noop())
                        }
                    },
                    get: function(t) {
                        return this.isExpired(t) && this.remove(t),
                        o(this.ls.getItem(this._prefix(t)))
                    },
                    set: function(t, n, o) {
                        return e.isNumber(o) ? this._safeSet(this._ttlKey(t), r(i() + o)) : this.ls.removeItem(this._ttlKey(t)),
                        this._safeSet(this._prefix(t), r(n))
                    },
                    remove: function(t) {
                        return this.ls.removeItem(this._ttlKey(t)),
                        this.ls.removeItem(this._prefix(t)),
                        this
                    },
                    clear: function() {
                        var t, e = s(this.keyMatcher);
                        for (t = e.length; t--; )
                            this.remove(e[t]);
                        return this
                    },
                    isExpired: function(t) {
                        var n = o(this.ls.getItem(this._ttlKey(t)));
                        return !!(e.isNumber(n) && i() > n)
                    }
                }),
                n
            }()
              , s = function() {
                "use strict";
                function n(t) {
                    t = t || {},
                    this.cancelled = !1,
                    this.lastReq = null,
                    this._send = t.transport,
                    this._get = t.limiter ? t.limiter(this._get) : this._get,
                    this._cache = !1 === t.cache ? new r(0) : a
                }
                var i = 0
                  , o = {}
                  , s = 6
                  , a = new r(10);
                return n.setMaxPendingRequests = function(t) {
                    s = t
                }
                ,
                n.resetCache = function() {
                    a.reset()
                }
                ,
                e.mixin(n.prototype, {
                    _fingerprint: function(e) {
                        return e = e || {},
                        e.url + e.type + t.param(e.data || {})
                    },
                    _get: function(t, e) {
                        function n(t) {
                            e(null, t),
                            h._cache.set(l, t)
                        }
                        function r() {
                            e(!0)
                        }
                        function a() {
                            i--,
                            delete o[l],
                            h.onDeckRequestArgs && (h._get.apply(h, h.onDeckRequestArgs),
                            h.onDeckRequestArgs = null)
                        }
                        var l, c, h = this;
                        l = this._fingerprint(t),
                        this.cancelled || l !== this.lastReq || ((c = o[l]) ? c.done(n).fail(r) : i < s ? (i++,
                        o[l] = this._send(t).done(n).fail(r).always(a)) : this.onDeckRequestArgs = [].slice.call(arguments, 0))
                    },
                    get: function(n, i) {
                        var r, o;
                        i = i || t.noop,
                        n = e.isString(n) ? {
                            url: n
                        } : n || {},
                        o = this._fingerprint(n),
                        this.cancelled = !1,
                        this.lastReq = o,
                        (r = this._cache.get(o)) ? i(null, r) : this._get(n, i)
                    },
                    cancel: function() {
                        this.cancelled = !0
                    }
                }),
                n
            }()
              , a = window.SearchIndex = function() {
                "use strict";
                function n(n) {
                    n = n || {},
                    n.datumTokenizer && n.queryTokenizer || t.error("datumTokenizer and queryTokenizer are both required"),
                    this.identify = n.identify || e.stringify,
                    this.datumTokenizer = n.datumTokenizer,
                    this.queryTokenizer = n.queryTokenizer,
                    this.reset()
                }
                function i(t) {
                    return t = e.filter(t, function(t) {
                        return !!t
                    }),
                    t = e.map(t, function(t) {
                        return t.toLowerCase()
                    })
                }
                function r() {
                    var t = {};
                    return t[l] = [],
                    t[a] = {},
                    t
                }
                function o(t) {
                    for (var e = {}, n = [], i = 0, r = t.length; i < r; i++)
                        e[t[i]] || (e[t[i]] = !0,
                        n.push(t[i]));
                    return n
                }
                function s(t, e) {
                    var n = 0
                      , i = 0
                      , r = [];
                    t = t.sort(),
                    e = e.sort();
                    for (var o = t.length, s = e.length; n < o && i < s; )
                        t[n] < e[i] ? n++ : t[n] > e[i] ? i++ : (r.push(t[n]),
                        n++,
                        i++);
                    return r
                }
                var a = "c"
                  , l = "i";
                return e.mixin(n.prototype, {
                    bootstrap: function(t) {
                        this.datums = t.datums,
                        this.trie = t.trie
                    },
                    add: function(t) {
                        var n = this;
                        t = e.isArray(t) ? t : [t],
                        e.each(t, function(t) {
                            var o, s;
                            n.datums[o = n.identify(t)] = t,
                            s = i(n.datumTokenizer(t)),
                            e.each(s, function(t) {
                                var e, i, s;
                                for (e = n.trie,
                                i = t.split(""); s = i.shift(); )
                                    e = e[a][s] || (e[a][s] = r()),
                                    e[l].push(o)
                            })
                        })
                    },
                    get: function(t) {
                        var n = this;
                        return e.map(t, function(t) {
                            return n.datums[t]
                        })
                    },
                    search: function(t) {
                        var n, r, c = this;
                        return n = i(this.queryTokenizer(t)),
                        e.each(n, function(t) {
                            var e, n, i, o;
                            if (r && 0 === r.length)
                                return !1;
                            for (e = c.trie,
                            n = t.split(""); e && (i = n.shift()); )
                                e = e[a][i];
                            if (!e || 0 !== n.length)
                                return r = [],
                                !1;
                            o = e[l].slice(0),
                            r = r ? s(r, o) : o
                        }),
                        r ? e.map(o(r), function(t) {
                            return c.datums[t]
                        }) : []
                    },
                    all: function() {
                        var t = [];
                        for (var e in this.datums)
                            t.push(this.datums[e]);
                        return t
                    },
                    reset: function() {
                        this.datums = {},
                        this.trie = r()
                    },
                    serialize: function() {
                        return {
                            datums: this.datums,
                            trie: this.trie
                        }
                    }
                }),
                n
            }()
              , l = function() {
                "use strict";
                function t(t) {
                    this.url = t.url,
                    this.ttl = t.ttl,
                    this.cache = t.cache,
                    this.prepare = t.prepare,
                    this.transform = t.transform,
                    this.transport = t.transport,
                    this.thumbprint = t.thumbprint,
                    this.storage = new o(t.cacheKey)
                }
                var n;
                return n = {
                    data: "data",
                    protocol: "protocol",
                    thumbprint: "thumbprint"
                },
                e.mixin(t.prototype, {
                    _settings: function() {
                        return {
                            url: this.url,
                            type: "GET",
                            dataType: "json"
                        }
                    },
                    store: function(t) {
                        this.cache && (this.storage.set(n.data, t, this.ttl),
                        this.storage.set(n.protocol, location.protocol, this.ttl),
                        this.storage.set(n.thumbprint, this.thumbprint, this.ttl))
                    },
                    fromCache: function() {
                        var t, e = {};
                        return this.cache ? (e.data = this.storage.get(n.data),
                        e.protocol = this.storage.get(n.protocol),
                        e.thumbprint = this.storage.get(n.thumbprint),
                        t = e.thumbprint !== this.thumbprint || e.protocol !== location.protocol,
                        e.data && !t ? e.data : null) : null
                    },
                    fromNetwork: function(t) {
                        function e() {
                            t(!0)
                        }
                        function n(e) {
                            t(null, r.transform(e))
                        }
                        var i, r = this;
                        t && (i = this.prepare(this._settings()),
                        this.transport(i).fail(e).done(n))
                    },
                    clear: function() {
                        return this.storage.clear(),
                        this
                    }
                }),
                t
            }()
              , c = function() {
                "use strict";
                function t(t) {
                    this.url = t.url,
                    this.prepare = t.prepare,
                    this.transform = t.transform,
                    this.transport = new s({
                        cache: t.cache,
                        limiter: t.limiter,
                        transport: t.transport
                    })
                }
                return e.mixin(t.prototype, {
                    _settings: function() {
                        return {
                            url: this.url,
                            type: "GET",
                            dataType: "json"
                        }
                    },
                    get: function(t, e) {
                        function n(t, n) {
                            e(t ? [] : r.transform(n))
                        }
                        var i, r = this;
                        if (e)
                            return t = t || "",
                            i = this.prepare(t, this._settings()),
                            this.transport.get(i, n)
                    },
                    cancelLastRequest: function() {
                        this.transport.cancel()
                    }
                }),
                t
            }()
              , h = function() {
                "use strict";
                function i(i) {
                    var r;
                    return i ? (r = {
                        url: null,
                        ttl: 864e5,
                        cache: !0,
                        cacheKey: null,
                        thumbprint: "",
                        prepare: e.identity,
                        transform: e.identity,
                        transport: null
                    },
                    i = e.isString(i) ? {
                        url: i
                    } : i,
                    i = e.mixin(r, i),
                    !i.url && t.error("prefetch requires url to be set"),
                    i.transform = i.filter || i.transform,
                    i.cacheKey = i.cacheKey || i.url,
                    i.thumbprint = n + i.thumbprint,
                    i.transport = i.transport ? a(i.transport) : t.ajax,
                    i) : null
                }
                function r(n) {
                    var i;
                    if (n)
                        return i = {
                            url: null,
                            cache: !0,
                            prepare: null,
                            replace: null,
                            wildcard: null,
                            limiter: null,
                            rateLimitBy: "debounce",
                            rateLimitWait: 300,
                            transform: e.identity,
                            transport: null
                        },
                        n = e.isString(n) ? {
                            url: n
                        } : n,
                        n = e.mixin(i, n),
                        !n.url && t.error("remote requires url to be set"),
                        n.transform = n.filter || n.transform,
                        n.prepare = o(n),
                        n.limiter = s(n),
                        n.transport = n.transport ? a(n.transport) : t.ajax,
                        delete n.replace,
                        delete n.wildcard,
                        delete n.rateLimitBy,
                        delete n.rateLimitWait,
                        n
                }
                function o(t) {
                    function e(t, e) {
                        return e.url = o(e.url, t),
                        e
                    }
                    function n(t, e) {
                        return e.url = e.url.replace(s, encodeURIComponent(t)),
                        e
                    }
                    function i(t, e) {
                        return e
                    }
                    var r, o, s;
                    return r = t.prepare,
                    o = t.replace,
                    s = t.wildcard,
                    r || (r = o ? e : t.wildcard ? n : i)
                }
                function s(t) {
                    var n, i, r;
                    return n = t.limiter,
                    i = t.rateLimitBy,
                    r = t.rateLimitWait,
                    n || (n = /^throttle$/i.test(i) ? function(t) {
                        return function(n) {
                            return e.throttle(n, t)
                        }
                    }(r) : function(t) {
                        return function(n) {
                            return e.debounce(n, t)
                        }
                    }(r)),
                    n
                }
                function a(n) {
                    return function(i) {
                        function r(t) {
                            e.defer(function() {
                                s.resolve(t)
                            })
                        }
                        function o(t) {
                            e.defer(function() {
                                s.reject(t)
                            })
                        }
                        var s = t.Deferred();
                        return n(i, r, o),
                        s
                    }
                }
                return function(n) {
                    var o, s;
                    return o = {
                        initialize: !0,
                        identify: e.stringify,
                        datumTokenizer: null,
                        queryTokenizer: null,
                        sufficient: 5,
                        sorter: null,
                        local: [],
                        prefetch: null,
                        remote: null
                    },
                    n = e.mixin(o, n || {}),
                    !n.datumTokenizer && t.error("datumTokenizer is required"),
                    !n.queryTokenizer && t.error("queryTokenizer is required"),
                    s = n.sorter,
                    n.sorter = s ? function(t) {
                        return t.sort(s)
                    }
                    : e.identity,
                    n.local = e.isFunction(n.local) ? n.local() : n.local,
                    n.prefetch = i(n.prefetch),
                    n.remote = r(n.remote),
                    n
                }
            }();
            return function() {
                "use strict";
                function n(t) {
                    t = h(t),
                    this.sorter = t.sorter,
                    this.identify = t.identify,
                    this.sufficient = t.sufficient,
                    this.local = t.local,
                    this.remote = t.remote ? new c(t.remote) : null,
                    this.prefetch = t.prefetch ? new l(t.prefetch) : null,
                    this.index = new a({
                        identify: this.identify,
                        datumTokenizer: t.datumTokenizer,
                        queryTokenizer: t.queryTokenizer
                    }),
                    !1 !== t.initialize && this.initialize()
                }
                var r;
                return r = window && window.Bloodhound,
                n.noConflict = function() {
                    return window && (window.Bloodhound = r),
                    n
                }
                ,
                n.tokenizers = i,
                e.mixin(n.prototype, {
                    __ttAdapter: function() {
                        function t(t, e, i) {
                            return n.search(t, e, i)
                        }
                        function e(t, e) {
                            return n.search(t, e)
                        }
                        var n = this;
                        return this.remote ? t : e
                    },
                    _loadPrefetch: function() {
                        function e(t, e) {
                            if (t)
                                return n.reject();
                            r.add(e),
                            r.prefetch.store(r.index.serialize()),
                            n.resolve()
                        }
                        var n, i, r = this;
                        return n = t.Deferred(),
                        this.prefetch ? (i = this.prefetch.fromCache()) ? (this.index.bootstrap(i),
                        n.resolve()) : this.prefetch.fromNetwork(e) : n.resolve(),
                        n.promise()
                    },
                    _initialize: function() {
                        function t() {
                            e.add(e.local)
                        }
                        var e = this;
                        return this.clear(),
                        (this.initPromise = this._loadPrefetch()).done(t),
                        this.initPromise
                    },
                    initialize: function(t) {
                        return !this.initPromise || t ? this._initialize() : this.initPromise
                    },
                    add: function(t) {
                        return this.index.add(t),
                        this
                    },
                    get: function(t) {
                        return t = e.isArray(t) ? t : [].slice.call(arguments),
                        this.index.get(t)
                    },
                    search: function(t, n, i) {
                        function r(t) {
                            var n = [];
                            e.each(t, function(t) {
                                !e.some(o, function(e) {
                                    return s.identify(t) === s.identify(e)
                                }) && n.push(t)
                            }),
                            i && i(n)
                        }
                        var o, s = this;
                        return o = this.sorter(this.index.search(t)),
                        n(this.remote ? o.slice() : o),
                        this.remote && o.length < this.sufficient ? this.remote.get(t, r) : this.remote && this.remote.cancelLastRequest(),
                        this
                    },
                    all: function() {
                        return this.index.all()
                    },
                    clear: function() {
                        return this.index.reset(),
                        this
                    },
                    clearPrefetchCache: function() {
                        return this.prefetch && this.prefetch.clear(),
                        this
                    },
                    clearRemoteCache: function() {
                        return s.resetCache(),
                        this
                    },
                    ttAdapter: function() {
                        return this.__ttAdapter()
                    }
                }),
                n
            }()
        }),
        function(i, s) {
            r = [n(0)],
            void 0 !== (o = function(t) {
                return s(t)
            }
            .apply(e, r)) && (t.exports = o)
        }(0, function(t) {
            var e = function() {
                "use strict";
                return {
                    isMsie: function() {
                        return !!/(msie|trident)/i.test(navigator.userAgent) && navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]
                    },
                    isBlankString: function(t) {
                        return !t || /^\s*$/.test(t)
                    },
                    escapeRegExChars: function(t) {
                        return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&")
                    },
                    isString: function(t) {
                        return "string" == typeof t
                    },
                    isNumber: function(t) {
                        return "number" == typeof t
                    },
                    isArray: t.isArray,
                    isFunction: t.isFunction,
                    isObject: t.isPlainObject,
                    isUndefined: function(t) {
                        return void 0 === t
                    },
                    isElement: function(t) {
                        return !(!t || 1 !== t.nodeType)
                    },
                    isJQuery: function(e) {
                        return e instanceof t
                    },
                    toStr: function(t) {
                        return e.isUndefined(t) || null === t ? "" : t + ""
                    },
                    bind: t.proxy,
                    each: function(e, n) {
                        function i(t, e) {
                            return n(e, t)
                        }
                        t.each(e, i)
                    },
                    map: t.map,
                    filter: t.grep,
                    every: function(e, n) {
                        var i = !0;
                        return e ? (t.each(e, function(t, r) {
                            if (!(i = n.call(null, r, t, e)))
                                return !1
                        }),
                        !!i) : i
                    },
                    some: function(e, n) {
                        var i = !1;
                        return e ? (t.each(e, function(t, r) {
                            if (i = n.call(null, r, t, e))
                                return !1
                        }),
                        !!i) : i
                    },
                    mixin: t.extend,
                    identity: function(t) {
                        return t
                    },
                    clone: function(e) {
                        return t.extend(!0, {}, e)
                    },
                    getIdGenerator: function() {
                        var t = 0;
                        return function() {
                            return t++
                        }
                    },
                    templatify: function(e) {
                        function n() {
                            return String(e)
                        }
                        return t.isFunction(e) ? e : n
                    },
                    defer: function(t) {
                        setTimeout(t, 0)
                    },
                    debounce: function(t, e, n) {
                        var i, r;
                        return function() {
                            var o, s, a = this, l = arguments;
                            return o = function() {
                                i = null,
                                n || (r = t.apply(a, l))
                            }
                            ,
                            s = n && !i,
                            clearTimeout(i),
                            i = setTimeout(o, e),
                            s && (r = t.apply(a, l)),
                            r
                        }
                    },
                    throttle: function(t, e) {
                        var n, i, r, o, s, a;
                        return s = 0,
                        a = function() {
                            s = new Date,
                            r = null,
                            o = t.apply(n, i)
                        }
                        ,
                        function() {
                            var l = new Date
                              , c = e - (l - s);
                            return n = this,
                            i = arguments,
                            c <= 0 ? (clearTimeout(r),
                            r = null,
                            s = l,
                            o = t.apply(n, i)) : r || (r = setTimeout(a, c)),
                            o
                        }
                    },
                    stringify: function(t) {
                        return e.isString(t) ? t : JSON.stringify(t)
                    },
                    noop: function() {}
                }
            }()
              , n = function() {
                "use strict";
                function t(t) {
                    var s, a;
                    return a = e.mixin({}, o, t),
                    s = {
                        css: r(),
                        classes: a,
                        html: n(a),
                        selectors: i(a)
                    },
                    {
                        css: s.css,
                        html: s.html,
                        classes: s.classes,
                        selectors: s.selectors,
                        mixin: function(t) {
                            e.mixin(t, s)
                        }
                    }
                }
                function n(t) {
                    return {
                        wrapper: '<span class="' + t.wrapper + '"></span>',
                        menu: '<div class="' + t.menu + '"></div>'
                    }
                }
                function i(t) {
                    var n = {};
                    return e.each(t, function(t, e) {
                        n[e] = "." + t
                    }),
                    n
                }
                function r() {
                    var t = {
                        wrapper: {
                            position: "relative",
                            display: "inline-block"
                        },
                        hint: {
                            position: "absolute",
                            top: "0",
                            left: "0",
                            borderColor: "transparent",
                            boxShadow: "none",
                            opacity: "1"
                        },
                        input: {
                            position: "relative",
                            verticalAlign: "top",
                            backgroundColor: "transparent"
                        },
                        inputWithNoHint: {
                            position: "relative",
                            verticalAlign: "top"
                        },
                        menu: {
                            position: "absolute",
                            top: "100%",
                            left: "0",
                            zIndex: "100",
                            display: "none"
                        },
                        ltr: {
                            left: "0",
                            right: "auto"
                        },
                        rtl: {
                            left: "auto",
                            right: " 0"
                        }
                    };
                    return e.isMsie() && e.mixin(t.input, {
                        backgroundImage: "url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"
                    }),
                    t
                }
                var o = {
                    wrapper: "twitter-typeahead",
                    input: "tt-input",
                    hint: "tt-hint",
                    menu: "tt-menu",
                    dataset: "tt-dataset",
                    suggestion: "tt-suggestion",
                    selectable: "tt-selectable",
                    empty: "tt-empty",
                    open: "tt-open",
                    cursor: "tt-cursor",
                    highlight: "tt-highlight"
                };
                return t
            }()
              , r = function() {
                "use strict";
                function n(e) {
                    e && e.el || t.error("EventBus initialized without el"),
                    this.$el = t(e.el)
                }
                var i, r;
                return i = "typeahead:",
                r = {
                    render: "rendered",
                    cursorchange: "cursorchanged",
                    select: "selected",
                    autocomplete: "autocompleted"
                },
                e.mixin(n.prototype, {
                    _trigger: function(e, n) {
                        var r;
                        return r = t.Event(i + e),
                        (n = n || []).unshift(r),
                        this.$el.trigger.apply(this.$el, n),
                        r
                    },
                    before: function(t) {
                        var e, n;
                        return e = [].slice.call(arguments, 1),
                        n = this._trigger("before" + t, e),
                        n.isDefaultPrevented()
                    },
                    trigger: function(t) {
                        var e;
                        this._trigger(t, [].slice.call(arguments, 1)),
                        (e = r[t]) && this._trigger(e, [].slice.call(arguments, 1))
                    }
                }),
                n
            }()
              , o = function() {
                "use strict";
                function t(t, e, n, i) {
                    var r;
                    if (!n)
                        return this;
                    for (e = e.split(l),
                    n = i ? a(n, i) : n,
                    this._callbacks = this._callbacks || {}; r = e.shift(); )
                        this._callbacks[r] = this._callbacks[r] || {
                            sync: [],
                            async: []
                        },
                        this._callbacks[r][t].push(n);
                    return this
                }
                function e(e, n, i) {
                    return t.call(this, "async", e, n, i)
                }
                function n(e, n, i) {
                    return t.call(this, "sync", e, n, i)
                }
                function r(t) {
                    var e;
                    if (!this._callbacks)
                        return this;
                    for (t = t.split(l); e = t.shift(); )
                        delete this._callbacks[e];
                    return this
                }
                function o(t) {
                    var e, n, i, r, o;
                    if (!this._callbacks)
                        return this;
                    for (t = t.split(l),
                    i = [].slice.call(arguments, 1); (e = t.shift()) && (n = this._callbacks[e]); )
                        r = s(n.sync, this, [e].concat(i)),
                        o = s(n.async, this, [e].concat(i)),
                        r() && c(o);
                    return this
                }
                function s(t, e, n) {
                    function i() {
                        for (var i, r = 0, o = t.length; !i && r < o; r += 1)
                            i = !1 === t[r].apply(e, n);
                        return !i
                    }
                    return i
                }
                function a(t, e) {
                    return t.bind ? t.bind(e) : function() {
                        t.apply(e, [].slice.call(arguments, 0))
                    }
                }
                var l = /\s+/
                  , c = function() {
                    return window.setImmediate ? function(t) {
                        i(function() {
                            t()
                        })
                    }
                    : function(t) {
                        setTimeout(function() {
                            t()
                        }, 0)
                    }
                }();
                return {
                    onSync: n,
                    onAsync: e,
                    off: r,
                    trigger: o
                }
            }()
              , s = function(t) {
                "use strict";
                function n(t, n, i) {
                    for (var r, o = [], s = 0, a = t.length; s < a; s++)
                        o.push(e.escapeRegExChars(t[s]));
                    return r = i ? "\\b(" + o.join("|") + ")\\b" : "(" + o.join("|") + ")",
                    n ? new RegExp(r) : new RegExp(r,"i")
                }
                var i = {
                    node: null,
                    pattern: null,
                    tagName: "strong",
                    className: null,
                    wordsOnly: !1,
                    caseSensitive: !1
                };
                return function(r) {
                    function o(e) {
                        var n, i, o;
                        return (n = a.exec(e.data)) && (o = t.createElement(r.tagName),
                        r.className && (o.className = r.className),
                        i = e.splitText(n.index),
                        i.splitText(n[0].length),
                        o.appendChild(i.cloneNode(!0)),
                        e.parentNode.replaceChild(o, i)),
                        !!n
                    }
                    function s(t, e) {
                        for (var n, i = 0; i < t.childNodes.length; i++)
                            n = t.childNodes[i],
                            3 === n.nodeType ? i += e(n) ? 1 : 0 : s(n, e)
                    }
                    var a;
                    r = e.mixin({}, i, r),
                    r.node && r.pattern && (r.pattern = e.isArray(r.pattern) ? r.pattern : [r.pattern],
                    a = n(r.pattern, r.caseSensitive, r.wordsOnly),
                    s(r.node, o))
                }
            }(window.document)
              , a = function() {
                "use strict";
                function n(n, r) {
                    n = n || {},
                    n.input || t.error("input is missing"),
                    r.mixin(this),
                    this.$hint = t(n.hint),
                    this.$input = t(n.input),
                    this.query = this.$input.val(),
                    this.queryWhenFocused = this.hasFocus() ? this.query : null,
                    this.$overflowHelper = i(this.$input),
                    this._checkLanguageDirection(),
                    0 === this.$hint.length && (this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = e.noop)
                }
                function i(e) {
                    return t('<pre aria-hidden="true"></pre>').css({
                        position: "absolute",
                        visibility: "hidden",
                        whiteSpace: "pre",
                        fontFamily: e.css("font-family"),
                        fontSize: e.css("font-size"),
                        fontStyle: e.css("font-style"),
                        fontVariant: e.css("font-variant"),
                        fontWeight: e.css("font-weight"),
                        wordSpacing: e.css("word-spacing"),
                        letterSpacing: e.css("letter-spacing"),
                        textIndent: e.css("text-indent"),
                        textRendering: e.css("text-rendering"),
                        textTransform: e.css("text-transform")
                    }).insertAfter(e)
                }
                function r(t, e) {
                    return n.normalizeQuery(t) === n.normalizeQuery(e)
                }
                function s(t) {
                    return t.altKey || t.ctrlKey || t.metaKey || t.shiftKey
                }
                var a;
                return a = {
                    9: "tab",
                    27: "esc",
                    37: "left",
                    39: "right",
                    13: "enter",
                    38: "up",
                    40: "down"
                },
                n.normalizeQuery = function(t) {
                    return e.toStr(t).replace(/^\s*/g, "").replace(/\s{2,}/g, " ")
                }
                ,
                e.mixin(n.prototype, o, {
                    _onBlur: function() {
                        this.resetInputValue(),
                        this.trigger("blurred")
                    },
                    _onFocus: function() {
                        this.queryWhenFocused = this.query,
                        this.trigger("focused")
                    },
                    _onKeydown: function(t) {
                        var e = a[t.which || t.keyCode];
                        this._managePreventDefault(e, t),
                        e && this._shouldTrigger(e, t) && this.trigger(e + "Keyed", t)
                    },
                    _onInput: function() {
                        this._setQuery(this.getInputValue()),
                        this.clearHintIfInvalid(),
                        this._checkLanguageDirection()
                    },
                    _managePreventDefault: function(t, e) {
                        var n;
                        switch (t) {
                        case "up":
                        case "down":
                            n = !s(e);
                            break;
                        default:
                            n = !1
                        }
                        n && e.preventDefault()
                    },
                    _shouldTrigger: function(t, e) {
                        var n;
                        switch (t) {
                        case "tab":
                            n = !s(e);
                            break;
                        default:
                            n = !0
                        }
                        return n
                    },
                    _checkLanguageDirection: function() {
                        var t = (this.$input.css("direction") || "ltr").toLowerCase();
                        this.dir !== t && (this.dir = t,
                        this.$hint.attr("dir", t),
                        this.trigger("langDirChanged", t))
                    },
                    _setQuery: function(t, e) {
                        var n, i;
                        n = r(t, this.query),
                        i = !!n && this.query.length !== t.length,
                        this.query = t,
                        e || n ? !e && i && this.trigger("whitespaceChanged", this.query) : this.trigger("queryChanged", this.query)
                    },
                    bind: function() {
                        var t, n, i, r, o = this;
                        return t = e.bind(this._onBlur, this),
                        n = e.bind(this._onFocus, this),
                        i = e.bind(this._onKeydown, this),
                        r = e.bind(this._onInput, this),
                        this.$input.on("blur.tt", t).on("focus.tt", n).on("keydown.tt", i),
                        !e.isMsie() || e.isMsie() > 9 ? this.$input.on("input.tt", r) : this.$input.on("keydown.tt keypress.tt cut.tt paste.tt", function(t) {
                            a[t.which || t.keyCode] || e.defer(e.bind(o._onInput, o, t))
                        }),
                        this
                    },
                    focus: function() {
                        this.$input.focus()
                    },
                    blur: function() {
                        this.$input.blur()
                    },
                    getLangDir: function() {
                        return this.dir
                    },
                    getQuery: function() {
                        return this.query || ""
                    },
                    setQuery: function(t, e) {
                        this.setInputValue(t),
                        this._setQuery(t, e)
                    },
                    hasQueryChangedSinceLastFocus: function() {
                        return this.query !== this.queryWhenFocused
                    },
                    getInputValue: function() {
                        return this.$input.val()
                    },
                    setInputValue: function(t) {
                        this.$input.val(t),
                        this.clearHintIfInvalid(),
                        this._checkLanguageDirection()
                    },
                    resetInputValue: function() {
                        this.setInputValue(this.query)
                    },
                    getHint: function() {
                        return this.$hint.val()
                    },
                    setHint: function(t) {
                        this.$hint.val(t)
                    },
                    clearHint: function() {
                        this.setHint("")
                    },
                    clearHintIfInvalid: function() {
                        var t, e, n, i;
                        t = this.getInputValue(),
                        e = this.getHint(),
                        n = t !== e && 0 === e.indexOf(t),
                        !(i = "" !== t && n && !this.hasOverflow()) && this.clearHint()
                    },
                    hasFocus: function() {
                        return this.$input.is(":focus")
                    },
                    hasOverflow: function() {
                        var t = this.$input.width() - 2;
                        return this.$overflowHelper.text(this.getInputValue()),
                        this.$overflowHelper.width() >= t
                    },
                    isCursorAtEnd: function() {
                        var t, n, i;
                        return t = this.$input.val().length,
                        n = this.$input[0].selectionStart,
                        e.isNumber(n) ? n === t : !document.selection || (i = document.selection.createRange(),
                        i.moveStart("character", -t),
                        t === i.text.length)
                    },
                    destroy: function() {
                        this.$hint.off(".tt"),
                        this.$input.off(".tt"),
                        this.$overflowHelper.remove(),
                        this.$hint = this.$input = this.$overflowHelper = t("<div>")
                    }
                }),
                n
            }()
              , l = function() {
                "use strict";
                function n(n, o) {
                    n = n || {},
                    n.templates = n.templates || {},
                    n.templates.notFound = n.templates.notFound || n.templates.empty,
                    n.source || t.error("missing source"),
                    n.node || t.error("missing node"),
                    n.name && !a(n.name) && t.error("invalid dataset name: " + n.name),
                    o.mixin(this),
                    this.highlight = !!n.highlight,
                    this.name = n.name || c(),
                    this.limit = n.limit || 5,
                    this.displayFn = i(n.display || n.displayKey),
                    this.templates = r(n.templates, this.displayFn),
                    this.source = n.source.__ttAdapter ? n.source.__ttAdapter() : n.source,
                    this.async = e.isUndefined(n.async) ? this.source.length > 2 : !!n.async,
                    this._resetLastSuggestion(),
                    this.$el = t(n.node).addClass(this.classes.dataset).addClass(this.classes.dataset + "-" + this.name)
                }
                function i(t) {
                    function n(e) {
                        return e[t]
                    }
                    return t = t || e.stringify,
                    e.isFunction(t) ? t : n
                }
                function r(n, i) {
                    function r(e) {
                        return t("<div>").text(i(e))
                    }
                    return {
                        notFound: n.notFound && e.templatify(n.notFound),
                        pending: n.pending && e.templatify(n.pending),
                        header: n.header && e.templatify(n.header),
                        footer: n.footer && e.templatify(n.footer),
                        suggestion: n.suggestion || r
                    }
                }
                function a(t) {
                    return /^[_a-zA-Z0-9-]+$/.test(t)
                }
                var l, c;
                return l = {
                    val: "tt-selectable-display",
                    obj: "tt-selectable-object"
                },
                c = e.getIdGenerator(),
                n.extractData = function(e) {
                    var n = t(e);
                    return n.data(l.obj) ? {
                        val: n.data(l.val) || "",
                        obj: n.data(l.obj) || null
                    } : null
                }
                ,
                e.mixin(n.prototype, o, {
                    _overwrite: function(t, e) {
                        e = e || [],
                        e.length ? this._renderSuggestions(t, e) : this.async && this.templates.pending ? this._renderPending(t) : !this.async && this.templates.notFound ? this._renderNotFound(t) : this._empty(),
                        this.trigger("rendered", this.name, e, !1)
                    },
                    _append: function(t, e) {
                        e = e || [],
                        e.length && this.$lastSuggestion.length ? this._appendSuggestions(t, e) : e.length ? this._renderSuggestions(t, e) : !this.$lastSuggestion.length && this.templates.notFound && this._renderNotFound(t),
                        this.trigger("rendered", this.name, e, !0)
                    },
                    _renderSuggestions: function(t, e) {
                        var n;
                        n = this._getSuggestionsFragment(t, e),
                        this.$lastSuggestion = n.children().last(),
                        this.$el.html(n).prepend(this._getHeader(t, e)).append(this._getFooter(t, e))
                    },
                    _appendSuggestions: function(t, e) {
                        var n, i;
                        n = this._getSuggestionsFragment(t, e),
                        i = n.children().last(),
                        this.$lastSuggestion.after(n),
                        this.$lastSuggestion = i
                    },
                    _renderPending: function(t) {
                        var e = this.templates.pending;
                        this._resetLastSuggestion(),
                        e && this.$el.html(e({
                            query: t,
                            dataset: this.name
                        }))
                    },
                    _renderNotFound: function(t) {
                        var e = this.templates.notFound;
                        this._resetLastSuggestion(),
                        e && this.$el.html(e({
                            query: t,
                            dataset: this.name
                        }))
                    },
                    _empty: function() {
                        this.$el.empty(),
                        this._resetLastSuggestion()
                    },
                    _getSuggestionsFragment: function(n, i) {
                        var r, o = this;
                        return r = document.createDocumentFragment(),
                        e.each(i, function(e) {
                            var i, s;
                            s = o._injectQuery(n, e),
                            i = t(o.templates.suggestion(s)).data(l.obj, e).data(l.val, o.displayFn(e)).addClass(o.classes.suggestion + " " + o.classes.selectable),
                            r.appendChild(i[0])
                        }),
                        this.highlight && s({
                            className: this.classes.highlight,
                            node: r,
                            pattern: n
                        }),
                        t(r)
                    },
                    _getFooter: function(t, e) {
                        return this.templates.footer ? this.templates.footer({
                            query: t,
                            suggestions: e,
                            dataset: this.name
                        }) : null
                    },
                    _getHeader: function(t, e) {
                        return this.templates.header ? this.templates.header({
                            query: t,
                            suggestions: e,
                            dataset: this.name
                        }) : null
                    },
                    _resetLastSuggestion: function() {
                        this.$lastSuggestion = t()
                    },
                    _injectQuery: function(t, n) {
                        return e.isObject(n) ? e.mixin({
                            _query: t
                        }, n) : n
                    },
                    update: function(e) {
                        function n(t) {
                            s || (s = !0,
                            t = (t || []).slice(0, r.limit),
                            a = t.length,
                            r._overwrite(e, t),
                            a < r.limit && r.async && r.trigger("asyncRequested", e))
                        }
                        function i(n) {
                            n = n || [],
                            !o && a < r.limit && (r.cancel = t.noop,
                            r._append(e, n.slice(0, r.limit - a)),
                            a += r.limit - a,
                            r.async && r.trigger("asyncReceived", e))
                        }
                        var r = this
                          , o = !1
                          , s = !1
                          , a = 0;
                        this.cancel(),
                        this.cancel = function() {
                            o = !0,
                            r.cancel = t.noop,
                            r.async && r.trigger("asyncCanceled", e)
                        }
                        ,
                        this.source(e, n, i),
                        !s && n([])
                    },
                    cancel: t.noop,
                    clear: function() {
                        this._empty(),
                        this.cancel(),
                        this.trigger("cleared")
                    },
                    isEmpty: function() {
                        return this.$el.is(":empty")
                    },
                    destroy: function() {
                        this.$el = t("<div>")
                    }
                }),
                n
            }()
              , c = function() {
                "use strict";
                function n(n, i) {
                    function r(e) {
                        var n = o.$node.find(e.node).first();
                        return e.node = n.length ? n : t("<div>").appendTo(o.$node),
                        new l(e,i)
                    }
                    var o = this;
                    n = n || {},
                    n.node || t.error("node is required"),
                    i.mixin(this),
                    this.$node = t(n.node),
                    this.query = null,
                    this.datasets = e.map(n.datasets, r)
                }
                return e.mixin(n.prototype, o, {
                    _onSelectableClick: function(e) {
                        this.trigger("selectableClicked", t(e.currentTarget))
                    },
                    _onRendered: function(t, e, n, i) {
                        this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty()),
                        this.trigger("datasetRendered", e, n, i)
                    },
                    _onCleared: function() {
                        this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty()),
                        this.trigger("datasetCleared")
                    },
                    _propagate: function() {
                        this.trigger.apply(this, arguments)
                    },
                    _allDatasetsEmpty: function() {
                        function t(t) {
                            return t.isEmpty()
                        }
                        return e.every(this.datasets, t)
                    },
                    _getSelectables: function() {
                        return this.$node.find(this.selectors.selectable)
                    },
                    _removeCursor: function() {
                        var t = this.getActiveSelectable();
                        t && t.removeClass(this.classes.cursor)
                    },
                    _ensureVisible: function(t) {
                        var e, n, i, r;
                        e = t.position().top,
                        n = e + t.outerHeight(!0),
                        i = this.$node.scrollTop(),
                        r = this.$node.height() + parseInt(this.$node.css("paddingTop"), 10) + parseInt(this.$node.css("paddingBottom"), 10),
                        e < 0 ? this.$node.scrollTop(i + e) : r < n && this.$node.scrollTop(i + (n - r))
                    },
                    bind: function() {
                        var t, n = this;
                        return t = e.bind(this._onSelectableClick, this),
                        this.$node.on("click.tt", this.selectors.selectable, t),
                        e.each(this.datasets, function(t) {
                            t.onSync("asyncRequested", n._propagate, n).onSync("asyncCanceled", n._propagate, n).onSync("asyncReceived", n._propagate, n).onSync("rendered", n._onRendered, n).onSync("cleared", n._onCleared, n)
                        }),
                        this
                    },
                    isOpen: function() {
                        return this.$node.hasClass(this.classes.open)
                    },
                    open: function() {
                        this.$node.addClass(this.classes.open)
                    },
                    close: function() {
                        this.$node.removeClass(this.classes.open),
                        this._removeCursor()
                    },
                    setLanguageDirection: function(t) {
                        this.$node.attr("dir", t)
                    },
                    selectableRelativeToCursor: function(t) {
                        var e, n, i, r;
                        return n = this.getActiveSelectable(),
                        e = this._getSelectables(),
                        i = n ? e.index(n) : -1,
                        r = i + t,
                        r = (r + 1) % (e.length + 1) - 1,
                        r = r < -1 ? e.length - 1 : r,
                        -1 === r ? null : e.eq(r)
                    },
                    setCursor: function(t) {
                        this._removeCursor(),
                        (t = t && t.first()) && (t.addClass(this.classes.cursor),
                        this._ensureVisible(t))
                    },
                    getSelectableData: function(t) {
                        return t && t.length ? l.extractData(t) : null
                    },
                    getActiveSelectable: function() {
                        var t = this._getSelectables().filter(this.selectors.cursor).first();
                        return t.length ? t : null
                    },
                    getTopSelectable: function() {
                        var t = this._getSelectables().first();
                        return t.length ? t : null
                    },
                    update: function(t) {
                        function n(e) {
                            e.update(t)
                        }
                        var i = t !== this.query;
                        return i && (this.query = t,
                        e.each(this.datasets, n)),
                        i
                    },
                    empty: function() {
                        function t(t) {
                            t.clear()
                        }
                        e.each(this.datasets, t),
                        this.query = null,
                        this.$node.addClass(this.classes.empty)
                    },
                    destroy: function() {
                        function n(t) {
                            t.destroy()
                        }
                        this.$node.off(".tt"),
                        this.$node = t("<div>"),
                        e.each(this.datasets, n)
                    }
                }),
                n
            }()
              , h = function() {
                "use strict";
                function t() {
                    c.apply(this, [].slice.call(arguments, 0))
                }
                var n = c.prototype;
                return e.mixin(t.prototype, c.prototype, {
                    open: function() {
                        return !this._allDatasetsEmpty() && this._show(),
                        n.open.apply(this, [].slice.call(arguments, 0))
                    },
                    close: function() {
                        return this._hide(),
                        n.close.apply(this, [].slice.call(arguments, 0))
                    },
                    _onRendered: function() {
                        return this._allDatasetsEmpty() ? this._hide() : this.isOpen() && this._show(),
                        n._onRendered.apply(this, [].slice.call(arguments, 0))
                    },
                    _onCleared: function() {
                        return this._allDatasetsEmpty() ? this._hide() : this.isOpen() && this._show(),
                        n._onCleared.apply(this, [].slice.call(arguments, 0))
                    },
                    setLanguageDirection: function(t) {
                        return this.$node.css("ltr" === t ? this.css.ltr : this.css.rtl),
                        n.setLanguageDirection.apply(this, [].slice.call(arguments, 0))
                    },
                    _hide: function() {
                        this.$node.hide()
                    },
                    _show: function() {
                        this.$node.css("display", "block")
                    }
                }),
                t
            }()
              , u = function() {
                "use strict";
                function n(n, r) {
                    var o, s, a, l, c, h, u, d, p, f, g;
                    n = n || {},
                    n.input || t.error("missing input"),
                    n.menu || t.error("missing menu"),
                    n.eventBus || t.error("missing event bus"),
                    r.mixin(this),
                    this.eventBus = n.eventBus,
                    this.minLength = e.isNumber(n.minLength) ? n.minLength : 1,
                    this.input = n.input,
                    this.menu = n.menu,
                    this.enabled = !0,
                    this.active = !1,
                    this.input.hasFocus() && this.activate(),
                    this.dir = this.input.getLangDir(),
                    this._hacks(),
                    this.menu.bind().onSync("selectableClicked", this._onSelectableClicked, this).onSync("asyncRequested", this._onAsyncRequested, this).onSync("asyncCanceled", this._onAsyncCanceled, this).onSync("asyncReceived", this._onAsyncReceived, this).onSync("datasetRendered", this._onDatasetRendered, this).onSync("datasetCleared", this._onDatasetCleared, this),
                    o = i(this, "activate", "open", "_onFocused"),
                    s = i(this, "deactivate", "_onBlurred"),
                    a = i(this, "isActive", "isOpen", "_onEnterKeyed"),
                    l = i(this, "isActive", "isOpen", "_onTabKeyed"),
                    c = i(this, "isActive", "_onEscKeyed"),
                    h = i(this, "isActive", "open", "_onUpKeyed"),
                    u = i(this, "isActive", "open", "_onDownKeyed"),
                    d = i(this, "isActive", "isOpen", "_onLeftKeyed"),
                    p = i(this, "isActive", "isOpen", "_onRightKeyed"),
                    f = i(this, "_openIfActive", "_onQueryChanged"),
                    g = i(this, "_openIfActive", "_onWhitespaceChanged"),
                    this.input.bind().onSync("focused", o, this).onSync("blurred", s, this).onSync("enterKeyed", a, this).onSync("tabKeyed", l, this).onSync("escKeyed", c, this).onSync("upKeyed", h, this).onSync("downKeyed", u, this).onSync("leftKeyed", d, this).onSync("rightKeyed", p, this).onSync("queryChanged", f, this).onSync("whitespaceChanged", g, this).onSync("langDirChanged", this._onLangDirChanged, this)
                }
                function i(t) {
                    var n = [].slice.call(arguments, 1);
                    return function() {
                        var i = [].slice.call(arguments);
                        e.each(n, function(e) {
                            return t[e].apply(t, i)
                        })
                    }
                }
                return e.mixin(n.prototype, {
                    _hacks: function() {
                        var n, i;
                        n = this.input.$input || t("<div>"),
                        i = this.menu.$node || t("<div>"),
                        n.on("blur.tt", function(t) {
                            var r, o, s;
                            r = document.activeElement,
                            o = i.is(r),
                            s = i.has(r).length > 0,
                            e.isMsie() && (o || s) && (t.preventDefault(),
                            t.stopImmediatePropagation(),
                            e.defer(function() {
                                n.focus()
                            }))
                        }),
                        i.on("mousedown.tt", function(t) {
                            t.preventDefault()
                        })
                    },
                    _onSelectableClicked: function(t, e) {
                        this.select(e)
                    },
                    _onDatasetCleared: function() {
                        this._updateHint()
                    },
                    _onDatasetRendered: function(t, e, n, i) {
                        this._updateHint(),
                        this.eventBus.trigger("render", n, i, e)
                    },
                    _onAsyncRequested: function(t, e, n) {
                        this.eventBus.trigger("asyncrequest", n, e)
                    },
                    _onAsyncCanceled: function(t, e, n) {
                        this.eventBus.trigger("asynccancel", n, e)
                    },
                    _onAsyncReceived: function(t, e, n) {
                        this.eventBus.trigger("asyncreceive", n, e)
                    },
                    _onFocused: function() {
                        this._minLengthMet() && this.menu.update(this.input.getQuery())
                    },
                    _onBlurred: function() {
                        this.input.hasQueryChangedSinceLastFocus() && this.eventBus.trigger("change", this.input.getQuery())
                    },
                    _onEnterKeyed: function(t, e) {
                        var n;
                        (n = this.menu.getActiveSelectable()) && this.select(n) && e.preventDefault()
                    },
                    _onTabKeyed: function(t, e) {
                        var n;
                        (n = this.menu.getActiveSelectable()) ? this.select(n) && e.preventDefault() : (n = this.menu.getTopSelectable()) && this.autocomplete(n) && e.preventDefault()
                    },
                    _onEscKeyed: function() {
                        this.close()
                    },
                    _onUpKeyed: function() {
                        this.moveCursor(-1)
                    },
                    _onDownKeyed: function() {
                        this.moveCursor(1)
                    },
                    _onLeftKeyed: function() {
                        "rtl" === this.dir && this.input.isCursorAtEnd() && this.autocomplete(this.menu.getTopSelectable())
                    },
                    _onRightKeyed: function() {
                        "ltr" === this.dir && this.input.isCursorAtEnd() && this.autocomplete(this.menu.getTopSelectable())
                    },
                    _onQueryChanged: function(t, e) {
                        this._minLengthMet(e) ? this.menu.update(e) : this.menu.empty()
                    },
                    _onWhitespaceChanged: function() {
                        this._updateHint()
                    },
                    _onLangDirChanged: function(t, e) {
                        this.dir !== e && (this.dir = e,
                        this.menu.setLanguageDirection(e))
                    },
                    _openIfActive: function() {
                        this.isActive() && this.open()
                    },
                    _minLengthMet: function(t) {
                        return t = e.isString(t) ? t : this.input.getQuery() || "",
                        t.length >= this.minLength
                    },
                    _updateHint: function() {
                        var t, n, i, r, o, s, l;
                        t = this.menu.getTopSelectable(),
                        n = this.menu.getSelectableData(t),
                        i = this.input.getInputValue(),
                        !n || e.isBlankString(i) || this.input.hasOverflow() ? this.input.clearHint() : (r = a.normalizeQuery(i),
                        o = e.escapeRegExChars(r),
                        s = new RegExp("^(?:" + o + ")(.+$)","i"),
                        (l = s.exec(n.val)) && this.input.setHint(i + l[1]))
                    },
                    isEnabled: function() {
                        return this.enabled
                    },
                    enable: function() {
                        this.enabled = !0
                    },
                    disable: function() {
                        this.enabled = !1
                    },
                    isActive: function() {
                        return this.active
                    },
                    activate: function() {
                        return !!this.isActive() || !(!this.isEnabled() || this.eventBus.before("active")) && (this.active = !0,
                        this.eventBus.trigger("active"),
                        !0)
                    },
                    deactivate: function() {
                        return !this.isActive() || !this.eventBus.before("idle") && (this.active = !1,
                        this.close(),
                        this.eventBus.trigger("idle"),
                        !0)
                    },
                    isOpen: function() {
                        return this.menu.isOpen()
                    },
                    open: function() {
                        return this.isOpen() || this.eventBus.before("open") || (this.menu.open(),
                        this._updateHint(),
                        this.eventBus.trigger("open")),
                        this.isOpen()
                    },
                    close: function() {
                        return this.isOpen() && !this.eventBus.before("close") && (this.menu.close(),
                        this.input.clearHint(),
                        this.input.resetInputValue(),
                        this.eventBus.trigger("close")),
                        !this.isOpen()
                    },
                    setVal: function(t) {
                        this.input.setQuery(e.toStr(t))
                    },
                    getVal: function() {
                        return this.input.getQuery()
                    },
                    select: function(t) {
                        var e = this.menu.getSelectableData(t);
                        return !(!e || this.eventBus.before("select", e.obj)) && (this.input.setQuery(e.val, !0),
                        this.eventBus.trigger("select", e.obj),
                        this.close(),
                        !0)
                    },
                    autocomplete: function(t) {
                        var e, n;
                        return e = this.input.getQuery(),
                        n = this.menu.getSelectableData(t),
                        !(!(n && e !== n.val) || this.eventBus.before("autocomplete", n.obj)) && (this.input.setQuery(n.val),
                        this.eventBus.trigger("autocomplete", n.obj),
                        !0)
                    },
                    moveCursor: function(t) {
                        var e, n, i, r;
                        return e = this.input.getQuery(),
                        n = this.menu.selectableRelativeToCursor(t),
                        i = this.menu.getSelectableData(n),
                        r = i ? i.obj : null,
                        !(this._minLengthMet() && this.menu.update(e)) && !this.eventBus.before("cursorchange", r) && (this.menu.setCursor(n),
                        i ? this.input.setInputValue(i.val) : (this.input.resetInputValue(),
                        this._updateHint()),
                        this.eventBus.trigger("cursorchange", r),
                        !0)
                    },
                    destroy: function() {
                        this.input.destroy(),
                        this.menu.destroy()
                    }
                }),
                n
            }();
            !function() {
                "use strict";
                function i(e, n) {
                    e.each(function() {
                        var e, i = t(this);
                        (e = i.data(g.typeahead)) && n(e, i)
                    })
                }
                function o(t, e) {
                    return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(l(t)).prop("readonly", !0).removeAttr("id name placeholder required").attr({
                        autocomplete: "off",
                        spellcheck: "false",
                        tabindex: -1
                    })
                }
                function s(t, e) {
                    t.data(g.attrs, {
                        dir: t.attr("dir"),
                        autocomplete: t.attr("autocomplete"),
                        spellcheck: t.attr("spellcheck"),
                        style: t.attr("style")
                    }),
                    t.addClass(e.classes.input).attr({
                        autocomplete: "off",
                        spellcheck: !1
                    });
                    try {
                        !t.attr("dir") && t.attr("dir", "auto")
                    } catch (t) {}
                    return t
                }
                function l(t) {
                    return {
                        backgroundAttachment: t.css("background-attachment"),
                        backgroundClip: t.css("background-clip"),
                        backgroundColor: t.css("background-color"),
                        backgroundImage: t.css("background-image"),
                        backgroundOrigin: t.css("background-origin"),
                        backgroundPosition: t.css("background-position"),
                        backgroundRepeat: t.css("background-repeat"),
                        backgroundSize: t.css("background-size")
                    }
                }
                function d(t) {
                    var n, i;
                    n = t.data(g.www),
                    i = t.parent().filter(n.selectors.wrapper),
                    e.each(t.data(g.attrs), function(n, i) {
                        e.isUndefined(n) ? t.removeAttr(i) : t.attr(i, n)
                    }),
                    t.removeData(g.typeahead).removeData(g.www).removeData(g.attr).removeClass(n.classes.input),
                    i.length && (t.detach().insertAfter(i),
                    i.remove())
                }
                function p(n) {
                    var i, r;
                    return i = e.isJQuery(n) || e.isElement(n),
                    r = i ? t(n).first() : [],
                    r.length ? r : null
                }
                var f, g, m;
                f = t.fn.typeahead,
                g = {
                    www: "tt-www",
                    attrs: "tt-attrs",
                    typeahead: "tt-typeahead"
                },
                m = {
                    initialize: function(i, l) {
                        function d() {
                            var n, d, m, _, v, y, b, w, x, C, T;
                            e.each(l, function(t) {
                                t.highlight = !!i.highlight
                            }),
                            n = t(this),
                            d = t(f.html.wrapper),
                            m = p(i.hint),
                            _ = p(i.menu),
                            v = !1 !== i.hint && !m,
                            y = !1 !== i.menu && !_,
                            v && (m = o(n, f)),
                            y && (_ = t(f.html.menu).css(f.css.menu)),
                            m && m.val(""),
                            n = s(n, f),
                            (v || y) && (d.css(f.css.wrapper),
                            n.css(v ? f.css.input : f.css.inputWithNoHint),
                            n.wrap(d).parent().prepend(v ? m : null).append(y ? _ : null)),
                            T = y ? h : c,
                            b = new r({
                                el: n
                            }),
                            w = new a({
                                hint: m,
                                input: n
                            },f),
                            x = new T({
                                node: _,
                                datasets: l
                            },f),
                            C = new u({
                                input: w,
                                menu: x,
                                eventBus: b,
                                minLength: i.minLength
                            },f),
                            n.data(g.www, f),
                            n.data(g.typeahead, C)
                        }
                        var f;
                        return l = e.isArray(l) ? l : [].slice.call(arguments, 1),
                        i = i || {},
                        f = n(i.classNames),
                        this.each(d)
                    },
                    isEnabled: function() {
                        var t;
                        return i(this.first(), function(e) {
                            t = e.isEnabled()
                        }),
                        t
                    },
                    enable: function() {
                        return i(this, function(t) {
                            t.enable()
                        }),
                        this
                    },
                    disable: function() {
                        return i(this, function(t) {
                            t.disable()
                        }),
                        this
                    },
                    isActive: function() {
                        var t;
                        return i(this.first(), function(e) {
                            t = e.isActive()
                        }),
                        t
                    },
                    activate: function() {
                        return i(this, function(t) {
                            t.activate()
                        }),
                        this
                    },
                    deactivate: function() {
                        return i(this, function(t) {
                            t.deactivate()
                        }),
                        this
                    },
                    isOpen: function() {
                        var t;
                        return i(this.first(), function(e) {
                            t = e.isOpen()
                        }),
                        t
                    },
                    open: function() {
                        return i(this, function(t) {
                            t.open()
                        }),
                        this
                    },
                    close: function() {
                        return i(this, function(t) {
                            t.close()
                        }),
                        this
                    },
                    select: function(e) {
                        var n = !1
                          , r = t(e);
                        return i(this.first(), function(t) {
                            n = t.select(r)
                        }),
                        n
                    },
                    autocomplete: function(e) {
                        var n = !1
                          , r = t(e);
                        return i(this.first(), function(t) {
                            n = t.autocomplete(r)
                        }),
                        n
                    },
                    moveCursor: function(t) {
                        var e = !1;
                        return i(this.first(), function(n) {
                            e = n.moveCursor(t)
                        }),
                        e
                    },
                    val: function(t) {
                        var e;
                        return arguments.length ? (i(this, function(e) {
                            e.setVal(t)
                        }),
                        this) : (i(this.first(), function(t) {
                            e = t.getVal()
                        }),
                        e)
                    },
                    destroy: function() {
                        return i(this, function(t, e) {
                            d(e),
                            t.destroy()
                        }),
                        this
                    }
                },
                t.fn.typeahead = function(t) {
                    return m[t] ? m[t].apply(this, [].slice.call(arguments, 1)) : m.initialize.apply(this, arguments)
                }
                ,
                t.fn.typeahead.noConflict = function() {
                    return t.fn.typeahead = f,
                    this
                }
            }()
        })
    }
    ).call(e, n(113).setImmediate)
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = n(5)
          , r = n(35)
          , o = function() {
            function e(t) {
                this.tagEn = t.tag_en,
                this.tagRu = t.tag_ru
            }
            return Object.defineProperty(e, "SERVICE_URL", {
                get: function() {
                    return i.Site.MAIN_URL + "/v3/js/get-emblem-tags/"
                },
                enumerable: !0,
                configurable: !0
            }),
            e.init = function() {
                e.allTags = [];
                for (var t = 0, n = getEmblemTags(); t < n.length; t++) {
                    var i = n[t];
                    e.allTags.push(new e(i))
                }
            }
            ,
            e.initializeEmblemTags = function(n) {
                void 0 === n && (n = null),
                null === e.allTags ? (r.WaitLocker.start(),
                t.ajax({
                    type: "GET",
                    url: e.SERVICE_URL,
                    dataType: "json",
                    success: function(t) {
                        e.processEmblemTagsResponse(t, n),
                        r.WaitLocker.stop()
                    }
                })) : e.allTags.length > 0 && n && n()
            }
            ,
            e.processEmblemTagsResponse = function(t, n) {
                void 0 === t && (t = null);
                for (var i = [], r = null, o = 0; o < t.length; o++) {
                    r = new e(t[o]),
                    i.push(r)
                }
                e.allTags = i,
                n && n()
            }
            ,
            e.getEnTag = function(t) {
                var n = e.allTags.find(function(e) {
                    return e.tagRu === t
                });
                return void 0 !== n && (t = n.tagEn),
                t
            }
            ,
            e.allTags = null,
            e
        }();
        e.EmblemTag = o
    }
    ).call(e, n(0))
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = n(53)
          , r = n(1)
          , o = n(13)
          , s = function() {
            function e(e, n) {
                void 0 === n && (n = null);
                var i = this;
                this.svgIcon = null,
                this.padding = 10,
                this.context2d = null,
                this.context2d = e,
                n && t(this.context2d.canvas).on("click", function(t) {
                    return n(t, i.svgIcon)
                })
            }
            return e.prototype.draw = function(t) {
                void 0 === t && (t = null),
                this.svgIcon.maths = new o.Maths,
                this.svgIcon.maths.matrix = this.getCenteringMatrix(),
                new i.SvgIconView(this.svgIcon,this.context2d).draw(t)
            }
            ,
            e.prototype.getCenteringMatrix = function() {
                var t = this.svgIcon.bounds.width * this.context2d.canvas.height / this.svgIcon.bounds.height;
                this.context2d.canvas.height;
                t > this.context2d.canvas.width && (t = this.context2d.canvas.width,
                this.svgIcon.bounds.height,
                this.context2d.canvas.height,
                this.svgIcon.bounds.width);
                var e = t / this.svgIcon.bounds.width
                  , n = new r.Matrix;
                n.scale(e, e);
                var i = -this.svgIcon.bounds.x * e
                  , o = -this.svgIcon.bounds.y * e;
                return i += (this.context2d.canvas.width - this.svgIcon.bounds.width * e) / 2,
                o += (this.context2d.canvas.height - this.svgIcon.bounds.height * e) / 2,
                n.translate(i, o),
                e = (this.context2d.canvas.height - 2 * this.padding) / this.context2d.canvas.height,
                n.scale(e, e),
                n.translate(this.context2d.canvas.width / this.context2d.canvas.height * this.padding, this.padding),
                n
            }
            ,
            e
        }();
        e.SvgIconPreview = s
    }
    ).call(e, n(0))
}
, , , , , , , , , , , , function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = n(115)
      , r = function() {
        function t() {
            this.makers = [new i.DBMaker]
        }
        return t.prototype.getLogos = function(t, e, n) {
            void 0 === n && (n = null);
            for (var i = 0, r = this.makers; i < r.length; i++) {
                r[i].make(t, e, n)
            }
        }
        ,
        t.prototype.getBrands = function(t, e, n) {
            void 0 === n && (n = null);
            for (var i = 0, r = this.makers; i < r.length; i++) {
                r[i].makeBrand(t, e, n)
            }
        }
        ,
        t.prototype.resetUsage = function() {
            for (var t = 0, e = this.makers; t < e.length; t++) {
                e[t].resetUsage()
            }
        }
        ,
        t
    }();
    e.LogoFactory = r
}
, , , , , , , , , , , , , , , , , , , , , , , , , , function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i, r = n(101), o = n(102);
    !function(t) {
        t[t.NO_STYLE = 0] = "NO_STYLE",
        t[t.MONOGRAM = 1] = "MONOGRAM",
        t[t.ROUNDED = 2] = "ROUNDED",
        t[t.MINIMAL = 4] = "MINIMAL",
        t[t.WITH_GRAPHIC_ELEMENT = 8] = "WITH_GRAPHIC_ELEMENT",
        t[t.ABSTRACT = 16] = "ABSTRACT",
        t[t.ICON_BASED = 32] = "ICON_BASED"
    }(i || (i = {}));
    var s = function() {
        function t() {
            this._industryIds = [o.ActivityType.DEFAULT_ACTIVITY_TYPE],
            this._colorCategories = [],
            this._familyStyles = i.NO_STYLE,
            this._iconIds = [],
            this._iconTags = [],
            this._useIcons = !0,
            this._useIconTags = !0,
            this._inputData = null,
            this.setAllFamilyStylesSelected(),
            this.setAllCCSelected()
        }
        return t.getInstance = function() {
            return t.instance || (t.instance = new t),
            t.instance
        }
        ,
        Object.defineProperty(t.prototype, "industryIds", {
            get: function() {
                return this._industryIds
            },
            set: function(t) {
                this._industryIds = t
            },
            enumerable: !0,
            configurable: !0
        }),
        t.prototype.pushColorCategory = function(t) {
            this._colorCategories.push(t)
        }
        ,
        t.prototype.removeColorCategory = function(t) {
            this._colorCategories.splice(this._colorCategories.indexOf(t), 1)
        }
        ,
        t.prototype.setAllCCSelected = function() {
            this._colorCategories = r.ColorRangeCategory.categories.concat()
        }
        ,
        t.prototype.clearAllCC = function() {
            this._colorCategories = []
        }
        ,
        Object.defineProperty(t.prototype, "colorCategories", {
            get: function() {
                return this._colorCategories
            },
            set: function(t) {
                this._colorCategories = t
            },
            enumerable: !0,
            configurable: !0
        }),
        t.prototype.setAllFamilyStylesSelected = function() {
            this.familyStyles = i.MONOGRAM | i.ROUNDED | i.MINIMAL | i.WITH_GRAPHIC_ELEMENT | i.ABSTRACT | i.ICON_BASED
        }
        ,
        t.prototype.clearFamilyStyles = function() {
            this.familyStyles = i.NO_STYLE
        }
        ,
        Object.defineProperty(t.prototype, "familyStyles", {
            get: function() {
                return this._familyStyles
            },
            set: function(t) {
                this._familyStyles = t
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "iconIds", {
            get: function() {
                return this._iconIds
            },
            set: function(t) {
                this._iconIds = t
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "iconTags", {
            get: function() {
                return this._iconTags
            },
            set: function(t) {
                this._iconTags = t
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "useIcons", {
            get: function() {
                return this._useIcons
            },
            set: function(t) {
                this._useIcons = t
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "useTags", {
            get: function() {
                return this._useIconTags
            },
            set: function(t) {
                this._useIconTags = t
            },
            enumerable: !0,
            configurable: !0
        }),
        Object.defineProperty(t.prototype, "inputData", {
            get: function() {
                return this._inputData
            },
            set: function(t) {
                this._inputData = t
            },
            enumerable: !0,
            configurable: !0
        }),
        t.prototype.serialize = function() {
            var t = {
                ATIds: this._industryIds,
                familyStyles: this._familyStyles,
                iconIds: [],
                iconTags: [],
                text: this._inputData.text,
                slogan: this._inputData.slogan,
                words: this._words,
                sloganWords: this._sloganWords,
                textsData: this._textsData,
                slogansData: this._slogansData,
                loadedFamilies: this._loadedFamilies,
                loadedParentMakers: this._loadedParentMakers,
                loadedEmblemIds: this._loadedEmblemIds,
                neededFamily: void 0 !== this._neededFamily ? this._neededFamily : ""
            };
            return this._useIcons && (t.iconIds = this._iconIds),
            this._useIconTags && (t.iconTags = this._iconTags),
            JSON.stringify(t)
        }
        ,
        t.prototype.setDbMakerFields = function(t, e, n, i, r, o, s, a) {
            this._words = t,
            this._sloganWords = e,
            this._textsData = n,
            this._slogansData = i,
            this._loadedFamilies = r,
            this._loadedParentMakers = o,
            this._loadedEmblemIds = s,
            this._neededFamily = a
        }
        ,
        t
    }();
    e.BrandCreationData = s
}
, , , , , , , , , , function(t, e, n) {
    "use strict";
    (function(t) {
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = n(11)
          , r = n(12)
          , o = n(187)
          , s = n(87)
          , a = n(3)
          , l = n(2)
          , c = n(5)
          , h = n(224)
          , u = n(226)
          , d = n(101)
          , p = n(60)
          , f = n(130)
          , g = n(35)
          , m = n(93)
          , _ = n(167)
          , v = n(102)
          , y = n(227)
          , b = n(228)
          , w = n(229)
          , x = n(213)
          , C = n(236)
          , T = function() {
            function e(e, n, a, c, f) {
                void 0 === a && (a = !1),
                void 0 === c && (c = []),
                void 0 === f && (f = C.PlanVersion.Test1PlanV4),
                this.$el = null,
                this.inputText = null,
                this.previewInputText = null,
                this.inputSlogan = null,
                this.inputData = null,
                this.inputProcessor = null,
                this.favoritesCount = 0,
                this.favoritesCounter = null,
                this.topRibbonContainer = null,
                this.regenerateBtn = null,
                this.loadMoreBtn = null,
                this.demoModal = null,
                this.nextDemoBtn = null,
                this.prevDemoBtn = null,
                this.favoriteDemoBtn = null,
                this.saveDemoBtn = null,
                this.editDemoBtn = null,
                this.toggleFavoritesBtn = null,
                this.pageTitleContainer = null,
                this.backToCreatedLogosBtn = null,
                this.saveAllFavoritesBtn = null,
                this.topRibbonFavoritesBtn = null,
                this.pageTitleTemplate = null,
                this.logoFactory = null,
                this.zoom = 2,
                this.displayCreatedLogos = !0,
                this.isFavoritesInitialized = !1,
                this.favoriteLogosContainer = null,
                this.createdLogosContainer = null,
                this.createdFeed = null,
                this.favoritesFeed = null,
                this.demoBrand = null,
                this.colorCategoryPicker = null,
                this.colorCategoryDropDown = null,
                this.colorCategories = null,
                this.activityTypeDropDown = null,
                this.selectedActivityType = v.ActivityType.DEFAULT_ACTIVITY_TYPE,
                this.favoritesMode = !1,
                this.debugMode = !1,
                this.planVersion = C.PlanVersion.Test1PlanV4,
                this.popupPresentation = null,
                this.asyncLocker = null,
                r.Font.init(),
                v.ActivityType.init(),
                d.ColorRangeCategory.init(),
                l.ColorRange.init(),
                this.asyncLocker = new m.Locker,
                this.favoritesMode = e,
                this.isMobile = a,
                this.debugMode = n,
                this.planVersion = f,
                this.colorCategories = d.ColorRangeCategory.categories.concat(),
                this.$el = t(".logaster3 .wizard"),
                this.regenerateBtn = this.$el.find(".regenerate-btn"),
                this.inputText = this.$el.find(".input-text"),
                this.isMobile && (this.previewInputText = this.$el.find(".preview-input-text")),
                this.inputSlogan = this.$el.find(".input-slogan"),
                this.loadMoreBtn = this.$el.find(".load-more-btn"),
                this.createdLogosContainer = this.$el.find(".logo-previews.logo-created-previews"),
                this.favoriteLogosContainer = this.$el.find(".logo-previews.logo-favorites-previews"),
                this.favoritesCounter = t(".logaster3 .favorites .counter"),
                this.toggleFavoritesBtn = t(".logaster3 .header .favorites"),
                this.pageTitleContainer = t(".logaster3 .header .title-container"),
                this.backToCreatedLogosBtn = t(".logaster3 .back-to-created"),
                this.saveAllFavoritesBtn = t(".logaster3 .save-all-favorites"),
                this.demoModal = t(".logaster3 .preview-modal"),
                this.topRibbonContainer = this.$el.find(".top-ribbon"),
                this.nextDemoBtn = this.demoModal.find(".next-logo-btn"),
                this.prevDemoBtn = this.demoModal.find(".prev-logo-btn"),
                this.isMobile ? (this.favoriteDemoBtn = t(".logaster3 .modal-wrapper .favorites-btn"),
                this.saveDemoBtn = t(".logaster3 .modal-wrapper .save-btn"),
                this.editDemoBtn = t(".logaster3 .modal-wrapper .edit-btn"),
                this.topRibbonFavoritesBtn = this.$el.find(".header .favorites")) : (this.favoriteDemoBtn = this.demoModal.find(".favorites-btn"),
                this.saveDemoBtn = this.demoModal.find(".save-btn"),
                this.editDemoBtn = this.demoModal.find(".edit-btn"),
                this.topRibbonFavoritesBtn = this.topRibbonContainer.find(".favorites"),
                this.pageTitleTemplate = i.template(t(".page-title-template").html())),
                this.bindHandlers(),
                this.topRibbonDropDowns = [],
                this.logoFactory = new o.LogoFactory,
                this.createdFeed = new h.LogoPreviewFeed(this.createdLogosContainer,this.isMobile,this.debugMode),
                this.favoritesFeed = new h.LogoPreviewFeed(this.favoriteLogosContainer,this.isMobile,this.debugMode),
                this.brandFavorites = p.Brand.deserializeMany(c),
                this.favoritesCount = this.brandFavorites.length,
                this.brandCreationData = x.BrandCreationData.getInstance(),
                C.PlanVersion.allowNewFilters(this.planVersion) ? this.isMobile || (new w.LogoCreateToolbar(this.okClickHandler),
                g.WaitLocker.appElement = this.$el,
                this.okClickHandler()) : (this.isMobile ? (this.colorCategoryDropDown = new b.ColorCategoryDropDown(this.$el.find("#color-category-dropdown")),
                this.colorCategoryDropDown.changeCallback = this.onColorCategoryChanged,
                this.colorCategoryDropDown.render()) : (this.colorCategoryPicker = new u.ColorCategoryPicker(this.$el.find("#color-category-picker"),this.onColorCategoryChanged),
                this.colorCategoryPicker.openCallback = this.hideDropDownsHandler,
                this.topRibbonDropDowns.push(this.colorCategoryPicker)),
                this.activityTypeDropDown = new _.ActivityTypeDropDown(this.$el.find("#activity-type"),null,this.isMobile),
                this.activityTypeDropDown.changeCallback = this.activityTypeChangeCallback,
                this.activityTypeDropDown.openCallback = this.hideDropDownsHandler,
                this.activityTypeDropDown.render(),
                this.activityTypeDropDown.update(v.ActivityType.DEFAULT_ACTIVITY_TYPE),
                this.topRibbonDropDowns.push(this.activityTypeDropDown),
                g.WaitLocker.appElement = this.$el,
                this.inputProcessor = new s.UserInputProcessor,
                this.inputData = this.inputProcessor.process(this.inputText.attr("data-text"), this.inputSlogan.attr("data-slogan")),
                this.inputText.val(this.inputData.text),
                this.inputSlogan.val(this.inputData.slogan),
                this.isMobile && this.previewInputText.val(this.inputData.text),
                this.brandCreationData.inputData = this.inputData,
                this.drawLogos());
                var T = y.QueryString.remove(window.location.href, "p");
                window.history.replaceState("", "", T),
                this.hiddenCssClass = this.isMobile ? "d-none" : "hidden",
                this.gaLabel = this.isMobile ? "Mobile" : "",
                this.favoritesMode && this.toggleFavoritesHandler(null)
            }
            return e.prototype.bindHandlers = function() {
                this.favoritesHandler = this.favoritesHandler.bind(this),
                this.favoriteDemoHandler = this.favoriteDemoHandler.bind(this),
                this.viewMoreHandler = this.viewMoreHandler.bind(this),
                this.regenerateHandler = this.regenerateHandler.bind(this),
                this.textChangedHandler = this.textChangedHandler.bind(this),
                this.loadMoreHandler = this.loadMoreHandler.bind(this),
                this.nextDemoHandler = this.nextDemoHandler.bind(this),
                this.prevDemoHandler = this.prevDemoHandler.bind(this),
                this.showNextBrand = this.showNextBrand.bind(this),
                this.editDemoHandler = this.editDemoHandler.bind(this),
                this.saveDemoHandler = this.saveDemoHandler.bind(this),
                this.toggleFavoritesHandler = this.toggleFavoritesHandler.bind(this),
                this.saveAllFavoritesHandler = this.saveAllFavoritesHandler.bind(this),
                this.topRibbonAffixedHandler = this.topRibbonAffixedHandler.bind(this),
                this.topRibbonAffixedTopHandler = this.topRibbonAffixedTopHandler.bind(this),
                this.onColorCategoryChanged = this.onColorCategoryChanged.bind(this),
                this.enterPressedHandler = this.enterPressedHandler.bind(this),
                this.activityTypeChangeCallback = this.activityTypeChangeCallback.bind(this),
                this.hideDropDownsHandler = this.hideDropDownsHandler.bind(this),
                this.popStateHandler = this.popStateHandler.bind(this),
                this.requestBrands = this.requestBrands.bind(this),
                this.okClickHandler = this.okClickHandler.bind(this),
                this.regenerateBtn.on("click", this.regenerateHandler),
                this.inputText.on("keyup", this.textChangedHandler),
                this.loadMoreBtn.on("click", this.loadMoreHandler),
                this.inputText.on("keypress", this.enterPressedHandler),
                this.inputSlogan.on("keypress", this.enterPressedHandler),
                this.nextDemoBtn.on("click", this.nextDemoHandler),
                this.prevDemoBtn.on("click", this.prevDemoHandler),
                this.favoriteDemoBtn.on("click", this.favoriteDemoHandler),
                this.saveDemoBtn.on("click", this.saveDemoHandler),
                this.editDemoBtn.on("click", this.editDemoHandler),
                this.toggleFavoritesBtn.on("click", this.toggleFavoritesHandler),
                this.backToCreatedLogosBtn.on("click", this.toggleFavoritesHandler),
                this.saveAllFavoritesBtn.on("click", this.saveAllFavoritesHandler);
                var e = t(".logaster3 .header").height();
                if (this.isMobile || (this.topRibbonContainer.affix({
                    offset: {
                        top: e
                    }
                }),
                this.topRibbonContainer.on("affixed-top.bs.affix", this.topRibbonAffixedTopHandler),
                this.topRibbonContainer.on("affixed.bs.affix", this.topRibbonAffixedHandler)),
                this.topRibbonFavoritesBtn.on("click", this.toggleFavoritesHandler),
                this.isMobile) {
                    var n = this;
                    n.previewInputText.on("click", function() {
                        n.$el.find("#settings").one("shown.bs.modal", function() {
                            n.inputText.focus()
                        })
                    })
                }
                window.onpopstate = this.popStateHandler
            }
            ,
            e.prototype.enterPressedHandler = function(t) {
                var e = this.inputText.val().replace(/\s/g, "");
                13 === t.which && e.length >= 3 && this.regenerateHandler()
            }
            ,
            e.prototype.reloadPage = function() {
                location.reload()
            }
            ,
            e.prototype.getVisibleFeed = function() {
                return this.displayCreatedLogos ? this.createdFeed : this.favoritesFeed
            }
            ,
            e.prototype.toggleFavoritesHandler = function(e) {
                if (null !== e ? e.preventDefault() : this.createdFeed = null,
                !g.WaitLocker.isLocked() && (this.displayCreatedLogos || null == e || t(e.currentTarget).is(this.backToCreatedLogosBtn))) {
                    if (null == this.createdFeed && null != e && t(e.currentTarget).is(this.backToCreatedLogosBtn))
                        return void (window.location.href = a.Logo.CREATE_URL);
                    if (!this.displayCreatedLogos || 0 !== this.favoritesCount) {
                        if (this.displayCreatedLogos = !this.displayCreatedLogos,
                        this.displayCreatedLogos ? (this.favoritesMode = !1,
                        this.loadMoreBtn.removeClass(this.hiddenCssClass)) : (this.favoritesMode = !0,
                        this.loadMoreBtn.addClass(this.hiddenCssClass)),
                        this.isFavoritesInitialized)
                            return void this.toggleFeedVisibility();
                        var n = this;
                        n.toggleFeedVisibility(),
                        g.WaitLocker.start(),
                        this.loadFavoriteLogosFonts(function() {
                            for (var t = 0, e = n.brandFavorites; t < e.length; t++) {
                                var i = e[t];
                                n.favoritesFeed.add(i, n.favoritesHandler, n.viewMoreHandler)
                            }
                            g.WaitLocker.stop()
                        }),
                        this.isFavoritesInitialized = !0
                    }
                }
            }
            ,
            e.prototype.toggleFavoritesCountVisibility = function() {
                this.displayCreatedLogos ? (this.toggleFavoritesBtn.toggleClass("active", this.favoritesCount > 0),
                this.topRibbonFavoritesBtn.toggleClass("active", this.favoritesCount > 0)) : (this.toggleFavoritesBtn.removeClass("active"),
                this.topRibbonFavoritesBtn.removeClass("active"))
            }
            ,
            e.prototype.toggleFeedVisibility = function() {
                this.toggleFavoritesCountVisibility(),
                window.scrollTo(0, 0),
                this.$el.find(".visible-created").toggleClass(this.hiddenCssClass, !this.displayCreatedLogos),
                this.$el.find(".visible-favorites").toggleClass(this.hiddenCssClass),
                this.pageTitleContainer.find(".visible-created").toggleClass(this.hiddenCssClass, !this.displayCreatedLogos),
                this.pageTitleContainer.find(".visible-favorites").toggleClass(this.hiddenCssClass),
                this.isMobile || this.pageTitleContainer.html(this.pageTitleTemplate({
                    displayCreatedLogos: this.displayCreatedLogos,
                    favoritesCount: this.favoritesCount
                })),
                document.title = this.displayCreatedLogos ? translation.TitleCreate : translation.TitleFavorites,
                this.displayCreatedLogos ? window.history.pushState("", "", window.location.pathname.replace("favorites/", "") + this.backToCreatedLogosBtn.data("search")) : (this.backToCreatedLogosBtn.data("search", window.location.search),
                -1 === window.location.pathname.indexOf("favorites/") && window.history.pushState("", "", window.location.pathname + "favorites/"))
            }
            ,
            e.prototype.loadFavoriteLogosFonts = function(t) {
                void 0 === t && (t = null);
                for (var e = [], n = 0, i = this.brandFavorites; n < i.length; n++)
                    for (var o = i[n], s = 0, a = o.logos; s < a.length; s++)
                        for (var l = a[s], c = 0, h = l.items; c < h.length; c++) {
                            var u = h[c];
                            u.isText && -1 === e.indexOf(u.font.id) && e.push(u.font.id)
                        }
                r.Font.load(e).then(function() {
                    t && t()
                })
            }
            ,
            e.prototype.okClickHandler = function() {
                if (!this.favoritesMode) {
                    g.WaitLocker.start(),
                    this.createdFeed.removeAll(),
                    this.logoFactory.resetUsage();
                    var t = {
                        inputData: this.brandCreationData.inputData,
                        activityType: v.ActivityType.DEFAULT_ACTIVITY_TYPE,
                        brandCreationData: this.brandCreationData
                    };
                    this.requestBrands(t, this.brandCreationData.colorCategories)
                }
            }
            ,
            e.prototype.drawLogos = function(t) {
                if (void 0 === t && (t = null),
                !this.favoritesMode) {
                    g.WaitLocker.start();
                    var e = {
                        inputData: null != this.inputData ? this.inputData : this.brandCreationData.inputData,
                        activityType: this.selectedActivityType,
                        brandCreationData: this.brandCreationData
                    };
                    this.requestBrands(e, this.colorCategories, t)
                }
            }
            ,
            e.prototype.requestBrands = function(t, e, n) {
                void 0 === n && (n = null);
                var i = this;
                this.logoFactory.getBrands(t, function(t, r) {
                    r.colorRange = l.ColorRange.getRandom(d.ColorRangeCategory.getColorRanges(e)),
                    i.createdFeed.add(r, i.favoritesHandler, i.viewMoreHandler),
                    i.displayCreatedLogos && i.loadMoreBtn.removeClass(i.hiddenCssClass),
                    null !== n && (n(),
                    n = null),
                    g.WaitLocker.stop()
                }, function() {
                    i.loadMoreBtn.addClass(i.hiddenCssClass),
                    g.WaitLocker.stop()
                })
            }
            ,
            e.prototype.favoritesHandler = function(t, e) {
                if (void 0 === e && (e = null),
                !this.asyncLocker.locked) {
                    this.animateHeaderHeart(),
                    this.asyncLocker.acquire();
                    var n = this;
                    t.toggleFavorite().then(function() {
                        t.primaryLogo.status == a.Logo.STATUS_FAVORITE ? (n.addFavoritesAnimation(e),
                        logasterTrack.trackGA("Creator.Tiles", "AddFavorites_btn", n.gaLabel),
                        n.favoritesCount++,
                        n.favoritesFeed.add(t, n.favoritesHandler, n.viewMoreHandler),
                        n.saveAllFavoritesBtn.removeAttr("disabled")) : (logasterTrack.trackGA("Creator.Tiles", "RemoveFavorites_btn", n.gaLabel),
                        n.favoritesCount--,
                        n.favoritesFeed.remove(t),
                        0 == n.favoritesCount && n.saveAllFavoritesBtn.attr("disabled", "disabled")),
                        n.toggleFavoritesCountVisibility(),
                        n.favoritesFeed.updateFavoriteButtons(t),
                        null != n.createdFeed && n.createdFeed.updateFavoriteButtons(t),
                        n.favoritesCounter.text(n.favoritesCount),
                        n.pageTitleContainer.find(".favicon-counter").text(n.favoritesCount),
                        n.asyncLocker.release()
                    })
                }
            }
            ,
            e.prototype.favoriteDemoHandler = function() {
                if (!this.asyncLocker.locked) {
                    this.asyncLocker.acquire();
                    var t = this;
                    this.demoBrand.toggleFavorite().then(function() {
                        t.demoBrand.primaryLogo.status == a.Logo.STATUS_FAVORITE ? (t.favoriteDemoBtn.addClass("active"),
                        logasterTrack.trackGA("Creator.Popup", "AddFavorites_btn", t.gaLabel),
                        t.favoritesFeed.add(t.demoBrand, t.favoritesHandler, t.viewMoreHandler),
                        t.favoritesCount++) : (t.favoriteDemoBtn.removeClass("active"),
                        logasterTrack.trackGA("Creator.Popup", "RemoveFavorites_btn", t.gaLabel),
                        t.favoritesFeed.remove(t.demoBrand),
                        t.favoritesCount--),
                        t.favoritesFeed.updateFavoriteButtons(t.demoBrand),
                        t.createdFeed.updateFavoriteButtons(t.demoBrand),
                        t.favoritesCounter.text(t.favoritesCount),
                        t.pageTitleContainer.find(".favicon-counter").text(t.favoritesCount),
                        t.toggleFavoritesCountVisibility(),
                        t.asyncLocker.release()
                    })
                }
            }
            ,
            e.prototype.viewMoreHandler = function(t) {
                logasterTrack.trackPage(),
                this.drawDemo(t)
            }
            ,
            e.prototype.regenerateHandler = function() {
                if (!g.WaitLocker.isLocked()) {
                    logasterTrack.trackGA("Creator.Tiles", "ReGenerate_btn", this.gaLabel),
                    this.createdFeed.removeAll(),
                    this.logoFactory.resetUsage(),
                    g.WaitLocker.appElement = this.$el,
                    this.inputProcessor.update(this.inputData, this.inputText.val(), this.inputSlogan.val()),
                    this.inputText.val(this.inputData.text),
                    this.isMobile && this.previewInputText.val(this.inputData.text),
                    this.inputSlogan.val(this.inputData.slogan);
                    var t = "?t=" + encodeURIComponent(this.inputData.text);
                    "" !== this.inputData.slogan && (t += "&s=" + encodeURIComponent(this.inputData.slogan)),
                    window.history.pushState("", "", t),
                    this.drawLogos(),
                    this.regenerateBtn.addClass("stroked-btn")
                }
            }
            ,
            e.prototype.textChangedHandler = function(t) {
                var e = t.target.value.trim().replace(/\s/g, "");
                this.regenerateBtn.prop("disabled", e.length < 3)
            }
            ,
            e.prototype.loadMoreHandler = function() {
                g.WaitLocker.appElement = this.$el.find(".view-more-box"),
                this.drawLogos()
            }
            ,
            e.prototype.drawDemo = function(t) {
                this.demoModal.find(".logo-text").text(t.primaryLogo.text).data("brandNumber", y.QueryString.get(window.location.href, "p")),
                this.demoBrand = t,
                null == this.popupPresentation && (this.popupPresentation = new f.CreateLogoPopup),
                this.popupPresentation.draw(t, null),
                this.updateDemoButtons()
            }
            ,
            e.prototype.updateDemoButtons = function() {
                var t = this.getVisibleFeed()
                  , e = t.prevBrand(this.demoBrand);
                if (this.nextDemoBtn.removeClass(this.hiddenCssClass),
                null !== e ? this.prevDemoBtn.removeClass(this.hiddenCssClass) : this.prevDemoBtn.addClass(this.hiddenCssClass),
                this.favoritesMode) {
                    null !== t.nextBrand(this.demoBrand) ? this.nextDemoBtn.removeClass(this.hiddenCssClass) : this.nextDemoBtn.addClass(this.hiddenCssClass)
                }
                this.demoBrand.id > 0 ? this.favoriteDemoBtn.addClass("active") : this.favoriteDemoBtn.removeClass("active")
            }
            ,
            e.prototype.nextDemoHandler = function() {
                null !== this.getVisibleFeed().nextBrand(this.demoBrand) ? this.showNextBrand() : (g.WaitLocker.appElement = this.demoModal.find(".view-more-box-popup"),
                this.drawLogos(this.showNextBrand))
            }
            ,
            e.prototype.showNextBrand = function() {
                if (!1 !== this.demoModal.find(".modal").data("bs.modal").isShown) {
                    var t = this.getVisibleFeed()
                      , e = t.nextBrand(this.demoBrand);
                    t.logoPreviews.indexOf(t.getLogoPreview(e));
                    logasterTrack.trackPage(),
                    this.drawDemo(e)
                }
            }
            ,
            e.prototype.prevDemoHandler = function() {
                var t = this.getVisibleFeed()
                  , e = t.prevBrand(this.demoBrand);
                if (null !== e) {
                    t.logoPreviews.indexOf(t.getLogoPreview(e));
                    logasterTrack.trackPage(),
                    this.drawDemo(e)
                }
            }
            ,
            e.prototype.saveDemoHandler = function() {
                if (!this.asyncLocker.locked) {
                    this.asyncLocker.acquire();
                    var t = this;
                    if (this.demoBrand.id > 0) {
                        this.demoBrand.status = a.Logo.STATUS_DEFAULT;
                        for (var e = {}, n = 0, i = this.demoBrand.logos; n < i.length; n++) {
                            e[i[n].id] = {
                                status: a.Logo.STATUS_DEFAULT
                            }
                        }
                        a.Logo.bulkPartialUpdate(e, function(e, n) {
                            t.afterSaveRedirect(n)
                        })
                    } else
                        this.demoBrand.save().then(function(e) {
                            t.afterSaveRedirect(e[0].isTemp)
                        })
                }
            }
            ,
            e.prototype.afterSaveRedirect = function(t) {
                var e = a.Logo.BRAND_LOGOS_URL.replace("{id}", this.demoBrand.id.toString());
                window.location.href = t ? c.Site.SIGN_UP_URL + "?a=s&b=" + this.demoBrand.id + "&next=" + encodeURIComponent(e) : e
            }
            ,
            e.prototype.editDemoHandler = function() {
                if (!this.asyncLocker.locked && !this.isMobile) {
                    this.asyncLocker.acquire();
                    var t = this;
                    if (this.demoBrand.id > 0) {
                        this.demoBrand.status = a.Logo.STATUS_DEFAULT;
                        for (var e = {}, n = 0, i = this.demoBrand.logos; n < i.length; n++) {
                            e[i[n].id] = {
                                status: a.Logo.STATUS_DEFAULT
                            }
                        }
                        a.Logo.bulkPartialUpdate(e, function(e, n) {
                            t.afterEditRedirect(n)
                        })
                    } else
                        this.demoBrand.save().then(function(e) {
                            t.afterEditRedirect(e[0].isTemp)
                        })
                }
            }
            ,
            e.prototype.afterEditRedirect = function(t) {
                var e = p.Brand.EDIT_URL.replace("{id}", this.demoBrand.id.toString());
                window.location.href = t ? c.Site.SIGN_UP_URL + "?a=e&b=" + this.demoBrand.id + "&next=" + encodeURIComponent(e) : e
            }
            ,
            e.prototype.onColorCategoryChanged = function(t) {
                this.colorCategories.length === t.length && this.colorCategories.length === i.intersection(this.colorCategories, t).length || this.regenerateBtn.removeClass("stroked-btn"),
                this.colorCategories = t,
                logasterTrack.trackGA("Creator.Tiles", "ChangeColor_OK_btn", this.gaLabel)
            }
            ,
            e.prototype.saveAllFavoritesHandler = function() {
                if (!this.asyncLocker.locked && !this.saveAllFavoritesBtn.attr("disabled")) {
                    this.asyncLocker.acquire();
                    for (var t = {}, e = {
                        status: a.Logo.STATUS_DEFAULT
                    }, n = 0, i = this.favoritesFeed.logoPreviews; n < i.length; n++)
                        for (var r = i[n], o = r.brand, s = 0, l = o.logos; s < l.length; s++) {
                            var h = l[s];
                            t[h.id] = e
                        }
                    a.Logo.bulkPartialUpdate(t, function(t, e) {
                        var n = a.Logo.BRANDS_URL;
                        window.location.href = e ? c.Site.SIGN_UP_URL + "?a=f&b=" + o.id + "&next=" + encodeURIComponent(n) : n
                    })
                }
            }
            ,
            e.prototype.topRibbonAffixedHandler = function() {
                this.topRibbonFavoritesBtn.removeClass(this.hiddenCssClass)
            }
            ,
            e.prototype.topRibbonAffixedTopHandler = function() {
                this.topRibbonFavoritesBtn.addClass(this.hiddenCssClass)
            }
            ,
            e.prototype.activityTypeChangeCallback = function(t) {
                this.selectedActivityType !== t && this.regenerateBtn.removeClass("stroked-btn"),
                this.selectedActivityType = t,
                logasterTrack.trackGA("Creator.Tiles", "ChangeIndustry_select", this.gaLabel)
            }
            ,
            e.prototype.hideDropDownsHandler = function(t) {
                for (var e = 0, n = this.topRibbonDropDowns; e < n.length; e++) {
                    var i = n[e];
                    t !== i && i.hide()
                }
            }
            ,
            e.prototype.addFavoritesAnimation = function(e) {
                if (void 0 === e && (e = null),
                !this.isMobile) {
                    var n = t(e.target)
                      , i = n.parents(".preview-container").find(".logo-canvas")[0]
                      , r = t('<img class="favorite-animate" width="' + i.width + '" height="' + i.height + '" src="' + i.toDataURL("image/png") + '">')
                      , o = t(i).offset()
                      , s = this.toggleFavoritesBtn.offset();
                    this.topRibbonContainer.hasClass("affix") && (s = this.topRibbonContainer.find(".favorites").offset()),
                    r.css({
                        top: o.top + "px",
                        left: o.left + "px"
                    }),
                    this.$el.append(r),
                    r.animate({
                        left: s.left + this.toggleFavoritesBtn.width() / 2 + "px",
                        top: t(document).scrollTop() + this.toggleFavoritesBtn.height() / 2 + "px",
                        height: 0,
                        width: 0,
                        opacity: "0.3"
                    }, 500, function() {
                        r.remove()
                    })
                }
            }
            ,
            e.prototype.animateHeaderHeart = function() {
                var t = this.toggleFavoritesBtn.find(".icon-heart");
                this.topRibbonContainer.hasClass("affix") && (t = this.topRibbonContainer.find(".favorites .icon-heart")),
                t.animate({
                    opacity: 0
                }, 100),
                t.animate({
                    opacity: 1
                }, 100)
            }
            ,
            e.prototype.popStateHandler = function() {
                if (this.isMobile) {
                    var t = this.demoModal.find(".demo-modal");
                    if (t.hasClass("show"))
                        return void t.modal("hide")
                } else {
                    var t = this.demoModal.find(".modal");
                    if (t.hasClass("in"))
                        return void t.modal("hide")
                }
                this.reloadPage()
            }
            ,
            e
        }();
        e.LogoCreateApp = T,
        window.Logaster = window.Logaster || {},
        window.Logaster.LogoCreateApp = T
    }
    ).call(e, n(0))
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = n(225)
          , r = n(3)
          , o = function() {
            function e(t, e, n) {
                void 0 === n && (n = !1),
                this.logoPreviews = [],
                this.container = null,
                this.container = t,
                this.isMobile = e,
                this.debugMode = n
            }
            return e.prototype.getLogoPreview = function(t) {
                for (var e = null, n = 0, i = this.logoPreviews; n < i.length; n++) {
                    var r = i[n];
                    if (r.brand == t) {
                        e = r;
                        break
                    }
                }
                return e
            }
            ,
            e.prototype.add = function(t, e, n) {
                var r = new i.LogoPreview(this.isMobile,this.debugMode);
                r.brand = t,
                r.favoritesCallback = e,
                r.viewMoreCallback = n,
                this.container.append(r.render()),
                this.logoPreviews.push(r)
            }
            ,
            e.prototype.remove = function(e) {
                var n = this.getLogoPreview(e);
                if (null !== n) {
                    var i = this.logoPreviews.indexOf(n);
                    -1 !== i && this.logoPreviews.splice(i, 1),
                    this.container.find('.logo-preview[data-uid="' + n.uid + '"]').slideUp("normal", function() {
                        t(this).remove()
                    })
                }
            }
            ,
            e.prototype.removeAll = function() {
                this.logoPreviews.length = 0,
                this.container.empty()
            }
            ,
            e.prototype.updateFavoriteButtons = function(t) {
                var e = this.getLogoPreview(t);
                if (null !== e) {
                    var n = this.container.find('.logo-preview[data-uid="' + e.uid + '"] .favorites-btn');
                    t.primaryLogo.status == r.Logo.STATUS_FAVORITE ? n.addClass("active") : n.removeClass("active")
                }
            }
            ,
            e.prototype.nextBrand = function(t) {
                var e = this.getLogoPreview(t)
                  , n = this.logoPreviews.indexOf(e);
                return -1 == n || n == this.logoPreviews.length - 1 ? null : this.logoPreviews[n + 1].brand
            }
            ,
            e.prototype.prevBrand = function(t) {
                var e = this.getLogoPreview(t)
                  , n = this.logoPreviews.indexOf(e);
                return -1 == n || 0 == n ? null : this.logoPreviews[n - 1].brand
            }
            ,
            e
        }();
        e.LogoPreviewFeed = o
    }
    ).call(e, n(0))
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = n(11)
          , r = n(3)
          , o = n(92)
          , s = n(129)
          , a = n(2)
          , l = n(23)
          , c = n(18)
          , h = n(21)
          , u = n(19)
          , d = function() {
            function e(n, r) {
                void 0 === r && (r = !1),
                this.brand = null,
                this.textureUrl = null,
                this.favoriteBtn = null,
                this.viewMoreBtn = null,
                this.favoritesCallback = null,
                this.viewMoreCallback = null,
                this.textureHeight = 487,
                this.isMobile = n,
                this.debugMode = r,
                null === e.template && (e.template = i.template(t(".logo-preview-template").html())),
                this._uid = ++e._uid,
                this.textureUrl = o.TextureView.getRandomUrl(),
                this.bindHandlers()
            }
            return Object.defineProperty(e.prototype, "uid", {
                get: function() {
                    return this._uid
                },
                enumerable: !0,
                configurable: !0
            }),
            e.prototype.bindHandlers = function() {
                this.favoritesHandler = this.favoritesHandler.bind(this),
                this.viewMoreHandler = this.viewMoreHandler.bind(this)
            }
            ,
            e.prototype.render = function() {
                var n = {
                    uid: this._uid,
                    isFavorite: this.brand.primaryLogo.status === r.Logo.STATUS_FAVORITE,
                    backgroundColor: "#" + this.brand.colorRange.getBgColor(a.ColorRange.BG_B),
                    textureMinWidth: document.body.clientWidth,
                    brandedCanvasWidth: 752,
                    brandedCanvasHeight: 487,
                    debugInfo: this.getDebugInfo()
                }
                  , i = t(e.template(n))
                  , s = i.find(".logo-canvas")[0]
                  , l = i.find(".texture-canvas")[0]
                  , c = i.find(".branded-products-canvas")[0];
                this.isMobile || (e.presentation.drawNext(this.brand, c.getContext("2d")),
                l.width = document.body.clientWidth,
                l.height = this.textureHeight);
                var h = this.brand.colorRange.getColor(a.ColorRange.BG_B, a.ColorRange.EL_LOGO1)
                  , u = this.brand.primaryLogo;
                this.getLogoShowcase(u, s).draw(this.brand, s.getContext("2d"));
                var d = this.brand.colorRange.getBgColor(a.ColorRange.BG_B);
                new o.TextureView(l.getContext("2d"),this.textureUrl,d,l.width,l.height);
                return this.favoriteBtn = i.find(".favorites-btn"),
                this.viewMoreBtn = i.find(".view-more-btn"),
                this.favoriteBtn.on("click", this.favoritesHandler),
                this.viewMoreBtn.on("click", this.viewMoreHandler),
                this.isMobile || this.changeColorsForButtons(h, d),
                i
            }
            ,
            e.prototype.getLogoShowcase = function(t, e) {
                return this.isMobile ? new c.LogoShowcase(0,[new u.LogoLayer([new h.LogoLayerItem(t.makerType,336,150,"1 0 0 1 42 37",a.ColorRange.BG_B,t.makerSlogans > 0,a.ColorRange.EL_LOGO1)])]) : new c.LogoShowcase(0,[new u.LogoLayer([new h.LogoLayerItem(t.makerType,e.width,e.height,"1 0 0 1 0 0",a.ColorRange.BG_B,t.makerSlogans > 0,a.ColorRange.EL_LOGO1)])])
            }
            ,
            e.prototype.changeColorsForButtons = function(e, n) {
                e = "#" + e,
                n = "#" + n,
                this.favoriteBtn.css({
                    color: e,
                    "border-color": e
                }),
                this.viewMoreBtn.css({
                    color: e,
                    "border-color": e
                }),
                this.viewMoreBtn.hover(function() {
                    t(this).css({
                        "background-color": e,
                        color: n
                    })
                }, function() {
                    t(this).css({
                        "background-color": "transparent",
                        color: e
                    })
                }),
                this.favoriteBtn.hover(function() {
                    t(this).css({
                        "background-color": e,
                        color: n
                    })
                }, function() {
                    t(this).css({
                        "background-color": "transparent",
                        color: e
                    })
                })
            }
            ,
            e.prototype.favoritesHandler = function(t) {
                this.favoritesCallback && this.favoritesCallback(this.brand, t)
            }
            ,
            e.prototype.viewMoreHandler = function() {
                this.viewMoreCallback && this.viewMoreCallback(this.brand)
            }
            ,
            e.prototype.getDebugInfo = function() {
                if (this.debugMode) {
                    for (var t = this.brand.primaryMap.familyName + ", " + this.brand.primaryMap.familyId, e = null, n = [], i = 0, r = this.brand.logoMaps; i < r.length; i++) {
                        var o = r[i];
                        null !== o.parentId && (e = o.parentId,
                        n.push(o.id))
                    }
                    var s = "<strong>" + e + "</strong>, " + n.join(", ")
                      , a = this.brand.primaryMap
                      , c = a.mapSlogans.length > 0 ? "slogan" : ""
                      , h = {};
                    h[l.LogoMakerType.Vertical] = "vertical",
                    h[l.LogoMakerType.Horizontal] = "horizontal",
                    h[l.LogoMakerType.Text] = "text";
                    var u = {
                        maker: "- maker: " + a.id,
                        type: "- type: " + h[a.type] + " " + c,
                        icon: null !== a.icon ? "- icon: " + a.icon.iconId : ""
                    };
                    return "Family/Maker: " + t + "\nLogo (primary):\n    " + u.maker + "\n    " + u.type + "\n    " + u.icon + "\nGroup: " + s
                }
                return null
            }
            ,
            e.template = null,
            e._uid = 0,
            e.presentation = new s.CreateLogo,
            e
        }();
        e.LogoPreview = d
    }
    ).call(e, n(0))
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        var i = this && this.__extends || function() {
            var t = Object.setPrototypeOf || {
                __proto__: []
            }instanceof Array && function(t, e) {
                t.__proto__ = e
            }
            || function(t, e) {
                for (var n in e)
                    e.hasOwnProperty(n) && (t[n] = e[n])
            }
            ;
            return function(e, n) {
                function i() {
                    this.constructor = e
                }
                t(e, n),
                e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                new i)
            }
        }();
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var r = n(11)
          , o = n(101)
          , s = n(35)
          , a = n(67)
          , l = function(e) {
            function n(i, s) {
                var a = e.call(this) || this;
                return a._pickerElement = null,
                a._categories = null,
                a._onCategoryChanged = null,
                a._opened = !1,
                a._applyBtn = null,
                null == n.template && (n.template = r.template(t(".color-category-picker-template").html())),
                a._categories = o.ColorRangeCategory.categories.concat(),
                a._pickerElement = i,
                a._pickerElement.on("click", a.openPicker),
                a._onCategoryChanged = s,
                a
            }
            return i(n, e),
            n.prototype.bindHandlers = function() {
                e.prototype.bindHandlers.call(this),
                this.openPicker = this.openPicker.bind(this),
                this.globalClickHandler = this.globalClickHandler.bind(this),
                this.destroyPicker = this.destroyPicker.bind(this),
                this.applyClickHandler = this.applyClickHandler.bind(this),
                this.onCategoryChange = this.onCategoryChange.bind(this)
            }
            ,
            Object.defineProperty(n.prototype, "categories", {
                get: function() {
                    return this._categories
                },
                set: function(t) {
                    this._categories = t,
                    this._opened && this.setupCheckboxes()
                },
                enumerable: !0,
                configurable: !0
            }),
            n.prototype.openPicker = function(i) {
                if (!this._opened && !s.WaitLocker.isLocked()) {
                    e.prototype.openHandler.call(this, i),
                    i.stopPropagation();
                    var r = n.template({
                        categories: o.ColorRangeCategory.categories
                    });
                    this._pickerElement.find(".popup-wrapper").html(r),
                    this._pickerElement.find(".dd-arrow").removeClass("icon-arrow-bottom").addClass("icon-arrow-up"),
                    this._pickerElement.find("input:checkbox").on("change", this.onCategoryChange),
                    this._pickerElement.addClass("opened"),
                    this._applyBtn = this._pickerElement.find(".apply-btn"),
                    this._opened = !0,
                    this.setupCheckboxes(),
                    this._applyBtn.on("click", this.applyClickHandler),
                    t(document).on("click.colorPickerGlobal", this.globalClickHandler)
                }
            }
            ,
            n.prototype.globalClickHandler = function(t) {
                (this._pickerElement.find(".dd-arrow").is(t.target) || 0 == this._pickerElement.has(t.target).length) && this.destroyPicker()
            }
            ,
            n.prototype.destroyPicker = function() {
                t(document).off("click.colorPickerGlobal"),
                this._applyBtn.off("click", this.applyClickHandler),
                this._pickerElement.find(".popup-wrapper").html(""),
                this._pickerElement.find(".dd-arrow").removeClass("icon-arrow-up").addClass("icon-arrow-bottom"),
                this._pickerElement.removeClass("opened"),
                this._opened = !1
            }
            ,
            n.prototype.onCategoryChange = function(e) {
                var n = t(e.target)
                  , i = this.getSelectedCategories();
                n.val() > 0 ? this._pickerElement.find(".cc-all input:checkbox").prop("checked", i == o.ColorRangeCategory.categories.length) : -1 == n.val() && (this._pickerElement.find("input:checkbox").prop("checked", n.prop("checked")),
                i = this.getSelectedCategories()),
                this._applyBtn.prop("disabled", !(i > 0))
            }
            ,
            n.prototype.getSelectedCategories = function() {
                return this._pickerElement.find(".category").not(".cc-all").find("input:checkbox:checked").length
            }
            ,
            n.prototype.applyClickHandler = function(e) {
                e.stopPropagation();
                var n = this._pickerElement.find("input:checkbox")
                  , i = this;
                this._categories.length = 0,
                n.each(function(e, n) {
                    var r = t(n);
                    if (r.val() > 0 && r.prop("checked")) {
                        var s = o.ColorRangeCategory.getById(r.val());
                        i._categories.push(s)
                    }
                }),
                this._onCategoryChanged(this._categories.concat()),
                this.destroyPicker()
            }
            ,
            n.prototype.setupCheckboxes = function() {
                if (this._pickerElement.find("input:checkbox").prop("checked", !1),
                null == this._categories || 0 == this._categories.length || this._categories.length == o.ColorRangeCategory.categories.length)
                    return void this._pickerElement.find("input:checkbox").prop("checked", !0);
                this._categories.length < o.ColorRangeCategory.categories.length && this._pickerElement.find(".cc-all input:checkbox").prop("checked", !1);
                for (var t = 0, e = this._categories; t < e.length; t++) {
                    var n = e[t];
                    this._pickerElement.find("#cc-id-" + n.title).prop("checked", !0)
                }
            }
            ,
            n.prototype.hide = function() {
                this._opened && this.destroyPicker()
            }
            ,
            n.template = null,
            n
        }(a.LogasterPopup);
        e.ColorCategoryPicker = l
    }
    ).call(e, n(0))
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = function() {
        function t() {}
        return t.get = function(t, e) {
            var n = null
              , i = t;
            if (null == i)
                return null;
            for (var r = i.split("&"), o = 0; o < r.length; o++) {
                var s = r[o];
                s.indexOf(e + "=") > -1 && (n = s.replace(e + "=", "").replace("?", ""),
                o = r.length)
            }
            return n
        }
        ,
        t.add = function(t, e, n) {
            var i = e + "=" + encodeURIComponent(n);
            return t.indexOf("?") >= 0 ? t + "&" + i : t + "?" + i
        }
        ,
        t.remove = function(t, e) {
            var n, i = t.split("#"), r = new RegExp("([?&])" + e + "=.*?(&|#|$)","i");
            return i[0].match(r) && (n = i[0].replace(r, "$1"),
            n = n.replace(/([?&])$/, ""),
            void 0 !== i[1] && null !== i[1] && (n += "#" + i[1])),
            n
        }
        ,
        t.update = function(e, n, i) {
            var r = t.remove(e, n);
            return t.add(r, n, i)
        }
        ,
        t
    }();
    e.QueryString = i
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        var i = this && this.__extends || function() {
            var t = Object.setPrototypeOf || {
                __proto__: []
            }instanceof Array && function(t, e) {
                t.__proto__ = e
            }
            || function(t, e) {
                for (var n in e)
                    e.hasOwnProperty(n) && (t[n] = e[n])
            }
            ;
            return function(e, n) {
                function i() {
                    this.constructor = e
                }
                t(e, n),
                e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                new i)
            }
        }();
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var r = n(85)
          , o = n(101)
          , s = n(127)
          , a = function(e) {
            function n(t) {
                var n = e.call(this, t) || this;
                return n.selectedCategories = [],
                n.categories = o.ColorRangeCategory.categories.concat(),
                n
            }
            return i(n, e),
            n.prototype.render = function() {
                var e = t('<div class="select-wrapper">\n                                                        <div class="input-group input-group-lg select-overlay">\n                                                            <div class="form-control custom-select overlay-text">' + translation.AllColours + "</div>\n                                                        </div>\n                                                    </div>");
                this.selectOverlay = e.find(".overlay-text");
                var n, i = document.createElement("select"), r = t(i);
                r.addClass("custom-select custom-select-lg"),
                r.prop("multiple", "multiple"),
                r.on("change", this.changeHandler);
                for (var o = 0, a = this.categories; o < a.length; o++) {
                    var l = a[o];
                    n = document.createElement("option"),
                    n.value = "" + l.id,
                    n.text = l.title,
                    n.selected = !0,
                    i.appendChild(n)
                }
                e.append(i),
                this.container.append(e),
                this.dropDown = new s.LogasterDropDown(this.container)
            }
            ,
            n.prototype.changeHandler = function(e) {
                e.stopPropagation();
                var n = t(e.currentTarget).find("option:selected");
                if (0 != n.length) {
                    var i = this;
                    this.categories.length = 0,
                    n.each(function(e, n) {
                        var r = t(n);
                        if (r.val() > 0 && r.prop("selected")) {
                            var s = o.ColorRangeCategory.getById(r.val());
                            i.categories.push(s)
                        }
                    }),
                    this.updateOverlayText(),
                    null !== this.changeCallback && this.changeCallback(this.categories.concat())
                } else
                    for (var r = 0, s = this.categories; r < s.length; r++) {
                        var a = s[r];
                        t(e.currentTarget).find('option[value="' + a.id + '"]').prop("selected", !0)
                    }
            }
            ,
            n.prototype.updateOverlayText = function() {
                var t = "";
                if (this.categories.length === o.ColorRangeCategory.categories.length)
                    t = translation.AllColours;
                else
                    for (var e = 0, n = this.categories; e < n.length; e++) {
                        var i = n[e];
                        t += "" === t ? i.title : ", " + i.title
                    }
                this.selectOverlay.text(t)
            }
            ,
            n
        }(r.DropDown);
        e.ColorCategoryDropDown = a
    }
    ).call(e, n(0))
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = n(230)
          , r = n(232)
          , o = n(233)
          , s = n(234)
          , a = n(235)
          , l = function() {
            function e(e) {
                this.createPage = null,
                this.okClickHandler = null,
                this.colorCategoryPulldown = null,
                this.brandNamePulldown = null,
                this.familyStylePulldown = null,
                this.activityTypePulldown = null,
                this.iconsPulldown = null,
                this.createPage = t(".logaster3 .create-logo-page"),
                this.okClickHandler = e,
                this.bindHandlers(),
                this.initToolbar()
            }
            return e.prototype.bindHandlers = function() {
                this.hideDropDownsHandler = this.hideDropDownsHandler.bind(this),
                this.initToolbar = this.initToolbar.bind(this)
            }
            ,
            e.prototype.initToolbar = function() {
                this.toolbarDropDowns = [],
                this.brandNamePulldown = new r.BrandNamePulldown(this.createPage.find(".text-tagline-edit"),this.createPage.find(".text-slogan-edit-pulldown"),this.okClickHandler,this.hideDropDownsHandler),
                this.toolbarDropDowns.push(this.brandNamePulldown),
                this.familyStylePulldown = new a.FamilyStylePulldown(this.createPage.find(".family-style-picker"),this.createPage.find(".style-picker-pulldown"),this.okClickHandler,this.hideDropDownsHandler),
                this.toolbarDropDowns.push(this.familyStylePulldown),
                this.activityTypePulldown = new i.ActivityTypePulldown(this.createPage.find(".activity-type-picker"),this.createPage.find(".activity-type-filter-template"),this.okClickHandler,this.hideDropDownsHandler),
                this.toolbarDropDowns.push(this.activityTypePulldown),
                this.iconsPulldown = new s.IconsPulldown(this.createPage.find(".icons-filter"),this.createPage.find(".icon-filter-template"),this.okClickHandler,this.hideDropDownsHandler),
                this.toolbarDropDowns.push(this.iconsPulldown),
                this.colorCategoryPulldown = new o.ColorCategoryPickerPulldown(this.createPage.find(".cc-picker"),this.createPage.find(".cc-picker-template"),this.okClickHandler,this.hideDropDownsHandler),
                this.toolbarDropDowns.push(this.colorCategoryPulldown)
            }
            ,
            e.prototype.hideDropDownsHandler = function(t) {
                void 0 === t && (t = null);
                for (var e = 0, n = this.toolbarDropDowns; e < n.length; e++) {
                    var i = n[e];
                    t !== i && i.hide()
                }
            }
            ,
            e
        }();
        e.LogoCreateToolbar = l
    }
    ).call(e, n(0))
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(11);
    n(231);
    var o = n(102)
      , s = n(168)
      , a = function(t) {
        function e(e, n, i, o) {
            var s = t.call(this, e, n, i, o) || this;
            return s.jstreeContainer = null,
            s._template = r.template(s._elementToInsert.html()),
            s.templateHtml = s._template({}),
            s
        }
        return i(e, t),
        e.prototype.bindHandlers = function() {
            t.prototype.bindHandlers.call(this),
            this.industriesFilterInit = this.industriesFilterInit.bind(this)
        }
        ,
        e.prototype.create = function() {
            t.prototype.create.call(this),
            this.jstreeContainer = this.popupWrapper.find("#jstree"),
            this.industriesFilterInit()
        }
        ,
        e.prototype.industriesFilterInit = function() {
            var t, e = {
                core: {
                    themes: {
                        icons: !1,
                        variant: "large"
                    },
                    data: this.prepareIndustries()
                },
                plugins: ["wholerow", "checkbox", "search", "state"],
                search: {
                    show_only_matches: !0,
                    show_only_matches_children: !1
                }
            }, n = this.jstreeContainer;
            n.jstree(e),
            this._clickedElement.find(".search").on("input", function(e) {
                t && clearTimeout(t);
                var i = e.target.value;
                t = setTimeout(function() {
                    n.jstree(!0).search(i)
                }, 250)
            })
        }
        ,
        e.prototype.prepareIndustries = function() {
            for (var t = [], e = !1, n = 0, i = o.ActivityType.activityTypes; n < i.length; n++) {
                var r = i[n];
                e = r.id == o.ActivityType.DEFAULT_ACTIVITY_TYPE;
                for (var s = {
                    text: r.name,
                    children: [],
                    id: r.id,
                    state: {
                        selected: e
                    }
                }, a = 0, l = r.children; a < l.length; a++) {
                    var c = l[a];
                    s.children.push({
                        text: c.name,
                        children: [],
                        id: c.id,
                        li_attr: {
                            title: c.tags
                        }
                    })
                }
                t.push(s)
            }
            return t
        }
        ,
        e.prototype.applyChangesHandler = function() {
            this.brandCreationData.industryIds = this.jstreeContainer.jstree("get_selected"),
            t.prototype.applyChangesHandler.call(this)
        }
        ,
        e
    }(s.PulldownMenu);
    e.ActivityTypePulldown = a
}
, function(t, e, n) {
    (function(i) {
        var r, o, s;
        !function(i) {
            "use strict";
            o = [n(0)],
            r = i,
            void 0 !== (s = "function" == typeof r ? r.apply(e, o) : r) && (t.exports = s)
        }(function(t, e) {
            "use strict";
            /*!
 * jsTree 3.3.7
 * http://jstree.com/
 *
 * Copyright (c) 2014 Ivan Bozhanov (http://vakata.com)
 *
 * Licensed same as jquery - under the terms of the MIT License
 *   http://www.opensource.org/licenses/mit-license.php
 */
            /*!
 * if using jslint please allow for the jQuery global and use following options:
 * jslint: loopfunc: true, browser: true, ass: true, bitwise: true, continue: true, nomen: true, plusplus: true, regexp: true, unparam: true, todo: true, white: true
 */
            if (!t.jstree) {
                var n = 0
                  , r = !1
                  , o = !1
                  , s = !1
                  , a = []
                  , l = t("script:last").attr("src")
                  , c = window.document;
                t.jstree = {
                    version: "3.3.7",
                    defaults: {
                        plugins: []
                    },
                    plugins: {},
                    path: l && -1 !== l.indexOf("/") ? l.replace(/\/[^\/]+$/, "") : "",
                    idregex: /[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,
                    root: "#"
                },
                t.jstree.create = function(e, i) {
                    var r = new t.jstree.core(++n)
                      , o = i;
                    return i = t.extend(!0, {}, t.jstree.defaults, i),
                    o && o.plugins && (i.plugins = o.plugins),
                    t.each(i.plugins, function(t, e) {
                        "core" !== t && (r = r.plugin(e, i[e]))
                    }),
                    t(e).data("jstree", r),
                    r.init(e, i),
                    r
                }
                ,
                t.jstree.destroy = function() {
                    t(".jstree:jstree").jstree("destroy"),
                    t(c).off(".jstree")
                }
                ,
                t.jstree.core = function(t) {
                    this._id = t,
                    this._cnt = 0,
                    this._wrk = null,
                    this._data = {
                        core: {
                            themes: {
                                name: !1,
                                dots: !1,
                                icons: !1,
                                ellipsis: !1
                            },
                            selected: [],
                            last_error: {},
                            working: !1,
                            worker_queue: [],
                            focused: null
                        }
                    }
                }
                ,
                t.jstree.reference = function(e) {
                    var n = null
                      , i = null;
                    if (!e || !e.id || e.tagName && e.nodeType || (e = e.id),
                    !i || !i.length)
                        try {
                            i = t(e)
                        } catch (t) {}
                    if (!i || !i.length)
                        try {
                            i = t("#" + e.replace(t.jstree.idregex, "\\$&"))
                        } catch (t) {}
                    return i && i.length && (i = i.closest(".jstree")).length && (i = i.data("jstree")) ? n = i : t(".jstree").each(function() {
                        var i = t(this).data("jstree");
                        if (i && i._model.data[e])
                            return n = i,
                            !1
                    }),
                    n
                }
                ,
                t.fn.jstree = function(n) {
                    var i = "string" == typeof n
                      , r = Array.prototype.slice.call(arguments, 1)
                      , o = null;
                    return !(!0 === n && !this.length) && (this.each(function() {
                        var s = t.jstree.reference(this)
                          , a = i && s ? s[n] : null;
                        if (o = i && a ? a.apply(s, r) : null,
                        s || i || n !== e && !t.isPlainObject(n) || t.jstree.create(this, n),
                        (s && !i || !0 === n) && (o = s || !1),
                        null !== o && o !== e)
                            return !1
                    }),
                    null !== o && o !== e ? o : this)
                }
                ,
                t.expr.pseudos.jstree = t.expr.createPseudo(function(n) {
                    return function(n) {
                        return t(n).hasClass("jstree") && t(n).data("jstree") !== e
                    }
                }),
                t.jstree.defaults.core = {
                    data: !1,
                    strings: !1,
                    check_callback: !1,
                    error: t.noop,
                    animation: 200,
                    multiple: !0,
                    themes: {
                        name: !1,
                        url: !1,
                        dir: !1,
                        dots: !0,
                        icons: !0,
                        ellipsis: !1,
                        stripes: !1,
                        variant: !1,
                        responsive: !1
                    },
                    expand_selected_onload: !0,
                    worker: !0,
                    force_text: !1,
                    dblclick_toggle: !0,
                    loaded_state: !1,
                    restore_focus: !0,
                    keyboard: {
                        "ctrl-space": function(e) {
                            e.type = "click",
                            t(e.currentTarget).trigger(e)
                        },
                        enter: function(e) {
                            e.type = "click",
                            t(e.currentTarget).trigger(e)
                        },
                        left: function(e) {
                            if (e.preventDefault(),
                            this.is_open(e.currentTarget))
                                this.close_node(e.currentTarget);
                            else {
                                var n = this.get_parent(e.currentTarget);
                                n && n.id !== t.jstree.root && this.get_node(n, !0).children(".jstree-anchor").focus()
                            }
                        },
                        up: function(t) {
                            t.preventDefault();
                            var e = this.get_prev_dom(t.currentTarget);
                            e && e.length && e.children(".jstree-anchor").focus()
                        },
                        right: function(e) {
                            if (e.preventDefault(),
                            this.is_closed(e.currentTarget))
                                this.open_node(e.currentTarget, function(t) {
                                    this.get_node(t, !0).children(".jstree-anchor").focus()
                                });
                            else if (this.is_open(e.currentTarget)) {
                                var n = this.get_node(e.currentTarget, !0).children(".jstree-children")[0];
                                n && t(this._firstChild(n)).children(".jstree-anchor").focus()
                            }
                        },
                        down: function(t) {
                            t.preventDefault();
                            var e = this.get_next_dom(t.currentTarget);
                            e && e.length && e.children(".jstree-anchor").focus()
                        },
                        "*": function(t) {
                            this.open_all()
                        },
                        home: function(e) {
                            e.preventDefault();
                            var n = this._firstChild(this.get_container_ul()[0]);
                            n && t(n).children(".jstree-anchor").filter(":visible").focus()
                        },
                        end: function(t) {
                            t.preventDefault(),
                            this.element.find(".jstree-anchor").filter(":visible").last().focus()
                        },
                        f2: function(t) {
                            t.preventDefault(),
                            this.edit(t.currentTarget)
                        }
                    }
                },
                t.jstree.core.prototype = {
                    plugin: function(e, n) {
                        var i = t.jstree.plugins[e];
                        return i ? (this._data[e] = {},
                        i.prototype = this,
                        new i(n,this)) : this
                    },
                    init: function(e, n) {
                        this._model = {
                            data: {},
                            changed: [],
                            force_full_redraw: !1,
                            redraw_timeout: !1,
                            default_state: {
                                loaded: !0,
                                opened: !1,
                                selected: !1,
                                disabled: !1
                            }
                        },
                        this._model.data[t.jstree.root] = {
                            id: t.jstree.root,
                            parent: null,
                            parents: [],
                            children: [],
                            children_d: [],
                            state: {
                                loaded: !1
                            }
                        },
                        this.element = t(e).addClass("jstree jstree-" + this._id),
                        this.settings = n,
                        this._data.core.ready = !1,
                        this._data.core.loaded = !1,
                        this._data.core.rtl = "rtl" === this.element.css("direction"),
                        this.element[this._data.core.rtl ? "addClass" : "removeClass"]("jstree-rtl"),
                        this.element.attr("role", "tree"),
                        this.settings.core.multiple && this.element.attr("aria-multiselectable", !0),
                        this.element.attr("tabindex") || this.element.attr("tabindex", "0"),
                        this.bind(),
                        this.trigger("init"),
                        this._data.core.original_container_html = this.element.find(" > ul > li").clone(!0),
                        this._data.core.original_container_html.find("li").addBack().contents().filter(function() {
                            return 3 === this.nodeType && (!this.nodeValue || /^\s+$/.test(this.nodeValue))
                        }).remove(),
                        this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j" + this._id + "_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>" + this.get_string("Loading ...") + "</a></li></ul>"),
                        this.element.attr("aria-activedescendant", "j" + this._id + "_loading"),
                        this._data.core.li_height = this.get_container_ul().children("li").first().outerHeight() || 24,
                        this._data.core.node = this._create_prototype_node(),
                        this.trigger("loading"),
                        this.load_node(t.jstree.root)
                    },
                    destroy: function(t) {
                        if (this.trigger("destroy"),
                        this._wrk)
                            try {
                                window.URL.revokeObjectURL(this._wrk),
                                this._wrk = null
                            } catch (t) {}
                        t || this.element.empty(),
                        this.teardown()
                    },
                    _create_prototype_node: function() {
                        var t, e, n = c.createElement("LI");
                        return n.setAttribute("role", "treeitem"),
                        t = c.createElement("I"),
                        t.className = "jstree-icon jstree-ocl",
                        t.setAttribute("role", "presentation"),
                        n.appendChild(t),
                        t = c.createElement("A"),
                        t.className = "jstree-anchor",
                        t.setAttribute("href", "#"),
                        t.setAttribute("tabindex", "-1"),
                        e = c.createElement("I"),
                        e.className = "jstree-icon jstree-themeicon",
                        e.setAttribute("role", "presentation"),
                        t.appendChild(e),
                        n.appendChild(t),
                        t = e = null,
                        n
                    },
                    _kbevent_to_func: function(t) {
                        var e = {
                            8: "Backspace",
                            9: "Tab",
                            13: "Return",
                            19: "Pause",
                            27: "Esc",
                            32: "Space",
                            33: "PageUp",
                            34: "PageDown",
                            35: "End",
                            36: "Home",
                            37: "Left",
                            38: "Up",
                            39: "Right",
                            40: "Down",
                            44: "Print",
                            45: "Insert",
                            46: "Delete",
                            96: "Numpad0",
                            97: "Numpad1",
                            98: "Numpad2",
                            99: "Numpad3",
                            100: "Numpad4",
                            101: "Numpad5",
                            102: "Numpad6",
                            103: "Numpad7",
                            104: "Numpad8",
                            105: "Numpad9",
                            "-13": "NumpadEnter",
                            112: "F1",
                            113: "F2",
                            114: "F3",
                            115: "F4",
                            116: "F5",
                            117: "F6",
                            118: "F7",
                            119: "F8",
                            120: "F9",
                            121: "F10",
                            122: "F11",
                            123: "F12",
                            144: "Numlock",
                            145: "Scrolllock",
                            16: "Shift",
                            17: "Ctrl",
                            18: "Alt",
                            48: "0",
                            49: "1",
                            50: "2",
                            51: "3",
                            52: "4",
                            53: "5",
                            54: "6",
                            55: "7",
                            56: "8",
                            57: "9",
                            59: ";",
                            61: "=",
                            65: "a",
                            66: "b",
                            67: "c",
                            68: "d",
                            69: "e",
                            70: "f",
                            71: "g",
                            72: "h",
                            73: "i",
                            74: "j",
                            75: "k",
                            76: "l",
                            77: "m",
                            78: "n",
                            79: "o",
                            80: "p",
                            81: "q",
                            82: "r",
                            83: "s",
                            84: "t",
                            85: "u",
                            86: "v",
                            87: "w",
                            88: "x",
                            89: "y",
                            90: "z",
                            107: "+",
                            109: "-",
                            110: ".",
                            186: ";",
                            187: "=",
                            188: ",",
                            189: "-",
                            190: ".",
                            191: "/",
                            192: "`",
                            219: "[",
                            220: "\\",
                            221: "]",
                            222: "'",
                            111: "/",
                            106: "*",
                            173: "-"
                        }
                          , n = [];
                        t.ctrlKey && n.push("ctrl"),
                        t.altKey && n.push("alt"),
                        t.shiftKey && n.push("shift"),
                        n.push(e[t.which] || t.which),
                        n = n.sort().join("-").toLowerCase();
                        var i, r, o = this.settings.core.keyboard;
                        for (i in o)
                            if (o.hasOwnProperty(i) && (r = i,
                            "-" !== r && "+" !== r && (r = r.replace("--", "-MINUS").replace("+-", "-MINUS").replace("++", "-PLUS").replace("-+", "-PLUS"),
                            r = r.split(/-|\+/).sort().join("-").replace("MINUS", "-").replace("PLUS", "+").toLowerCase()),
                            r === n))
                                return o[i];
                        return null
                    },
                    teardown: function() {
                        this.unbind(),
                        this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class", function() {
                            return this.className.replace(/jstree[^ ]*|$/gi, "")
                        }),
                        this.element = null
                    },
                    bind: function() {
                        var e = ""
                          , n = null
                          , i = 0;
                        this.element.on("dblclick.jstree", function(t) {
                            if (t.target.tagName && "input" === t.target.tagName.toLowerCase())
                                return !0;
                            if (c.selection && c.selection.empty)
                                c.selection.empty();
                            else if (window.getSelection) {
                                var e = window.getSelection();
                                try {
                                    e.removeAllRanges(),
                                    e.collapse()
                                } catch (t) {}
                            }
                        }).on("mousedown.jstree", t.proxy(function(t) {
                            t.target === this.element[0] && (t.preventDefault(),
                            i = +new Date)
                        }, this)).on("mousedown.jstree", ".jstree-ocl", function(t) {
                            t.preventDefault()
                        }).on("click.jstree", ".jstree-ocl", t.proxy(function(t) {
                            this.toggle_node(t.target)
                        }, this)).on("dblclick.jstree", ".jstree-anchor", t.proxy(function(t) {
                            if (t.target.tagName && "input" === t.target.tagName.toLowerCase())
                                return !0;
                            this.settings.core.dblclick_toggle && this.toggle_node(t.target)
                        }, this)).on("click.jstree", ".jstree-anchor", t.proxy(function(e) {
                            e.preventDefault(),
                            e.currentTarget !== c.activeElement && t(e.currentTarget).focus(),
                            this.activate_node(e.currentTarget, e)
                        }, this)).on("keydown.jstree", ".jstree-anchor", t.proxy(function(t) {
                            if (t.target.tagName && "input" === t.target.tagName.toLowerCase())
                                return !0;
                            this._data.core.rtl && (37 === t.which ? t.which = 39 : 39 === t.which && (t.which = 37));
                            var e = this._kbevent_to_func(t);
                            if (e) {
                                var n = e.call(this, t);
                                if (!1 === n || !0 === n)
                                    return n
                            }
                        }, this)).on("load_node.jstree", t.proxy(function(e, n) {
                            n.status && (n.node.id !== t.jstree.root || this._data.core.loaded || (this._data.core.loaded = !0,
                            this._firstChild(this.get_container_ul()[0]) && this.element.attr("aria-activedescendant", this._firstChild(this.get_container_ul()[0]).id),
                            this.trigger("loaded")),
                            this._data.core.ready || setTimeout(t.proxy(function() {
                                if (this.element && !this.get_container_ul().find(".jstree-loading").length) {
                                    if (this._data.core.ready = !0,
                                    this._data.core.selected.length) {
                                        if (this.settings.core.expand_selected_onload) {
                                            var e, n, i = [];
                                            for (e = 0,
                                            n = this._data.core.selected.length; e < n; e++)
                                                i = i.concat(this._model.data[this._data.core.selected[e]].parents);
                                            for (i = t.vakata.array_unique(i),
                                            e = 0,
                                            n = i.length; e < n; e++)
                                                this.open_node(i[e], !1, 0)
                                        }
                                        this.trigger("changed", {
                                            action: "ready",
                                            selected: this._data.core.selected
                                        })
                                    }
                                    this.trigger("ready")
                                }
                            }, this), 0))
                        }, this)).on("keypress.jstree", t.proxy(function(i) {
                            if (i.target.tagName && "input" === i.target.tagName.toLowerCase())
                                return !0;
                            n && clearTimeout(n),
                            n = setTimeout(function() {
                                e = ""
                            }, 500);
                            var r = String.fromCharCode(i.which).toLowerCase()
                              , o = this.element.find(".jstree-anchor").filter(":visible")
                              , s = o.index(c.activeElement) || 0
                              , a = !1;
                            if (e += r,
                            e.length > 1) {
                                if (o.slice(s).each(t.proxy(function(n, i) {
                                    if (0 === t(i).text().toLowerCase().indexOf(e))
                                        return t(i).focus(),
                                        a = !0,
                                        !1
                                }, this)),
                                a)
                                    return;
                                if (o.slice(0, s).each(t.proxy(function(n, i) {
                                    if (0 === t(i).text().toLowerCase().indexOf(e))
                                        return t(i).focus(),
                                        a = !0,
                                        !1
                                }, this)),
                                a)
                                    return
                            }
                            if (new RegExp("^" + r.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&") + "+$").test(e)) {
                                if (o.slice(s + 1).each(t.proxy(function(e, n) {
                                    if (t(n).text().toLowerCase().charAt(0) === r)
                                        return t(n).focus(),
                                        a = !0,
                                        !1
                                }, this)),
                                a)
                                    return;
                                if (o.slice(0, s + 1).each(t.proxy(function(e, n) {
                                    if (t(n).text().toLowerCase().charAt(0) === r)
                                        return t(n).focus(),
                                        a = !0,
                                        !1
                                }, this)),
                                a)
                                    return
                            }
                        }, this)).on("init.jstree", t.proxy(function() {
                            var t = this.settings.core.themes;
                            this._data.core.themes.dots = t.dots,
                            this._data.core.themes.stripes = t.stripes,
                            this._data.core.themes.icons = t.icons,
                            this._data.core.themes.ellipsis = t.ellipsis,
                            this.set_theme(t.name || "default", t.url),
                            this.set_theme_variant(t.variant)
                        }, this)).on("loading.jstree", t.proxy(function() {
                            this[this._data.core.themes.dots ? "show_dots" : "hide_dots"](),
                            this[this._data.core.themes.icons ? "show_icons" : "hide_icons"](),
                            this[this._data.core.themes.stripes ? "show_stripes" : "hide_stripes"](),
                            this[this._data.core.themes.ellipsis ? "show_ellipsis" : "hide_ellipsis"]()
                        }, this)).on("blur.jstree", ".jstree-anchor", t.proxy(function(e) {
                            this._data.core.focused = null,
                            t(e.currentTarget).filter(".jstree-hovered").mouseleave(),
                            this.element.attr("tabindex", "0")
                        }, this)).on("focus.jstree", ".jstree-anchor", t.proxy(function(e) {
                            var n = this.get_node(e.currentTarget);
                            n && n.id && (this._data.core.focused = n.id),
                            this.element.find(".jstree-hovered").not(e.currentTarget).mouseleave(),
                            t(e.currentTarget).mouseenter(),
                            this.element.attr("tabindex", "-1")
                        }, this)).on("focus.jstree", t.proxy(function() {
                            if (+new Date - i > 500 && !this._data.core.focused && this.settings.core.restore_focus) {
                                i = 0;
                                var t = this.get_node(this.element.attr("aria-activedescendant"), !0);
                                t && t.find("> .jstree-anchor").focus()
                            }
                        }, this)).on("mouseenter.jstree", ".jstree-anchor", t.proxy(function(t) {
                            this.hover_node(t.currentTarget)
                        }, this)).on("mouseleave.jstree", ".jstree-anchor", t.proxy(function(t) {
                            this.dehover_node(t.currentTarget)
                        }, this))
                    },
                    unbind: function() {
                        this.element.off(".jstree"),
                        t(c).off(".jstree-" + this._id)
                    },
                    trigger: function(t, e) {
                        e || (e = {}),
                        e.instance = this,
                        this.element.triggerHandler(t.replace(".jstree", "") + ".jstree", e)
                    },
                    get_container: function() {
                        return this.element
                    },
                    get_container_ul: function() {
                        return this.element.children(".jstree-children").first()
                    },
                    get_string: function(e) {
                        var n = this.settings.core.strings;
                        return t.isFunction(n) ? n.call(this, e) : n && n[e] ? n[e] : e
                    },
                    _firstChild: function(t) {
                        for (t = t ? t.firstChild : null; null !== t && 1 !== t.nodeType; )
                            t = t.nextSibling;
                        return t
                    },
                    _nextSibling: function(t) {
                        for (t = t ? t.nextSibling : null; null !== t && 1 !== t.nodeType; )
                            t = t.nextSibling;
                        return t
                    },
                    _previousSibling: function(t) {
                        for (t = t ? t.previousSibling : null; null !== t && 1 !== t.nodeType; )
                            t = t.previousSibling;
                        return t
                    },
                    get_node: function(e, n) {
                        e && e.id && (e = e.id),
                        e instanceof i && e.length && e[0].id && (e = e[0].id);
                        var r;
                        try {
                            if (this._model.data[e])
                                e = this._model.data[e];
                            else if ("string" == typeof e && this._model.data[e.replace(/^#/, "")])
                                e = this._model.data[e.replace(/^#/, "")];
                            else if ("string" == typeof e && (r = t("#" + e.replace(t.jstree.idregex, "\\$&"), this.element)).length && this._model.data[r.closest(".jstree-node").attr("id")])
                                e = this._model.data[r.closest(".jstree-node").attr("id")];
                            else if ((r = this.element.find(e)).length && this._model.data[r.closest(".jstree-node").attr("id")])
                                e = this._model.data[r.closest(".jstree-node").attr("id")];
                            else {
                                if (!(r = this.element.find(e)).length || !r.hasClass("jstree"))
                                    return !1;
                                e = this._model.data[t.jstree.root]
                            }
                            return n && (e = e.id === t.jstree.root ? this.element : t("#" + e.id.replace(t.jstree.idregex, "\\$&"), this.element)),
                            e
                        } catch (t) {
                            return !1
                        }
                    },
                    get_path: function(e, n, i) {
                        if (!(e = e.parents ? e : this.get_node(e)) || e.id === t.jstree.root || !e.parents)
                            return !1;
                        var r, o, s = [];
                        for (s.push(i ? e.id : e.text),
                        r = 0,
                        o = e.parents.length; r < o; r++)
                            s.push(i ? e.parents[r] : this.get_text(e.parents[r]));
                        return s = s.reverse().slice(1),
                        n ? s.join(n) : s
                    },
                    get_next_dom: function(e, n) {
                        var i;
                        if (e = this.get_node(e, !0),
                        e[0] === this.element[0]) {
                            for (i = this._firstChild(this.get_container_ul()[0]); i && 0 === i.offsetHeight; )
                                i = this._nextSibling(i);
                            return !!i && t(i)
                        }
                        if (!e || !e.length)
                            return !1;
                        if (n) {
                            i = e[0];
                            do {
                                i = this._nextSibling(i)
                            } while (i && 0 === i.offsetHeight);return !!i && t(i)
                        }
                        if (e.hasClass("jstree-open")) {
                            for (i = this._firstChild(e.children(".jstree-children")[0]); i && 0 === i.offsetHeight; )
                                i = this._nextSibling(i);
                            if (null !== i)
                                return t(i)
                        }
                        i = e[0];
                        do {
                            i = this._nextSibling(i)
                        } while (i && 0 === i.offsetHeight);return null !== i ? t(i) : e.parentsUntil(".jstree", ".jstree-node").nextAll(".jstree-node:visible").first()
                    },
                    get_prev_dom: function(e, n) {
                        var i;
                        if (e = this.get_node(e, !0),
                        e[0] === this.element[0]) {
                            for (i = this.get_container_ul()[0].lastChild; i && 0 === i.offsetHeight; )
                                i = this._previousSibling(i);
                            return !!i && t(i)
                        }
                        if (!e || !e.length)
                            return !1;
                        if (n) {
                            i = e[0];
                            do {
                                i = this._previousSibling(i)
                            } while (i && 0 === i.offsetHeight);return !!i && t(i)
                        }
                        i = e[0];
                        do {
                            i = this._previousSibling(i)
                        } while (i && 0 === i.offsetHeight);if (null !== i) {
                            for (e = t(i); e.hasClass("jstree-open"); )
                                e = e.children(".jstree-children").first().children(".jstree-node:visible:last");
                            return e
                        }
                        return !(!(i = e[0].parentNode.parentNode) || !i.className || -1 === i.className.indexOf("jstree-node")) && t(i)
                    },
                    get_parent: function(e) {
                        return !(!(e = this.get_node(e)) || e.id === t.jstree.root) && e.parent
                    },
                    get_children_dom: function(t) {
                        return t = this.get_node(t, !0),
                        t[0] === this.element[0] ? this.get_container_ul().children(".jstree-node") : !(!t || !t.length) && t.children(".jstree-children").children(".jstree-node")
                    },
                    is_parent: function(t) {
                        return (t = this.get_node(t)) && (!1 === t.state.loaded || t.children.length > 0)
                    },
                    is_loaded: function(t) {
                        return (t = this.get_node(t)) && t.state.loaded
                    },
                    is_loading: function(t) {
                        return (t = this.get_node(t)) && t.state && t.state.loading
                    },
                    is_open: function(t) {
                        return (t = this.get_node(t)) && t.state.opened
                    },
                    is_closed: function(t) {
                        return (t = this.get_node(t)) && this.is_parent(t) && !t.state.opened
                    },
                    is_leaf: function(t) {
                        return !this.is_parent(t)
                    },
                    load_node: function(e, n) {
                        var i, r, o, s, a;
                        if (t.isArray(e))
                            return this._load_nodes(e.slice(), n),
                            !0;
                        if (!(e = this.get_node(e)))
                            return n && n.call(this, e, !1),
                            !1;
                        if (e.state.loaded) {
                            for (e.state.loaded = !1,
                            o = 0,
                            s = e.parents.length; o < s; o++)
                                this._model.data[e.parents[o]].children_d = t.vakata.array_filter(this._model.data[e.parents[o]].children_d, function(n) {
                                    return -1 === t.inArray(n, e.children_d)
                                });
                            for (i = 0,
                            r = e.children_d.length; i < r; i++)
                                this._model.data[e.children_d[i]].state.selected && (a = !0),
                                delete this._model.data[e.children_d[i]];
                            a && (this._data.core.selected = t.vakata.array_filter(this._data.core.selected, function(n) {
                                return -1 === t.inArray(n, e.children_d)
                            })),
                            e.children = [],
                            e.children_d = [],
                            a && this.trigger("changed", {
                                action: "load_node",
                                node: e,
                                selected: this._data.core.selected
                            })
                        }
                        return e.state.failed = !1,
                        e.state.loading = !0,
                        this.get_node(e, !0).addClass("jstree-loading").attr("aria-busy", !0),
                        this._load_node(e, t.proxy(function(t) {
                            e = this._model.data[e.id],
                            e.state.loading = !1,
                            e.state.loaded = t,
                            e.state.failed = !e.state.loaded;
                            var i = this.get_node(e, !0)
                              , r = 0
                              , o = 0
                              , s = this._model.data
                              , a = !1;
                            for (r = 0,
                            o = e.children.length; r < o; r++)
                                if (s[e.children[r]] && !s[e.children[r]].state.hidden) {
                                    a = !0;
                                    break
                                }
                            e.state.loaded && i && i.length && (i.removeClass("jstree-closed jstree-open jstree-leaf"),
                            a ? "#" !== e.id && i.addClass(e.state.opened ? "jstree-open" : "jstree-closed") : i.addClass("jstree-leaf")),
                            i.removeClass("jstree-loading").attr("aria-busy", !1),
                            this.trigger("load_node", {
                                node: e,
                                status: t
                            }),
                            n && n.call(this, e, t)
                        }, this)),
                        !0
                    },
                    _load_nodes: function(t, e, n, i) {
                        var r, o, s = !0, a = function() {
                            this._load_nodes(t, e, !0)
                        }, l = this._model.data, c = [];
                        for (r = 0,
                        o = t.length; r < o; r++)
                            l[t[r]] && (!l[t[r]].state.loaded && !l[t[r]].state.failed || !n && i) && (this.is_loading(t[r]) || this.load_node(t[r], a),
                            s = !1);
                        if (s) {
                            for (r = 0,
                            o = t.length; r < o; r++)
                                l[t[r]] && l[t[r]].state.loaded && c.push(t[r]);
                            e && !e.done && (e.call(this, c),
                            e.done = !0)
                        }
                    },
                    load_all: function(e, n) {
                        if (e || (e = t.jstree.root),
                        !(e = this.get_node(e)))
                            return !1;
                        var i, r, o = [], s = this._model.data, a = s[e.id].children_d;
                        for (e.state && !e.state.loaded && o.push(e.id),
                        i = 0,
                        r = a.length; i < r; i++)
                            s[a[i]] && s[a[i]].state && !s[a[i]].state.loaded && o.push(a[i]);
                        o.length ? this._load_nodes(o, function() {
                            this.load_all(e, n)
                        }) : (n && n.call(this, e),
                        this.trigger("load_all", {
                            node: e
                        }))
                    },
                    _load_node: function(e, n) {
                        var i, r = this.settings.core.data, o = function() {
                            return 3 !== this.nodeType && 8 !== this.nodeType
                        };
                        return r ? t.isFunction(r) ? r.call(this, e, t.proxy(function(i) {
                            !1 === i ? n.call(this, !1) : this["string" == typeof i ? "_append_html_data" : "_append_json_data"](e, "string" == typeof i ? t(t.parseHTML(i)).filter(o) : i, function(t) {
                                n.call(this, t)
                            })
                        }, this)) : "object" == typeof r ? r.url ? (r = t.extend(!0, {}, r),
                        t.isFunction(r.url) && (r.url = r.url.call(this, e)),
                        t.isFunction(r.data) && (r.data = r.data.call(this, e)),
                        t.ajax(r).done(t.proxy(function(i, r, s) {
                            var a = s.getResponseHeader("Content-Type");
                            return a && -1 !== a.indexOf("json") || "object" == typeof i ? this._append_json_data(e, i, function(t) {
                                n.call(this, t)
                            }) : a && -1 !== a.indexOf("html") || "string" == typeof i ? this._append_html_data(e, t(t.parseHTML(i)).filter(o), function(t) {
                                n.call(this, t)
                            }) : (this._data.core.last_error = {
                                error: "ajax",
                                plugin: "core",
                                id: "core_04",
                                reason: "Could not load node",
                                data: JSON.stringify({
                                    id: e.id,
                                    xhr: s
                                })
                            },
                            this.settings.core.error.call(this, this._data.core.last_error),
                            n.call(this, !1))
                        }, this)).fail(t.proxy(function(t) {
                            this._data.core.last_error = {
                                error: "ajax",
                                plugin: "core",
                                id: "core_04",
                                reason: "Could not load node",
                                data: JSON.stringify({
                                    id: e.id,
                                    xhr: t
                                })
                            },
                            n.call(this, !1),
                            this.settings.core.error.call(this, this._data.core.last_error)
                        }, this))) : (i = t.isArray(r) ? t.extend(!0, [], r) : t.isPlainObject(r) ? t.extend(!0, {}, r) : r,
                        e.id === t.jstree.root ? this._append_json_data(e, i, function(t) {
                            n.call(this, t)
                        }) : (this._data.core.last_error = {
                            error: "nodata",
                            plugin: "core",
                            id: "core_05",
                            reason: "Could not load node",
                            data: JSON.stringify({
                                id: e.id
                            })
                        },
                        this.settings.core.error.call(this, this._data.core.last_error),
                        n.call(this, !1))) : "string" == typeof r ? e.id === t.jstree.root ? this._append_html_data(e, t(t.parseHTML(r)).filter(o), function(t) {
                            n.call(this, t)
                        }) : (this._data.core.last_error = {
                            error: "nodata",
                            plugin: "core",
                            id: "core_06",
                            reason: "Could not load node",
                            data: JSON.stringify({
                                id: e.id
                            })
                        },
                        this.settings.core.error.call(this, this._data.core.last_error),
                        n.call(this, !1)) : n.call(this, !1) : e.id === t.jstree.root ? this._append_html_data(e, this._data.core.original_container_html.clone(!0), function(t) {
                            n.call(this, t)
                        }) : n.call(this, !1)
                    },
                    _node_changed: function(e) {
                        (e = this.get_node(e)) && -1 === t.inArray(e.id, this._model.changed) && this._model.changed.push(e.id)
                    },
                    _append_html_data: function(e, n, i) {
                        e = this.get_node(e),
                        e.children = [],
                        e.children_d = [];
                        var r, o, s, a = n.is("ul") ? n.children() : n, l = e.id, c = [], h = [], u = this._model.data, d = u[l], p = this._data.core.selected.length;
                        for (a.each(t.proxy(function(e, n) {
                            (r = this._parse_model_from_html(t(n), l, d.parents.concat())) && (c.push(r),
                            h.push(r),
                            u[r].children_d.length && (h = h.concat(u[r].children_d)))
                        }, this)),
                        d.children = c,
                        d.children_d = h,
                        o = 0,
                        s = d.parents.length; o < s; o++)
                            u[d.parents[o]].children_d = u[d.parents[o]].children_d.concat(h);
                        this.trigger("model", {
                            nodes: h,
                            parent: l
                        }),
                        l !== t.jstree.root ? (this._node_changed(l),
                        this.redraw()) : (this.get_container_ul().children(".jstree-initial-node").remove(),
                        this.redraw(!0)),
                        this._data.core.selected.length !== p && this.trigger("changed", {
                            action: "model",
                            selected: this._data.core.selected
                        }),
                        i.call(this, !0)
                    },
                    _append_json_data: function(e, n, i, r) {
                        if (null !== this.element) {
                            e = this.get_node(e),
                            e.children = [],
                            e.children_d = [],
                            n.d && "string" == typeof (n = n.d) && (n = JSON.parse(n)),
                            t.isArray(n) || (n = [n]);
                            var o = null
                              , s = {
                                df: this._model.default_state,
                                dat: n,
                                par: e.id,
                                m: this._model.data,
                                t_id: this._id,
                                t_cnt: this._cnt,
                                sel: this._data.core.selected
                            }
                              , a = function(t, e) {
                                t.data && (t = t.data);
                                var n, i, r, o, s = t.dat, a = t.par, l = [], c = [], h = [], u = t.df, d = t.t_id, p = t.t_cnt, f = t.m, g = f[a], m = t.sel, _ = function(t, n, i) {
                                    i = i ? i.concat() : [],
                                    n && i.unshift(n);
                                    var r, o, s, a, l = t.id.toString(), c = {
                                        id: l,
                                        text: t.text || "",
                                        icon: t.icon === e || t.icon,
                                        parent: n,
                                        parents: i,
                                        children: t.children || [],
                                        children_d: t.children_d || [],
                                        data: t.data,
                                        state: {},
                                        li_attr: {
                                            id: !1
                                        },
                                        a_attr: {
                                            href: "#"
                                        },
                                        original: !1
                                    };
                                    for (r in u)
                                        u.hasOwnProperty(r) && (c.state[r] = u[r]);
                                    if (t && t.data && t.data.jstree && t.data.jstree.icon && (c.icon = t.data.jstree.icon),
                                    c.icon !== e && null !== c.icon && "" !== c.icon || (c.icon = !0),
                                    t && t.data && (c.data = t.data,
                                    t.data.jstree))
                                        for (r in t.data.jstree)
                                            t.data.jstree.hasOwnProperty(r) && (c.state[r] = t.data.jstree[r]);
                                    if (t && "object" == typeof t.state)
                                        for (r in t.state)
                                            t.state.hasOwnProperty(r) && (c.state[r] = t.state[r]);
                                    if (t && "object" == typeof t.li_attr)
                                        for (r in t.li_attr)
                                            t.li_attr.hasOwnProperty(r) && (c.li_attr[r] = t.li_attr[r]);
                                    if (c.li_attr.id || (c.li_attr.id = l),
                                    t && "object" == typeof t.a_attr)
                                        for (r in t.a_attr)
                                            t.a_attr.hasOwnProperty(r) && (c.a_attr[r] = t.a_attr[r]);
                                    for (t && t.children && !0 === t.children && (c.state.loaded = !1,
                                    c.children = [],
                                    c.children_d = []),
                                    f[c.id] = c,
                                    r = 0,
                                    o = c.children.length; r < o; r++)
                                        s = _(f[c.children[r]], c.id, i),
                                        a = f[s],
                                        c.children_d.push(s),
                                        a.children_d.length && (c.children_d = c.children_d.concat(a.children_d));
                                    return delete t.data,
                                    delete t.children,
                                    f[c.id].original = t,
                                    c.state.selected && h.push(c.id),
                                    c.id
                                }, v = function(t, n, i) {
                                    i = i ? i.concat() : [],
                                    n && i.unshift(n);
                                    var r, o, s, a, l, c = !1;
                                    do {
                                        c = "j" + d + "_" + ++p
                                    } while (f[c]);l = {
                                        id: !1,
                                        text: "string" == typeof t ? t : "",
                                        icon: "object" != typeof t || t.icon === e || t.icon,
                                        parent: n,
                                        parents: i,
                                        children: [],
                                        children_d: [],
                                        data: null,
                                        state: {},
                                        li_attr: {
                                            id: !1
                                        },
                                        a_attr: {
                                            href: "#"
                                        },
                                        original: !1
                                    };
                                    for (r in u)
                                        u.hasOwnProperty(r) && (l.state[r] = u[r]);
                                    if (t && t.id && (l.id = t.id.toString()),
                                    t && t.text && (l.text = t.text),
                                    t && t.data && t.data.jstree && t.data.jstree.icon && (l.icon = t.data.jstree.icon),
                                    l.icon !== e && null !== l.icon && "" !== l.icon || (l.icon = !0),
                                    t && t.data && (l.data = t.data,
                                    t.data.jstree))
                                        for (r in t.data.jstree)
                                            t.data.jstree.hasOwnProperty(r) && (l.state[r] = t.data.jstree[r]);
                                    if (t && "object" == typeof t.state)
                                        for (r in t.state)
                                            t.state.hasOwnProperty(r) && (l.state[r] = t.state[r]);
                                    if (t && "object" == typeof t.li_attr)
                                        for (r in t.li_attr)
                                            t.li_attr.hasOwnProperty(r) && (l.li_attr[r] = t.li_attr[r]);
                                    if (l.li_attr.id && !l.id && (l.id = l.li_attr.id.toString()),
                                    l.id || (l.id = c),
                                    l.li_attr.id || (l.li_attr.id = l.id),
                                    t && "object" == typeof t.a_attr)
                                        for (r in t.a_attr)
                                            t.a_attr.hasOwnProperty(r) && (l.a_attr[r] = t.a_attr[r]);
                                    if (t && t.children && t.children.length) {
                                        for (r = 0,
                                        o = t.children.length; r < o; r++)
                                            s = v(t.children[r], l.id, i),
                                            a = f[s],
                                            l.children.push(s),
                                            a.children_d.length && (l.children_d = l.children_d.concat(a.children_d));
                                        l.children_d = l.children_d.concat(l.children)
                                    }
                                    return t && t.children && !0 === t.children && (l.state.loaded = !1,
                                    l.children = [],
                                    l.children_d = []),
                                    delete t.data,
                                    delete t.children,
                                    l.original = t,
                                    f[l.id] = l,
                                    l.state.selected && h.push(l.id),
                                    l.id
                                };
                                if (s.length && s[0].id !== e && s[0].parent !== e) {
                                    for (i = 0,
                                    r = s.length; i < r; i++)
                                        s[i].children || (s[i].children = []),
                                        s[i].state || (s[i].state = {}),
                                        f[s[i].id.toString()] = s[i];
                                    for (i = 0,
                                    r = s.length; i < r; i++)
                                        f[s[i].parent.toString()] ? (f[s[i].parent.toString()].children.push(s[i].id.toString()),
                                        g.children_d.push(s[i].id.toString())) : (this._data.core.last_error = {
                                            error: "parse",
                                            plugin: "core",
                                            id: "core_07",
                                            reason: "Node with invalid parent",
                                            data: JSON.stringify({
                                                id: s[i].id.toString(),
                                                parent: s[i].parent.toString()
                                            })
                                        },
                                        this.settings.core.error.call(this, this._data.core.last_error));
                                    for (i = 0,
                                    r = g.children.length; i < r; i++)
                                        n = _(f[g.children[i]], a, g.parents.concat()),
                                        c.push(n),
                                        f[n].children_d.length && (c = c.concat(f[n].children_d));
                                    for (i = 0,
                                    r = g.parents.length; i < r; i++)
                                        f[g.parents[i]].children_d = f[g.parents[i]].children_d.concat(c);
                                    o = {
                                        cnt: p,
                                        mod: f,
                                        sel: m,
                                        par: a,
                                        dpc: c,
                                        add: h
                                    }
                                } else {
                                    for (i = 0,
                                    r = s.length; i < r; i++)
                                        (n = v(s[i], a, g.parents.concat())) && (l.push(n),
                                        c.push(n),
                                        f[n].children_d.length && (c = c.concat(f[n].children_d)));
                                    for (g.children = l,
                                    g.children_d = c,
                                    i = 0,
                                    r = g.parents.length; i < r; i++)
                                        f[g.parents[i]].children_d = f[g.parents[i]].children_d.concat(c);
                                    o = {
                                        cnt: p,
                                        mod: f,
                                        sel: m,
                                        par: a,
                                        dpc: c,
                                        add: h
                                    }
                                }
                                if ("undefined" != typeof window && void 0 !== window.document)
                                    return o;
                                postMessage(o)
                            }
                              , l = function(e, n) {
                                if (null !== this.element) {
                                    this._cnt = e.cnt;
                                    var r, o = this._model.data;
                                    for (r in o)
                                        o.hasOwnProperty(r) && o[r].state && o[r].state.loading && e.mod[r] && (e.mod[r].state.loading = !0);
                                    if (this._model.data = e.mod,
                                    n) {
                                        var s, a = e.add, l = e.sel, c = this._data.core.selected.slice();
                                        if (o = this._model.data,
                                        l.length !== c.length || t.vakata.array_unique(l.concat(c)).length !== l.length) {
                                            for (r = 0,
                                            s = l.length; r < s; r++)
                                                -1 === t.inArray(l[r], a) && -1 === t.inArray(l[r], c) && (o[l[r]].state.selected = !1);
                                            for (r = 0,
                                            s = c.length; r < s; r++)
                                                -1 === t.inArray(c[r], l) && (o[c[r]].state.selected = !0)
                                        }
                                    }
                                    e.add.length && (this._data.core.selected = this._data.core.selected.concat(e.add)),
                                    this.trigger("model", {
                                        nodes: e.dpc,
                                        parent: e.par
                                    }),
                                    e.par !== t.jstree.root ? (this._node_changed(e.par),
                                    this.redraw()) : this.redraw(!0),
                                    e.add.length && this.trigger("changed", {
                                        action: "model",
                                        selected: this._data.core.selected
                                    }),
                                    i.call(this, !0)
                                }
                            };
                            if (this.settings.core.worker && window.Blob && window.URL && window.Worker)
                                try {
                                    null === this._wrk && (this._wrk = window.URL.createObjectURL(new window.Blob(["self.onmessage = " + a.toString()],{
                                        type: "text/javascript"
                                    }))),
                                    !this._data.core.working || r ? (this._data.core.working = !0,
                                    o = new window.Worker(this._wrk),
                                    o.onmessage = t.proxy(function(t) {
                                        l.call(this, t.data, !0);
                                        try {
                                            o.terminate(),
                                            o = null
                                        } catch (t) {}
                                        this._data.core.worker_queue.length ? this._append_json_data.apply(this, this._data.core.worker_queue.shift()) : this._data.core.working = !1
                                    }, this),
                                    s.par ? o.postMessage(s) : this._data.core.worker_queue.length ? this._append_json_data.apply(this, this._data.core.worker_queue.shift()) : this._data.core.working = !1) : this._data.core.worker_queue.push([e, n, i, !0])
                                } catch (t) {
                                    l.call(this, a(s), !1),
                                    this._data.core.worker_queue.length ? this._append_json_data.apply(this, this._data.core.worker_queue.shift()) : this._data.core.working = !1
                                }
                            else
                                l.call(this, a(s), !1)
                        }
                    },
                    _parse_model_from_html: function(n, i, r) {
                        r = r ? [].concat(r) : [],
                        i && r.unshift(i);
                        var o, s, a, l, c, h = this._model.data, u = {
                            id: !1,
                            text: !1,
                            icon: !0,
                            parent: i,
                            parents: r,
                            children: [],
                            children_d: [],
                            data: null,
                            state: {},
                            li_attr: {
                                id: !1
                            },
                            a_attr: {
                                href: "#"
                            },
                            original: !1
                        };
                        for (a in this._model.default_state)
                            this._model.default_state.hasOwnProperty(a) && (u.state[a] = this._model.default_state[a]);
                        if (l = t.vakata.attributes(n, !0),
                        t.each(l, function(e, n) {
                            if (n = t.trim(n),
                            !n.length)
                                return !0;
                            u.li_attr[e] = n,
                            "id" === e && (u.id = n.toString())
                        }),
                        l = n.children("a").first(),
                        l.length && (l = t.vakata.attributes(l, !0),
                        t.each(l, function(e, n) {
                            n = t.trim(n),
                            n.length && (u.a_attr[e] = n)
                        })),
                        l = n.children("a").first().length ? n.children("a").first().clone() : n.clone(),
                        l.children("ins, i, ul").remove(),
                        l = l.html(),
                        l = t("<div />").html(l),
                        u.text = this.settings.core.force_text ? l.text() : l.html(),
                        l = n.data(),
                        u.data = l ? t.extend(!0, {}, l) : null,
                        u.state.opened = n.hasClass("jstree-open"),
                        u.state.selected = n.children("a").hasClass("jstree-clicked"),
                        u.state.disabled = n.children("a").hasClass("jstree-disabled"),
                        u.data && u.data.jstree)
                            for (a in u.data.jstree)
                                u.data.jstree.hasOwnProperty(a) && (u.state[a] = u.data.jstree[a]);
                        l = n.children("a").children(".jstree-themeicon"),
                        l.length && (u.icon = !l.hasClass("jstree-themeicon-hidden") && l.attr("rel")),
                        u.state.icon !== e && (u.icon = u.state.icon),
                        u.icon !== e && null !== u.icon && "" !== u.icon || (u.icon = !0),
                        l = n.children("ul").children("li");
                        do {
                            c = "j" + this._id + "_" + ++this._cnt
                        } while (h[c]);return u.id = u.li_attr.id ? u.li_attr.id.toString() : c,
                        l.length ? (l.each(t.proxy(function(e, n) {
                            o = this._parse_model_from_html(t(n), u.id, r),
                            s = this._model.data[o],
                            u.children.push(o),
                            s.children_d.length && (u.children_d = u.children_d.concat(s.children_d))
                        }, this)),
                        u.children_d = u.children_d.concat(u.children)) : n.hasClass("jstree-closed") && (u.state.loaded = !1),
                        u.li_attr.class && (u.li_attr.class = u.li_attr.class.replace("jstree-closed", "").replace("jstree-open", "")),
                        u.a_attr.class && (u.a_attr.class = u.a_attr.class.replace("jstree-clicked", "").replace("jstree-disabled", "")),
                        h[u.id] = u,
                        u.state.selected && this._data.core.selected.push(u.id),
                        u.id
                    },
                    _parse_model_from_flat_json: function(t, n, i) {
                        i = i ? i.concat() : [],
                        n && i.unshift(n);
                        var r, o, s, a, l = t.id.toString(), c = this._model.data, h = this._model.default_state, u = {
                            id: l,
                            text: t.text || "",
                            icon: t.icon === e || t.icon,
                            parent: n,
                            parents: i,
                            children: t.children || [],
                            children_d: t.children_d || [],
                            data: t.data,
                            state: {},
                            li_attr: {
                                id: !1
                            },
                            a_attr: {
                                href: "#"
                            },
                            original: !1
                        };
                        for (r in h)
                            h.hasOwnProperty(r) && (u.state[r] = h[r]);
                        if (t && t.data && t.data.jstree && t.data.jstree.icon && (u.icon = t.data.jstree.icon),
                        u.icon !== e && null !== u.icon && "" !== u.icon || (u.icon = !0),
                        t && t.data && (u.data = t.data,
                        t.data.jstree))
                            for (r in t.data.jstree)
                                t.data.jstree.hasOwnProperty(r) && (u.state[r] = t.data.jstree[r]);
                        if (t && "object" == typeof t.state)
                            for (r in t.state)
                                t.state.hasOwnProperty(r) && (u.state[r] = t.state[r]);
                        if (t && "object" == typeof t.li_attr)
                            for (r in t.li_attr)
                                t.li_attr.hasOwnProperty(r) && (u.li_attr[r] = t.li_attr[r]);
                        if (u.li_attr.id || (u.li_attr.id = l),
                        t && "object" == typeof t.a_attr)
                            for (r in t.a_attr)
                                t.a_attr.hasOwnProperty(r) && (u.a_attr[r] = t.a_attr[r]);
                        for (t && t.children && !0 === t.children && (u.state.loaded = !1,
                        u.children = [],
                        u.children_d = []),
                        c[u.id] = u,
                        r = 0,
                        o = u.children.length; r < o; r++)
                            s = this._parse_model_from_flat_json(c[u.children[r]], u.id, i),
                            a = c[s],
                            u.children_d.push(s),
                            a.children_d.length && (u.children_d = u.children_d.concat(a.children_d));
                        return delete t.data,
                        delete t.children,
                        c[u.id].original = t,
                        u.state.selected && this._data.core.selected.push(u.id),
                        u.id
                    },
                    _parse_model_from_json: function(t, n, i) {
                        i = i ? i.concat() : [],
                        n && i.unshift(n);
                        var r, o, s, a, l, c = !1, h = this._model.data, u = this._model.default_state;
                        do {
                            c = "j" + this._id + "_" + ++this._cnt
                        } while (h[c]);l = {
                            id: !1,
                            text: "string" == typeof t ? t : "",
                            icon: "object" != typeof t || t.icon === e || t.icon,
                            parent: n,
                            parents: i,
                            children: [],
                            children_d: [],
                            data: null,
                            state: {},
                            li_attr: {
                                id: !1
                            },
                            a_attr: {
                                href: "#"
                            },
                            original: !1
                        };
                        for (r in u)
                            u.hasOwnProperty(r) && (l.state[r] = u[r]);
                        if (t && t.id && (l.id = t.id.toString()),
                        t && t.text && (l.text = t.text),
                        t && t.data && t.data.jstree && t.data.jstree.icon && (l.icon = t.data.jstree.icon),
                        l.icon !== e && null !== l.icon && "" !== l.icon || (l.icon = !0),
                        t && t.data && (l.data = t.data,
                        t.data.jstree))
                            for (r in t.data.jstree)
                                t.data.jstree.hasOwnProperty(r) && (l.state[r] = t.data.jstree[r]);
                        if (t && "object" == typeof t.state)
                            for (r in t.state)
                                t.state.hasOwnProperty(r) && (l.state[r] = t.state[r]);
                        if (t && "object" == typeof t.li_attr)
                            for (r in t.li_attr)
                                t.li_attr.hasOwnProperty(r) && (l.li_attr[r] = t.li_attr[r]);
                        if (l.li_attr.id && !l.id && (l.id = l.li_attr.id.toString()),
                        l.id || (l.id = c),
                        l.li_attr.id || (l.li_attr.id = l.id),
                        t && "object" == typeof t.a_attr)
                            for (r in t.a_attr)
                                t.a_attr.hasOwnProperty(r) && (l.a_attr[r] = t.a_attr[r]);
                        if (t && t.children && t.children.length) {
                            for (r = 0,
                            o = t.children.length; r < o; r++)
                                s = this._parse_model_from_json(t.children[r], l.id, i),
                                a = h[s],
                                l.children.push(s),
                                a.children_d.length && (l.children_d = l.children_d.concat(a.children_d));
                            l.children_d = l.children_d.concat(l.children)
                        }
                        return t && t.children && !0 === t.children && (l.state.loaded = !1,
                        l.children = [],
                        l.children_d = []),
                        delete t.data,
                        delete t.children,
                        l.original = t,
                        h[l.id] = l,
                        l.state.selected && this._data.core.selected.push(l.id),
                        l.id
                    },
                    _redraw: function() {
                        var e, n, i, r = this._model.force_full_redraw ? this._model.data[t.jstree.root].children.concat([]) : this._model.changed.concat([]), o = c.createElement("UL"), s = this._data.core.focused;
                        for (n = 0,
                        i = r.length; n < i; n++)
                            (e = this.redraw_node(r[n], !0, this._model.force_full_redraw)) && this._model.force_full_redraw && o.appendChild(e);
                        this._model.force_full_redraw && (o.className = this.get_container_ul()[0].className,
                        o.setAttribute("role", "group"),
                        this.element.empty().append(o)),
                        null !== s && this.settings.core.restore_focus && (e = this.get_node(s, !0),
                        e && e.length && e.children(".jstree-anchor")[0] !== c.activeElement ? e.children(".jstree-anchor").focus() : this._data.core.focused = null),
                        this._model.force_full_redraw = !1,
                        this._model.changed = [],
                        this.trigger("redraw", {
                            nodes: r
                        })
                    },
                    redraw: function(t) {
                        t && (this._model.force_full_redraw = !0),
                        this._redraw()
                    },
                    draw_children: function(e) {
                        var n = this.get_node(e)
                          , i = !1
                          , r = !1
                          , o = !1
                          , s = c;
                        if (!n)
                            return !1;
                        if (n.id === t.jstree.root)
                            return this.redraw(!0);
                        if (!(e = this.get_node(e, !0)) || !e.length)
                            return !1;
                        if (e.children(".jstree-children").remove(),
                        e = e[0],
                        n.children.length && n.state.loaded) {
                            for (o = s.createElement("UL"),
                            o.setAttribute("role", "group"),
                            o.className = "jstree-children",
                            i = 0,
                            r = n.children.length; i < r; i++)
                                o.appendChild(this.redraw_node(n.children[i], !0, !0));
                            e.appendChild(o)
                        }
                    },
                    redraw_node: function(e, n, i, r) {
                        var o = this.get_node(e)
                          , s = !1
                          , a = !1
                          , l = !1
                          , h = !1
                          , u = !1
                          , d = !1
                          , p = ""
                          , f = c
                          , g = this._model.data
                          , m = !1
                          , _ = null
                          , v = 0
                          , y = 0
                          , b = !1
                          , w = !1;
                        if (!o)
                            return !1;
                        if (o.id === t.jstree.root)
                            return this.redraw(!0);
                        if (n = n || 0 === o.children.length,
                        e = c.querySelector ? this.element[0].querySelector("#" + (-1 !== "0123456789".indexOf(o.id[0]) ? "\\3" + o.id[0] + " " + o.id.substr(1).replace(t.jstree.idregex, "\\$&") : o.id.replace(t.jstree.idregex, "\\$&"))) : c.getElementById(o.id))
                            e = t(e),
                            i || (s = e.parent().parent()[0],
                            s === this.element[0] && (s = null),
                            a = e.index()),
                            n || !o.children.length || e.children(".jstree-children").length || (n = !0),
                            n || (l = e.children(".jstree-children")[0]),
                            m = e.children(".jstree-anchor")[0] === c.activeElement,
                            e.remove();
                        else if (n = !0,
                        !i) {
                            if (!(null === (s = o.parent !== t.jstree.root ? t("#" + o.parent.replace(t.jstree.idregex, "\\$&"), this.element)[0] : null) || s && g[o.parent].state.opened))
                                return !1;
                            a = t.inArray(o.id, null === s ? g[t.jstree.root].children : g[o.parent].children)
                        }
                        e = this._data.core.node.cloneNode(!0),
                        p = "jstree-node ";
                        for (h in o.li_attr)
                            if (o.li_attr.hasOwnProperty(h)) {
                                if ("id" === h)
                                    continue;
                                "class" !== h ? e.setAttribute(h, o.li_attr[h]) : p += o.li_attr[h]
                            }
                        for (o.a_attr.id || (o.a_attr.id = o.id + "_anchor"),
                        e.setAttribute("aria-selected", !!o.state.selected),
                        e.setAttribute("aria-level", o.parents.length),
                        e.setAttribute("aria-labelledby", o.a_attr.id),
                        o.state.disabled && e.setAttribute("aria-disabled", !0),
                        h = 0,
                        u = o.children.length; h < u; h++)
                            if (!g[o.children[h]].state.hidden) {
                                b = !0;
                                break
                            }
                        if (null !== o.parent && g[o.parent] && !o.state.hidden && (h = t.inArray(o.id, g[o.parent].children),
                        w = o.id,
                        -1 !== h))
                            for (h++,
                            u = g[o.parent].children.length; h < u && (g[g[o.parent].children[h]].state.hidden || (w = g[o.parent].children[h]),
                            w === o.id); h++)
                                ;
                        o.state.hidden && (p += " jstree-hidden"),
                        o.state.loading && (p += " jstree-loading"),
                        o.state.loaded && !b ? p += " jstree-leaf" : (p += o.state.opened && o.state.loaded ? " jstree-open" : " jstree-closed",
                        e.setAttribute("aria-expanded", o.state.opened && o.state.loaded)),
                        w === o.id && (p += " jstree-last"),
                        e.id = o.id,
                        e.className = p,
                        p = (o.state.selected ? " jstree-clicked" : "") + (o.state.disabled ? " jstree-disabled" : "");
                        for (u in o.a_attr)
                            if (o.a_attr.hasOwnProperty(u)) {
                                if ("href" === u && "#" === o.a_attr[u])
                                    continue;
                                "class" !== u ? e.childNodes[1].setAttribute(u, o.a_attr[u]) : p += " " + o.a_attr[u]
                            }
                        if (p.length && (e.childNodes[1].className = "jstree-anchor " + p),
                        (o.icon && !0 !== o.icon || !1 === o.icon) && (!1 === o.icon ? e.childNodes[1].childNodes[0].className += " jstree-themeicon-hidden" : -1 === o.icon.indexOf("/") && -1 === o.icon.indexOf(".") ? e.childNodes[1].childNodes[0].className += " " + o.icon + " jstree-themeicon-custom" : (e.childNodes[1].childNodes[0].style.backgroundImage = 'url("' + o.icon + '")',
                        e.childNodes[1].childNodes[0].style.backgroundPosition = "center center",
                        e.childNodes[1].childNodes[0].style.backgroundSize = "auto",
                        e.childNodes[1].childNodes[0].className += " jstree-themeicon-custom")),
                        this.settings.core.force_text ? e.childNodes[1].appendChild(f.createTextNode(o.text)) : e.childNodes[1].innerHTML += o.text,
                        n && o.children.length && (o.state.opened || r) && o.state.loaded) {
                            for (d = f.createElement("UL"),
                            d.setAttribute("role", "group"),
                            d.className = "jstree-children",
                            h = 0,
                            u = o.children.length; h < u; h++)
                                d.appendChild(this.redraw_node(o.children[h], n, !0));
                            e.appendChild(d)
                        }
                        if (l && e.appendChild(l),
                        !i) {
                            for (s || (s = this.element[0]),
                            h = 0,
                            u = s.childNodes.length; h < u; h++)
                                if (s.childNodes[h] && s.childNodes[h].className && -1 !== s.childNodes[h].className.indexOf("jstree-children")) {
                                    _ = s.childNodes[h];
                                    break
                                }
                            _ || (_ = f.createElement("UL"),
                            _.setAttribute("role", "group"),
                            _.className = "jstree-children",
                            s.appendChild(_)),
                            s = _,
                            a < s.childNodes.length ? s.insertBefore(e, s.childNodes[a]) : s.appendChild(e),
                            m && (v = this.element[0].scrollTop,
                            y = this.element[0].scrollLeft,
                            e.childNodes[1].focus(),
                            this.element[0].scrollTop = v,
                            this.element[0].scrollLeft = y)
                        }
                        return o.state.opened && !o.state.loaded && (o.state.opened = !1,
                        setTimeout(t.proxy(function() {
                            this.open_node(o.id, !1, 0)
                        }, this), 0)),
                        e
                    },
                    open_node: function(n, i, r) {
                        var o, s, a, l;
                        if (t.isArray(n)) {
                            for (n = n.slice(),
                            o = 0,
                            s = n.length; o < s; o++)
                                this.open_node(n[o], i, r);
                            return !0
                        }
                        return !(!(n = this.get_node(n)) || n.id === t.jstree.root) && (r = r === e ? this.settings.core.animation : r,
                        this.is_closed(n) ? this.is_loaded(n) ? (a = this.get_node(n, !0),
                        l = this,
                        a.length && (r && a.children(".jstree-children").length && a.children(".jstree-children").stop(!0, !0),
                        n.children.length && !this._firstChild(a.children(".jstree-children")[0]) && this.draw_children(n),
                        r ? (this.trigger("before_open", {
                            node: n
                        }),
                        a.children(".jstree-children").css("display", "none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded", !0).children(".jstree-children").stop(!0, !0).slideDown(r, function() {
                            this.style.display = "",
                            l.element && l.trigger("after_open", {
                                node: n
                            })
                        })) : (this.trigger("before_open", {
                            node: n
                        }),
                        a[0].className = a[0].className.replace("jstree-closed", "jstree-open"),
                        a[0].setAttribute("aria-expanded", !0))),
                        n.state.opened = !0,
                        i && i.call(this, n, !0),
                        a.length || this.trigger("before_open", {
                            node: n
                        }),
                        this.trigger("open_node", {
                            node: n
                        }),
                        r && a.length || this.trigger("after_open", {
                            node: n
                        }),
                        !0) : this.is_loading(n) ? setTimeout(t.proxy(function() {
                            this.open_node(n, i, r)
                        }, this), 500) : void this.load_node(n, function(t, e) {
                            return e ? this.open_node(t, i, r) : !!i && i.call(this, t, !1)
                        }) : (i && i.call(this, n, !1),
                        !1))
                    },
                    _open_to: function(e) {
                        if (!(e = this.get_node(e)) || e.id === t.jstree.root)
                            return !1;
                        var n, i, r = e.parents;
                        for (n = 0,
                        i = r.length; n < i; n += 1)
                            n !== t.jstree.root && this.open_node(r[n], !1, 0);
                        return t("#" + e.id.replace(t.jstree.idregex, "\\$&"), this.element)
                    },
                    close_node: function(n, i) {
                        var r, o, s, a;
                        if (t.isArray(n)) {
                            for (n = n.slice(),
                            r = 0,
                            o = n.length; r < o; r++)
                                this.close_node(n[r], i);
                            return !0
                        }
                        return !(!(n = this.get_node(n)) || n.id === t.jstree.root) && (!this.is_closed(n) && (i = i === e ? this.settings.core.animation : i,
                        s = this,
                        a = this.get_node(n, !0),
                        n.state.opened = !1,
                        this.trigger("close_node", {
                            node: n
                        }),
                        void (a.length ? i ? a.children(".jstree-children").attr("style", "display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded", !1).children(".jstree-children").stop(!0, !0).slideUp(i, function() {
                            this.style.display = "",
                            a.children(".jstree-children").remove(),
                            s.element && s.trigger("after_close", {
                                node: n
                            })
                        }) : (a[0].className = a[0].className.replace("jstree-open", "jstree-closed"),
                        a.attr("aria-expanded", !1).children(".jstree-children").remove(),
                        this.trigger("after_close", {
                            node: n
                        })) : this.trigger("after_close", {
                            node: n
                        }))))
                    },
                    toggle_node: function(e) {
                        var n, i;
                        if (t.isArray(e)) {
                            for (e = e.slice(),
                            n = 0,
                            i = e.length; n < i; n++)
                                this.toggle_node(e[n]);
                            return !0
                        }
                        return this.is_closed(e) ? this.open_node(e) : this.is_open(e) ? this.close_node(e) : void 0
                    },
                    open_all: function(e, n, i) {
                        if (e || (e = t.jstree.root),
                        !(e = this.get_node(e)))
                            return !1;
                        var r, o, s, a = e.id === t.jstree.root ? this.get_container_ul() : this.get_node(e, !0);
                        if (!a.length) {
                            for (r = 0,
                            o = e.children_d.length; r < o; r++)
                                this.is_closed(this._model.data[e.children_d[r]]) && (this._model.data[e.children_d[r]].state.opened = !0);
                            return this.trigger("open_all", {
                                node: e
                            })
                        }
                        i = i || a,
                        s = this,
                        a = this.is_closed(e) ? a.find(".jstree-closed").addBack() : a.find(".jstree-closed"),
                        a.each(function() {
                            s.open_node(this, function(t, e) {
                                e && this.is_parent(t) && this.open_all(t, n, i)
                            }, n || 0)
                        }),
                        0 === i.find(".jstree-closed").length && this.trigger("open_all", {
                            node: this.get_node(i)
                        })
                    },
                    close_all: function(e, n) {
                        if (e || (e = t.jstree.root),
                        !(e = this.get_node(e)))
                            return !1;
                        var i, r, o = e.id === t.jstree.root ? this.get_container_ul() : this.get_node(e, !0), s = this;
                        for (o.length && (o = this.is_open(e) ? o.find(".jstree-open").addBack() : o.find(".jstree-open"),
                        t(o.get().reverse()).each(function() {
                            s.close_node(this, n || 0)
                        })),
                        i = 0,
                        r = e.children_d.length; i < r; i++)
                            this._model.data[e.children_d[i]].state.opened = !1;
                        this.trigger("close_all", {
                            node: e
                        })
                    },
                    is_disabled: function(t) {
                        return (t = this.get_node(t)) && t.state && t.state.disabled
                    },
                    enable_node: function(e) {
                        var n, i;
                        if (t.isArray(e)) {
                            for (e = e.slice(),
                            n = 0,
                            i = e.length; n < i; n++)
                                this.enable_node(e[n]);
                            return !0
                        }
                        if (!(e = this.get_node(e)) || e.id === t.jstree.root)
                            return !1;
                        e.state.disabled = !1,
                        this.get_node(e, !0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled", !1),
                        this.trigger("enable_node", {
                            node: e
                        })
                    },
                    disable_node: function(e) {
                        var n, i;
                        if (t.isArray(e)) {
                            for (e = e.slice(),
                            n = 0,
                            i = e.length; n < i; n++)
                                this.disable_node(e[n]);
                            return !0
                        }
                        if (!(e = this.get_node(e)) || e.id === t.jstree.root)
                            return !1;
                        e.state.disabled = !0,
                        this.get_node(e, !0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled", !0),
                        this.trigger("disable_node", {
                            node: e
                        })
                    },
                    is_hidden: function(t) {
                        return t = this.get_node(t),
                        !0 === t.state.hidden
                    },
                    hide_node: function(e, n) {
                        var i, r;
                        if (t.isArray(e)) {
                            for (e = e.slice(),
                            i = 0,
                            r = e.length; i < r; i++)
                                this.hide_node(e[i], !0);
                            return n || this.redraw(),
                            !0
                        }
                        if (!(e = this.get_node(e)) || e.id === t.jstree.root)
                            return !1;
                        e.state.hidden || (e.state.hidden = !0,
                        this._node_changed(e.parent),
                        n || this.redraw(),
                        this.trigger("hide_node", {
                            node: e
                        }))
                    },
                    show_node: function(e, n) {
                        var i, r;
                        if (t.isArray(e)) {
                            for (e = e.slice(),
                            i = 0,
                            r = e.length; i < r; i++)
                                this.show_node(e[i], !0);
                            return n || this.redraw(),
                            !0
                        }
                        if (!(e = this.get_node(e)) || e.id === t.jstree.root)
                            return !1;
                        e.state.hidden && (e.state.hidden = !1,
                        this._node_changed(e.parent),
                        n || this.redraw(),
                        this.trigger("show_node", {
                            node: e
                        }))
                    },
                    hide_all: function(e) {
                        var n, i = this._model.data, r = [];
                        for (n in i)
                            i.hasOwnProperty(n) && n !== t.jstree.root && !i[n].state.hidden && (i[n].state.hidden = !0,
                            r.push(n));
                        return this._model.force_full_redraw = !0,
                        e || this.redraw(),
                        this.trigger("hide_all", {
                            nodes: r
                        }),
                        r
                    },
                    show_all: function(e) {
                        var n, i = this._model.data, r = [];
                        for (n in i)
                            i.hasOwnProperty(n) && n !== t.jstree.root && i[n].state.hidden && (i[n].state.hidden = !1,
                            r.push(n));
                        return this._model.force_full_redraw = !0,
                        e || this.redraw(),
                        this.trigger("show_all", {
                            nodes: r
                        }),
                        r
                    },
                    activate_node: function(t, n) {
                        if (this.is_disabled(t))
                            return !1;
                        if (n && "object" == typeof n || (n = {}),
                        this._data.core.last_clicked = this._data.core.last_clicked && this._data.core.last_clicked.id !== e ? this.get_node(this._data.core.last_clicked.id) : null,
                        this._data.core.last_clicked && !this._data.core.last_clicked.state.selected && (this._data.core.last_clicked = null),
                        !this._data.core.last_clicked && this._data.core.selected.length && (this._data.core.last_clicked = this.get_node(this._data.core.selected[this._data.core.selected.length - 1])),
                        this.settings.core.multiple && (n.metaKey || n.ctrlKey || n.shiftKey) && (!n.shiftKey || this._data.core.last_clicked && this.get_parent(t) && this.get_parent(t) === this._data.core.last_clicked.parent))
                            if (n.shiftKey) {
                                var i, r, o = this.get_node(t).id, s = this._data.core.last_clicked.id, a = this.get_node(this._data.core.last_clicked.parent).children, l = !1;
                                for (i = 0,
                                r = a.length; i < r; i += 1)
                                    a[i] === o && (l = !l),
                                    a[i] === s && (l = !l),
                                    this.is_disabled(a[i]) || !l && a[i] !== o && a[i] !== s ? this.deselect_node(a[i], !0, n) : this.is_hidden(a[i]) || this.select_node(a[i], !0, !1, n);
                                this.trigger("changed", {
                                    action: "select_node",
                                    node: this.get_node(t),
                                    selected: this._data.core.selected,
                                    event: n
                                })
                            } else
                                this.is_selected(t) ? this.deselect_node(t, !1, n) : this.select_node(t, !1, !1, n);
                        else
                            !this.settings.core.multiple && (n.metaKey || n.ctrlKey || n.shiftKey) && this.is_selected(t) ? this.deselect_node(t, !1, n) : (this.deselect_all(!0),
                            this.select_node(t, !1, !1, n),
                            this._data.core.last_clicked = this.get_node(t));
                        this.trigger("activate_node", {
                            node: this.get_node(t),
                            event: n
                        })
                    },
                    hover_node: function(t) {
                        if (!(t = this.get_node(t, !0)) || !t.length || t.children(".jstree-hovered").length)
                            return !1;
                        var e = this.element.find(".jstree-hovered")
                          , n = this.element;
                        e && e.length && this.dehover_node(e),
                        t.children(".jstree-anchor").addClass("jstree-hovered"),
                        this.trigger("hover_node", {
                            node: this.get_node(t)
                        }),
                        setTimeout(function() {
                            n.attr("aria-activedescendant", t[0].id)
                        }, 0)
                    },
                    dehover_node: function(t) {
                        if (!(t = this.get_node(t, !0)) || !t.length || !t.children(".jstree-hovered").length)
                            return !1;
                        t.children(".jstree-anchor").removeClass("jstree-hovered"),
                        this.trigger("dehover_node", {
                            node: this.get_node(t)
                        })
                    },
                    select_node: function(e, n, i, r) {
                        var o, s, a;
                        if (t.isArray(e)) {
                            for (e = e.slice(),
                            s = 0,
                            a = e.length; s < a; s++)
                                this.select_node(e[s], n, i, r);
                            return !0
                        }
                        if (!(e = this.get_node(e)) || e.id === t.jstree.root)
                            return !1;
                        o = this.get_node(e, !0),
                        e.state.selected || (e.state.selected = !0,
                        this._data.core.selected.push(e.id),
                        i || (o = this._open_to(e)),
                        o && o.length && o.attr("aria-selected", !0).children(".jstree-anchor").addClass("jstree-clicked"),
                        this.trigger("select_node", {
                            node: e,
                            selected: this._data.core.selected,
                            event: r
                        }),
                        n || this.trigger("changed", {
                            action: "select_node",
                            node: e,
                            selected: this._data.core.selected,
                            event: r
                        }))
                    },
                    deselect_node: function(e, n, i) {
                        var r, o, s;
                        if (t.isArray(e)) {
                            for (e = e.slice(),
                            r = 0,
                            o = e.length; r < o; r++)
                                this.deselect_node(e[r], n, i);
                            return !0
                        }
                        if (!(e = this.get_node(e)) || e.id === t.jstree.root)
                            return !1;
                        s = this.get_node(e, !0),
                        e.state.selected && (e.state.selected = !1,
                        this._data.core.selected = t.vakata.array_remove_item(this._data.core.selected, e.id),
                        s.length && s.attr("aria-selected", !1).children(".jstree-anchor").removeClass("jstree-clicked"),
                        this.trigger("deselect_node", {
                            node: e,
                            selected: this._data.core.selected,
                            event: i
                        }),
                        n || this.trigger("changed", {
                            action: "deselect_node",
                            node: e,
                            selected: this._data.core.selected,
                            event: i
                        }))
                    },
                    select_all: function(e) {
                        var n, i, r = this._data.core.selected.concat([]);
                        for (this._data.core.selected = this._model.data[t.jstree.root].children_d.concat(),
                        n = 0,
                        i = this._data.core.selected.length; n < i; n++)
                            this._model.data[this._data.core.selected[n]] && (this._model.data[this._data.core.selected[n]].state.selected = !0);
                        this.redraw(!0),
                        this.trigger("select_all", {
                            selected: this._data.core.selected
                        }),
                        e || this.trigger("changed", {
                            action: "select_all",
                            selected: this._data.core.selected,
                            old_selection: r
                        })
                    },
                    deselect_all: function(t) {
                        var e, n, i = this._data.core.selected.concat([]);
                        for (e = 0,
                        n = this._data.core.selected.length; e < n; e++)
                            this._model.data[this._data.core.selected[e]] && (this._model.data[this._data.core.selected[e]].state.selected = !1);
                        this._data.core.selected = [],
                        this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected", !1),
                        this.trigger("deselect_all", {
                            selected: this._data.core.selected,
                            node: i
                        }),
                        t || this.trigger("changed", {
                            action: "deselect_all",
                            selected: this._data.core.selected,
                            old_selection: i
                        })
                    },
                    is_selected: function(e) {
                        return !(!(e = this.get_node(e)) || e.id === t.jstree.root) && e.state.selected
                    },
                    get_selected: function(e) {
                        return e ? t.map(this._data.core.selected, t.proxy(function(t) {
                            return this.get_node(t)
                        }, this)) : this._data.core.selected.slice()
                    },
                    get_top_selected: function(e) {
                        var n, i, r, o, s = this.get_selected(!0), a = {};
                        for (n = 0,
                        i = s.length; n < i; n++)
                            a[s[n].id] = s[n];
                        for (n = 0,
                        i = s.length; n < i; n++)
                            for (r = 0,
                            o = s[n].children_d.length; r < o; r++)
                                a[s[n].children_d[r]] && delete a[s[n].children_d[r]];
                        s = [];
                        for (n in a)
                            a.hasOwnProperty(n) && s.push(n);
                        return e ? t.map(s, t.proxy(function(t) {
                            return this.get_node(t)
                        }, this)) : s
                    },
                    get_bottom_selected: function(e) {
                        var n, i, r = this.get_selected(!0), o = [];
                        for (n = 0,
                        i = r.length; n < i; n++)
                            r[n].children.length || o.push(r[n].id);
                        return e ? t.map(o, t.proxy(function(t) {
                            return this.get_node(t)
                        }, this)) : o
                    },
                    get_state: function() {
                        var e, n = {
                            core: {
                                open: [],
                                loaded: [],
                                scroll: {
                                    left: this.element.scrollLeft(),
                                    top: this.element.scrollTop()
                                },
                                /*!
					'themes' : {
						'name' : this.get_theme(),
						'icons' : this._data.core.themes.icons,
						'dots' : this._data.core.themes.dots
					},
					*/
                                selected: []
                            }
                        };
                        for (e in this._model.data)
                            this._model.data.hasOwnProperty(e) && e !== t.jstree.root && (this._model.data[e].state.loaded && this.settings.core.loaded_state && n.core.loaded.push(e),
                            this._model.data[e].state.opened && n.core.open.push(e),
                            this._model.data[e].state.selected && n.core.selected.push(e));
                        return n
                    },
                    set_state: function(n, i) {
                        if (n) {
                            if (n.core && n.core.selected && n.core.initial_selection === e && (n.core.initial_selection = this._data.core.selected.concat([]).sort().join(",")),
                            n.core) {
                                var r, o;
                                if (n.core.loaded)
                                    return this.settings.core.loaded_state && t.isArray(n.core.loaded) && n.core.loaded.length ? this._load_nodes(n.core.loaded, function(t) {
                                        delete n.core.loaded,
                                        this.set_state(n, i)
                                    }) : (delete n.core.loaded,
                                    this.set_state(n, i)),
                                    !1;
                                if (n.core.open)
                                    return t.isArray(n.core.open) && n.core.open.length ? this._load_nodes(n.core.open, function(t) {
                                        this.open_node(t, !1, 0),
                                        delete n.core.open,
                                        this.set_state(n, i)
                                    }) : (delete n.core.open,
                                    this.set_state(n, i)),
                                    !1;
                                if (n.core.scroll)
                                    return n.core.scroll && n.core.scroll.left !== e && this.element.scrollLeft(n.core.scroll.left),
                                    n.core.scroll && n.core.scroll.top !== e && this.element.scrollTop(n.core.scroll.top),
                                    delete n.core.scroll,
                                    this.set_state(n, i),
                                    !1;
                                if (n.core.selected)
                                    return r = this,
                                    n.core.initial_selection !== e && n.core.initial_selection !== this._data.core.selected.concat([]).sort().join(",") || (this.deselect_all(),
                                    t.each(n.core.selected, function(t, e) {
                                        r.select_node(e, !1, !0)
                                    })),
                                    delete n.core.initial_selection,
                                    delete n.core.selected,
                                    this.set_state(n, i),
                                    !1;
                                for (o in n)
                                    n.hasOwnProperty(o) && "core" !== o && -1 === t.inArray(o, this.settings.plugins) && delete n[o];
                                if (t.isEmptyObject(n.core))
                                    return delete n.core,
                                    this.set_state(n, i),
                                    !1
                            }
                            return !t.isEmptyObject(n) || (n = null,
                            i && i.call(this),
                            this.trigger("set_state"),
                            !1)
                        }
                        return !1
                    },
                    refresh: function(e, n) {
                        this._data.core.state = !0 === n ? {} : this.get_state(),
                        n && t.isFunction(n) && (this._data.core.state = n.call(this, this._data.core.state)),
                        this._cnt = 0,
                        this._model.data = {},
                        this._model.data[t.jstree.root] = {
                            id: t.jstree.root,
                            parent: null,
                            parents: [],
                            children: [],
                            children_d: [],
                            state: {
                                loaded: !1
                            }
                        },
                        this._data.core.selected = [],
                        this._data.core.last_clicked = null,
                        this._data.core.focused = null;
                        var i = this.get_container_ul()[0].className;
                        e || (this.element.html("<ul class='" + i + "' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j" + this._id + "_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>" + this.get_string("Loading ...") + "</a></li></ul>"),
                        this.element.attr("aria-activedescendant", "j" + this._id + "_loading")),
                        this.load_node(t.jstree.root, function(e, n) {
                            n && (this.get_container_ul()[0].className = i,
                            this._firstChild(this.get_container_ul()[0]) && this.element.attr("aria-activedescendant", this._firstChild(this.get_container_ul()[0]).id),
                            this.set_state(t.extend(!0, {}, this._data.core.state), function() {
                                this.trigger("refresh")
                            })),
                            this._data.core.state = null
                        })
                    },
                    refresh_node: function(e) {
                        if (!(e = this.get_node(e)) || e.id === t.jstree.root)
                            return !1;
                        var n = []
                          , i = []
                          , r = this._data.core.selected.concat([]);
                        i.push(e.id),
                        !0 === e.state.opened && n.push(e.id),
                        this.get_node(e, !0).find(".jstree-open").each(function() {
                            i.push(this.id),
                            n.push(this.id)
                        }),
                        this._load_nodes(i, t.proxy(function(t) {
                            this.open_node(n, !1, 0),
                            this.select_node(r),
                            this.trigger("refresh_node", {
                                node: e,
                                nodes: t
                            })
                        }, this), !1, !0)
                    },
                    set_id: function(e, n) {
                        if (!(e = this.get_node(e)) || e.id === t.jstree.root)
                            return !1;
                        var i, r, o = this._model.data, s = e.id;
                        for (n = n.toString(),
                        o[e.parent].children[t.inArray(e.id, o[e.parent].children)] = n,
                        i = 0,
                        r = e.parents.length; i < r; i++)
                            o[e.parents[i]].children_d[t.inArray(e.id, o[e.parents[i]].children_d)] = n;
                        for (i = 0,
                        r = e.children.length; i < r; i++)
                            o[e.children[i]].parent = n;
                        for (i = 0,
                        r = e.children_d.length; i < r; i++)
                            o[e.children_d[i]].parents[t.inArray(e.id, o[e.children_d[i]].parents)] = n;
                        return i = t.inArray(e.id, this._data.core.selected),
                        -1 !== i && (this._data.core.selected[i] = n),
                        i = this.get_node(e.id, !0),
                        i && (i.attr("id", n),
                        this.element.attr("aria-activedescendant") === e.id && this.element.attr("aria-activedescendant", n)),
                        delete o[e.id],
                        e.id = n,
                        e.li_attr.id = n,
                        o[n] = e,
                        this.trigger("set_id", {
                            node: e,
                            new: e.id,
                            old: s
                        }),
                        !0
                    },
                    get_text: function(e) {
                        return !(!(e = this.get_node(e)) || e.id === t.jstree.root) && e.text
                    },
                    set_text: function(e, n) {
                        var i, r;
                        if (t.isArray(e)) {
                            for (e = e.slice(),
                            i = 0,
                            r = e.length; i < r; i++)
                                this.set_text(e[i], n);
                            return !0
                        }
                        return !(!(e = this.get_node(e)) || e.id === t.jstree.root) && (e.text = n,
                        this.get_node(e, !0).length && this.redraw_node(e.id),
                        this.trigger("set_text", {
                            obj: e,
                            text: n
                        }),
                        !0)
                    },
                    get_json: function(e, n, i) {
                        if (!(e = this.get_node(e || t.jstree.root)))
                            return !1;
                        n && n.flat && !i && (i = []);
                        var r, o, s = {
                            id: e.id,
                            text: e.text,
                            icon: this.get_icon(e),
                            li_attr: t.extend(!0, {}, e.li_attr),
                            a_attr: t.extend(!0, {}, e.a_attr),
                            state: {},
                            data: (!n || !n.no_data) && t.extend(!0, t.isArray(e.data) ? [] : {}, e.data)
                        };
                        if (n && n.flat ? s.parent = e.parent : s.children = [],
                        n && n.no_state)
                            delete s.state;
                        else
                            for (r in e.state)
                                e.state.hasOwnProperty(r) && (s.state[r] = e.state[r]);
                        if (n && n.no_li_attr && delete s.li_attr,
                        n && n.no_a_attr && delete s.a_attr,
                        n && n.no_id && (delete s.id,
                        s.li_attr && s.li_attr.id && delete s.li_attr.id,
                        s.a_attr && s.a_attr.id && delete s.a_attr.id),
                        n && n.flat && e.id !== t.jstree.root && i.push(s),
                        !n || !n.no_children)
                            for (r = 0,
                            o = e.children.length; r < o; r++)
                                n && n.flat ? this.get_json(e.children[r], n, i) : s.children.push(this.get_json(e.children[r], n));
                        return n && n.flat ? i : e.id === t.jstree.root ? s.children : s
                    },
                    create_node: function(n, i, r, o, s) {
                        if (null === n && (n = t.jstree.root),
                        !(n = this.get_node(n)))
                            return !1;
                        if (r = r === e ? "last" : r,
                        !r.toString().match(/^(before|after)$/) && !s && !this.is_loaded(n))
                            return this.load_node(n, function() {
                                this.create_node(n, i, r, o, !0)
                            });
                        i || (i = {
                            text: this.get_string("New node")
                        }),
                        i = "string" == typeof i ? {
                            text: i
                        } : t.extend(!0, {}, i),
                        i.text === e && (i.text = this.get_string("New node"));
                        var a, l, c, h;
                        switch (n.id === t.jstree.root && ("before" === r && (r = "first"),
                        "after" === r && (r = "last")),
                        r) {
                        case "before":
                            a = this.get_node(n.parent),
                            r = t.inArray(n.id, a.children),
                            n = a;
                            break;
                        case "after":
                            a = this.get_node(n.parent),
                            r = t.inArray(n.id, a.children) + 1,
                            n = a;
                            break;
                        case "inside":
                        case "first":
                            r = 0;
                            break;
                        case "last":
                            r = n.children.length;
                            break;
                        default:
                            r || (r = 0)
                        }
                        if (r > n.children.length && (r = n.children.length),
                        i.id || (i.id = !0),
                        !this.check("create_node", i, n, r))
                            return this.settings.core.error.call(this, this._data.core.last_error),
                            !1;
                        if (!0 === i.id && delete i.id,
                        !(i = this._parse_model_from_json(i, n.id, n.parents.concat())))
                            return !1;
                        for (a = this.get_node(i),
                        l = [],
                        l.push(i),
                        l = l.concat(a.children_d),
                        this.trigger("model", {
                            nodes: l,
                            parent: n.id
                        }),
                        n.children_d = n.children_d.concat(l),
                        c = 0,
                        h = n.parents.length; c < h; c++)
                            this._model.data[n.parents[c]].children_d = this._model.data[n.parents[c]].children_d.concat(l);
                        for (i = a,
                        a = [],
                        c = 0,
                        h = n.children.length; c < h; c++)
                            a[c >= r ? c + 1 : c] = n.children[c];
                        return a[r] = i.id,
                        n.children = a,
                        this.redraw_node(n, !0),
                        this.trigger("create_node", {
                            node: this.get_node(i),
                            parent: n.id,
                            position: r
                        }),
                        o && o.call(this, this.get_node(i)),
                        i.id
                    },
                    rename_node: function(e, n) {
                        var i, r, o;
                        if (t.isArray(e)) {
                            for (e = e.slice(),
                            i = 0,
                            r = e.length; i < r; i++)
                                this.rename_node(e[i], n);
                            return !0
                        }
                        return !(!(e = this.get_node(e)) || e.id === t.jstree.root) && (o = e.text,
                        this.check("rename_node", e, this.get_parent(e), n) ? (this.set_text(e, n),
                        this.trigger("rename_node", {
                            node: e,
                            text: n,
                            old: o
                        }),
                        !0) : (this.settings.core.error.call(this, this._data.core.last_error),
                        !1))
                    },
                    delete_node: function(e) {
                        var n, i, r, o, s, a, l, c, h, u, d, p;
                        if (t.isArray(e)) {
                            for (e = e.slice(),
                            n = 0,
                            i = e.length; n < i; n++)
                                this.delete_node(e[n]);
                            return !0
                        }
                        if (!(e = this.get_node(e)) || e.id === t.jstree.root)
                            return !1;
                        if (r = this.get_node(e.parent),
                        o = t.inArray(e.id, r.children),
                        u = !1,
                        !this.check("delete_node", e, r, o))
                            return this.settings.core.error.call(this, this._data.core.last_error),
                            !1;
                        for (-1 !== o && (r.children = t.vakata.array_remove(r.children, o)),
                        s = e.children_d.concat([]),
                        s.push(e.id),
                        a = 0,
                        l = e.parents.length; a < l; a++)
                            this._model.data[e.parents[a]].children_d = t.vakata.array_filter(this._model.data[e.parents[a]].children_d, function(e) {
                                return -1 === t.inArray(e, s)
                            });
                        for (c = 0,
                        h = s.length; c < h; c++)
                            if (this._model.data[s[c]].state.selected) {
                                u = !0;
                                break
                            }
                        for (u && (this._data.core.selected = t.vakata.array_filter(this._data.core.selected, function(e) {
                            return -1 === t.inArray(e, s)
                        })),
                        this.trigger("delete_node", {
                            node: e,
                            parent: r.id
                        }),
                        u && this.trigger("changed", {
                            action: "delete_node",
                            node: e,
                            selected: this._data.core.selected,
                            parent: r.id
                        }),
                        c = 0,
                        h = s.length; c < h; c++)
                            delete this._model.data[s[c]];
                        return -1 !== t.inArray(this._data.core.focused, s) && (this._data.core.focused = null,
                        d = this.element[0].scrollTop,
                        p = this.element[0].scrollLeft,
                        r.id === t.jstree.root ? this._model.data[t.jstree.root].children[0] && this.get_node(this._model.data[t.jstree.root].children[0], !0).children(".jstree-anchor").focus() : this.get_node(r, !0).children(".jstree-anchor").focus(),
                        this.element[0].scrollTop = d,
                        this.element[0].scrollLeft = p),
                        this.redraw_node(r, !0),
                        !0
                    },
                    check: function(e, n, i, r, o) {
                        n = n && n.id ? n : this.get_node(n),
                        i = i && i.id ? i : this.get_node(i);
                        var s = e.match(/^move_node|copy_node|create_node$/i) ? i : n
                          , a = this.settings.core.check_callback;
                        return "move_node" !== e && "copy_node" !== e || o && o.is_multi || n.id !== i.id && ("move_node" !== e || t.inArray(n.id, i.children) !== r) && -1 === t.inArray(i.id, n.children_d) ? (s && s.data && (s = s.data),
                        s && s.functions && (!1 === s.functions[e] || !0 === s.functions[e]) ? (!1 === s.functions[e] && (this._data.core.last_error = {
                            error: "check",
                            plugin: "core",
                            id: "core_02",
                            reason: "Node data prevents function: " + e,
                            data: JSON.stringify({
                                chk: e,
                                pos: r,
                                obj: !(!n || !n.id) && n.id,
                                par: !(!i || !i.id) && i.id
                            })
                        }),
                        s.functions[e]) : !(!1 === a || t.isFunction(a) && !1 === a.call(this, e, n, i, r, o) || a && !1 === a[e]) || (this._data.core.last_error = {
                            error: "check",
                            plugin: "core",
                            id: "core_03",
                            reason: "User config for core.check_callback prevents function: " + e,
                            data: JSON.stringify({
                                chk: e,
                                pos: r,
                                obj: !(!n || !n.id) && n.id,
                                par: !(!i || !i.id) && i.id
                            })
                        },
                        !1)) : (this._data.core.last_error = {
                            error: "check",
                            plugin: "core",
                            id: "core_01",
                            reason: "Moving parent inside child",
                            data: JSON.stringify({
                                chk: e,
                                pos: r,
                                obj: !(!n || !n.id) && n.id,
                                par: !(!i || !i.id) && i.id
                            })
                        },
                        !1)
                    },
                    last_error: function() {
                        return this._data.core.last_error
                    },
                    move_node: function(n, i, r, o, s, a, l) {
                        var c, h, u, d, p, f, g, m, _, v, y, b, w, x;
                        if (i = this.get_node(i),
                        r = r === e ? 0 : r,
                        !i)
                            return !1;
                        if (!r.toString().match(/^(before|after)$/) && !s && !this.is_loaded(i))
                            return this.load_node(i, function() {
                                this.move_node(n, i, r, o, !0, !1, l)
                            });
                        if (t.isArray(n)) {
                            if (1 !== n.length) {
                                for (c = 0,
                                h = n.length; c < h; c++)
                                    (_ = this.move_node(n[c], i, r, o, s, !1, l)) && (i = _,
                                    r = "after");
                                return this.redraw(),
                                !0
                            }
                            n = n[0]
                        }
                        if (!(n = n && n.id ? n : this.get_node(n)) || n.id === t.jstree.root)
                            return !1;
                        if (u = (n.parent || t.jstree.root).toString(),
                        p = r.toString().match(/^(before|after)$/) && i.id !== t.jstree.root ? this.get_node(i.parent) : i,
                        f = l || (this._model.data[n.id] ? this : t.jstree.reference(n.id)),
                        g = !f || !f._id || this._id !== f._id,
                        d = f && f._id && u && f._model.data[u] && f._model.data[u].children ? t.inArray(n.id, f._model.data[u].children) : -1,
                        f && f._id && (n = f._model.data[n.id]),
                        g)
                            return !!(_ = this.copy_node(n, i, r, o, s, !1, l)) && (f && f.delete_node(n),
                            _);
                        switch (i.id === t.jstree.root && ("before" === r && (r = "first"),
                        "after" === r && (r = "last")),
                        r) {
                        case "before":
                            r = t.inArray(i.id, p.children);
                            break;
                        case "after":
                            r = t.inArray(i.id, p.children) + 1;
                            break;
                        case "inside":
                        case "first":
                            r = 0;
                            break;
                        case "last":
                            r = p.children.length;
                            break;
                        default:
                            r || (r = 0)
                        }
                        if (r > p.children.length && (r = p.children.length),
                        !this.check("move_node", n, p, r, {
                            core: !0,
                            origin: l,
                            is_multi: f && f._id && f._id !== this._id,
                            is_foreign: !f || !f._id
                        }))
                            return this.settings.core.error.call(this, this._data.core.last_error),
                            !1;
                        if (n.parent === p.id) {
                            for (m = p.children.concat(),
                            _ = t.inArray(n.id, m),
                            -1 !== _ && (m = t.vakata.array_remove(m, _),
                            r > _ && r--),
                            _ = [],
                            v = 0,
                            y = m.length; v < y; v++)
                                _[v >= r ? v + 1 : v] = m[v];
                            _[r] = n.id,
                            p.children = _,
                            this._node_changed(p.id),
                            this.redraw(p.id === t.jstree.root)
                        } else {
                            for (_ = n.children_d.concat(),
                            _.push(n.id),
                            v = 0,
                            y = n.parents.length; v < y; v++) {
                                for (m = [],
                                x = f._model.data[n.parents[v]].children_d,
                                b = 0,
                                w = x.length; b < w; b++)
                                    -1 === t.inArray(x[b], _) && m.push(x[b]);
                                f._model.data[n.parents[v]].children_d = m
                            }
                            for (f._model.data[u].children = t.vakata.array_remove_item(f._model.data[u].children, n.id),
                            v = 0,
                            y = p.parents.length; v < y; v++)
                                this._model.data[p.parents[v]].children_d = this._model.data[p.parents[v]].children_d.concat(_);
                            for (m = [],
                            v = 0,
                            y = p.children.length; v < y; v++)
                                m[v >= r ? v + 1 : v] = p.children[v];
                            for (m[r] = n.id,
                            p.children = m,
                            p.children_d.push(n.id),
                            p.children_d = p.children_d.concat(n.children_d),
                            n.parent = p.id,
                            _ = p.parents.concat(),
                            _.unshift(p.id),
                            x = n.parents.length,
                            n.parents = _,
                            _ = _.concat(),
                            v = 0,
                            y = n.children_d.length; v < y; v++)
                                this._model.data[n.children_d[v]].parents = this._model.data[n.children_d[v]].parents.slice(0, -1 * x),
                                Array.prototype.push.apply(this._model.data[n.children_d[v]].parents, _);
                            u !== t.jstree.root && p.id !== t.jstree.root || (this._model.force_full_redraw = !0),
                            this._model.force_full_redraw || (this._node_changed(u),
                            this._node_changed(p.id)),
                            a || this.redraw()
                        }
                        return o && o.call(this, n, p, r),
                        this.trigger("move_node", {
                            node: n,
                            parent: p.id,
                            position: r,
                            old_parent: u,
                            old_position: d,
                            is_multi: f && f._id && f._id !== this._id,
                            is_foreign: !f || !f._id,
                            old_instance: f,
                            new_instance: this
                        }),
                        n.id
                    },
                    copy_node: function(n, i, r, o, s, a, l) {
                        var c, h, u, d, p, f, g, m, _, v;
                        if (i = this.get_node(i),
                        r = r === e ? 0 : r,
                        !i)
                            return !1;
                        if (!r.toString().match(/^(before|after)$/) && !s && !this.is_loaded(i))
                            return this.load_node(i, function() {
                                this.copy_node(n, i, r, o, !0, !1, l)
                            });
                        if (t.isArray(n)) {
                            if (1 !== n.length) {
                                for (c = 0,
                                h = n.length; c < h; c++)
                                    (d = this.copy_node(n[c], i, r, o, s, !0, l)) && (i = d,
                                    r = "after");
                                return this.redraw(),
                                !0
                            }
                            n = n[0]
                        }
                        if (!(n = n && n.id ? n : this.get_node(n)) || n.id === t.jstree.root)
                            return !1;
                        switch (m = (n.parent || t.jstree.root).toString(),
                        _ = r.toString().match(/^(before|after)$/) && i.id !== t.jstree.root ? this.get_node(i.parent) : i,
                        v = l || (this._model.data[n.id] ? this : t.jstree.reference(n.id)),
                        !v || !v._id || this._id !== v._id,
                        v && v._id && (n = v._model.data[n.id]),
                        i.id === t.jstree.root && ("before" === r && (r = "first"),
                        "after" === r && (r = "last")),
                        r) {
                        case "before":
                            r = t.inArray(i.id, _.children);
                            break;
                        case "after":
                            r = t.inArray(i.id, _.children) + 1;
                            break;
                        case "inside":
                        case "first":
                            r = 0;
                            break;
                        case "last":
                            r = _.children.length;
                            break;
                        default:
                            r || (r = 0)
                        }
                        if (r > _.children.length && (r = _.children.length),
                        !this.check("copy_node", n, _, r, {
                            core: !0,
                            origin: l,
                            is_multi: v && v._id && v._id !== this._id,
                            is_foreign: !v || !v._id
                        }))
                            return this.settings.core.error.call(this, this._data.core.last_error),
                            !1;
                        if (!(g = v ? v.get_json(n, {
                            no_id: !0,
                            no_data: !0,
                            no_state: !0
                        }) : n))
                            return !1;
                        if (!0 === g.id && delete g.id,
                        !(g = this._parse_model_from_json(g, _.id, _.parents.concat())))
                            return !1;
                        for (d = this.get_node(g),
                        n && n.state && !1 === n.state.loaded && (d.state.loaded = !1),
                        u = [],
                        u.push(g),
                        u = u.concat(d.children_d),
                        this.trigger("model", {
                            nodes: u,
                            parent: _.id
                        }),
                        p = 0,
                        f = _.parents.length; p < f; p++)
                            this._model.data[_.parents[p]].children_d = this._model.data[_.parents[p]].children_d.concat(u);
                        for (u = [],
                        p = 0,
                        f = _.children.length; p < f; p++)
                            u[p >= r ? p + 1 : p] = _.children[p];
                        return u[r] = d.id,
                        _.children = u,
                        _.children_d.push(d.id),
                        _.children_d = _.children_d.concat(d.children_d),
                        _.id === t.jstree.root && (this._model.force_full_redraw = !0),
                        this._model.force_full_redraw || this._node_changed(_.id),
                        a || this.redraw(_.id === t.jstree.root),
                        o && o.call(this, d, _, r),
                        this.trigger("copy_node", {
                            node: d,
                            original: n,
                            parent: _.id,
                            position: r,
                            old_parent: m,
                            old_position: v && v._id && m && v._model.data[m] && v._model.data[m].children ? t.inArray(n.id, v._model.data[m].children) : -1,
                            is_multi: v && v._id && v._id !== this._id,
                            is_foreign: !v || !v._id,
                            old_instance: v,
                            new_instance: this
                        }),
                        d.id
                    },
                    cut: function(e) {
                        if (e || (e = this._data.core.selected.concat()),
                        t.isArray(e) || (e = [e]),
                        !e.length)
                            return !1;
                        var n, i, a, l = [];
                        for (i = 0,
                        a = e.length; i < a; i++)
                            (n = this.get_node(e[i])) && n.id && n.id !== t.jstree.root && l.push(n);
                        if (!l.length)
                            return !1;
                        r = l,
                        s = this,
                        o = "move_node",
                        this.trigger("cut", {
                            node: e
                        })
                    },
                    copy: function(e) {
                        if (e || (e = this._data.core.selected.concat()),
                        t.isArray(e) || (e = [e]),
                        !e.length)
                            return !1;
                        var n, i, a, l = [];
                        for (i = 0,
                        a = e.length; i < a; i++)
                            (n = this.get_node(e[i])) && n.id && n.id !== t.jstree.root && l.push(n);
                        if (!l.length)
                            return !1;
                        r = l,
                        s = this,
                        o = "copy_node",
                        this.trigger("copy", {
                            node: e
                        })
                    },
                    get_buffer: function() {
                        return {
                            mode: o,
                            node: r,
                            inst: s
                        }
                    },
                    can_paste: function() {
                        return !1 !== o && !1 !== r
                    },
                    paste: function(t, e) {
                        if (!((t = this.get_node(t)) && o && o.match(/^(copy_node|move_node)$/) && r))
                            return !1;
                        this[o](r, t, e, !1, !1, !1, s) && this.trigger("paste", {
                            parent: t.id,
                            node: r,
                            mode: o
                        }),
                        r = !1,
                        o = !1,
                        s = !1
                    },
                    clear_buffer: function() {
                        r = !1,
                        o = !1,
                        s = !1,
                        this.trigger("clear_buffer")
                    },
                    edit: function(e, n, i) {
                        var r, o, s, a, l, h, u, d, p, f = !1;
                        /*!
			oi = obj.children("i:visible"),
			ai = a.children("i:visible"),
			w1 = oi.width() * oi.length,
			w2 = ai.width() * ai.length,
			*/
                        return !!(e = this.get_node(e)) && (this.check("edit", e, this.get_parent(e)) ? (p = e,
                        n = "string" == typeof n ? n : e.text,
                        this.set_text(e, ""),
                        e = this._open_to(e),
                        p.text = n,
                        r = this._data.core.rtl,
                        o = this.element.width(),
                        this._data.core.focused = p.id,
                        s = e.children(".jstree-anchor").focus(),
                        a = t("<span>"),
                        l = n,
                        h = t("<div />", {
                            css: {
                                position: "absolute",
                                top: "-200px",
                                left: r ? "0px" : "-1000px",
                                visibility: "hidden"
                            }
                        }).appendTo(c.body),
                        u = t("<input />", {
                            value: l,
                            class: "jstree-rename-input",
                            css: {
                                padding: "0",
                                border: "1px solid silver",
                                "box-sizing": "border-box",
                                display: "inline-block",
                                height: this._data.core.li_height + "px",
                                lineHeight: this._data.core.li_height + "px",
                                width: "150px"
                            },
                            blur: t.proxy(function(n) {
                                n.stopImmediatePropagation(),
                                n.preventDefault();
                                var r, o = a.children(".jstree-rename-input"), c = o.val(), d = this.settings.core.force_text;
                                "" === c && (c = l),
                                h.remove(),
                                a.replaceWith(s),
                                a.remove(),
                                l = d ? l : t("<div></div>").append(t.parseHTML(l)).html(),
                                e = this.get_node(e),
                                this.set_text(e, l),
                                r = !!this.rename_node(e, d ? t("<div></div>").text(c).text() : t("<div></div>").append(t.parseHTML(c)).html()),
                                r || this.set_text(e, l),
                                this._data.core.focused = p.id,
                                setTimeout(t.proxy(function() {
                                    var t = this.get_node(p.id, !0);
                                    t.length && (this._data.core.focused = p.id,
                                    t.children(".jstree-anchor").focus())
                                }, this), 0),
                                i && i.call(this, p, r, f),
                                u = null
                            }, this),
                            keydown: function(t) {
                                var e = t.which;
                                27 === e && (f = !0,
                                this.value = l),
                                27 !== e && 13 !== e && 37 !== e && 38 !== e && 39 !== e && 40 !== e && 32 !== e || t.stopImmediatePropagation(),
                                27 !== e && 13 !== e || (t.preventDefault(),
                                this.blur())
                            },
                            click: function(t) {
                                t.stopImmediatePropagation()
                            },
                            mousedown: function(t) {
                                t.stopImmediatePropagation()
                            },
                            keyup: function(t) {
                                u.width(Math.min(h.text("pW" + this.value).width(), o))
                            },
                            keypress: function(t) {
                                if (13 === t.which)
                                    return !1
                            }
                        }),
                        d = {
                            fontFamily: s.css("fontFamily") || "",
                            fontSize: s.css("fontSize") || "",
                            fontWeight: s.css("fontWeight") || "",
                            fontStyle: s.css("fontStyle") || "",
                            fontStretch: s.css("fontStretch") || "",
                            fontVariant: s.css("fontVariant") || "",
                            letterSpacing: s.css("letterSpacing") || "",
                            wordSpacing: s.css("wordSpacing") || ""
                        },
                        a.attr("class", s.attr("class")).append(s.contents().clone()).append(u),
                        s.replaceWith(a),
                        h.css(d),
                        u.css(d).width(Math.min(h.text("pW" + u[0].value).width(), o))[0].select(),
                        void t(c).one("mousedown.jstree touchstart.jstree dnd_start.vakata", function(e) {
                            u && e.target !== u && t(u).blur()
                        })) : (this.settings.core.error.call(this, this._data.core.last_error),
                        !1))
                    },
                    set_theme: function(e, n) {
                        if (!e)
                            return !1;
                        if (!0 === n) {
                            var i = this.settings.core.themes.dir;
                            i || (i = t.jstree.path + "/themes"),
                            n = i + "/" + e + "/style.css"
                        }
                        n && -1 === t.inArray(n, a) && (t("head").append('<link rel="stylesheet" href="' + n + '" type="text/css" />'),
                        a.push(n)),
                        this._data.core.themes.name && this.element.removeClass("jstree-" + this._data.core.themes.name),
                        this._data.core.themes.name = e,
                        this.element.addClass("jstree-" + e),
                        this.element[this.settings.core.themes.responsive ? "addClass" : "removeClass"]("jstree-" + e + "-responsive"),
                        this.trigger("set_theme", {
                            theme: e
                        })
                    },
                    get_theme: function() {
                        return this._data.core.themes.name
                    },
                    set_theme_variant: function(t) {
                        this._data.core.themes.variant && this.element.removeClass("jstree-" + this._data.core.themes.name + "-" + this._data.core.themes.variant),
                        this._data.core.themes.variant = t,
                        t && this.element.addClass("jstree-" + this._data.core.themes.name + "-" + this._data.core.themes.variant)
                    },
                    get_theme_variant: function() {
                        return this._data.core.themes.variant
                    },
                    show_stripes: function() {
                        this._data.core.themes.stripes = !0,
                        this.get_container_ul().addClass("jstree-striped"),
                        this.trigger("show_stripes")
                    },
                    hide_stripes: function() {
                        this._data.core.themes.stripes = !1,
                        this.get_container_ul().removeClass("jstree-striped"),
                        this.trigger("hide_stripes")
                    },
                    toggle_stripes: function() {
                        this._data.core.themes.stripes ? this.hide_stripes() : this.show_stripes()
                    },
                    show_dots: function() {
                        this._data.core.themes.dots = !0,
                        this.get_container_ul().removeClass("jstree-no-dots"),
                        this.trigger("show_dots")
                    },
                    hide_dots: function() {
                        this._data.core.themes.dots = !1,
                        this.get_container_ul().addClass("jstree-no-dots"),
                        this.trigger("hide_dots")
                    },
                    toggle_dots: function() {
                        this._data.core.themes.dots ? this.hide_dots() : this.show_dots()
                    },
                    show_icons: function() {
                        this._data.core.themes.icons = !0,
                        this.get_container_ul().removeClass("jstree-no-icons"),
                        this.trigger("show_icons")
                    },
                    hide_icons: function() {
                        this._data.core.themes.icons = !1,
                        this.get_container_ul().addClass("jstree-no-icons"),
                        this.trigger("hide_icons")
                    },
                    toggle_icons: function() {
                        this._data.core.themes.icons ? this.hide_icons() : this.show_icons()
                    },
                    show_ellipsis: function() {
                        this._data.core.themes.ellipsis = !0,
                        this.get_container_ul().addClass("jstree-ellipsis"),
                        this.trigger("show_ellipsis")
                    },
                    hide_ellipsis: function() {
                        this._data.core.themes.ellipsis = !1,
                        this.get_container_ul().removeClass("jstree-ellipsis"),
                        this.trigger("hide_ellipsis")
                    },
                    toggle_ellipsis: function() {
                        this._data.core.themes.ellipsis ? this.hide_ellipsis() : this.show_ellipsis()
                    },
                    set_icon: function(n, i) {
                        var r, o, s, a;
                        if (t.isArray(n)) {
                            for (n = n.slice(),
                            r = 0,
                            o = n.length; r < o; r++)
                                this.set_icon(n[r], i);
                            return !0
                        }
                        return !(!(n = this.get_node(n)) || n.id === t.jstree.root) && (a = n.icon,
                        n.icon = !0 === i || null === i || i === e || "" === i || i,
                        s = this.get_node(n, !0).children(".jstree-anchor").children(".jstree-themeicon"),
                        !1 === i ? (s.removeClass("jstree-themeicon-custom " + a).css("background", "").removeAttr("rel"),
                        this.hide_icon(n)) : !0 === i || null === i || i === e || "" === i ? (s.removeClass("jstree-themeicon-custom " + a).css("background", "").removeAttr("rel"),
                        !1 === a && this.show_icon(n)) : -1 === i.indexOf("/") && -1 === i.indexOf(".") ? (s.removeClass(a).css("background", ""),
                        s.addClass(i + " jstree-themeicon-custom").attr("rel", i),
                        !1 === a && this.show_icon(n)) : (s.removeClass(a).css("background", ""),
                        s.addClass("jstree-themeicon-custom").css("background", "url('" + i + "') center center no-repeat").attr("rel", i),
                        !1 === a && this.show_icon(n)),
                        !0)
                    },
                    get_icon: function(e) {
                        return !(!(e = this.get_node(e)) || e.id === t.jstree.root) && e.icon
                    },
                    hide_icon: function(e) {
                        var n, i;
                        if (t.isArray(e)) {
                            for (e = e.slice(),
                            n = 0,
                            i = e.length; n < i; n++)
                                this.hide_icon(e[n]);
                            return !0
                        }
                        return !(!(e = this.get_node(e)) || e === t.jstree.root) && (e.icon = !1,
                        this.get_node(e, !0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),
                        !0)
                    },
                    show_icon: function(e) {
                        var n, i, r;
                        if (t.isArray(e)) {
                            for (e = e.slice(),
                            n = 0,
                            i = e.length; n < i; n++)
                                this.show_icon(e[n]);
                            return !0
                        }
                        return !(!(e = this.get_node(e)) || e === t.jstree.root) && (r = this.get_node(e, !0),
                        e.icon = !r.length || r.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),
                        e.icon || (e.icon = !0),
                        r.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),
                        !0)
                    }
                },
                t.vakata = {},
                t.vakata.attributes = function(e, n) {
                    e = t(e)[0];
                    var i = n ? {} : [];
                    return e && e.attributes && t.each(e.attributes, function(e, r) {
                        -1 === t.inArray(r.name.toLowerCase(), ["style", "contenteditable", "hasfocus", "tabindex"]) && null !== r.value && "" !== t.trim(r.value) && (n ? i[r.name] = r.value : i.push(r.name))
                    }),
                    i
                }
                ,
                t.vakata.array_unique = function(t) {
                    var n, i, r = [], o = {};
                    for (n = 0,
                    i = t.length; n < i; n++)
                        o[t[n]] === e && (r.push(t[n]),
                        o[t[n]] = !0);
                    return r
                }
                ,
                t.vakata.array_remove = function(t, e) {
                    return t.splice(e, 1),
                    t
                }
                ,
                t.vakata.array_remove_item = function(e, n) {
                    var i = t.inArray(n, e);
                    return -1 !== i ? t.vakata.array_remove(e, i) : e
                }
                ,
                t.vakata.array_filter = function(t, e, n, i, r) {
                    if (t.filter)
                        return t.filter(e, n);
                    i = [];
                    for (r in t)
                        ~~r + "" == r + "" && r >= 0 && e.call(n, t[r], +r, t) && i.push(t[r]);
                    return i
                }
                ,
                t.jstree.plugins.changed = function(t, e) {
                    var n = [];
                    this.trigger = function(t, i) {
                        var r, o;
                        if (i || (i = {}),
                        "changed" === t.replace(".jstree", "")) {
                            i.changed = {
                                selected: [],
                                deselected: []
                            };
                            var s = {};
                            for (r = 0,
                            o = n.length; r < o; r++)
                                s[n[r]] = 1;
                            for (r = 0,
                            o = i.selected.length; r < o; r++)
                                s[i.selected[r]] ? s[i.selected[r]] = 2 : i.changed.selected.push(i.selected[r]);
                            for (r = 0,
                            o = n.length; r < o; r++)
                                1 === s[n[r]] && i.changed.deselected.push(n[r]);
                            n = i.selected.slice()
                        }
                        e.trigger.call(this, t, i)
                    }
                    ,
                    this.refresh = function(t, i) {
                        return n = [],
                        e.refresh.apply(this, arguments)
                    }
                }
                ;
                var h = c.createElement("I");
                h.className = "jstree-icon jstree-checkbox",
                h.setAttribute("role", "presentation"),
                t.jstree.defaults.checkbox = {
                    visible: !0,
                    three_state: !0,
                    whole_node: !0,
                    keep_selected_style: !0,
                    cascade: "",
                    tie_selection: !0,
                    cascade_to_disabled: !0,
                    cascade_to_hidden: !0
                },
                t.jstree.plugins.checkbox = function(n, i) {
                    this.bind = function() {
                        i.bind.call(this),
                        this._data.checkbox.uto = !1,
                        this._data.checkbox.selected = [],
                        this.settings.checkbox.three_state && (this.settings.checkbox.cascade = "up+down+undetermined"),
                        this.element.on("init.jstree", t.proxy(function() {
                            this._data.checkbox.visible = this.settings.checkbox.visible,
                            this.settings.checkbox.keep_selected_style || this.element.addClass("jstree-checkbox-no-clicked"),
                            this.settings.checkbox.tie_selection && this.element.addClass("jstree-checkbox-selection")
                        }, this)).on("loading.jstree", t.proxy(function() {
                            this[this._data.checkbox.visible ? "show_checkboxes" : "hide_checkboxes"]()
                        }, this)),
                        -1 !== this.settings.checkbox.cascade.indexOf("undetermined") && this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree", t.proxy(function() {
                            this._data.checkbox.uto && clearTimeout(this._data.checkbox.uto),
                            this._data.checkbox.uto = setTimeout(t.proxy(this._undetermined, this), 50)
                        }, this)),
                        this.settings.checkbox.tie_selection || this.element.on("model.jstree", t.proxy(function(t, e) {
                            var n, i, r = this._model.data, o = (r[e.parent],
                            e.nodes);
                            for (n = 0,
                            i = o.length; n < i; n++)
                                r[o[n]].state.checked = r[o[n]].state.checked || r[o[n]].original && r[o[n]].original.state && r[o[n]].original.state.checked,
                                r[o[n]].state.checked && this._data.checkbox.selected.push(o[n])
                        }, this)),
                        -1 === this.settings.checkbox.cascade.indexOf("up") && -1 === this.settings.checkbox.cascade.indexOf("down") || this.element.on("model.jstree", t.proxy(function(e, n) {
                            var i, r, o, s, a, l, c = this._model.data, h = c[n.parent], u = n.nodes, d = [], p = this.settings.checkbox.cascade, f = this.settings.checkbox.tie_selection;
                            if (-1 !== p.indexOf("down"))
                                if (h.state[f ? "selected" : "checked"]) {
                                    for (r = 0,
                                    o = u.length; r < o; r++)
                                        c[u[r]].state[f ? "selected" : "checked"] = !0;
                                    this._data[f ? "core" : "checkbox"].selected = this._data[f ? "core" : "checkbox"].selected.concat(u)
                                } else
                                    for (r = 0,
                                    o = u.length; r < o; r++)
                                        if (c[u[r]].state[f ? "selected" : "checked"]) {
                                            for (s = 0,
                                            a = c[u[r]].children_d.length; s < a; s++)
                                                c[c[u[r]].children_d[s]].state[f ? "selected" : "checked"] = !0;
                                            this._data[f ? "core" : "checkbox"].selected = this._data[f ? "core" : "checkbox"].selected.concat(c[u[r]].children_d)
                                        }
                            if (-1 !== p.indexOf("up")) {
                                for (r = 0,
                                o = h.children_d.length; r < o; r++)
                                    c[h.children_d[r]].children.length || d.push(c[h.children_d[r]].parent);
                                for (d = t.vakata.array_unique(d),
                                s = 0,
                                a = d.length; s < a; s++)
                                    for (h = c[d[s]]; h && h.id !== t.jstree.root; ) {
                                        for (i = 0,
                                        r = 0,
                                        o = h.children.length; r < o; r++)
                                            i += c[h.children[r]].state[f ? "selected" : "checked"];
                                        if (i !== o)
                                            break;
                                        h.state[f ? "selected" : "checked"] = !0,
                                        this._data[f ? "core" : "checkbox"].selected.push(h.id),
                                        (l = this.get_node(h, !0)) && l.length && l.attr("aria-selected", !0).children(".jstree-anchor").addClass(f ? "jstree-clicked" : "jstree-checked"),
                                        h = this.get_node(h.parent)
                                    }
                            }
                            this._data[f ? "core" : "checkbox"].selected = t.vakata.array_unique(this._data[f ? "core" : "checkbox"].selected)
                        }, this)).on(this.settings.checkbox.tie_selection ? "select_node.jstree" : "check_node.jstree", t.proxy(function(e, n) {
                            var i, r, o, s, a = n.node, l = this._model.data, c = this.get_node(a.parent), h = this.settings.checkbox.cascade, u = this.settings.checkbox.tie_selection, d = {}, p = this._data[u ? "core" : "checkbox"].selected;
                            for (i = 0,
                            r = p.length; i < r; i++)
                                d[p[i]] = !0;
                            if (-1 !== h.indexOf("down")) {
                                var f = this._cascade_new_checked_state(a.id, !0)
                                  , g = a.children_d.concat(a.id);
                                for (i = 0,
                                r = g.length; i < r; i++)
                                    f.indexOf(g[i]) > -1 ? d[g[i]] = !0 : delete d[g[i]]
                            }
                            if (-1 !== h.indexOf("up"))
                                for (; c && c.id !== t.jstree.root; ) {
                                    for (o = 0,
                                    i = 0,
                                    r = c.children.length; i < r; i++)
                                        o += l[c.children[i]].state[u ? "selected" : "checked"];
                                    if (o !== r)
                                        break;
                                    c.state[u ? "selected" : "checked"] = !0,
                                    d[c.id] = !0,
                                    (s = this.get_node(c, !0)) && s.length && s.attr("aria-selected", !0).children(".jstree-anchor").addClass(u ? "jstree-clicked" : "jstree-checked"),
                                    c = this.get_node(c.parent)
                                }
                            p = [];
                            for (i in d)
                                d.hasOwnProperty(i) && p.push(i);
                            this._data[u ? "core" : "checkbox"].selected = p
                        }, this)).on(this.settings.checkbox.tie_selection ? "deselect_all.jstree" : "uncheck_all.jstree", t.proxy(function(e, n) {
                            var i, r, o, s = this.get_node(t.jstree.root), a = this._model.data;
                            for (i = 0,
                            r = s.children_d.length; i < r; i++)
                                (o = a[s.children_d[i]]) && o.original && o.original.state && o.original.state.undetermined && (o.original.state.undetermined = !1)
                        }, this)).on(this.settings.checkbox.tie_selection ? "deselect_node.jstree" : "uncheck_node.jstree", t.proxy(function(t, e) {
                            var n, i, r, o = e.node, s = (this.get_node(o, !0),
                            this.settings.checkbox.cascade), a = this.settings.checkbox.tie_selection, l = this._data[a ? "core" : "checkbox"].selected, c = o.children_d.concat(o.id);
                            if (-1 !== s.indexOf("down")) {
                                var h = this._cascade_new_checked_state(o.id, !1);
                                l = l.filter(function(t) {
                                    return -1 === c.indexOf(t) || h.indexOf(t) > -1
                                })
                            }
                            if (-1 !== s.indexOf("up") && -1 === l.indexOf(o.id)) {
                                for (n = 0,
                                i = o.parents.length; n < i; n++)
                                    r = this._model.data[o.parents[n]],
                                    r.state[a ? "selected" : "checked"] = !1,
                                    r && r.original && r.original.state && r.original.state.undetermined && (r.original.state.undetermined = !1),
                                    (r = this.get_node(o.parents[n], !0)) && r.length && r.attr("aria-selected", !1).children(".jstree-anchor").removeClass(a ? "jstree-clicked" : "jstree-checked");
                                l = l.filter(function(t) {
                                    return -1 === o.parents.indexOf(t)
                                })
                            }
                            this._data[a ? "core" : "checkbox"].selected = l
                        }, this)),
                        -1 !== this.settings.checkbox.cascade.indexOf("up") && this.element.on("delete_node.jstree", t.proxy(function(e, n) {
                            for (var i, r, o, s, a = this.get_node(n.parent), l = this._model.data, c = this.settings.checkbox.tie_selection; a && a.id !== t.jstree.root && !a.state[c ? "selected" : "checked"]; ) {
                                for (o = 0,
                                i = 0,
                                r = a.children.length; i < r; i++)
                                    o += l[a.children[i]].state[c ? "selected" : "checked"];
                                if (!(r > 0 && o === r))
                                    break;
                                a.state[c ? "selected" : "checked"] = !0,
                                this._data[c ? "core" : "checkbox"].selected.push(a.id),
                                (s = this.get_node(a, !0)) && s.length && s.attr("aria-selected", !0).children(".jstree-anchor").addClass(c ? "jstree-clicked" : "jstree-checked"),
                                a = this.get_node(a.parent)
                            }
                        }, this)).on("move_node.jstree", t.proxy(function(e, n) {
                            var i, r, o, s, a, l = n.is_multi, c = n.old_parent, h = this.get_node(n.parent), u = this._model.data, d = this.settings.checkbox.tie_selection;
                            if (!l)
                                for (i = this.get_node(c); i && i.id !== t.jstree.root && !i.state[d ? "selected" : "checked"]; ) {
                                    for (r = 0,
                                    o = 0,
                                    s = i.children.length; o < s; o++)
                                        r += u[i.children[o]].state[d ? "selected" : "checked"];
                                    if (!(s > 0 && r === s))
                                        break;
                                    i.state[d ? "selected" : "checked"] = !0,
                                    this._data[d ? "core" : "checkbox"].selected.push(i.id),
                                    (a = this.get_node(i, !0)) && a.length && a.attr("aria-selected", !0).children(".jstree-anchor").addClass(d ? "jstree-clicked" : "jstree-checked"),
                                    i = this.get_node(i.parent)
                                }
                            for (i = h; i && i.id !== t.jstree.root; ) {
                                for (r = 0,
                                o = 0,
                                s = i.children.length; o < s; o++)
                                    r += u[i.children[o]].state[d ? "selected" : "checked"];
                                if (r === s)
                                    i.state[d ? "selected" : "checked"] || (i.state[d ? "selected" : "checked"] = !0,
                                    this._data[d ? "core" : "checkbox"].selected.push(i.id),
                                    (a = this.get_node(i, !0)) && a.length && a.attr("aria-selected", !0).children(".jstree-anchor").addClass(d ? "jstree-clicked" : "jstree-checked"));
                                else {
                                    if (!i.state[d ? "selected" : "checked"])
                                        break;
                                    i.state[d ? "selected" : "checked"] = !1,
                                    this._data[d ? "core" : "checkbox"].selected = t.vakata.array_remove_item(this._data[d ? "core" : "checkbox"].selected, i.id),
                                    (a = this.get_node(i, !0)) && a.length && a.attr("aria-selected", !1).children(".jstree-anchor").removeClass(d ? "jstree-clicked" : "jstree-checked")
                                }
                                i = this.get_node(i.parent)
                            }
                        }, this))
                    }
                    ,
                    this.get_undetermined = function(n) {
                        if (-1 === this.settings.checkbox.cascade.indexOf("undetermined"))
                            return [];
                        var i, r, o, s, a = {}, l = this._model.data, c = this.settings.checkbox.tie_selection, h = this._data[c ? "core" : "checkbox"].selected, u = [], d = this, p = [];
                        for (i = 0,
                        r = h.length; i < r; i++)
                            if (l[h[i]] && l[h[i]].parents)
                                for (o = 0,
                                s = l[h[i]].parents.length; o < s && a[l[h[i]].parents[o]] === e; o++)
                                    l[h[i]].parents[o] !== t.jstree.root && (a[l[h[i]].parents[o]] = !0,
                                    u.push(l[h[i]].parents[o]));
                        for (this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function() {
                            var n, c = d.get_node(this);
                            if (c)
                                if (c.state.loaded) {
                                    for (i = 0,
                                    r = c.children_d.length; i < r; i++)
                                        if (n = l[c.children_d[i]],
                                        !n.state.loaded && n.original && n.original.state && n.original.state.undetermined && !0 === n.original.state.undetermined)
                                            for (a[n.id] === e && n.id !== t.jstree.root && (a[n.id] = !0,
                                            u.push(n.id)),
                                            o = 0,
                                            s = n.parents.length; o < s; o++)
                                                a[n.parents[o]] === e && n.parents[o] !== t.jstree.root && (a[n.parents[o]] = !0,
                                                u.push(n.parents[o]))
                                } else if (c.original && c.original.state && c.original.state.undetermined && !0 === c.original.state.undetermined)
                                    for (a[c.id] === e && c.id !== t.jstree.root && (a[c.id] = !0,
                                    u.push(c.id)),
                                    o = 0,
                                    s = c.parents.length; o < s; o++)
                                        a[c.parents[o]] === e && c.parents[o] !== t.jstree.root && (a[c.parents[o]] = !0,
                                        u.push(c.parents[o]))
                        }),
                        i = 0,
                        r = u.length; i < r; i++)
                            l[u[i]].state[c ? "selected" : "checked"] || p.push(n ? l[u[i]] : u[i]);
                        return p
                    }
                    ,
                    this._undetermined = function() {
                        if (null !== this.element) {
                            var t, e, n, i = this.get_undetermined(!1);
                            for (this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),
                            t = 0,
                            e = i.length; t < e; t++)
                                (n = this.get_node(i[t], !0)) && n.length && n.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")
                        }
                    }
                    ,
                    this.redraw_node = function(e, n, r, o) {
                        if (e = i.redraw_node.apply(this, arguments)) {
                            var s, a, l = null, c = null;
                            for (s = 0,
                            a = e.childNodes.length; s < a; s++)
                                if (e.childNodes[s] && e.childNodes[s].className && -1 !== e.childNodes[s].className.indexOf("jstree-anchor")) {
                                    l = e.childNodes[s];
                                    break
                                }
                            l && (!this.settings.checkbox.tie_selection && this._model.data[e.id].state.checked && (l.className += " jstree-checked"),
                            c = h.cloneNode(!1),
                            this._model.data[e.id].state.checkbox_disabled && (c.className += " jstree-checkbox-disabled"),
                            l.insertBefore(c, l.childNodes[0]))
                        }
                        return r || -1 === this.settings.checkbox.cascade.indexOf("undetermined") || (this._data.checkbox.uto && clearTimeout(this._data.checkbox.uto),
                        this._data.checkbox.uto = setTimeout(t.proxy(this._undetermined, this), 50)),
                        e
                    }
                    ,
                    this.show_checkboxes = function() {
                        this._data.core.themes.checkboxes = !0,
                        this.get_container_ul().removeClass("jstree-no-checkboxes")
                    }
                    ,
                    this.hide_checkboxes = function() {
                        this._data.core.themes.checkboxes = !1,
                        this.get_container_ul().addClass("jstree-no-checkboxes")
                    }
                    ,
                    this.toggle_checkboxes = function() {
                        this._data.core.themes.checkboxes ? this.hide_checkboxes() : this.show_checkboxes()
                    }
                    ,
                    this.is_undetermined = function(e) {
                        e = this.get_node(e);
                        var n, i, r = this.settings.checkbox.cascade, o = this.settings.checkbox.tie_selection, s = this._data[o ? "core" : "checkbox"].selected, a = this._model.data;
                        if (!e || !0 === e.state[o ? "selected" : "checked"] || -1 === r.indexOf("undetermined") || -1 === r.indexOf("down") && -1 === r.indexOf("up"))
                            return !1;
                        if (!e.state.loaded && !0 === e.original.state.undetermined)
                            return !0;
                        for (n = 0,
                        i = e.children_d.length; n < i; n++)
                            if (-1 !== t.inArray(e.children_d[n], s) || !a[e.children_d[n]].state.loaded && a[e.children_d[n]].original.state.undetermined)
                                return !0;
                        return !1
                    }
                    ,
                    this.disable_checkbox = function(e) {
                        var n, i, r;
                        if (t.isArray(e)) {
                            for (e = e.slice(),
                            n = 0,
                            i = e.length; n < i; n++)
                                this.disable_checkbox(e[n]);
                            return !0
                        }
                        if (!(e = this.get_node(e)) || e.id === t.jstree.root)
                            return !1;
                        r = this.get_node(e, !0),
                        e.state.checkbox_disabled || (e.state.checkbox_disabled = !0,
                        r && r.length && r.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),
                        this.trigger("disable_checkbox", {
                            node: e
                        }))
                    }
                    ,
                    this.enable_checkbox = function(e) {
                        var n, i, r;
                        if (t.isArray(e)) {
                            for (e = e.slice(),
                            n = 0,
                            i = e.length; n < i; n++)
                                this.enable_checkbox(e[n]);
                            return !0
                        }
                        if (!(e = this.get_node(e)) || e.id === t.jstree.root)
                            return !1;
                        r = this.get_node(e, !0),
                        e.state.checkbox_disabled && (e.state.checkbox_disabled = !1,
                        r && r.length && r.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),
                        this.trigger("enable_checkbox", {
                            node: e
                        }))
                    }
                    ,
                    this.activate_node = function(e, n) {
                        return !t(n.target).hasClass("jstree-checkbox-disabled") && (this.settings.checkbox.tie_selection && (this.settings.checkbox.whole_node || t(n.target).hasClass("jstree-checkbox")) && (n.ctrlKey = !0),
                        this.settings.checkbox.tie_selection || !this.settings.checkbox.whole_node && !t(n.target).hasClass("jstree-checkbox") ? i.activate_node.call(this, e, n) : !this.is_disabled(e) && (this.is_checked(e) ? this.uncheck_node(e, n) : this.check_node(e, n),
                        void this.trigger("activate_node", {
                            node: this.get_node(e)
                        })))
                    }
                    ,
                    this._cascade_new_checked_state = function(t, e) {
                        var n, i, r, o = this, s = this.settings.checkbox.tie_selection, a = this._model.data[t], l = [], c = [];
                        if (!this.settings.checkbox.cascade_to_disabled && a.state.disabled || !this.settings.checkbox.cascade_to_hidden && a.state.hidden)
                            r = this.get_checked_descendants(t),
                            a.state[s ? "selected" : "checked"] && r.push(a.id),
                            l = l.concat(r);
                        else {
                            if (a.children)
                                for (n = 0,
                                i = a.children.length; n < i; n++) {
                                    var h = a.children[n];
                                    r = o._cascade_new_checked_state(h, e),
                                    l = l.concat(r),
                                    r.indexOf(h) > -1 && c.push(h)
                                }
                            var u = o.get_node(a, !0)
                              , d = c.length > 0 && c.length < a.children.length;
                            a.original && a.original.state && a.original.state.undetermined && (a.original.state.undetermined = d),
                            d ? (a.state[s ? "selected" : "checked"] = !1,
                            u.attr("aria-selected", !1).children(".jstree-anchor").removeClass(s ? "jstree-clicked" : "jstree-checked")) : e && c.length === a.children.length ? (a.state[s ? "selected" : "checked"] = e,
                            l.push(a.id),
                            u.attr("aria-selected", !0).children(".jstree-anchor").addClass(s ? "jstree-clicked" : "jstree-checked")) : (a.state[s ? "selected" : "checked"] = !1,
                            u.attr("aria-selected", !1).children(".jstree-anchor").removeClass(s ? "jstree-clicked" : "jstree-checked"))
                        }
                        return l
                    }
                    ,
                    this.get_checked_descendants = function(t) {
                        var e = this
                          , n = e.settings.checkbox.tie_selection;
                        return e._model.data[t].children_d.filter(function(t) {
                            return e._model.data[t].state[n ? "selected" : "checked"]
                        })
                    }
                    ,
                    this.check_node = function(e, n) {
                        if (this.settings.checkbox.tie_selection)
                            return this.select_node(e, !1, !0, n);
                        var i, r, o;
                        if (t.isArray(e)) {
                            for (e = e.slice(),
                            r = 0,
                            o = e.length; r < o; r++)
                                this.check_node(e[r], n);
                            return !0
                        }
                        if (!(e = this.get_node(e)) || e.id === t.jstree.root)
                            return !1;
                        i = this.get_node(e, !0),
                        e.state.checked || (e.state.checked = !0,
                        this._data.checkbox.selected.push(e.id),
                        i && i.length && i.children(".jstree-anchor").addClass("jstree-checked"),
                        this.trigger("check_node", {
                            node: e,
                            selected: this._data.checkbox.selected,
                            event: n
                        }))
                    }
                    ,
                    this.uncheck_node = function(e, n) {
                        if (this.settings.checkbox.tie_selection)
                            return this.deselect_node(e, !1, n);
                        var i, r, o;
                        if (t.isArray(e)) {
                            for (e = e.slice(),
                            i = 0,
                            r = e.length; i < r; i++)
                                this.uncheck_node(e[i], n);
                            return !0
                        }
                        if (!(e = this.get_node(e)) || e.id === t.jstree.root)
                            return !1;
                        o = this.get_node(e, !0),
                        e.state.checked && (e.state.checked = !1,
                        this._data.checkbox.selected = t.vakata.array_remove_item(this._data.checkbox.selected, e.id),
                        o.length && o.children(".jstree-anchor").removeClass("jstree-checked"),
                        this.trigger("uncheck_node", {
                            node: e,
                            selected: this._data.checkbox.selected,
                            event: n
                        }))
                    }
                    ,
                    this.check_all = function() {
                        if (this.settings.checkbox.tie_selection)
                            return this.select_all();
                        var e, n;
                        this._data.checkbox.selected.concat([]);
                        for (this._data.checkbox.selected = this._model.data[t.jstree.root].children_d.concat(),
                        e = 0,
                        n = this._data.checkbox.selected.length; e < n; e++)
                            this._model.data[this._data.checkbox.selected[e]] && (this._model.data[this._data.checkbox.selected[e]].state.checked = !0);
                        this.redraw(!0),
                        this.trigger("check_all", {
                            selected: this._data.checkbox.selected
                        })
                    }
                    ,
                    this.uncheck_all = function() {
                        if (this.settings.checkbox.tie_selection)
                            return this.deselect_all();
                        var t, e, n = this._data.checkbox.selected.concat([]);
                        for (t = 0,
                        e = this._data.checkbox.selected.length; t < e; t++)
                            this._model.data[this._data.checkbox.selected[t]] && (this._model.data[this._data.checkbox.selected[t]].state.checked = !1);
                        this._data.checkbox.selected = [],
                        this.element.find(".jstree-checked").removeClass("jstree-checked"),
                        this.trigger("uncheck_all", {
                            selected: this._data.checkbox.selected,
                            node: n
                        })
                    }
                    ,
                    this.is_checked = function(e) {
                        return this.settings.checkbox.tie_selection ? this.is_selected(e) : !(!(e = this.get_node(e)) || e.id === t.jstree.root) && e.state.checked
                    }
                    ,
                    this.get_checked = function(e) {
                        return this.settings.checkbox.tie_selection ? this.get_selected(e) : e ? t.map(this._data.checkbox.selected, t.proxy(function(t) {
                            return this.get_node(t)
                        }, this)) : this._data.checkbox.selected
                    }
                    ,
                    this.get_top_checked = function(e) {
                        if (this.settings.checkbox.tie_selection)
                            return this.get_top_selected(e);
                        var n, i, r, o, s = this.get_checked(!0), a = {};
                        for (n = 0,
                        i = s.length; n < i; n++)
                            a[s[n].id] = s[n];
                        for (n = 0,
                        i = s.length; n < i; n++)
                            for (r = 0,
                            o = s[n].children_d.length; r < o; r++)
                                a[s[n].children_d[r]] && delete a[s[n].children_d[r]];
                        s = [];
                        for (n in a)
                            a.hasOwnProperty(n) && s.push(n);
                        return e ? t.map(s, t.proxy(function(t) {
                            return this.get_node(t)
                        }, this)) : s
                    }
                    ,
                    this.get_bottom_checked = function(e) {
                        if (this.settings.checkbox.tie_selection)
                            return this.get_bottom_selected(e);
                        var n, i, r = this.get_checked(!0), o = [];
                        for (n = 0,
                        i = r.length; n < i; n++)
                            r[n].children.length || o.push(r[n].id);
                        return e ? t.map(o, t.proxy(function(t) {
                            return this.get_node(t)
                        }, this)) : o
                    }
                    ,
                    this.load_node = function(e, n) {
                        var r, o, s;
                        if (!t.isArray(e) && !this.settings.checkbox.tie_selection && (s = this.get_node(e)) && s.state.loaded)
                            for (r = 0,
                            o = s.children_d.length; r < o; r++)
                                this._model.data[s.children_d[r]].state.checked && (!0,
                                this._data.checkbox.selected = t.vakata.array_remove_item(this._data.checkbox.selected, s.children_d[r]));
                        return i.load_node.apply(this, arguments)
                    }
                    ,
                    this.get_state = function() {
                        var t = i.get_state.apply(this, arguments);
                        return this.settings.checkbox.tie_selection ? t : (t.checkbox = this._data.checkbox.selected.slice(),
                        t)
                    }
                    ,
                    this.set_state = function(e, n) {
                        var r = i.set_state.apply(this, arguments);
                        if (r && e.checkbox) {
                            if (!this.settings.checkbox.tie_selection) {
                                this.uncheck_all();
                                var o = this;
                                t.each(e.checkbox, function(t, e) {
                                    o.check_node(e)
                                })
                            }
                            return delete e.checkbox,
                            this.set_state(e, n),
                            !1
                        }
                        return r
                    }
                    ,
                    this.refresh = function(t, e) {
                        return this.settings.checkbox.tie_selection && (this._data.checkbox.selected = []),
                        i.refresh.apply(this, arguments)
                    }
                }
                ,
                t.jstree.defaults.conditionalselect = function() {
                    return !0
                }
                ,
                t.jstree.plugins.conditionalselect = function(t, e) {
                    this.activate_node = function(t, n) {
                        if (this.settings.conditionalselect.call(this, this.get_node(t), n))
                            return e.activate_node.call(this, t, n)
                    }
                }
                ,
                t.jstree.defaults.contextmenu = {
                    select_node: !0,
                    show_at_node: !0,
                    items: function(e, n) {
                        return {
                            create: {
                                separator_before: !1,
                                separator_after: !0,
                                _disabled: !1,
                                label: "Create",
                                action: function(e) {
                                    var n = t.jstree.reference(e.reference)
                                      , i = n.get_node(e.reference);
                                    n.create_node(i, {}, "last", function(t) {
                                        try {
                                            n.edit(t)
                                        } catch (e) {
                                            setTimeout(function() {
                                                n.edit(t)
                                            }, 0)
                                        }
                                    })
                                }
                            },
                            rename: {
                                separator_before: !1,
                                separator_after: !1,
                                _disabled: !1,
                                label: "Rename",
                                /*!
					"shortcut"			: 113,
					"shortcut_label"	: 'F2',
					"icon"				: "glyphicon glyphicon-leaf",
					*/
                                action: function(e) {
                                    var n = t.jstree.reference(e.reference)
                                      , i = n.get_node(e.reference);
                                    n.edit(i)
                                }
                            },
                            remove: {
                                separator_before: !1,
                                icon: !1,
                                separator_after: !1,
                                _disabled: !1,
                                label: "Delete",
                                action: function(e) {
                                    var n = t.jstree.reference(e.reference)
                                      , i = n.get_node(e.reference);
                                    n.is_selected(i) ? n.delete_node(n.get_selected()) : n.delete_node(i)
                                }
                            },
                            ccp: {
                                separator_before: !0,
                                icon: !1,
                                separator_after: !1,
                                label: "Edit",
                                action: !1,
                                submenu: {
                                    cut: {
                                        separator_before: !1,
                                        separator_after: !1,
                                        label: "Cut",
                                        action: function(e) {
                                            var n = t.jstree.reference(e.reference)
                                              , i = n.get_node(e.reference);
                                            n.is_selected(i) ? n.cut(n.get_top_selected()) : n.cut(i)
                                        }
                                    },
                                    copy: {
                                        separator_before: !1,
                                        icon: !1,
                                        separator_after: !1,
                                        label: "Copy",
                                        action: function(e) {
                                            var n = t.jstree.reference(e.reference)
                                              , i = n.get_node(e.reference);
                                            n.is_selected(i) ? n.copy(n.get_top_selected()) : n.copy(i)
                                        }
                                    },
                                    paste: {
                                        separator_before: !1,
                                        icon: !1,
                                        _disabled: function(e) {
                                            return !t.jstree.reference(e.reference).can_paste()
                                        },
                                        separator_after: !1,
                                        label: "Paste",
                                        action: function(e) {
                                            var n = t.jstree.reference(e.reference)
                                              , i = n.get_node(e.reference);
                                            n.paste(i)
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                t.jstree.plugins.contextmenu = function(n, i) {
                    this.bind = function() {
                        i.bind.call(this);
                        var e, n, r = 0, o = null;
                        this.element.on("init.jstree loading.jstree ready.jstree", t.proxy(function() {
                            this.get_container_ul().addClass("jstree-contextmenu")
                        }, this)).on("contextmenu.jstree", ".jstree-anchor", t.proxy(function(t, e) {
                            "input" !== t.target.tagName.toLowerCase() && (t.preventDefault(),
                            r = t.ctrlKey ? +new Date : 0,
                            (e || o) && (r = +new Date + 1e4),
                            o && clearTimeout(o),
                            this.is_loading(t.currentTarget) || this.show_contextmenu(t.currentTarget, t.pageX, t.pageY, t))
                        }, this)).on("click.jstree", ".jstree-anchor", t.proxy(function(e) {
                            this._data.contextmenu.visible && (!r || +new Date - r > 250) && t.vakata.context.hide(),
                            r = 0
                        }, this)).on("touchstart.jstree", ".jstree-anchor", function(i) {
                            i.originalEvent && i.originalEvent.changedTouches && i.originalEvent.changedTouches[0] && (e = i.originalEvent.changedTouches[0].clientX,
                            n = i.originalEvent.changedTouches[0].clientY,
                            o = setTimeout(function() {
                                t(i.currentTarget).trigger("contextmenu", !0)
                            }, 750))
                        }).on("touchmove.vakata.jstree", function(i) {
                            o && i.originalEvent && i.originalEvent.changedTouches && i.originalEvent.changedTouches[0] && (Math.abs(e - i.originalEvent.changedTouches[0].clientX) > 10 || Math.abs(n - i.originalEvent.changedTouches[0].clientY) > 10) && (clearTimeout(o),
                            t.vakata.context.hide())
                        }).on("touchend.vakata.jstree", function(t) {
                            o && clearTimeout(o)
                        }),
                        /*!
			if(!('oncontextmenu' in document.body) && ('ontouchstart' in document.body)) {
				var el = null, tm = null;
				this.element
					.on("touchstart", ".jstree-anchor", function (e) {
						el = e.currentTarget;
						tm = +new Date();
						$(document).one("touchend", function (e) {
							e.target = document.elementFromPoint(e.originalEvent.targetTouches[0].pageX - window.pageXOffset, e.originalEvent.targetTouches[0].pageY - window.pageYOffset);
							e.currentTarget = e.target;
							tm = ((+(new Date())) - tm);
							if(e.target === el && tm > 600 && tm < 1000) {
								e.preventDefault();
								$(el).trigger('contextmenu', e);
							}
							el = null;
							tm = null;
						});
					});
			}
			*/
                        t(c).on("context_hide.vakata.jstree", t.proxy(function(e, n) {
                            this._data.contextmenu.visible = !1,
                            t(n.reference).removeClass("jstree-context")
                        }, this))
                    }
                    ,
                    this.teardown = function() {
                        this._data.contextmenu.visible && t.vakata.context.hide(),
                        i.teardown.call(this)
                    }
                    ,
                    this.show_contextmenu = function(n, i, r, o) {
                        if (!(n = this.get_node(n)) || n.id === t.jstree.root)
                            return !1;
                        var s = this.settings.contextmenu
                          , a = this.get_node(n, !0)
                          , l = a.children(".jstree-anchor")
                          , c = !1
                          , h = !1;
                        (s.show_at_node || i === e || r === e) && (c = l.offset(),
                        i = c.left,
                        r = c.top + this._data.core.li_height),
                        this.settings.contextmenu.select_node && !this.is_selected(n) && this.activate_node(n, o),
                        h = s.items,
                        t.isFunction(h) && (h = h.call(this, n, t.proxy(function(t) {
                            this._show_contextmenu(n, i, r, t)
                        }, this))),
                        t.isPlainObject(h) && this._show_contextmenu(n, i, r, h)
                    }
                    ,
                    this._show_contextmenu = function(e, n, i, r) {
                        var o = this.get_node(e, !0)
                          , s = o.children(".jstree-anchor");
                        t(c).one("context_show.vakata.jstree", t.proxy(function(e, n) {
                            var i = "jstree-contextmenu jstree-" + this.get_theme() + "-contextmenu";
                            t(n.element).addClass(i),
                            s.addClass("jstree-context")
                        }, this)),
                        this._data.contextmenu.visible = !0,
                        t.vakata.context.show(s, {
                            x: n,
                            y: i
                        }, r),
                        this.trigger("show_contextmenu", {
                            node: e,
                            x: n,
                            y: i
                        })
                    }
                }
                ,
                function(t) {
                    var e = !1
                      , n = {
                        element: !1,
                        reference: !1,
                        position_x: 0,
                        position_y: 0,
                        items: [],
                        html: "",
                        is_visible: !1
                    };
                    t.vakata.context = {
                        settings: {
                            hide_onmouseleave: 0,
                            icons: !0
                        },
                        _trigger: function(e) {
                            t(c).triggerHandler("context_" + e + ".vakata", {
                                reference: n.reference,
                                element: n.element,
                                position: {
                                    x: n.position_x,
                                    y: n.position_y
                                }
                            })
                        },
                        _execute: function(e) {
                            return !(!(e = n.items[e]) || e._disabled && (!t.isFunction(e._disabled) || e._disabled({
                                item: e,
                                reference: n.reference,
                                element: n.element
                            })) || !e.action) && e.action.call(null, {
                                item: e,
                                reference: n.reference,
                                element: n.element,
                                position: {
                                    x: n.position_x,
                                    y: n.position_y
                                }
                            })
                        },
                        _parse: function(e, i) {
                            if (!e)
                                return !1;
                            i || (n.html = "",
                            n.items = []);
                            var r, o = "", s = !1;
                            return i && (o += "<ul>"),
                            t.each(e, function(e, i) {
                                if (!i)
                                    return !0;
                                n.items.push(i),
                                !s && i.separator_before && (o += "<li class='vakata-context-separator'><a href='#' " + (t.vakata.context.settings.icons ? "" : 'style="margin-left:0px;"') + ">&#160;</a></li>"),
                                s = !1,
                                o += "<li class='" + (i._class || "") + (!0 === i._disabled || t.isFunction(i._disabled) && i._disabled({
                                    item: i,
                                    reference: n.reference,
                                    element: n.element
                                }) ? " vakata-contextmenu-disabled " : "") + "' " + (i.shortcut ? " data-shortcut='" + i.shortcut + "' " : "") + ">",
                                o += "<a href='#' rel='" + (n.items.length - 1) + "' " + (i.title ? "title='" + i.title + "'" : "") + ">",
                                t.vakata.context.settings.icons && (o += "<i ",
                                i.icon && (-1 !== i.icon.indexOf("/") || -1 !== i.icon.indexOf(".") ? o += " style='background:url(\"" + i.icon + "\") center center no-repeat' " : o += " class='" + i.icon + "' "),
                                o += "></i><span class='vakata-contextmenu-sep'>&#160;</span>"),
                                o += (t.isFunction(i.label) ? i.label({
                                    item: e,
                                    reference: n.reference,
                                    element: n.element
                                }) : i.label) + (i.shortcut ? ' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-' + i.shortcut + '">' + (i.shortcut_label || "") + "</span>" : "") + "</a>",
                                i.submenu && (r = t.vakata.context._parse(i.submenu, !0)) && (o += r),
                                o += "</li>",
                                i.separator_after && (o += "<li class='vakata-context-separator'><a href='#' " + (t.vakata.context.settings.icons ? "" : 'style="margin-left:0px;"') + ">&#160;</a></li>",
                                s = !0)
                            }),
                            o = o.replace(/<li class\='vakata-context-separator'\><\/li\>$/, ""),
                            i && (o += "</ul>"),
                            i || (n.html = o,
                            t.vakata.context._trigger("parse")),
                            o.length > 10 && o
                        },
                        _show_submenu: function(n) {
                            if (n = t(n),
                            n.length && n.children("ul").length) {
                                var i = n.children("ul")
                                  , r = n.offset().left
                                  , o = r + n.outerWidth()
                                  , s = n.offset().top
                                  , a = i.width()
                                  , l = i.height()
                                  , c = t(window).width() + t(window).scrollLeft()
                                  , h = t(window).height() + t(window).scrollTop();
                                e ? n[o - (a + 10 + n.outerWidth()) < 0 ? "addClass" : "removeClass"]("vakata-context-left") : n[o + a > c && r > c - o ? "addClass" : "removeClass"]("vakata-context-right"),
                                s + l + 10 > h && i.css("bottom", "-1px"),
                                n.hasClass("vakata-context-right") ? r < a && i.css("margin-right", r - a) : c - o < a && i.css("margin-left", c - o - a),
                                i.show()
                            }
                        },
                        show: function(i, r, o) {
                            var s, a, l, h, u, d, p, f;
                            switch (n.element && n.element.length && n.element.width(""),
                            !0) {
                            case !r && !i:
                                return !1;
                            case !!r && !!i:
                                n.reference = i,
                                n.position_x = r.x,
                                n.position_y = r.y;
                                break;
                            case !r && !!i:
                                n.reference = i,
                                s = i.offset(),
                                n.position_x = s.left + i.outerHeight(),
                                n.position_y = s.top;
                                break;
                            case !!r && !i:
                                n.position_x = r.x,
                                n.position_y = r.y
                            }
                            i && !o && t(i).data("vakata_contextmenu") && (o = t(i).data("vakata_contextmenu")),
                            t.vakata.context._parse(o) && n.element.html(n.html),
                            n.items.length && (n.element.appendTo(c.body),
                            a = n.element,
                            l = n.position_x,
                            h = n.position_y,
                            u = a.width(),
                            d = a.height(),
                            p = t(window).width() + t(window).scrollLeft(),
                            f = t(window).height() + t(window).scrollTop(),
                            e && (l -= a.outerWidth() - t(i).outerWidth()) < t(window).scrollLeft() + 20 && (l = t(window).scrollLeft() + 20),
                            l + u + 20 > p && (l = p - (u + 20)),
                            h + d + 20 > f && (h = f - (d + 20)),
                            n.element.css({
                                left: l,
                                top: h
                            }).show().find("a").first().focus().parent().addClass("vakata-context-hover"),
                            n.is_visible = !0,
                            t.vakata.context._trigger("show"))
                        },
                        hide: function() {
                            n.is_visible && (n.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),
                            n.is_visible = !1,
                            t.vakata.context._trigger("hide"))
                        }
                    },
                    t(function() {
                        e = "rtl" === t(c.body).css("direction");
                        var i = !1;
                        n.element = t("<ul class='vakata-context'></ul>"),
                        n.element.on("mouseenter", "li", function(e) {
                            e.stopImmediatePropagation(),
                            t.contains(this, e.relatedTarget) || (i && clearTimeout(i),
                            n.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),
                            t(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context", "li").addBack().addClass("vakata-context-hover"),
                            t.vakata.context._show_submenu(this))
                        }).on("mouseleave", "li", function(e) {
                            t.contains(this, e.relatedTarget) || t(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")
                        }).on("mouseleave", function(e) {
                            t(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),
                            t.vakata.context.settings.hide_onmouseleave && (i = setTimeout(function(e) {
                                return function() {
                                    t.vakata.context.hide()
                                }
                            }(), t.vakata.context.settings.hide_onmouseleave))
                        }).on("click", "a", function(e) {
                            e.preventDefault(),
                            t(this).blur().parent().hasClass("vakata-context-disabled") || !1 === t.vakata.context._execute(t(this).attr("rel")) || t.vakata.context.hide()
                        }).on("keydown", "a", function(e) {
                            var i = null;
                            switch (e.which) {
                            case 13:
                            case 32:
                                e.type = "click",
                                e.preventDefault(),
                                t(e.currentTarget).trigger(e);
                                break;
                            case 37:
                                n.is_visible && (n.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),
                                e.stopImmediatePropagation(),
                                e.preventDefault());
                                break;
                            case 38:
                                n.is_visible && (i = n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),
                                i.length || (i = n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),
                                i.addClass("vakata-context-hover").children("a").focus(),
                                e.stopImmediatePropagation(),
                                e.preventDefault());
                                break;
                            case 39:
                                n.is_visible && (n.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),
                                e.stopImmediatePropagation(),
                                e.preventDefault());
                                break;
                            case 40:
                                n.is_visible && (i = n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),
                                i.length || (i = n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),
                                i.addClass("vakata-context-hover").children("a").focus(),
                                e.stopImmediatePropagation(),
                                e.preventDefault());
                                break;
                            case 27:
                                t.vakata.context.hide(),
                                e.preventDefault()
                            }
                        }).on("keydown", function(t) {
                            t.preventDefault();
                            var e = n.element.find(".vakata-contextmenu-shortcut-" + t.which).parent();
                            e.parent().not(".vakata-context-disabled") && e.click()
                        }),
                        t(c).on("mousedown.vakata.jstree", function(e) {
                            n.is_visible && n.element[0] !== e.target && !t.contains(n.element[0], e.target) && t.vakata.context.hide()
                        }).on("context_show.vakata.jstree", function(t, i) {
                            n.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),
                            e && n.element.addClass("vakata-context-rtl").css("direction", "rtl"),
                            n.element.find("ul").hide().end()
                        })
                    })
                }(t),
                t.jstree.defaults.dnd = {
                    copy: !0,
                    open_timeout: 500,
                    is_draggable: !0,
                    check_while_dragging: !0,
                    always_copy: !1,
                    inside_pos: 0,
                    drag_selection: !0,
                    touch: !0,
                    large_drop_target: !1,
                    large_drag_target: !1,
                    use_html5: !1
                };
                var u, d;
                t.jstree.plugins.dnd = function(e, n) {
                    this.init = function(t, e) {
                        n.init.call(this, t, e),
                        this.settings.dnd.use_html5 = this.settings.dnd.use_html5 && "draggable"in c.createElement("span")
                    }
                    ,
                    this.bind = function() {
                        n.bind.call(this),
                        this.element.on(this.settings.dnd.use_html5 ? "dragstart.jstree" : "mousedown.jstree touchstart.jstree", this.settings.dnd.large_drag_target ? ".jstree-node" : ".jstree-anchor", t.proxy(function(e) {
                            if (this.settings.dnd.large_drag_target && t(e.target).closest(".jstree-node")[0] !== e.currentTarget)
                                return !0;
                            if ("touchstart" === e.type && (!this.settings.dnd.touch || "selected" === this.settings.dnd.touch && !t(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))
                                return !0;
                            var n = this.get_node(e.target)
                              , i = this.is_selected(n) && this.settings.dnd.drag_selection ? this.get_top_selected().length : 1
                              , r = i > 1 ? i + " " + this.get_string("nodes") : this.get_text(e.currentTarget);
                            if (this.settings.core.force_text && (r = t.vakata.html.escape(r)),
                            n && n.id && n.id !== t.jstree.root && (1 === e.which || "touchstart" === e.type || "dragstart" === e.type) && (!0 === this.settings.dnd.is_draggable || t.isFunction(this.settings.dnd.is_draggable) && this.settings.dnd.is_draggable.call(this, i > 1 ? this.get_top_selected(!0) : [n], e))) {
                                if (u = {
                                    jstree: !0,
                                    origin: this,
                                    obj: this.get_node(n, !0),
                                    nodes: i > 1 ? this.get_top_selected() : [n.id]
                                },
                                d = e.currentTarget,
                                !this.settings.dnd.use_html5)
                                    return this.element.trigger("mousedown.jstree"),
                                    t.vakata.dnd.start(e, u, '<div id="jstree-dnd" class="jstree-' + this.get_theme() + " jstree-" + this.get_theme() + "-" + this.get_theme_variant() + " " + (this.settings.core.themes.responsive ? " jstree-dnd-responsive" : "") + '"><i class="jstree-icon jstree-er"></i>' + r + '<ins class="jstree-copy" style="display:none;">+</ins></div>');
                                t.vakata.dnd._trigger("start", e, {
                                    helper: t(),
                                    element: d,
                                    data: u
                                })
                            }
                        }, this)),
                        this.settings.dnd.use_html5 && this.element.on("dragover.jstree", function(e) {
                            return e.preventDefault(),
                            t.vakata.dnd._trigger("move", e, {
                                helper: t(),
                                element: d,
                                data: u
                            }),
                            !1
                        }).on("drop.jstree", t.proxy(function(e) {
                            return e.preventDefault(),
                            t.vakata.dnd._trigger("stop", e, {
                                helper: t(),
                                element: d,
                                data: u
                            }),
                            !1
                        }, this))
                    }
                    ,
                    this.redraw_node = function(t, e, i, r) {
                        if ((t = n.redraw_node.apply(this, arguments)) && this.settings.dnd.use_html5)
                            if (this.settings.dnd.large_drag_target)
                                t.setAttribute("draggable", !0);
                            else {
                                var o, s, a = null;
                                for (o = 0,
                                s = t.childNodes.length; o < s; o++)
                                    if (t.childNodes[o] && t.childNodes[o].className && -1 !== t.childNodes[o].className.indexOf("jstree-anchor")) {
                                        a = t.childNodes[o];
                                        break
                                    }
                                a && a.setAttribute("draggable", !0)
                            }
                        return t
                    }
                }
                ,
                t(function() {
                    var n = !1
                      , i = !1
                      , r = !1
                      , o = !1
                      , s = t('<div id="jstree-marker">&#160;</div>').hide();
                    t(c).on("dragover.vakata.jstree", function(e) {
                        d && t.vakata.dnd._trigger("move", e, {
                            helper: t(),
                            element: d,
                            data: u
                        })
                    }).on("drop.vakata.jstree", function(e) {
                        d && (t.vakata.dnd._trigger("stop", e, {
                            helper: t(),
                            element: d,
                            data: u
                        }),
                        d = null,
                        u = null)
                    }).on("dnd_start.vakata.jstree", function(t, e) {
                        n = !1,
                        r = !1,
                        e && e.data && e.data.jstree && s.appendTo(c.body)
                    }).on("dnd_move.vakata.jstree", function(a, l) {
                        var c = l.event.target !== r.target;
                        if (o && (l.event && "dragover" === l.event.type && !c || clearTimeout(o)),
                        l && l.data && l.data.jstree && (!l.event.target.id || "jstree-marker" !== l.event.target.id)) {
                            r = l.event;
                            var h, u, d, p, f, g, m, _, v, y, b, w, x, C, T, k, I = t.jstree.reference(l.event.target), L = !1, E = !1, P = !1;
                            if (I && I._data && I._data.dnd)
                                if (s.attr("class", "jstree-" + I.get_theme() + (I.settings.core.themes.responsive ? " jstree-dnd-responsive" : "")),
                                T = l.data.origin && (l.data.origin.settings.dnd.always_copy || l.data.origin.settings.dnd.copy && (l.event.metaKey || l.event.ctrlKey)),
                                l.helper.children().attr("class", "jstree-" + I.get_theme() + " jstree-" + I.get_theme() + "-" + I.get_theme_variant() + " " + (I.settings.core.themes.responsive ? " jstree-dnd-responsive" : "")).find(".jstree-copy").first()[T ? "show" : "hide"](),
                                l.event.target !== I.element[0] && l.event.target !== I.get_container_ul()[0] || 0 !== I.get_container_ul().children().length) {
                                    if ((L = I.settings.dnd.large_drop_target ? t(l.event.target).closest(".jstree-node").children(".jstree-anchor") : t(l.event.target).closest(".jstree-anchor")) && L.length && L.parent().is(".jstree-closed, .jstree-open, .jstree-leaf") && (E = L.offset(),
                                    P = (l.event.pageY !== e ? l.event.pageY : l.event.originalEvent.pageY) - E.top,
                                    d = L.outerHeight(),
                                    g = P < d / 3 ? ["b", "i", "a"] : P > d - d / 3 ? ["a", "i", "b"] : P > d / 2 ? ["i", "a", "b"] : ["i", "b", "a"],
                                    t.each(g, function(e, r) {
                                        switch (r) {
                                        case "b":
                                            h = E.left - 6,
                                            u = E.top,
                                            p = I.get_parent(L),
                                            f = L.parent().index();
                                            break;
                                        case "i":
                                            x = I.settings.dnd.inside_pos,
                                            C = I.get_node(L.parent()),
                                            h = E.left - 2,
                                            u = E.top + d / 2 + 1,
                                            p = C.id,
                                            f = "first" === x ? 0 : "last" === x ? C.children.length : Math.min(x, C.children.length);
                                            break;
                                        case "a":
                                            h = E.left - 6,
                                            u = E.top + d,
                                            p = I.get_parent(L),
                                            f = L.parent().index() + 1
                                        }
                                        for (m = !0,
                                        _ = 0,
                                        v = l.data.nodes.length; _ < v; _++)
                                            if (y = l.data.origin && (l.data.origin.settings.dnd.always_copy || l.data.origin.settings.dnd.copy && (l.event.metaKey || l.event.ctrlKey)) ? "copy_node" : "move_node",
                                            b = f,
                                            "move_node" === y && "a" === r && l.data.origin && l.data.origin === I && p === I.get_parent(l.data.nodes[_]) && (w = I.get_node(p),
                                            b > t.inArray(l.data.nodes[_], w.children) && (b -= 1)),
                                            !(m = m && (I && I.settings && I.settings.dnd && !1 === I.settings.dnd.check_while_dragging || I.check(y, l.data.origin && l.data.origin !== I ? l.data.origin.get_node(l.data.nodes[_]) : l.data.nodes[_], p, b, {
                                                dnd: !0,
                                                ref: I.get_node(L.parent()),
                                                pos: r,
                                                origin: l.data.origin,
                                                is_multi: l.data.origin && l.data.origin !== I,
                                                is_foreign: !l.data.origin
                                            })))) {
                                                I && I.last_error && (i = I.last_error());
                                                break
                                            }
                                        if ("i" === r && L.parent().is(".jstree-closed") && I.settings.dnd.open_timeout && (l.event && "dragover" === l.event.type && !c || (o && clearTimeout(o),
                                        o = setTimeout(function(t, e) {
                                            return function() {
                                                t.open_node(e)
                                            }
                                        }(I, L), I.settings.dnd.open_timeout))),
                                        m)
                                            return k = I.get_node(p, !0),
                                            k.hasClass(".jstree-dnd-parent") || (t(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),
                                            k.addClass("jstree-dnd-parent")),
                                            n = {
                                                ins: I,
                                                par: p,
                                                pos: "i" !== r || "last" !== x || 0 !== f || I.is_loaded(C) ? f : "last"
                                            },
                                            s.css({
                                                left: h + "px",
                                                top: u + "px"
                                            }).show(),
                                            l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),
                                            l.event.originalEvent && l.event.originalEvent.dataTransfer && (l.event.originalEvent.dataTransfer.dropEffect = T ? "copy" : "move"),
                                            i = {},
                                            g = !0,
                                            !1
                                    }),
                                    !0 === g))
                                        return
                                } else {
                                    for (m = !0,
                                    _ = 0,
                                    v = l.data.nodes.length; _ < v && (m = m && I.check(l.data.origin && (l.data.origin.settings.dnd.always_copy || l.data.origin.settings.dnd.copy && (l.event.metaKey || l.event.ctrlKey)) ? "copy_node" : "move_node", l.data.origin && l.data.origin !== I ? l.data.origin.get_node(l.data.nodes[_]) : l.data.nodes[_], t.jstree.root, "last", {
                                        dnd: !0,
                                        ref: I.get_node(t.jstree.root),
                                        pos: "i",
                                        origin: l.data.origin,
                                        is_multi: l.data.origin && l.data.origin !== I,
                                        is_foreign: !l.data.origin
                                    })); _++)
                                        ;
                                    if (m)
                                        return n = {
                                            ins: I,
                                            par: t.jstree.root,
                                            pos: "last"
                                        },
                                        s.hide(),
                                        l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),
                                        void (l.event.originalEvent && l.event.originalEvent.dataTransfer && (l.event.originalEvent.dataTransfer.dropEffect = T ? "copy" : "move"))
                                }
                            t(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),
                            n = !1,
                            l.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),
                            l.event.originalEvent && l.event.originalEvent.dataTransfer,
                            s.hide()
                        }
                    }).on("dnd_scroll.vakata.jstree", function(t, e) {
                        e && e.data && e.data.jstree && (s.hide(),
                        n = !1,
                        r = !1,
                        e.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))
                    }).on("dnd_stop.vakata.jstree", function(e, a) {
                        if (t(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),
                        o && clearTimeout(o),
                        a && a.data && a.data.jstree) {
                            s.hide().detach();
                            var l, c, h = [];
                            if (n) {
                                for (l = 0,
                                c = a.data.nodes.length; l < c; l++)
                                    h[l] = a.data.origin ? a.data.origin.get_node(a.data.nodes[l]) : a.data.nodes[l];
                                n.ins[a.data.origin && (a.data.origin.settings.dnd.always_copy || a.data.origin.settings.dnd.copy && (a.event.metaKey || a.event.ctrlKey)) ? "copy_node" : "move_node"](h, n.par, n.pos, !1, !1, !1, a.data.origin)
                            } else
                                l = t(a.event.target).closest(".jstree"),
                                l.length && i && i.error && "check" === i.error && (l = l.jstree(!0)) && l.settings.core.error.call(this, i);
                            r = !1,
                            n = !1
                        }
                    }).on("keyup.jstree keydown.jstree", function(e, a) {
                        (a = t.vakata.dnd._get()) && a.data && a.data.jstree && ("keyup" === e.type && 27 === e.which ? (o && clearTimeout(o),
                        n = !1,
                        i = !1,
                        r = !1,
                        o = !1,
                        s.hide().detach(),
                        t.vakata.dnd._clean()) : (a.helper.find(".jstree-copy").first()[a.data.origin && (a.data.origin.settings.dnd.always_copy || a.data.origin.settings.dnd.copy && (e.metaKey || e.ctrlKey)) ? "show" : "hide"](),
                        r && (r.metaKey = e.metaKey,
                        r.ctrlKey = e.ctrlKey,
                        t.vakata.dnd._trigger("move", r))))
                    })
                }),
                function(t) {
                    t.vakata.html = {
                        div: t("<div />"),
                        escape: function(e) {
                            return t.vakata.html.div.text(e).html()
                        },
                        strip: function(e) {
                            return t.vakata.html.div.empty().append(t.parseHTML(e)).text()
                        }
                    };
                    var n = {
                        element: !1,
                        target: !1,
                        is_down: !1,
                        is_drag: !1,
                        helper: !1,
                        helper_w: 0,
                        data: !1,
                        init_x: 0,
                        init_y: 0,
                        scroll_l: 0,
                        scroll_t: 0,
                        scroll_e: !1,
                        scroll_i: !1,
                        is_touch: !1
                    };
                    t.vakata.dnd = {
                        settings: {
                            scroll_speed: 10,
                            scroll_proximity: 20,
                            helper_left: 5,
                            helper_top: 10,
                            threshold: 5,
                            threshold_touch: 10
                        },
                        _trigger: function(n, i, r) {
                            r === e && (r = t.vakata.dnd._get()),
                            r.event = i,
                            t(c).triggerHandler("dnd_" + n + ".vakata", r)
                        },
                        _get: function() {
                            return {
                                data: n.data,
                                element: n.element,
                                helper: n.helper
                            }
                        },
                        _clean: function() {
                            n.helper && n.helper.remove(),
                            n.scroll_i && (clearInterval(n.scroll_i),
                            n.scroll_i = !1),
                            n = {
                                element: !1,
                                target: !1,
                                is_down: !1,
                                is_drag: !1,
                                helper: !1,
                                helper_w: 0,
                                data: !1,
                                init_x: 0,
                                init_y: 0,
                                scroll_l: 0,
                                scroll_t: 0,
                                scroll_e: !1,
                                scroll_i: !1,
                                is_touch: !1
                            },
                            t(c).off("mousemove.vakata.jstree touchmove.vakata.jstree", t.vakata.dnd.drag),
                            t(c).off("mouseup.vakata.jstree touchend.vakata.jstree", t.vakata.dnd.stop)
                        },
                        _scroll: function(e) {
                            if (!n.scroll_e || !n.scroll_l && !n.scroll_t)
                                return n.scroll_i && (clearInterval(n.scroll_i),
                                n.scroll_i = !1),
                                !1;
                            if (!n.scroll_i)
                                return n.scroll_i = setInterval(t.vakata.dnd._scroll, 100),
                                !1;
                            if (!0 === e)
                                return !1;
                            var i = n.scroll_e.scrollTop()
                              , r = n.scroll_e.scrollLeft();
                            n.scroll_e.scrollTop(i + n.scroll_t * t.vakata.dnd.settings.scroll_speed),
                            n.scroll_e.scrollLeft(r + n.scroll_l * t.vakata.dnd.settings.scroll_speed),
                            i === n.scroll_e.scrollTop() && r === n.scroll_e.scrollLeft() || t.vakata.dnd._trigger("scroll", n.scroll_e)
                        },
                        start: function(e, i, r) {
                            "touchstart" === e.type && e.originalEvent && e.originalEvent.changedTouches && e.originalEvent.changedTouches[0] && (e.pageX = e.originalEvent.changedTouches[0].pageX,
                            e.pageY = e.originalEvent.changedTouches[0].pageY,
                            e.target = c.elementFromPoint(e.originalEvent.changedTouches[0].pageX - window.pageXOffset, e.originalEvent.changedTouches[0].pageY - window.pageYOffset)),
                            n.is_drag && t.vakata.dnd.stop({});
                            try {
                                e.currentTarget.unselectable = "on",
                                e.currentTarget.onselectstart = function() {
                                    return !1
                                }
                                ,
                                e.currentTarget.style && (e.currentTarget.style.touchAction = "none",
                                e.currentTarget.style.msTouchAction = "none",
                                e.currentTarget.style.MozUserSelect = "none")
                            } catch (t) {}
                            return n.init_x = e.pageX,
                            n.init_y = e.pageY,
                            n.data = i,
                            n.is_down = !0,
                            n.element = e.currentTarget,
                            n.target = e.target,
                            n.is_touch = "touchstart" === e.type,
                            !1 !== r && (n.helper = t("<div id='vakata-dnd'></div>").html(r).css({
                                display: "block",
                                margin: "0",
                                padding: "0",
                                position: "absolute",
                                top: "-2000px",
                                lineHeight: "16px",
                                zIndex: "10000"
                            })),
                            t(c).on("mousemove.vakata.jstree touchmove.vakata.jstree", t.vakata.dnd.drag),
                            t(c).on("mouseup.vakata.jstree touchend.vakata.jstree", t.vakata.dnd.stop),
                            !1
                        },
                        drag: function(e) {
                            if ("touchmove" === e.type && e.originalEvent && e.originalEvent.changedTouches && e.originalEvent.changedTouches[0] && (e.pageX = e.originalEvent.changedTouches[0].pageX,
                            e.pageY = e.originalEvent.changedTouches[0].pageY,
                            e.target = c.elementFromPoint(e.originalEvent.changedTouches[0].pageX - window.pageXOffset, e.originalEvent.changedTouches[0].pageY - window.pageYOffset)),
                            n.is_down) {
                                if (!n.is_drag) {
                                    if (!(Math.abs(e.pageX - n.init_x) > (n.is_touch ? t.vakata.dnd.settings.threshold_touch : t.vakata.dnd.settings.threshold) || Math.abs(e.pageY - n.init_y) > (n.is_touch ? t.vakata.dnd.settings.threshold_touch : t.vakata.dnd.settings.threshold)))
                                        return;
                                    n.helper && (n.helper.appendTo(c.body),
                                    n.helper_w = n.helper.outerWidth()),
                                    n.is_drag = !0,
                                    t(n.target).one("click.vakata", !1),
                                    t.vakata.dnd._trigger("start", e)
                                }
                                var i = !1
                                  , r = !1
                                  , o = !1
                                  , s = !1
                                  , a = !1
                                  , l = !1
                                  , h = !1
                                  , u = !1
                                  , d = !1
                                  , p = !1;
                                return n.scroll_t = 0,
                                n.scroll_l = 0,
                                n.scroll_e = !1,
                                t(t(e.target).parentsUntil("body").addBack().get().reverse()).filter(function() {
                                    return /^auto|scroll$/.test(t(this).css("overflow")) && (this.scrollHeight > this.offsetHeight || this.scrollWidth > this.offsetWidth)
                                }).each(function() {
                                    var i = t(this)
                                      , r = i.offset();
                                    if (this.scrollHeight > this.offsetHeight && (r.top + i.height() - e.pageY < t.vakata.dnd.settings.scroll_proximity && (n.scroll_t = 1),
                                    e.pageY - r.top < t.vakata.dnd.settings.scroll_proximity && (n.scroll_t = -1)),
                                    this.scrollWidth > this.offsetWidth && (r.left + i.width() - e.pageX < t.vakata.dnd.settings.scroll_proximity && (n.scroll_l = 1),
                                    e.pageX - r.left < t.vakata.dnd.settings.scroll_proximity && (n.scroll_l = -1)),
                                    n.scroll_t || n.scroll_l)
                                        return n.scroll_e = t(this),
                                        !1
                                }),
                                n.scroll_e || (i = t(c),
                                r = t(window),
                                o = i.height(),
                                s = r.height(),
                                a = i.width(),
                                l = r.width(),
                                h = i.scrollTop(),
                                u = i.scrollLeft(),
                                o > s && e.pageY - h < t.vakata.dnd.settings.scroll_proximity && (n.scroll_t = -1),
                                o > s && s - (e.pageY - h) < t.vakata.dnd.settings.scroll_proximity && (n.scroll_t = 1),
                                a > l && e.pageX - u < t.vakata.dnd.settings.scroll_proximity && (n.scroll_l = -1),
                                a > l && l - (e.pageX - u) < t.vakata.dnd.settings.scroll_proximity && (n.scroll_l = 1),
                                (n.scroll_t || n.scroll_l) && (n.scroll_e = i)),
                                n.scroll_e && t.vakata.dnd._scroll(!0),
                                n.helper && (d = parseInt(e.pageY + t.vakata.dnd.settings.helper_top, 10),
                                p = parseInt(e.pageX + t.vakata.dnd.settings.helper_left, 10),
                                o && d + 25 > o && (d = o - 50),
                                a && p + n.helper_w > a && (p = a - (n.helper_w + 2)),
                                n.helper.css({
                                    left: p + "px",
                                    top: d + "px"
                                })),
                                t.vakata.dnd._trigger("move", e),
                                !1
                            }
                        },
                        stop: function(e) {
                            if ("touchend" === e.type && e.originalEvent && e.originalEvent.changedTouches && e.originalEvent.changedTouches[0] && (e.pageX = e.originalEvent.changedTouches[0].pageX,
                            e.pageY = e.originalEvent.changedTouches[0].pageY,
                            e.target = c.elementFromPoint(e.originalEvent.changedTouches[0].pageX - window.pageXOffset, e.originalEvent.changedTouches[0].pageY - window.pageYOffset)),
                            n.is_drag)
                                e.target !== n.target && t(n.target).off("click.vakata"),
                                t.vakata.dnd._trigger("stop", e);
                            else if ("touchend" === e.type && e.target === n.target) {
                                var i = setTimeout(function() {
                                    t(e.target).click()
                                }, 100);
                                t(e.target).one("click", function() {
                                    i && clearTimeout(i)
                                })
                            }
                            return t.vakata.dnd._clean(),
                            !1
                        }
                    }
                }(t),
                t.jstree.defaults.massload = null,
                t.jstree.plugins.massload = function(e, n) {
                    this.init = function(t, e) {
                        this._data.massload = {},
                        n.init.call(this, t, e)
                    }
                    ,
                    this._load_nodes = function(e, i, r, o) {
                        var s, a, l, c = this.settings.massload, h = (JSON.stringify(e),
                        []), u = this._model.data;
                        if (!r) {
                            for (s = 0,
                            a = e.length; s < a; s++)
                                u[e[s]] && (u[e[s]].state.loaded || u[e[s]].state.failed) && !o || (h.push(e[s]),
                                (l = this.get_node(e[s], !0)) && l.length && l.addClass("jstree-loading").attr("aria-busy", !0));
                            if (this._data.massload = {},
                            h.length) {
                                if (t.isFunction(c))
                                    return c.call(this, h, t.proxy(function(t) {
                                        var s, a;
                                        if (t)
                                            for (s in t)
                                                t.hasOwnProperty(s) && (this._data.massload[s] = t[s]);
                                        for (s = 0,
                                        a = e.length; s < a; s++)
                                            (l = this.get_node(e[s], !0)) && l.length && l.removeClass("jstree-loading").attr("aria-busy", !1);
                                        n._load_nodes.call(this, e, i, r, o)
                                    }, this));
                                if ("object" == typeof c && c && c.url)
                                    return c = t.extend(!0, {}, c),
                                    t.isFunction(c.url) && (c.url = c.url.call(this, h)),
                                    t.isFunction(c.data) && (c.data = c.data.call(this, h)),
                                    t.ajax(c).done(t.proxy(function(t, s, a) {
                                        var c, h;
                                        if (t)
                                            for (c in t)
                                                t.hasOwnProperty(c) && (this._data.massload[c] = t[c]);
                                        for (c = 0,
                                        h = e.length; c < h; c++)
                                            (l = this.get_node(e[c], !0)) && l.length && l.removeClass("jstree-loading").attr("aria-busy", !1);
                                        n._load_nodes.call(this, e, i, r, o)
                                    }, this)).fail(t.proxy(function(t) {
                                        n._load_nodes.call(this, e, i, r, o)
                                    }, this))
                            }
                        }
                        return n._load_nodes.call(this, e, i, r, o)
                    }
                    ,
                    this._load_node = function(e, i) {
                        var r, o = this._data.massload[e.id], s = null;
                        return o ? (s = this["string" == typeof o ? "_append_html_data" : "_append_json_data"](e, "string" == typeof o ? t(t.parseHTML(o)).filter(function() {
                            return 3 !== this.nodeType
                        }) : o, function(t) {
                            i.call(this, t)
                        }),
                        r = this.get_node(e.id, !0),
                        r && r.length && r.removeClass("jstree-loading").attr("aria-busy", !1),
                        delete this._data.massload[e.id],
                        s) : n._load_node.call(this, e, i)
                    }
                }
                ,
                t.jstree.defaults.search = {
                    ajax: !1,
                    fuzzy: !1,
                    case_sensitive: !1,
                    show_only_matches: !1,
                    show_only_matches_children: !1,
                    close_opened_onclear: !0,
                    search_leaves_only: !1,
                    search_callback: !1
                },
                t.jstree.plugins.search = function(n, i) {
                    this.bind = function() {
                        i.bind.call(this),
                        this._data.search.str = "",
                        this._data.search.dom = t(),
                        this._data.search.res = [],
                        this._data.search.opn = [],
                        this._data.search.som = !1,
                        this._data.search.smc = !1,
                        this._data.search.hdn = [],
                        this.element.on("search.jstree", t.proxy(function(e, n) {
                            if (this._data.search.som && n.res.length) {
                                var i, r, o, s, a = this._model.data, l = [];
                                for (i = 0,
                                r = n.res.length; i < r; i++)
                                    if (a[n.res[i]] && !a[n.res[i]].state.hidden && (l.push(n.res[i]),
                                    l = l.concat(a[n.res[i]].parents),
                                    this._data.search.smc))
                                        for (o = 0,
                                        s = a[n.res[i]].children_d.length; o < s; o++)
                                            a[a[n.res[i]].children_d[o]] && !a[a[n.res[i]].children_d[o]].state.hidden && l.push(a[n.res[i]].children_d[o]);
                                l = t.vakata.array_remove_item(t.vakata.array_unique(l), t.jstree.root),
                                this._data.search.hdn = this.hide_all(!0),
                                this.show_node(l, !0),
                                this.redraw(!0)
                            }
                        }, this)).on("clear_search.jstree", t.proxy(function(t, e) {
                            this._data.search.som && e.res.length && (this.show_node(this._data.search.hdn, !0),
                            this.redraw(!0))
                        }, this))
                    }
                    ,
                    this.search = function(n, i, r, o, s, a) {
                        if (!1 === n || "" === t.trim(n.toString()))
                            return this.clear_search();
                        o = this.get_node(o),
                        o = o && o.id ? o.id : null,
                        n = n.toString();
                        var l, c, h = this.settings.search, u = !!h.ajax && h.ajax, d = this._model.data, p = null, f = [], g = [];
                        if (this._data.search.res.length && !s && this.clear_search(),
                        r === e && (r = h.show_only_matches),
                        a === e && (a = h.show_only_matches_children),
                        !i && !1 !== u)
                            return t.isFunction(u) ? u.call(this, n, t.proxy(function(e) {
                                e && e.d && (e = e.d),
                                this._load_nodes(t.isArray(e) ? t.vakata.array_unique(e) : [], function() {
                                    this.search(n, !0, r, o, s, a)
                                })
                            }, this), o) : (u = t.extend({}, u),
                            u.data || (u.data = {}),
                            u.data.str = n,
                            o && (u.data.inside = o),
                            this._data.search.lastRequest && this._data.search.lastRequest.abort(),
                            this._data.search.lastRequest = t.ajax(u).fail(t.proxy(function() {
                                this._data.core.last_error = {
                                    error: "ajax",
                                    plugin: "search",
                                    id: "search_01",
                                    reason: "Could not load search parents",
                                    data: JSON.stringify(u)
                                },
                                this.settings.core.error.call(this, this._data.core.last_error)
                            }, this)).done(t.proxy(function(e) {
                                e && e.d && (e = e.d),
                                this._load_nodes(t.isArray(e) ? t.vakata.array_unique(e) : [], function() {
                                    this.search(n, !0, r, o, s, a)
                                })
                            }, this)),
                            this._data.search.lastRequest);
                        if (s || (this._data.search.str = n,
                        this._data.search.dom = t(),
                        this._data.search.res = [],
                        this._data.search.opn = [],
                        this._data.search.som = r,
                        this._data.search.smc = a),
                        p = new t.vakata.search(n,!0,{
                            caseSensitive: h.case_sensitive,
                            fuzzy: h.fuzzy
                        }),
                        t.each(d[o || t.jstree.root].children_d, function(t, e) {
                            var i = d[e];
                            i.text && !i.state.hidden && (!h.search_leaves_only || i.state.loaded && 0 === i.children.length) && (h.search_callback && h.search_callback.call(this, n, i) || !h.search_callback && p.search(i.text).isMatch) && (f.push(e),
                            g = g.concat(i.parents))
                        }),
                        f.length) {
                            for (g = t.vakata.array_unique(g),
                            l = 0,
                            c = g.length; l < c; l++)
                                g[l] !== t.jstree.root && d[g[l]] && !0 === this.open_node(g[l], null, 0) && this._data.search.opn.push(g[l]);
                            s ? (this._data.search.dom = this._data.search.dom.add(t(this.element[0].querySelectorAll("#" + t.map(f, function(e) {
                                return -1 !== "0123456789".indexOf(e[0]) ? "\\3" + e[0] + " " + e.substr(1).replace(t.jstree.idregex, "\\$&") : e.replace(t.jstree.idregex, "\\$&")
                            }).join(", #")))),
                            this._data.search.res = t.vakata.array_unique(this._data.search.res.concat(f))) : (this._data.search.dom = t(this.element[0].querySelectorAll("#" + t.map(f, function(e) {
                                return -1 !== "0123456789".indexOf(e[0]) ? "\\3" + e[0] + " " + e.substr(1).replace(t.jstree.idregex, "\\$&") : e.replace(t.jstree.idregex, "\\$&")
                            }).join(", #"))),
                            this._data.search.res = f),
                            this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")
                        }
                        this.trigger("search", {
                            nodes: this._data.search.dom,
                            str: n,
                            res: this._data.search.res,
                            show_only_matches: r
                        })
                    }
                    ,
                    this.clear_search = function() {
                        this.settings.search.close_opened_onclear && this.close_node(this._data.search.opn, 0),
                        this.trigger("clear_search", {
                            nodes: this._data.search.dom,
                            str: this._data.search.str,
                            res: this._data.search.res
                        }),
                        this._data.search.res.length && (this._data.search.dom = t(this.element[0].querySelectorAll("#" + t.map(this._data.search.res, function(e) {
                            return -1 !== "0123456789".indexOf(e[0]) ? "\\3" + e[0] + " " + e.substr(1).replace(t.jstree.idregex, "\\$&") : e.replace(t.jstree.idregex, "\\$&")
                        }).join(", #"))),
                        this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),
                        this._data.search.str = "",
                        this._data.search.res = [],
                        this._data.search.opn = [],
                        this._data.search.dom = t()
                    }
                    ,
                    this.redraw_node = function(e, n, r, o) {
                        if ((e = i.redraw_node.apply(this, arguments)) && -1 !== t.inArray(e.id, this._data.search.res)) {
                            var s, a, l = null;
                            for (s = 0,
                            a = e.childNodes.length; s < a; s++)
                                if (e.childNodes[s] && e.childNodes[s].className && -1 !== e.childNodes[s].className.indexOf("jstree-anchor")) {
                                    l = e.childNodes[s];
                                    break
                                }
                            l && (l.className += " jstree-search")
                        }
                        return e
                    }
                }
                ,
                function(t) {
                    t.vakata.search = function(e, n, i) {
                        i = i || {},
                        i = t.extend({}, t.vakata.search.defaults, i),
                        !1 !== i.fuzzy && (i.fuzzy = !0),
                        e = i.caseSensitive ? e : e.toLowerCase();
                        var r, o, s, a, l = i.location, c = i.distance, h = i.threshold, u = e.length;
                        return u > 32 && (i.fuzzy = !1),
                        i.fuzzy && (r = 1 << u - 1,
                        o = function() {
                            var t = {}
                              , n = 0;
                            for (n = 0; n < u; n++)
                                t[e.charAt(n)] = 0;
                            for (n = 0; n < u; n++)
                                t[e.charAt(n)] |= 1 << u - n - 1;
                            return t
                        }(),
                        s = function(t, e) {
                            var n = t / u
                              , i = Math.abs(l - e);
                            return c ? n + i / c : i ? 1 : n
                        }
                        ),
                        a = function(t) {
                            if (t = i.caseSensitive ? t : t.toLowerCase(),
                            e === t || -1 !== t.indexOf(e))
                                return {
                                    isMatch: !0,
                                    score: 0
                                };
                            if (!i.fuzzy)
                                return {
                                    isMatch: !1,
                                    score: 1
                                };
                            var n, a, c, d, p, f, g, m, _, v = t.length, y = h, b = t.indexOf(e, l), w = u + v, x = 1, C = [];
                            for (-1 !== b && (y = Math.min(s(0, b), y),
                            -1 !== (b = t.lastIndexOf(e, l + u)) && (y = Math.min(s(0, b), y))),
                            b = -1,
                            n = 0; n < u; n++) {
                                for (c = 0,
                                d = w; c < d; )
                                    s(n, l + d) <= y ? c = d : w = d,
                                    d = Math.floor((w - c) / 2 + c);
                                for (w = d,
                                f = Math.max(1, l - d + 1),
                                g = Math.min(l + d, v) + u,
                                m = new Array(g + 2),
                                m[g + 1] = (1 << n) - 1,
                                a = g; a >= f; a--)
                                    if (_ = o[t.charAt(a - 1)],
                                    m[a] = 0 === n ? (m[a + 1] << 1 | 1) & _ : (m[a + 1] << 1 | 1) & _ | (p[a + 1] | p[a]) << 1 | 1 | p[a + 1],
                                    m[a] & r && (x = s(n, a - 1)) <= y) {
                                        if (y = x,
                                        b = a - 1,
                                        C.push(b),
                                        !(b > l))
                                            break;
                                        f = Math.max(1, 2 * l - b)
                                    }
                                if (s(n + 1, l) > y)
                                    break;
                                p = m
                            }
                            return {
                                isMatch: b >= 0,
                                score: x
                            }
                        }
                        ,
                        !0 === n ? {
                            search: a
                        } : a(n)
                    }
                    ,
                    t.vakata.search.defaults = {
                        location: 0,
                        distance: 100,
                        threshold: .6,
                        fuzzy: !1,
                        caseSensitive: !1
                    }
                }(t),
                t.jstree.defaults.sort = function(t, e) {
                    return this.get_text(t) > this.get_text(e) ? 1 : -1
                }
                ,
                t.jstree.plugins.sort = function(e, n) {
                    this.bind = function() {
                        n.bind.call(this),
                        this.element.on("model.jstree", t.proxy(function(t, e) {
                            this.sort(e.parent, !0)
                        }, this)).on("rename_node.jstree create_node.jstree", t.proxy(function(t, e) {
                            this.sort(e.parent || e.node.parent, !1),
                            this.redraw_node(e.parent || e.node.parent, !0)
                        }, this)).on("move_node.jstree copy_node.jstree", t.proxy(function(t, e) {
                            this.sort(e.parent, !1),
                            this.redraw_node(e.parent, !0)
                        }, this))
                    }
                    ,
                    this.sort = function(e, n) {
                        var i, r;
                        if ((e = this.get_node(e)) && e.children && e.children.length && (e.children.sort(t.proxy(this.settings.sort, this)),
                        n))
                            for (i = 0,
                            r = e.children_d.length; i < r; i++)
                                this.sort(e.children_d[i], !1)
                    }
                }
                ;
                var p = !1;
                t.jstree.defaults.state = {
                    key: "jstree",
                    events: "changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",
                    ttl: !1,
                    filter: !1,
                    preserve_loaded: !1
                },
                t.jstree.plugins.state = function(e, n) {
                    this.bind = function() {
                        n.bind.call(this);
                        var e = t.proxy(function() {
                            this.element.on(this.settings.state.events, t.proxy(function() {
                                p && clearTimeout(p),
                                p = setTimeout(t.proxy(function() {
                                    this.save_state()
                                }, this), 100)
                            }, this)),
                            this.trigger("state_ready")
                        }, this);
                        this.element.on("ready.jstree", t.proxy(function(t, n) {
                            this.element.one("restore_state.jstree", e),
                            this.restore_state() || e()
                        }, this))
                    }
                    ,
                    this.save_state = function() {
                        var e = this.get_state();
                        this.settings.state.preserve_loaded || delete e.core.loaded;
                        var n = {
                            state: e,
                            ttl: this.settings.state.ttl,
                            sec: +new Date
                        };
                        t.vakata.storage.set(this.settings.state.key, JSON.stringify(n))
                    }
                    ,
                    this.restore_state = function() {
                        var e = t.vakata.storage.get(this.settings.state.key);
                        if (e)
                            try {
                                e = JSON.parse(e)
                            } catch (t) {
                                return !1
                            }
                        return !(e && e.ttl && e.sec && +new Date - e.sec > e.ttl) && (e && e.state && (e = e.state),
                        e && t.isFunction(this.settings.state.filter) && (e = this.settings.state.filter.call(this, e)),
                        !!e && (this.settings.state.preserve_loaded || delete e.core.loaded,
                        this.element.one("set_state.jstree", function(n, i) {
                            i.instance.trigger("restore_state", {
                                state: t.extend(!0, {}, e)
                            })
                        }),
                        this.set_state(e),
                        !0))
                    }
                    ,
                    this.clear_state = function() {
                        return t.vakata.storage.del(this.settings.state.key)
                    }
                }
                ,
                function(t, e) {
                    t.vakata.storage = {
                        set: function(t, e) {
                            return window.localStorage.setItem(t, e)
                        },
                        get: function(t) {
                            return window.localStorage.getItem(t)
                        },
                        del: function(t) {
                            return window.localStorage.removeItem(t)
                        }
                    }
                }(t),
                t.jstree.defaults.types = {
                    default: {}
                },
                t.jstree.defaults.types[t.jstree.root] = {},
                t.jstree.plugins.types = function(n, i) {
                    this.init = function(n, r) {
                        var o, s;
                        if (r && r.types && r.types.default)
                            for (o in r.types)
                                if ("default" !== o && o !== t.jstree.root && r.types.hasOwnProperty(o))
                                    for (s in r.types.default)
                                        r.types.default.hasOwnProperty(s) && r.types[o][s] === e && (r.types[o][s] = r.types.default[s]);
                        i.init.call(this, n, r),
                        this._model.data[t.jstree.root].type = t.jstree.root
                    }
                    ,
                    this.refresh = function(e, n) {
                        i.refresh.call(this, e, n),
                        this._model.data[t.jstree.root].type = t.jstree.root
                    }
                    ,
                    this.bind = function() {
                        this.element.on("model.jstree", t.proxy(function(n, i) {
                            var r, o, s, a = this._model.data, l = i.nodes, c = this.settings.types, h = "default";
                            for (r = 0,
                            o = l.length; r < o; r++) {
                                if (h = "default",
                                a[l[r]].original && a[l[r]].original.type && c[a[l[r]].original.type] && (h = a[l[r]].original.type),
                                a[l[r]].data && a[l[r]].data.jstree && a[l[r]].data.jstree.type && c[a[l[r]].data.jstree.type] && (h = a[l[r]].data.jstree.type),
                                a[l[r]].type = h,
                                !0 === a[l[r]].icon && c[h].icon !== e && (a[l[r]].icon = c[h].icon),
                                c[h].li_attr !== e && "object" == typeof c[h].li_attr)
                                    for (s in c[h].li_attr)
                                        if (c[h].li_attr.hasOwnProperty(s)) {
                                            if ("id" === s)
                                                continue;
                                            a[l[r]].li_attr[s] === e ? a[l[r]].li_attr[s] = c[h].li_attr[s] : "class" === s && (a[l[r]].li_attr.class = c[h].li_attr.class + " " + a[l[r]].li_attr.class)
                                        }
                                if (c[h].a_attr !== e && "object" == typeof c[h].a_attr)
                                    for (s in c[h].a_attr)
                                        if (c[h].a_attr.hasOwnProperty(s)) {
                                            if ("id" === s)
                                                continue;
                                            a[l[r]].a_attr[s] === e ? a[l[r]].a_attr[s] = c[h].a_attr[s] : "href" === s && "#" === a[l[r]].a_attr[s] ? a[l[r]].a_attr.href = c[h].a_attr.href : "class" === s && (a[l[r]].a_attr.class = c[h].a_attr.class + " " + a[l[r]].a_attr.class)
                                        }
                            }
                            a[t.jstree.root].type = t.jstree.root
                        }, this)),
                        i.bind.call(this)
                    }
                    ,
                    this.get_json = function(e, n, r) {
                        var o, s, a = this._model.data, l = n ? t.extend(!0, {}, n, {
                            no_id: !1
                        }) : {}, c = i.get_json.call(this, e, l, r);
                        if (!1 === c)
                            return !1;
                        if (t.isArray(c))
                            for (o = 0,
                            s = c.length; o < s; o++)
                                c[o].type = c[o].id && a[c[o].id] && a[c[o].id].type ? a[c[o].id].type : "default",
                                n && n.no_id && (delete c[o].id,
                                c[o].li_attr && c[o].li_attr.id && delete c[o].li_attr.id,
                                c[o].a_attr && c[o].a_attr.id && delete c[o].a_attr.id);
                        else
                            c.type = c.id && a[c.id] && a[c.id].type ? a[c.id].type : "default",
                            n && n.no_id && (c = this._delete_ids(c));
                        return c
                    }
                    ,
                    this._delete_ids = function(e) {
                        if (t.isArray(e)) {
                            for (var n = 0, i = e.length; n < i; n++)
                                e[n] = this._delete_ids(e[n]);
                            return e
                        }
                        return delete e.id,
                        e.li_attr && e.li_attr.id && delete e.li_attr.id,
                        e.a_attr && e.a_attr.id && delete e.a_attr.id,
                        e.children && t.isArray(e.children) && (e.children = this._delete_ids(e.children)),
                        e
                    }
                    ,
                    this.check = function(n, r, o, s, a) {
                        if (!1 === i.check.call(this, n, r, o, s, a))
                            return !1;
                        r = r && r.id ? r : this.get_node(r),
                        o = o && o.id ? o : this.get_node(o);
                        var l, c, h, u, d = r && r.id ? a && a.origin ? a.origin : t.jstree.reference(r.id) : null;
                        switch (d = d && d._model && d._model.data ? d._model.data : null,
                        n) {
                        case "create_node":
                        case "move_node":
                        case "copy_node":
                            if ("move_node" !== n || -1 === t.inArray(r.id, o.children)) {
                                if (l = this.get_rules(o),
                                l.max_children !== e && -1 !== l.max_children && l.max_children === o.children.length)
                                    return this._data.core.last_error = {
                                        error: "check",
                                        plugin: "types",
                                        id: "types_01",
                                        reason: "max_children prevents function: " + n,
                                        data: JSON.stringify({
                                            chk: n,
                                            pos: s,
                                            obj: !(!r || !r.id) && r.id,
                                            par: !(!o || !o.id) && o.id
                                        })
                                    },
                                    !1;
                                if (l.valid_children !== e && -1 !== l.valid_children && -1 === t.inArray(r.type || "default", l.valid_children))
                                    return this._data.core.last_error = {
                                        error: "check",
                                        plugin: "types",
                                        id: "types_02",
                                        reason: "valid_children prevents function: " + n,
                                        data: JSON.stringify({
                                            chk: n,
                                            pos: s,
                                            obj: !(!r || !r.id) && r.id,
                                            par: !(!o || !o.id) && o.id
                                        })
                                    },
                                    !1;
                                if (d && r.children_d && r.parents) {
                                    for (c = 0,
                                    h = 0,
                                    u = r.children_d.length; h < u; h++)
                                        c = Math.max(c, d[r.children_d[h]].parents.length);
                                    c = c - r.parents.length + 1
                                }
                                (c <= 0 || c === e) && (c = 1);
                                do {
                                    if (l.max_depth !== e && -1 !== l.max_depth && l.max_depth < c)
                                        return this._data.core.last_error = {
                                            error: "check",
                                            plugin: "types",
                                            id: "types_03",
                                            reason: "max_depth prevents function: " + n,
                                            data: JSON.stringify({
                                                chk: n,
                                                pos: s,
                                                obj: !(!r || !r.id) && r.id,
                                                par: !(!o || !o.id) && o.id
                                            })
                                        },
                                        !1;
                                    o = this.get_node(o.parent),
                                    l = this.get_rules(o),
                                    c++
                                } while (o)
                            }
                        }
                        return !0
                    }
                    ,
                    this.get_rules = function(t) {
                        if (!(t = this.get_node(t)))
                            return !1;
                        var n = this.get_type(t, !0);
                        return n.max_depth === e && (n.max_depth = -1),
                        n.max_children === e && (n.max_children = -1),
                        n.valid_children === e && (n.valid_children = -1),
                        n
                    }
                    ,
                    this.get_type = function(e, n) {
                        return !!(e = this.get_node(e)) && (n ? t.extend({
                            type: e.type
                        }, this.settings.types[e.type]) : e.type)
                    }
                    ,
                    this.set_type = function(n, i) {
                        var r, o, s, a, l, c, h, u, d = this._model.data;
                        if (t.isArray(n)) {
                            for (n = n.slice(),
                            o = 0,
                            s = n.length; o < s; o++)
                                this.set_type(n[o], i);
                            return !0
                        }
                        if (r = this.settings.types,
                        n = this.get_node(n),
                        !r[i] || !n)
                            return !1;
                        if (h = this.get_node(n, !0),
                        h && h.length && (u = h.children(".jstree-anchor")),
                        a = n.type,
                        l = this.get_icon(n),
                        n.type = i,
                        (!0 === l || !r[a] || r[a].icon !== e && l === r[a].icon) && this.set_icon(n, r[i].icon === e || r[i].icon),
                        r[a] && r[a].li_attr !== e && "object" == typeof r[a].li_attr)
                            for (c in r[a].li_attr)
                                if (r[a].li_attr.hasOwnProperty(c)) {
                                    if ("id" === c)
                                        continue;
                                    "class" === c ? (d[n.id].li_attr.class = (d[n.id].li_attr.class || "").replace(r[a].li_attr[c], ""),
                                    h && h.removeClass(r[a].li_attr[c])) : d[n.id].li_attr[c] === r[a].li_attr[c] && (d[n.id].li_attr[c] = null,
                                    h && h.removeAttr(c))
                                }
                        if (r[a] && r[a].a_attr !== e && "object" == typeof r[a].a_attr)
                            for (c in r[a].a_attr)
                                if (r[a].a_attr.hasOwnProperty(c)) {
                                    if ("id" === c)
                                        continue;
                                    "class" === c ? (d[n.id].a_attr.class = (d[n.id].a_attr.class || "").replace(r[a].a_attr[c], ""),
                                    u && u.removeClass(r[a].a_attr[c])) : d[n.id].a_attr[c] === r[a].a_attr[c] && ("href" === c ? (d[n.id].a_attr[c] = "#",
                                    u && u.attr("href", "#")) : (delete d[n.id].a_attr[c],
                                    u && u.removeAttr(c)))
                                }
                        if (r[i].li_attr !== e && "object" == typeof r[i].li_attr)
                            for (c in r[i].li_attr)
                                if (r[i].li_attr.hasOwnProperty(c)) {
                                    if ("id" === c)
                                        continue;
                                    d[n.id].li_attr[c] === e ? (d[n.id].li_attr[c] = r[i].li_attr[c],
                                    h && ("class" === c ? h.addClass(r[i].li_attr[c]) : h.attr(c, r[i].li_attr[c]))) : "class" === c && (d[n.id].li_attr.class = r[i].li_attr[c] + " " + d[n.id].li_attr.class,
                                    h && h.addClass(r[i].li_attr[c]))
                                }
                        if (r[i].a_attr !== e && "object" == typeof r[i].a_attr)
                            for (c in r[i].a_attr)
                                if (r[i].a_attr.hasOwnProperty(c)) {
                                    if ("id" === c)
                                        continue;
                                    d[n.id].a_attr[c] === e ? (d[n.id].a_attr[c] = r[i].a_attr[c],
                                    u && ("class" === c ? u.addClass(r[i].a_attr[c]) : u.attr(c, r[i].a_attr[c]))) : "href" === c && "#" === d[n.id].a_attr[c] ? (d[n.id].a_attr.href = r[i].a_attr.href,
                                    u && u.attr("href", r[i].a_attr.href)) : "class" === c && (d[n.id].a_attr.class = r[i].a_attr.class + " " + d[n.id].a_attr.class,
                                    u && u.addClass(r[i].a_attr[c]))
                                }
                        return !0
                    }
                }
                ,
                t.jstree.defaults.unique = {
                    case_sensitive: !1,
                    trim_whitespace: !1,
                    duplicate: function(t, e) {
                        return t + " (" + e + ")"
                    }
                },
                t.jstree.plugins.unique = function(n, i) {
                    this.check = function(e, n, r, o, s) {
                        if (!1 === i.check.call(this, e, n, r, o, s))
                            return !1;
                        if (n = n && n.id ? n : this.get_node(n),
                        !(r = r && r.id ? r : this.get_node(r)) || !r.children)
                            return !0;
                        var a, l, c, h = "rename_node" === e ? o : n.text, u = [], d = this.settings.unique.case_sensitive, p = this.settings.unique.trim_whitespace, f = this._model.data;
                        for (a = 0,
                        l = r.children.length; a < l; a++)
                            c = f[r.children[a]].text,
                            d || (c = c.toLowerCase()),
                            p && (c = c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "")),
                            u.push(c);
                        switch (d || (h = h.toLowerCase()),
                        p && (h = h.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "")),
                        e) {
                        case "delete_node":
                            return !0;
                        case "rename_node":
                            return c = n.text || "",
                            d || (c = c.toLowerCase()),
                            p && (c = c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "")),
                            a = -1 === t.inArray(h, u) || n.text && c === h,
                            a || (this._data.core.last_error = {
                                error: "check",
                                plugin: "unique",
                                id: "unique_01",
                                reason: "Child with name " + h + " already exists. Preventing: " + e,
                                data: JSON.stringify({
                                    chk: e,
                                    pos: o,
                                    obj: !(!n || !n.id) && n.id,
                                    par: !(!r || !r.id) && r.id
                                })
                            }),
                            a;
                        case "create_node":
                            return a = -1 === t.inArray(h, u),
                            a || (this._data.core.last_error = {
                                error: "check",
                                plugin: "unique",
                                id: "unique_04",
                                reason: "Child with name " + h + " already exists. Preventing: " + e,
                                data: JSON.stringify({
                                    chk: e,
                                    pos: o,
                                    obj: !(!n || !n.id) && n.id,
                                    par: !(!r || !r.id) && r.id
                                })
                            }),
                            a;
                        case "copy_node":
                            return a = -1 === t.inArray(h, u),
                            a || (this._data.core.last_error = {
                                error: "check",
                                plugin: "unique",
                                id: "unique_02",
                                reason: "Child with name " + h + " already exists. Preventing: " + e,
                                data: JSON.stringify({
                                    chk: e,
                                    pos: o,
                                    obj: !(!n || !n.id) && n.id,
                                    par: !(!r || !r.id) && r.id
                                })
                            }),
                            a;
                        case "move_node":
                            return a = n.parent === r.id && (!s || !s.is_multi) || -1 === t.inArray(h, u),
                            a || (this._data.core.last_error = {
                                error: "check",
                                plugin: "unique",
                                id: "unique_03",
                                reason: "Child with name " + h + " already exists. Preventing: " + e,
                                data: JSON.stringify({
                                    chk: e,
                                    pos: o,
                                    obj: !(!n || !n.id) && n.id,
                                    par: !(!r || !r.id) && r.id
                                })
                            }),
                            a
                        }
                        return !0
                    }
                    ,
                    this.create_node = function(n, r, o, s, a) {
                        if (!r || r.text === e) {
                            if (null === n && (n = t.jstree.root),
                            !(n = this.get_node(n)))
                                return i.create_node.call(this, n, r, o, s, a);
                            if (o = o === e ? "last" : o,
                            !o.toString().match(/^(before|after)$/) && !a && !this.is_loaded(n))
                                return i.create_node.call(this, n, r, o, s, a);
                            r || (r = {});
                            var l, c, h, u, d, p, f = this._model.data, g = this.settings.unique.case_sensitive, m = this.settings.unique.trim_whitespace, _ = this.settings.unique.duplicate;
                            for (c = l = this.get_string("New node"),
                            h = [],
                            u = 0,
                            d = n.children.length; u < d; u++)
                                p = f[n.children[u]].text,
                                g || (p = p.toLowerCase()),
                                m && (p = p.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "")),
                                h.push(p);
                            for (u = 1,
                            p = c,
                            g || (p = p.toLowerCase()),
                            m && (p = p.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "")); -1 !== t.inArray(p, h); )
                                c = _.call(this, l, ++u).toString(),
                                p = c,
                                g || (p = p.toLowerCase()),
                                m && (p = p.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, ""));
                            r.text = c
                        }
                        return i.create_node.call(this, n, r, o, s, a)
                    }
                }
                ;
                var f = c.createElement("DIV");
                if (f.setAttribute("unselectable", "on"),
                f.setAttribute("role", "presentation"),
                f.className = "jstree-wholerow",
                f.innerHTML = "&#160;",
                t.jstree.plugins.wholerow = function(e, n) {
                    this.bind = function() {
                        n.bind.call(this),
                        this.element.on("ready.jstree set_state.jstree", t.proxy(function() {
                            this.hide_dots()
                        }, this)).on("init.jstree loading.jstree ready.jstree", t.proxy(function() {
                            this.get_container_ul().addClass("jstree-wholerow-ul")
                        }, this)).on("deselect_all.jstree", t.proxy(function(t, e) {
                            this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")
                        }, this)).on("changed.jstree", t.proxy(function(t, e) {
                            this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");
                            var n, i, r = !1;
                            for (n = 0,
                            i = e.selected.length; n < i; n++)
                                (r = this.get_node(e.selected[n], !0)) && r.length && r.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")
                        }, this)).on("open_node.jstree", t.proxy(function(t, e) {
                            this.get_node(e.node, !0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")
                        }, this)).on("hover_node.jstree dehover_node.jstree", t.proxy(function(t, e) {
                            "hover_node" === t.type && this.is_disabled(e.node) || this.get_node(e.node, !0).children(".jstree-wholerow")["hover_node" === t.type ? "addClass" : "removeClass"]("jstree-wholerow-hovered")
                        }, this)).on("contextmenu.jstree", ".jstree-wholerow", t.proxy(function(e) {
                            if (this._data.contextmenu) {
                                e.preventDefault();
                                var n = t.Event("contextmenu", {
                                    metaKey: e.metaKey,
                                    ctrlKey: e.ctrlKey,
                                    altKey: e.altKey,
                                    shiftKey: e.shiftKey,
                                    pageX: e.pageX,
                                    pageY: e.pageY
                                });
                                t(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n)
                            }
                        }, this)).on("click.jstree", ".jstree-wholerow", function(e) {
                            e.stopImmediatePropagation();
                            var n = t.Event("click", {
                                metaKey: e.metaKey,
                                ctrlKey: e.ctrlKey,
                                altKey: e.altKey,
                                shiftKey: e.shiftKey
                            });
                            t(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()
                        }).on("dblclick.jstree", ".jstree-wholerow", function(e) {
                            e.stopImmediatePropagation();
                            var n = t.Event("dblclick", {
                                metaKey: e.metaKey,
                                ctrlKey: e.ctrlKey,
                                altKey: e.altKey,
                                shiftKey: e.shiftKey
                            });
                            t(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()
                        }).on("click.jstree", ".jstree-leaf > .jstree-ocl", t.proxy(function(e) {
                            e.stopImmediatePropagation();
                            var n = t.Event("click", {
                                metaKey: e.metaKey,
                                ctrlKey: e.ctrlKey,
                                altKey: e.altKey,
                                shiftKey: e.shiftKey
                            });
                            t(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()
                        }, this)).on("mouseover.jstree", ".jstree-wholerow, .jstree-icon", t.proxy(function(t) {
                            return t.stopImmediatePropagation(),
                            this.is_disabled(t.currentTarget) || this.hover_node(t.currentTarget),
                            !1
                        }, this)).on("mouseleave.jstree", ".jstree-node", t.proxy(function(t) {
                            this.dehover_node(t.currentTarget)
                        }, this))
                    }
                    ,
                    this.teardown = function() {
                        this.settings.wholerow && this.element.find(".jstree-wholerow").remove(),
                        n.teardown.call(this)
                    }
                    ,
                    this.redraw_node = function(e, i, r, o) {
                        if (e = n.redraw_node.apply(this, arguments)) {
                            var s = f.cloneNode(!0);
                            -1 !== t.inArray(e.id, this._data.core.selected) && (s.className += " jstree-wholerow-clicked"),
                            this._data.core.focused && this._data.core.focused === e.id && (s.className += " jstree-wholerow-hovered"),
                            e.insertBefore(s, e.childNodes[0])
                        }
                        return e
                    }
                }
                ,
                window.customElements && Object && Object.create) {
                    var g = Object.create(HTMLElement.prototype);
                    g.createdCallback = function() {
                        var e, n = {
                            core: {},
                            plugins: []
                        };
                        for (e in t.jstree.plugins)
                            t.jstree.plugins.hasOwnProperty(e) && this.attributes[e] && (n.plugins.push(e),
                            this.getAttribute(e) && JSON.parse(this.getAttribute(e)) && (n[e] = JSON.parse(this.getAttribute(e))));
                        for (e in t.jstree.defaults.core)
                            t.jstree.defaults.core.hasOwnProperty(e) && this.attributes[e] && (n.core[e] = JSON.parse(this.getAttribute(e)) || this.getAttribute(e));
                        t(this).jstree(n)
                    }
                    ;
                    try {
                        window.customElements.define("vakata-jstree", function() {}, {
                            prototype: g
                        })
                    } catch (t) {}
                }
            }
        })
    }
    ).call(e, n(0))
}
, function(t, e, n) {
    "use strict";
    var i = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(t, e) {
            t.__proto__ = e
        }
        || function(t, e) {
            for (var n in e)
                e.hasOwnProperty(n) && (t[n] = e[n])
        }
        ;
        return function(e, n) {
            function i() {
                this.constructor = e
            }
            t(e, n),
            e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
            new i)
        }
    }();
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var r = n(11)
      , o = n(168)
      , s = n(87)
      , a = function(t) {
        function e(e, n, i, o) {
            var s = t.call(this, e, n, i, o) || this;
            return s.brandName = null,
            s.brandNameInput = null,
            s.sloganInput = null,
            s.inputProcessor = null,
            s._template = r.template(s._elementToInsert.html()),
            s.templateHtml = s._template({}),
            s.create(),
            s
        }
        return i(e, t),
        e.prototype.create = function() {
            t.prototype.create.call(this),
            this.brandName = this._clickedElement.find(".brand-name"),
            this.brandNameInput = this.popupWrapper.find(".input-text"),
            this.sloganInput = this.popupWrapper.find(".input-slogan"),
            this.inputProcessor = new s.UserInputProcessor,
            this.brandCreationData.inputData = this.inputProcessor.process(this.brandNameInput.val(), this.sloganInput.val()),
            this.setTextsData()
        }
        ,
        e.prototype.setTextsData = function() {
            this.brandName.text(this.brandCreationData.inputData.text),
            this.brandNameInput.val(this.brandCreationData.inputData.text),
            this.sloganInput.val(this.brandCreationData.inputData.slogan)
        }
        ,
        e.prototype.applyChangesHandler = function() {
            this.inputProcessor.update(this.brandCreationData.inputData, this.brandNameInput.val(), this.sloganInput.val()),
            this.setTextsData(),
            t.prototype.applyChangesHandler.call(this)
        }
        ,
        e
    }(o.PulldownMenu);
    e.BrandNamePulldown = a
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        var i = this && this.__extends || function() {
            var t = Object.setPrototypeOf || {
                __proto__: []
            }instanceof Array && function(t, e) {
                t.__proto__ = e
            }
            || function(t, e) {
                for (var n in e)
                    e.hasOwnProperty(n) && (t[n] = e[n])
            }
            ;
            return function(e, n) {
                function i() {
                    this.constructor = e
                }
                t(e, n),
                e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                new i)
            }
        }();
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var r = n(11)
          , o = n(168)
          , s = n(101)
          , a = function(e) {
            function n(t, n, i, o) {
                var a = e.call(this, t, n, i, o) || this;
                return a.switchAllCB = null,
                a.ccCheckboxes = null,
                a._template = r.template(a._elementToInsert.html()),
                a.templateHtml = a._template({
                    categories: s.ColorRangeCategory.categories
                }),
                a
            }
            return i(n, e),
            n.prototype.bindHandlers = function() {
                e.prototype.bindHandlers.call(this),
                this.categoryChangeHandler = this.categoryChangeHandler.bind(this),
                this.switchAllHandler = this.switchAllHandler.bind(this)
            }
            ,
            n.prototype.create = function() {
                e.prototype.create.call(this),
                this.switchAllCB = this.popupWrapper.find(".js-all-categories-cb"),
                this.ccCheckboxes = this.popupWrapper.find(".js-category-cb"),
                this.switchAllCB.on("change", this.switchAllHandler),
                this.ccCheckboxes.on("change", this.categoryChangeHandler),
                this.popupWrapper.find(".leave-current-element").on("click", this.leaveCurrentElement)
            }
            ,
            n.prototype.categoryChangeHandler = function() {
                var e = 0;
                this.ccCheckboxes.each(function() {
                    t(this).prop("checked") && e++
                }),
                this.switchAllCB.prop("checked", e == s.ColorRangeCategory.categories.length)
            }
            ,
            n.prototype.switchAllHandler = function(e) {
                this.ccCheckboxes.prop("checked", t(e.target).prop("checked"))
            }
            ,
            n.prototype.applyChangesHandler = function() {
                this.brandCreationData.clearAllCC();
                var n = this.brandCreationData;
                this.ccCheckboxes.each(function() {
                    if (t(this).prop("checked")) {
                        var e = s.ColorRangeCategory.getById(parseInt(t(this).val()));
                        n.pushColorCategory(e)
                    }
                }),
                e.prototype.applyChangesHandler.call(this)
            }
            ,
            n
        }(o.PulldownMenu);
        e.ColorCategoryPickerPulldown = a
    }
    ).call(e, n(0))
}
, function(t, e, n) {
    "use strict";
    (function(t, i) {
        var r = this && this.__extends || function() {
            var t = Object.setPrototypeOf || {
                __proto__: []
            }instanceof Array && function(t, e) {
                t.__proto__ = e
            }
            || function(t, e) {
                for (var n in e)
                    e.hasOwnProperty(n) && (t[n] = e[n])
            }
            ;
            return function(e, n) {
                function i() {
                    this.constructor = e
                }
                t(e, n),
                e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                new i)
            }
        }();
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var o = n(11);
        n(169);
        var s = n(171)
          , a = n(174)
          , l = n(45)
          , c = n(5)
          , h = n(175)
          , u = n(168)
          , d = n(35)
          , p = function(e) {
            function n(t, n, i, r) {
                var s = e.call(this, t, n, i, r) || this;
                return s.iconsContainer = null,
                s.selectedIconsContainer = null,
                s.selectedTagsContainer = null,
                s.searchTagInput = null,
                s.loadMoreIconsBtn = null,
                s.useSelectedIcons = null,
                s.useSelectedTags = null,
                s.loadedSvgIconIds = [],
                s.selectedIconsIds = [],
                s.selectedTags = [],
                s.loadedIcons = {},
                s.loadedIconsByTags = {},
                s.selectedTag = "",
                s.nounOffset = 0,
                s.selectedAT = 28,
                s._template = o.template(s._elementToInsert.html()),
                s.templateHtml = s._template({}),
                s
            }
            return r(n, e),
            Object.defineProperty(n, "SVG_ICONS_SERVICE_URL", {
                get: function() {
                    return c.Site.MAIN_URL + "/v3/js/emblems/"
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(n, "AUTOCOMPLETE_SERVICE_URL", {
                get: function() {
                    return c.Site.MAIN_URL + "/v3/js/search-tag-autocomplete/?q=%QUERY"
                },
                enumerable: !0,
                configurable: !0
            }),
            n.prototype.bindHandlers = function() {
                e.prototype.bindHandlers.call(this),
                this.iconFilterInit = this.iconFilterInit.bind(this),
                this.requestEmblems = this.requestEmblems.bind(this),
                this.storeLoadedIcons = this.storeLoadedIcons.bind(this),
                this.createSvgIconPreviews = this.createSvgIconPreviews.bind(this),
                this.iconClickHandler = this.iconClickHandler.bind(this),
                this.tagChangedHandler = this.tagChangedHandler.bind(this),
                this.addTagToSelected = this.addTagToSelected.bind(this),
                this.loadMoreIconsHandler = this.loadMoreIconsHandler.bind(this),
                this.initTagsAutocomplete = this.initTagsAutocomplete.bind(this),
                this.hasIcon = this.hasIcon.bind(this),
                this.removeIconId = this.removeIconId.bind(this),
                this.hasTag = this.hasTag.bind(this),
                this.removeTag = this.removeTag.bind(this)
            }
            ,
            n.prototype.create = function() {
                e.prototype.create.call(this),
                this.iconsContainer = this.popupWrapper.find(".icons"),
                this.selectedIconsContainer = this.popupWrapper.find(".selected-icons .canvases-wrapper"),
                this.selectedTagsContainer = this.popupWrapper.find(".selected-tags .tags-wrapper"),
                this.searchTagInput = this.popupWrapper.find("#search-tag"),
                this.loadMoreIconsBtn = this.popupWrapper.find(".load-more-icons-btn"),
                this.useSelectedIcons = this.popupWrapper.find("#use-selected-icons"),
                this.useSelectedTags = this.popupWrapper.find("#use-selected-tags"),
                this.iconFilterInit(),
                this.initTagsAutocomplete()
            }
            ,
            n.prototype.iconFilterInit = function() {
                var t = this;
                this.requestEmblems().then(function(e) {
                    t.createSvgIconPreviews(e)
                }),
                a.EmblemTag.initializeEmblemTags(),
                this.loadMoreIconsBtn.on("click", this.loadMoreIconsHandler),
                this.searchTagInput.on("change", this.tagChangedHandler)
            }
            ,
            n.prototype.requestEmblems = function() {
                var e = {
                    lei: this.loadedSvgIconIds
                };
                e.atId = this.selectedAT,
                "" !== this.selectedTag && (e.tag = a.EmblemTag.getEnTag(this.selectedTag)),
                e.nounOffset = this.nounOffset;
                var r = this;
                return d.WaitLocker.appElement = this.popupWrapper.find(".icon-filter-popup"),
                d.WaitLocker.start(),
                new t(function(t) {
                    i.ajax({
                        type: "POST",
                        url: n.SVG_ICONS_SERVICE_URL,
                        dataType: "json",
                        data: JSON.stringify(e),
                        success: function(e) {
                            var n = []
                              , i = e.e;
                            r.nounOffset = e.no;
                            for (var o = 0, s = i; o < s.length; o++) {
                                var a = s[o]
                                  , c = l.SvgIcon.deserialize({
                                    e: a
                                });
                                r.loadedSvgIconIds.push(c.iconId),
                                n.push(c),
                                r.storeLoadedIcons(c)
                            }
                            d.WaitLocker.stop(),
                            t(n)
                        }
                    })
                }
                )
            }
            ,
            n.prototype.storeLoadedIcons = function(t) {
                "" === this.selectedTag ? (void 0 === this.loadedIcons[this.selectedAT] && (this.loadedIcons[this.selectedAT] = []),
                this.loadedIcons[this.selectedAT].push(t)) : (void 0 === this.loadedIconsByTags[this.selectedTag] && (this.loadedIconsByTags[this.selectedTag] = []),
                this.loadedIconsByTags[this.selectedTag].push(t))
            }
            ,
            n.prototype.createSvgIconPreviews = function(t, e) {
                void 0 === e && (e = !0),
                e && this.iconsContainer.empty();
                for (var n, i = this, r = this, o = 0, s = t; o < s.length; o++) {
                    var a = s[o];
                    !function(t) {
                        n = r.createSvgIconPreview(t, 70, r.iconsContainer),
                        n.on("click", function() {
                            i.hasIcon(t.iconId) || (i.iconClickHandler(t),
                            i.selectedIconsIds.push(t.iconId))
                        })
                    }(a)
                }
            }
            ,
            n.prototype.createSvgIconPreview = function(t, e, n) {
                var r = document.createElement("canvas");
                r.width = e,
                r.height = e;
                var o = i(r);
                o.addClass("emblem-view"),
                o.attr("data-id", t.iconId);
                var s = new h.SvgIconPreview(r.getContext("2d"));
                return s.svgIcon = t,
                s.draw(),
                n.append(r),
                o
            }
            ,
            n.prototype.iconClickHandler = function(t) {
                var e = this.createSvgIconPreview(t, 50, this.selectedIconsContainer)
                  , n = this;
                this.useSelectedIcons.prop("checked", !0),
                e.on("click", function(e) {
                    e.stopPropagation(),
                    this.remove(),
                    n.removeIconId(t.iconId)
                })
            }
            ,
            n.prototype.tagChangedHandler = function() {
                var t = this
                  , e = this.searchTagInput.val();
                if (e !== this.selectedTag) {
                    if (this.nounOffset = 0,
                    this.selectedTag = e,
                    this.addTagToSelected(e),
                    this.loadedIconsByTags[this.selectedTag])
                        return d.WaitLocker.start(),
                        this.createSvgIconPreviews(this.loadedIconsByTags[this.selectedTag]),
                        void setTimeout(d.WaitLocker.stop, 1e3);
                    this.requestEmblems().then(function(e) {
                        t.createSvgIconPreviews(e)
                    }),
                    event.stopImmediatePropagation()
                }
            }
            ,
            n.prototype.addTagToSelected = function(t) {
                if ("" !== t && !this.hasTag(t)) {
                    this.useSelectedTags.prop("checked", !0),
                    this.selectedTags.push(t);
                    var e = document.createElement("span")
                      , n = document.createElement("div")
                      , r = this;
                    e.className = "icon-close",
                    i(e).on("click", function(e) {
                        e.stopPropagation(),
                        this.parentElement.remove(),
                        r.removeTag(t)
                    }),
                    n.innerHTML = t,
                    n.className = "tag",
                    i(n).append(e),
                    this.selectedTagsContainer.append(n)
                }
            }
            ,
            n.prototype.loadMoreIconsHandler = function() {
                var t = this;
                this.requestEmblems().then(function(e) {
                    t.createSvgIconPreviews(e, !1)
                })
            }
            ,
            n.prototype.initTagsAutocomplete = function() {
                var t = new s.Bloodhound({
                    datumTokenizer: s.Bloodhound.tokenizers.whitespace,
                    queryTokenizer: s.Bloodhound.tokenizers.whitespace,
                    remote: {
                        url: n.AUTOCOMPLETE_SERVICE_URL,
                        wildcard: "%QUERY"
                    }
                })
                  , e = {
                    hint: !0,
                    highlight: !0,
                    minLength: 1
                }
                  , i = {
                    limit: 100,
                    name: "availableTags",
                    display: "tag",
                    source: t
                };
                this.searchTagInput.typeahead(e, i).on("typeahead:select", this.tagChangedHandler)
            }
            ,
            n.prototype.hasIcon = function(t) {
                return -1 !== this.selectedIconsIds.indexOf(t)
            }
            ,
            n.prototype.removeIconId = function(t) {
                this.selectedIconsIds.splice(this.selectedIconsIds.indexOf(t), 1)
            }
            ,
            n.prototype.hasTag = function(t) {
                return -1 !== this.selectedTags.indexOf(t)
            }
            ,
            n.prototype.removeTag = function(t) {
                this.selectedTags.splice(this.selectedTags.indexOf(t), 1)
            }
            ,
            n.prototype.applyChangesHandler = function() {
                this.brandCreationData.useIcons = this.useSelectedIcons.prop("checked"),
                this.brandCreationData.useTags = this.useSelectedTags.prop("checked"),
                this.brandCreationData.iconIds = this.selectedIconsIds,
                this.brandCreationData.iconTags = this.selectedTags,
                e.prototype.applyChangesHandler.call(this)
            }
            ,
            n
        }(u.PulldownMenu);
        e.IconsPulldown = p
    }
    ).call(e, n(4), n(0))
}
, function(t, e, n) {
    "use strict";
    (function(t) {
        var i = this && this.__extends || function() {
            var t = Object.setPrototypeOf || {
                __proto__: []
            }instanceof Array && function(t, e) {
                t.__proto__ = e
            }
            || function(t, e) {
                for (var n in e)
                    e.hasOwnProperty(n) && (t[n] = e[n])
            }
            ;
            return function(e, n) {
                function i() {
                    this.constructor = e
                }
                t(e, n),
                e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                new i)
            }
        }();
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var r = n(11)
          , o = n(168)
          , s = function(e) {
            function n(t, n, i, o) {
                var s = e.call(this, t, n, i, o) || this;
                return s.switchAllCB = null,
                s.styleCheckboxes = null,
                s._template = r.template(s._elementToInsert.html()),
                s.templateHtml = s._template({}),
                s
            }
            return i(n, e),
            n.prototype.bindHandlers = function() {
                e.prototype.bindHandlers.call(this),
                this.styleChangeHandler = this.styleChangeHandler.bind(this),
                this.switchAllHandler = this.switchAllHandler.bind(this)
            }
            ,
            n.prototype.create = function() {
                e.prototype.create.call(this),
                this.switchAllCB = this.popupWrapper.find(".js-all-styles-cb"),
                this.styleCheckboxes = this.popupWrapper.find(".js-style-cb"),
                this.switchAllCB.on("change", this.switchAllHandler),
                this.styleCheckboxes.on("change", this.styleChangeHandler),
                this.popupWrapper.find(".leave-current-element").on("click", this.leaveCurrentElement)
            }
            ,
            n.prototype.styleChangeHandler = function() {
                var e = 0;
                this.styleCheckboxes.each(function() {
                    t(this).prop("checked") && e++
                }),
                this.switchAllCB.prop("checked", 6 == e)
            }
            ,
            n.prototype.switchAllHandler = function(e) {
                this.styleCheckboxes.prop("checked", t(e.target).prop("checked"))
            }
            ,
            n.prototype.applyChangesHandler = function() {
                this.brandCreationData.clearFamilyStyles();
                var n = this.brandCreationData;
                this.styleCheckboxes.each(function() {
                    t(this).prop("checked") && (n.familyStyles |= parseInt(t(this).val()))
                }),
                e.prototype.applyChangesHandler.call(this)
            }
            ,
            n
        }(o.PulldownMenu);
        e.FamilyStylePulldown = s
    }
    ).call(e, n(0))
}
, function(t, e, n) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    var i = function() {
        function t() {}
        return t.isPlanV2 = function(e) {
            return e == t.SingleUser || e == t.Test1PlanV2
        }
        ,
        t.isPlanV3 = function(e) {
            return -1 !== [t.Test1PlanV3, t.Test2PlanV3, t.Test3aPlanV3, t.Test3bPlanV3, t.Test3cPlanV3, t.Test4aPlanV3, t.Test4bPlanV3, t.Test4cPlanV3, t.Test5aPlanV3, t.Test5bPlanV3, t.Test6aPlanV3, t.Test6bPlanV3, t.Test6cPlanV3, t.Test7aPlanV3, t.Test7bPlanV3, t.Test8aPlanV3, t.Test8bPlanV3, t.Test9aPlanV3, t.Test9bPlanV3, t.Test10aPlanV3, t.Test10bPlanV3, t.Test11PlanV3, t.Test1aPlanV4, t.Test5bPlanV4].indexOf(e)
        }
        ,
        t.isTestV3 = function(e) {
            return -1 !== [t.Test3aPlanV3, t.Test3bPlanV3, t.Test3cPlanV3].indexOf(e)
        }
        ,
        t.is_plan_v4 = function(e) {
            return -1 !== t.getPlanV4().indexOf(e)
        }
        ,
        t.allowNewFilters = function(e) {
            return -1 !== [t.Test4bPlanV4].indexOf(e)
        }
        ,
        t.getPlanV4 = function() {
            return [t.Test1PlanV4, t.Test2PlanV4, t.Test3aPlanV4, t.Test3bPlanV4, t.Test4aPlanV4, t.Test4bPlanV4, t.Test5aPlanV4]
        }
        ,
        t.SingleUser = 1,
        t.Test1PlanV2 = 2,
        t.Test1PlanV3 = 3,
        t.Test2PlanV3 = 4,
        t.Test3aPlanV3 = 5,
        t.Test3bPlanV3 = 6,
        t.Test3cPlanV3 = 7,
        t.Test4aPlanV3 = 8,
        t.Test4bPlanV3 = 9,
        t.Test4cPlanV3 = 10,
        t.Test5aPlanV3 = 11,
        t.Test5bPlanV3 = 12,
        t.Test6aPlanV3 = 13,
        t.Test6bPlanV3 = 14,
        t.Test6cPlanV3 = 15,
        t.Test7aPlanV3 = 16,
        t.Test7bPlanV3 = 17,
        t.Test8aPlanV3 = 18,
        t.Test8bPlanV3 = 19,
        t.Test9aPlanV3 = 20,
        t.Test9bPlanV3 = 21,
        t.Test10aPlanV3 = 22,
        t.Test10bPlanV3 = 23,
        t.Test11PlanV3 = 24,
        t.Test1PlanV4 = 25,
        t.Test1aPlanV4 = 26,
        t.Test2PlanV4 = 27,
        t.Test3aPlanV4 = 28,
        t.Test3bPlanV4 = 29,
        t.Test4aPlanV4 = 30,
        t.Test4bPlanV4 = 31,
        t.Test5aPlanV4 = 32,
        t.Test5bPlanV4 = 33,
        t
    }();
    e.PlanVersion = i
}
]);
